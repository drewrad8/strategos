const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProjectsView-BNQB3in-.js","assets/vendor-react-wGySg1uH.js","assets/server-Bh-tYvHd.js","assets/play-circle-Bljp2onx.js","assets/tag-2bJg6mDk.js","assets/vendor-socket-TjCxX7sJ.js","assets/vendor-terminal-CyaXSNWE.js","assets/VoiceModeView-CrNo3Huo.js","assets/CheckpointsView-B-0ESLLN.js","assets/check-circle-2-DaBelfW8.js","assets/RalphPanel-C6xwQWAx.js","assets/VoiceControl-LzjWLoqB.js","assets/ActivityFeed-KVN2MM2l.js","assets/ADRPanel-Bqfog-51.js","assets/MetricsDashboard-Ba2poWLP.js"])))=>i.map(i=>d[i]);
import{r as a,a as Gt,R as Nt}from"./vendor-react-wGySg1uH.js";import{l as qt}from"./vendor-socket-TjCxX7sJ.js";import{x as Kt,a as Xt,b as Zt}from"./vendor-terminal-CyaXSNWE.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function l(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=l(r);fetch(r.href,i)}})();var St={exports:{}},Ge={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yt=a,Qt=Symbol.for("react.element"),Jt=Symbol.for("react.fragment"),es=Object.prototype.hasOwnProperty,ts=Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ss={key:!0,ref:!0,__self:!0,__source:!0};function Ct(s,t,l){var n,r={},i=null,d=null;l!==void 0&&(i=""+l),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(d=t.ref);for(n in t)es.call(t,n)&&!ss.hasOwnProperty(n)&&(r[n]=t[n]);if(s&&s.defaultProps)for(n in t=s.defaultProps,t)r[n]===void 0&&(r[n]=t[n]);return{$$typeof:Qt,type:s,key:i,ref:d,props:r,_owner:ts.current}}Ge.Fragment=Jt;Ge.jsx=Ct;Ge.jsxs=Ct;St.exports=Ge;var e=St.exports,Qe={},ct=Gt;Qe.createRoot=ct.createRoot,Qe.hydrateRoot=ct.hydrateRoot;const as="modulepreload",rs=function(s){return"/"+s},dt={},xe=function(t,l,n){let r=Promise.resolve();if(l&&l.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),o=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));r=Promise.allSettled(l.map(u=>{if(u=rs(u),u in dt)return;dt[u]=!0;const c=u.endsWith(".css"),y=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${y}`))return;const g=document.createElement("link");if(g.rel=c?"stylesheet":as,c||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),c)return new Promise((w,v)=>{g.addEventListener("load",w),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(d){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=d,window.dispatchEvent(o),!o.defaultPrevented)throw d}return r.then(d=>{for(const o of d||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},ns="";function ls(){const[s,t]=a.useState(null),[l,n]=a.useState(!1),r=a.useRef(null),i=a.useRef([]);a.useEffect(()=>{const y=qt(ns,{transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:1e4,randomizationFactor:.5,timeout:45e3});return y.on("connect",()=>{n(!0)}),y.on("disconnect",g=>{n(!1),g==="io server disconnect"&&y.connect()}),y.on("connect_error",g=>{console.error("Socket connection error:",g.message||g),n(!1)}),y.on("reconnect_error",g=>{console.warn("Socket reconnection error:",g.message||g)}),r.current=y,t(y),()=>{i.current.forEach(({event:g,handler:w})=>{y.off(g,w)}),i.current=[],y.disconnect()}},[]);const d=a.useCallback((c,y)=>{var g;(g=r.current)!=null&&g.connected&&r.current.emit(c,y)},[]),o=a.useCallback((c,y)=>r.current?(r.current.on(c,y),i.current.push({event:c,handler:y}),()=>{var g;(g=r.current)==null||g.off(c,y),i.current=i.current.filter(w=>!(w.event===c&&w.handler===y))}):()=>{},[]),u=a.useCallback((c,y)=>{var g;(g=r.current)==null||g.off(c,y),i.current=i.current.filter(w=>!(w.event===c&&w.handler===y))},[]);return{socket:s,connected:l,emit:d,on:o,off:u}}const os="";function ee(s,t={}){const l={...t.headers};return fetch(`${os}${s}`,{...t,headers:l})}const Mt=a.createContext(null),is=50;let cs=0,ds=0;const Z={SINGLE:"single",SPLIT_H:"split-h",SPLIT_V:"split-v",GRID_2X2:"grid-2x2",GRID_3X2:"grid-3x2",CUSTOM:"custom"},We=()=>`pane-${++ds}`;function us({children:s}){const{socket:t,connected:l,emit:n,on:r}=ls(),[i,d]=a.useState([]),[o,u]=a.useState([]),[c,y]=a.useState([]),[g,w]=a.useState({}),[v,I]=a.useState(null),[b,O]=a.useState(null),[R,p]=a.useState([]),[$,k]=a.useState(null),[A,W]=a.useState({}),[B,H]=a.useState(!1),[P,E]=a.useState([]),M=a.useRef({}),f=a.useRef(i),G=a.useRef(b);a.useEffect(()=>{f.current=i},[i]),a.useEffect(()=>{G.current=b},[b]);const[U,Q]=a.useState(Z.SINGLE),[te,J]=a.useState([{id:We(),workerId:null,viewMode:"terminal"}]),[me,ie]=a.useState(null),[pe,F]=a.useState(null),Y=a.useRef(te);Y.current=te;const _=a.useCallback(N=>{const z=++cs;return p(V=>{const x=[...V,{...N,id:z}];return x.length>50?x.slice(-50):x}),z},[]),ae=a.useCallback(N=>{p(z=>z.filter(V=>V.id!==N))},[]),se=a.useRef(!1);a.useEffect(()=>{if(l){const N=se.current;if(se.current=!0,re(),N&&t){B&&(H(!1),t.emit("metrics:subscribe"),H(!0));const z=new Set,V=G.current;V&&(t.emit("worker:attach",{workerId:V}),z.add(V));for(const x of Y.current)x.workerId&&!z.has(x.workerId)&&(t.emit("worker:output:subscribe",{workerId:x.workerId}),z.add(x.workerId))}_({type:"success",title:N?"Reconnected to Strategos":"Connected to Strategos",message:N?"Connection restored":"Real-time updates enabled",duration:3e3})}else se.current&&_({type:"warning",title:"Connection Lost",message:"Attempting to reconnect...",duration:5e3})},[l,t]),a.useEffect(()=>{if(!t)return;const z=Object.fromEntries(Object.entries({"workers:list":x=>d(x),"worker:created":x=>{d(C=>[...C,x]),_({type:"success",title:"Worker Spawned",message:`${x.label} is now running`,duration:4e3})},"worker:updated":x=>{d(C=>C.map(D=>D.id===x.id?x:D))},"worker:deleted":({workerId:x})=>{const C=f.current.find(D=>D.id===x);d(D=>D.filter(X=>X.id!==x)),G.current===x&&O(null),clearTimeout(M.current[x]),delete M.current[x],w(D=>{const X={...D};return delete X[x],X}),W(D=>{const X={...D};return delete X[x],X}),_({type:"info",title:"Worker Stopped",message:(C==null?void 0:C.label)||x,duration:3e3})},"worker:output":({workerId:x,output:C})=>{clearTimeout(M.current[x]),M.current[x]=setTimeout(()=>{const X=typeof C=="string"&&C.length>2097152?C.slice(-2097152):C;w(ue=>({...ue,[x]:X}))},is)},"activity:list":x=>y(x),"activity:new":x=>y(C=>[x,...C].slice(0,100)),"metrics:update":x=>{x.system&&k(x.system),x.worker&&W(C=>({...C,[x.worker.workerId]:x.worker}))},error:x=>{_({type:"error",title:"Error",message:x.message||"An error occurred",duration:5e3})},"worker:crashed":({workerId:x,label:C,reason:D})=>{_({type:"error",title:"Worker Crashed",message:`${C}: ${D||"Unknown error"}`,duration:1e4})},"worker:stalled":({workerId:x,label:C,stalledMinutes:D})=>{_({type:"warning",title:"Worker Stalled",message:`${C} — no output for ${D} min`,duration:8e3})},"worker:general:dead":({workerId:x,label:C,message:D})=>{_({type:"error",title:"GENERAL Down",message:`${C} — requires human intervention`,duration:0})},"worker:respawned":({oldWorkerId:x,newWorkerId:C,label:D,attempt:X})=>{_({type:"info",title:"Worker Respawned",message:`${D} (attempt ${X})`,duration:6e3})},"worker:kill:blocked":({workerId:x,label:C,reason:D})=>{_({type:"warning",title:"Kill Blocked",message:`${C} is protected (${D})`,duration:6e3})},"worker:completed":({workerId:x,worker:C})=>{_({type:"success",title:"Worker Completed",message:(C==null?void 0:C.label)||x,duration:4e3})},"worker:blocked":({workerId:x,label:C})=>{_({type:"warning",title:"Worker Blocked",message:`${C||x} is blocked`,duration:6e3})},"worker:awaiting_review":({workerId:x,label:C})=>{_({type:"info",title:"Review Needed",message:`${C||x} awaiting review`,duration:1e4})},"dependencies:triggered":({completedWorkerId:x,triggeredWorkerIds:C})=>{(C==null?void 0:C.length)>0&&_({type:"info",title:"Dependencies Triggered",message:`${C.length} worker(s) unblocked`,duration:4e3})},"worker:child:signaled":({parentWorkerId:x,childWorkerId:C,status:D})=>{D==="done"&&_({type:"info",title:"Child Worker Done",message:`Child ${C==null?void 0:C.slice(0,8)} signaled to parent`,duration:3e3})},"worker:queue:error":x=>{_({type:"error",title:"Queue Error",message:`Queue error for worker: ${(x==null?void 0:x.error)||"Unknown error"}`,duration:5e3})},"workers:pending":x=>{E(Array.isArray(x)?x:[])},"worker:bulldoze:paused":({workerId:x,reason:C,cyclesCompleted:D})=>{const X=f.current.find(ue=>ue.id===x);_({type:"warning",title:"Bulldoze Paused",message:`${(X==null?void 0:X.label)||x}: ${C}`,duration:8e3})},"worker:bulldoze:cycle":({workerId:x,cycle:C,isAudit:D})=>{if(D){const X=f.current.find(ue=>ue.id===x);_({type:"info",title:"Bulldoze Audit",message:`${(X==null?void 0:X.label)||x} cycle ${C}`,duration:3e3})}}}).map(([x,C])=>[x,(...D)=>{try{C(...D)}catch(X){console.error(`[Socket] Handler error for "${x}":`,X)}}])),V=Object.entries(z).map(([x,C])=>r(x,C));return()=>V.forEach(x=>x())},[t,r,_]),a.useEffect(()=>()=>{Object.values(M.current).forEach(clearTimeout)},[]),a.useEffect(()=>{if(!b||!l)return;const N=new AbortController,V=setInterval(async()=>{try{const x=await ee(`/api/workers/${b}/output`,{signal:N.signal});if(!x.ok)return;const C=await x.json();C.output&&w(D=>D[b]===C.output?D:{...D,[b]:C.output})}catch{}},5e3);return()=>{N.abort(),clearInterval(V)}},[b,l]);const re=a.useCallback(async()=>{try{const N=await ee("/api/projects");if(!N.ok)throw new Error(`HTTP ${N.status}`);const z=await N.json();u(z)}catch(N){_({type:"error",title:"Failed to fetch projects",message:N.message,duration:5e3})}},[_]),ce=a.useCallback((N,z)=>(n("worker:spawn",{projectPath:N,label:z}),new Promise(V=>{setTimeout(V,100)})),[n]),Pe=a.useCallback(N=>{n("worker:kill",{workerId:N})},[n]),Le=a.useCallback((N,z)=>{n("worker:input",{workerId:N,input:z})},[n]),_e=a.useCallback((N,z)=>{n("worker:rawInput",{workerId:N,keys:z})},[n]),q=a.useCallback((N,z,V)=>{n("worker:resize",{workerId:N,cols:z,rows:V})},[n]),Ie=a.useCallback((N,z)=>{n("worker:updateLabel",{workerId:N,label:z})},[n]),we=a.useCallback((N,z)=>{n("worker:settings",{workerId:N,settings:z})},[n]),ve=a.useCallback((N,z)=>{n("project:broadcast",{projectName:N,input:z})},[n]),Ne=a.useCallback(async(N,z,V,x)=>{const C=`GENERAL: ${z.slice(0,60)}`;try{return await(await ee("/api/workers/spawn-from-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:"general",label:C,projectPath:N,task:{description:z},bulldozeMode:!0,bulldozeMission:z,bulldozeBacklog:V||"",bulldozeStandingOrders:x||""})})).json()}catch(D){return _({type:"error",title:"Spawn Failed",message:D.message,duration:5e3}),null}},[_]),S=a.useCallback(N=>{O(z=>(z&&z!==N&&n("worker:output:unsubscribe",{workerId:z}),N)),n("worker:attach",{workerId:N})},[n]),Se=a.useCallback(()=>{O(N=>(N&&n("worker:output:unsubscribe",{workerId:N}),null))},[n]),ge=a.useCallback(N=>{n("worker:output:subscribe",{workerId:N})},[n]),de=a.useCallback(N=>{n("worker:output:unsubscribe",{workerId:N})},[n]),Oe=a.useCallback(()=>{B||!t||(n("metrics:subscribe"),H(!0))},[n,B,t]),De=a.useCallback(()=>{!B||!t||(n("metrics:unsubscribe"),H(!1))},[n,B,t]),m=a.useCallback(async N=>{try{const z=await ee(`/api/metrics/worker/${N}`);if(!z.ok){if(z.status===404)return null;throw new Error("Failed to fetch worker metrics")}const V=await z.json();return W(x=>({...x,[N]:V})),V}catch{return null}},[]),L=a.useCallback(async()=>{try{const N=await ee("/api/metrics/system");if(!N.ok){if(N.status===404)return null;throw new Error("Failed to fetch system metrics")}const z=await N.json();return k(z),z}catch{return null}},[]),K=a.useCallback((N=null)=>{const z={id:We(),workerId:N,viewMode:"terminal"};return J(V=>[...V,z]),ie(z.id),U===Z.SINGLE&&Q(Z.SPLIT_H),z.id},[U]),be=a.useCallback(N=>{J(z=>{const V=z.filter(x=>x.id!==N);return V.length===0?[{id:We(),workerId:null,viewMode:"terminal"}]:V}),ie(z=>z===N?null:z)},[]),Ce=a.useCallback((N,z)=>{J(V=>{const x=V.find(C=>C.id===N);return x!=null&&x.workerId&&x.workerId!==z&&n("worker:output:unsubscribe",{workerId:x.workerId}),V.map(C=>C.id===N?{...C,workerId:z}:C)}),z&&n("worker:attach",{workerId:z})},[n]),Me=a.useCallback((N,z)=>{J(V=>V.map(x=>x.id===N?{...x,viewMode:z}:x))},[]),$e=a.useCallback(N=>{Q(N);const V={[Z.SINGLE]:1,[Z.SPLIT_H]:2,[Z.SPLIT_V]:2,[Z.GRID_2X2]:4,[Z.GRID_3X2]:6,[Z.CUSTOM]:te.length}[N]||1,x=te.length;if(V>x){const C=new Set(te.map(ye=>ye.workerId).filter(Boolean)),D=i.filter(ye=>!C.has(ye.id)),X=[...te];let ue=0;for(let ye=x;ye<V;ye++){const Fe=D[ue];X.push({id:We(),workerId:(Fe==null?void 0:Fe.id)||null,viewMode:"terminal"}),Fe&&ue++}J(X)}else V<x&&N!==Z.CUSTOM&&J(te.slice(0,V));F(null)},[te,i]),ot=a.useCallback(N=>{const z=K(N);return U===Z.SINGLE&&$e(Z.SPLIT_H),z},[K,U,$e]),it=a.useCallback((N,z)=>{J(V=>{const x=V.find(D=>D.id===N),C=V.find(D=>D.id===z);return!x||!C?V:V.map(D=>D.id===N?{...D,workerId:C.workerId}:D.id===z?{...D,workerId:x.workerId}:D)})},[]),Ht=a.useMemo(()=>({connected:l,workers:i,projects:o,activity:c,outputs:g,selectedProject:v,focusedWorker:b,toasts:R,systemMetrics:$,workerMetrics:A,metricsSubscribed:B,pendingWorkers:P,layoutMode:U,panes:te,activePaneId:me,paneSizes:pe,setSelectedProject:I,setFocusedWorker:O,setActivePaneId:ie,setPaneSizes:F,fetchProjects:re,spawnWorker:ce,killWorker:Pe,sendInput:Le,sendRawInput:_e,resizeTerminal:q,updateWorkerLabel:Ie,updateWorkerSettings:we,broadcastToProject:ve,spawnAutonomousSession:Ne,attachToWorker:S,detachFromWorker:Se,subscribeToWorkerOutput:ge,unsubscribeFromWorkerOutput:de,addToast:_,dismissToast:ae,subscribeToMetrics:Oe,unsubscribeFromMetrics:De,fetchWorkerMetrics:m,fetchSystemMetrics:L,addPane:K,removePane:be,setPaneWorker:Ce,setPaneViewMode:Me,changeLayoutMode:$e,openWorkerInNewPane:ot,swapPaneWorkers:it}),[l,i,o,c,g,v,b,R,$,A,B,P,U,te,me,pe,re,ce,Pe,Le,_e,q,Ie,we,ve,Ne,S,Se,ge,de,_,ae,Oe,De,m,L,K,be,Ce,Me,$e,ot,it]);return e.jsx(Mt.Provider,{value:Ht,children:s})}function ke(){const s=a.useContext(Mt);if(!s)throw new Error("useOrchestrator must be used within OrchestratorProvider");return s}function hs(){const s=()=>{if(typeof window>"u")return"lg";const i=window.innerWidth;return i<640?"xs":i<768?"sm":i<1024?"md":i<1280?"lg":"xl"},[t,l]=a.useState(s),[n,r]=a.useState(typeof window<"u"?window.innerWidth:1024);return a.useEffect(()=>{let i;const d=()=>{clearTimeout(i),i=setTimeout(()=>{const o=s(),u=window.innerWidth;l(c=>c!==o?o:c),r(c=>Math.abs(u-c)>50?u:c)},100)};return window.addEventListener("resize",d),window.addEventListener("orientationchange",d),d(),()=>{clearTimeout(i),window.removeEventListener("resize",d),window.removeEventListener("orientationchange",d)}},[]),{breakpoint:t,windowWidth:n,isMobile:t==="xs"||t==="sm",isTablet:t==="md",isDesktop:t==="lg"||t==="xl",isLargeDesktop:t==="xl"}}function xs({setActiveTab:s,detachFromWorker:t,setShowActivity:l,hasFocusedWorker:n,showActivity:r}){const i=a.useRef(null),d=a.useRef(null),o=a.useCallback(()=>{i.current=null,clearTimeout(d.current),d.current=null},[]);a.useEffect(()=>{function u(c){const y=c.target.tagName;if(y==="INPUT"||y==="TEXTAREA"||y==="SELECT"||c.target.isContentEditable||c.target.closest('[role="dialog"]')||c.target.closest("dialog"))return;if((c.ctrlKey||c.metaKey)&&c.key==="k"){c.preventDefault(),ut();return}if(c.ctrlKey||c.metaKey||c.altKey)return;if(i.current==="g"){if(o(),c.key==="t"){c.preventDefault(),ht('[title="Tree View"]');return}if(c.key==="g"){c.preventDefault(),ht('[title="Grid View"]');return}}if(c.key==="g"){i.current="g",d.current=setTimeout(o,500);return}if(c.key==="Escape"){if(r){l(!1);return}if(n){t();return}return}if(c.key==="/"){c.preventDefault(),ut();return}const g={1:"workers",2:"projects",3:"ralph",4:"history"};if(g[c.key]){s(g[c.key]);return}if(c.key==="?"&&c.shiftKey){const w=document.querySelector("[data-shortcut-help]");w&&w.click();return}}return document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u),clearTimeout(d.current)}},[s,t,l,n,r,o])}function ut(){const s=document.querySelector('input[placeholder*="Search"]');s&&(s.focus(),s.select())}function ht(s){const t=document.querySelector(s);t&&t.click()}const ms=[{label:"Navigation",shortcuts:[{keys:["1"],description:"Workers tab"},{keys:["2"],description:"Projects tab"},{keys:["3"],description:"Ralph tab"},{keys:["4"],description:"History tab"}]},{label:"Views",shortcuts:[{keys:["g","t"],description:"Tree view"},{keys:["g","g"],description:"Grid view"},{keys:["Esc"],description:"Back to grid / close sidebar"}]},{label:"Search",shortcuts:[{keys:["/"],description:"Focus search"},{keys:["Ctrl","K"],description:"Focus search"}]}];/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ps={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),T=(s,t)=>{const l=a.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:o="",children:u,...c},y)=>a.createElement("svg",{ref:y,...ps,width:r,height:r,stroke:n,strokeWidth:d?Number(i)*24/Number(r):i,className:["lucide",`lucide-${gs(s)}`,o].join(" "),...c},[...t.map(([g,w])=>a.createElement(g,w)),...Array.isArray(u)?u:[u]]));return l.displayName=`${s}`,l};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=T("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=T("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=T("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=T("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=T("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=T("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=T("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=T("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=T("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=T("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=T("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=T("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=T("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=T("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=T("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=T("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=T("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=T("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=T("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=T("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=T("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=T("Grid2x2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=T("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=T("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=T("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=T("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=T("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=T("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=T("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=T("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=T("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=T("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=T("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=T("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=T("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=T("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=T("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=T("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=T("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=T("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=T("Rows2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=T("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=T("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=T("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=T("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=T("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=T("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=T("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=T("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=T("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=T("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=T("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=T("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=T("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=T("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=T("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=T("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=T("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=T("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=T("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=T("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=T("ZapOff",[["polyline",{points:"12.41 6.75 13 2 10.57 4.92",key:"122m05"}],["polyline",{points:"18.57 12.91 21 10 15.66 10",key:"16r43o"}],["polyline",{points:"8 8 3 14 12 14 11 22 16 16",key:"tmh4bc"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=T("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Ys(s){return s&&s.replace(/\\u001b/g,"\x1B")}const _t=a.memo(function({workerId:t,output:l,onInput:n,onRawInput:r,onResize:i,className:d=""}){const o=a.useRef(null),u=a.useRef(null),c=a.useRef(null),y=a.useRef(0),g=a.useRef({cols:0,rows:0}),w=a.useRef(null),[v,I]=a.useState(!1),b=a.useRef(r),O=a.useRef(n),R=a.useRef(i);return a.useEffect(()=>{b.current=r,O.current=n,R.current=i}),a.useEffect(()=>{if(!o.current)return;y.current=0,I(!1);const p=o.current,$=13,k=new Kt.Terminal({theme:{background:"#0a0a0a",foreground:"#DAA520",cursor:"#FFD700",cursorAccent:"#000000",selection:"rgba(218, 165, 32, 0.3)",black:"#0a0a0a",red:"#8B0000",green:"#DAA520",yellow:"#FFD700",blue:"#4169E1",magenta:"#660000",cyan:"#20B2AA",white:"#FFFFFF",brightBlack:"#333333",brightRed:"#DC143C",brightGreen:"#FFD700",brightYellow:"#FFEC8B",brightBlue:"#6495ED",brightMagenta:"#8B0000",brightCyan:"#40E0D0",brightWhite:"#FFFFFF"},fontFamily:'"Share Tech Mono", "Courier New", monospace',fontSize:$,lineHeight:1.2,cursorBlink:!0,cursorStyle:"block",scrollback:1e3,convertEol:!0}),A=new Xt.FitAddon;k.loadAddon(A),u.current=k,c.current=A,k.open(p);try{const M=new Zt.WebglAddon;M.onContextLoss(()=>{M.dispose()}),k.loadAddon(M)}catch(M){console.warn("WebGL addon failed, using DOM renderer:",M.message)}const W=()=>{const M=u.current;if(!M)return;const{cols:f,rows:G}=M,U=g.current;(f!==U.cols||G!==U.rows)&&(g.current={cols:f,rows:G},R.current&&R.current(f,G))};let B=setTimeout(()=>{B=null;try{A.fit(),W()}catch(M){console.warn("Fit error:",M)}I(!0)},100),H;const P=()=>{clearTimeout(H),H=setTimeout(()=>{try{c.current&&o.current&&(c.current.fit(),W())}catch{}},150)},E=new ResizeObserver(P);if(E.observe(p),b.current)k.onKey(({key:M,domEvent:f})=>{var Q;const G=f;let U=null;switch(G.keyCode){case 38:U="\x1B[A";break;case 40:U="\x1B[B";break;case 39:U="\x1B[C";break;case 37:U="\x1B[D";break;case 13:U="\r";break;case 27:U="\x1B";break;case 9:U="	";break;case 8:U="";break;default:M&&(U=M)}U&&(G.preventDefault(),(Q=b.current)==null||Q.call(b,U))}),k.onData(M=>{var f;M.length>1&&((f=b.current)==null||f.call(b,M))});else if(O.current){let M="";k.onKey(({key:f,domEvent:G})=>{var Q;const U=G;U.keyCode===13?(k.write(`\r
`),M.trim()&&((Q=O.current)==null||Q.call(O,M)),M=""):U.keyCode===8?M.length>0&&(M=M.slice(0,-1),k.write("\b \b")):!U.ctrlKey&&!U.altKey&&!U.metaKey&&f.length===1&&(M+=f,k.write(f))})}return()=>{B&&clearTimeout(B),clearTimeout(H),w.current&&clearTimeout(w.current),E.disconnect(),k.dispose(),u.current=null,c.current=null}},[t]),a.useEffect(()=>{const p=u.current,$=o.current;if(!p||!v||!$||!l)return;const k=Ys(l),A=k.length+":"+k.slice(-200);if(A===y.current)return;y.current=A;let W=k.replace(/\x1b\[\d*[ABCD]/g,"").replace(/\x1b\[\d+;\d+[Hf]/g,"").replace(/\x1b\[\d+G/g,"").replace(/\x1b\[[su]/g,"").replace(/\x1b\[[12]J/g,"").replace(/\x1b\[[012]?K/g,"");const B=500,H=W.split(`
`);H.length>B&&(W=H.slice(-B).join(`
`)),w.current&&clearTimeout(w.current);const P=W;w.current=setTimeout(()=>{w.current=null;const E=u.current;if(!E)return;const M=E.buffer.active,f=M.baseY===0||M.viewportY>=M.baseY;E.reset(),E.write(P,()=>{f&&E.scrollToBottom()})},100)},[l,v,t]),e.jsx("div",{ref:o,className:`bg-thea-nearBlack rounded border border-thea-gold-dark/30 overflow-hidden ${d}`,style:{opacity:v?1:.5,transition:"opacity 0.2s",maxWidth:"100%",contain:"strict"}})});function It(s){var t,l,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var r=s.length;for(t=0;t<r;t++)s[t]&&(l=It(s[t]))&&(n&&(n+=" "),n+=l)}else for(l in s)s[l]&&(n&&(n+=" "),n+=l);return n}function h(){for(var s,t,l=0,n="",r=arguments.length;l<r;l++)(s=arguments[l])&&(t=It(s))&&(n&&(n+=" "),n+=t);return n}function Qs({score:s=null,status:t=null,size:l="md",showScore:n=!0,className:r}){const i=t||Ot(s),d={healthy:{icon:Ms,color:"text-green-400",bgColor:"bg-green-500/20",borderColor:"border-green-500/30",glow:"shadow-[0_0_8px_rgba(74,222,128,0.4)]",label:"Healthy"},warning:{icon:Ue,color:"text-yellow-400",bgColor:"bg-yellow-500/20",borderColor:"border-yellow-500/30",glow:"shadow-[0_0_8px_rgba(250,204,21,0.4)]",label:"Warning"},critical:{icon:Zs,color:"text-red-400",bgColor:"bg-red-500/20",borderColor:"border-red-500/30",glow:"shadow-[0_0_8px_rgba(248,113,113,0.4)]",label:"Critical"},unknown:{icon:oe,color:"text-thea-gold-dark",bgColor:"bg-thea-gold/10",borderColor:"border-thea-gold-dark/30",glow:"",label:"Unknown"}},o={sm:{container:"gap-1 px-1.5 py-0.5",icon:"w-3 h-3",text:"text-xxs"},md:{container:"gap-1.5 px-2 py-1",icon:"w-3.5 h-3.5",text:"text-xs"},lg:{container:"gap-2 px-3 py-1.5",icon:"w-4 h-4",text:"text-sm"}},{icon:u,color:c,bgColor:y,borderColor:g,glow:w}=d[i]||d.unknown,v=o[l]||o.md;return e.jsxs("div",{className:h("inline-flex items-center rounded border font-mono",y,g,c,w,v.container,r),title:`Health: ${s!==null?`${s}%`:"Unknown"}`,children:[e.jsx(u,{className:h(v.icon,i==="healthy"&&"animate-pulse")}),n&&s!==null&&e.jsx("span",{className:v.text,children:s})]})}function Ot(s){return s==null?"unknown":s>=80?"healthy":s>=50?"warning":"critical"}function Dt({score:s,status:t,size:l="md",className:n}){const r=t||Ot(s),i={healthy:"bg-green-400 shadow-[0_0_6px_rgba(74,222,128,0.6)]",warning:"bg-yellow-400 shadow-[0_0_6px_rgba(250,204,21,0.6)]",critical:"bg-red-400 shadow-[0_0_6px_rgba(248,113,113,0.6)]",unknown:"bg-thea-gold-dark/50"},d={sm:"w-1.5 h-1.5",md:"w-2 h-2",lg:"w-2.5 h-2.5"};return e.jsx("span",{className:h("inline-block rounded-full",i[r]||i.unknown,d[l]||d.md,r!=="unknown"&&"animate-pulse",n),title:`Health: ${s!==null?`${s}%`:"Unknown"}`})}const $t=[{group:"Strategic",color:"text-yellow-400",bgColor:"bg-yellow-400/10",borderColor:"border-yellow-400/50",roles:[{prefix:"GENERAL",label:"General",icon:Ws,description:"Strategic orchestrator"}]},{group:"Operational",color:"text-blue-400",bgColor:"bg-blue-400/10",borderColor:"border-blue-400/50",roles:[{prefix:"COLONEL",label:"Colonel",icon:Lt,description:"Domain supervisor"}]},{group:"Tactical",color:"text-green-400",bgColor:"bg-green-400/10",borderColor:"border-green-400/50",roles:[{prefix:"RESEARCH",label:"Research",icon:Pt,description:"Information gathering"},{prefix:"IMPL",label:"Implement",icon:zt,description:"Implementation"},{prefix:"TEST",label:"Test",icon:Ns,description:"Testing"},{prefix:"REVIEW",label:"Review",icon:ws,description:"Code review"},{prefix:"FIX",label:"Fix",icon:Xs,description:"Bug fixes"}]},{group:"Other",color:"text-thea-gold",bgColor:"bg-thea-gold/10",borderColor:"border-thea-gold/50",roles:[{prefix:"",label:"Default",icon:Xe,description:"Standard worker"}]}];function Js(s){for(const t of $t)for(const l of t.roles)if(l.prefix===s||s&&l.prefix&&s.startsWith(l.prefix))return{...l,groupColor:t.color,bgColor:t.bgColor,borderColor:t.borderColor};return null}function he(s){if(!s)return{prefix:"",displayName:s||""};const t=s.match(/^([A-Z]+):\s*(.*)$/);return t?{prefix:t[1],displayName:t[2]}:{prefix:"",displayName:s}}function Wa({onSelect:s,position:t="below",triggerRef:l,isOpen:n,onClose:r}){const i=a.useRef(null);a.useEffect(()=>{function o(u){i.current&&!i.current.contains(u.target)&&(l!=null&&l.current)&&!l.current.contains(u.target)&&(r==null||r())}if(n)return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[n,l,r]),a.useEffect(()=>{function o(u){u.key==="Escape"&&(r==null||r())}if(n)return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[n,r]);const d=o=>{s(o),r==null||r()};return n?e.jsxs("div",{ref:i,className:h("absolute z-50 min-w-[200px] max-w-[280px]","bg-black/95 border border-thea-gold/50 shadow-lg shadow-black/50","backdrop-blur-sm",t==="below"?"top-full mt-1":"bottom-full mb-1","right-0 clip-cyber-sm"),onClick:o=>o.stopPropagation(),children:[e.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 border-t border-r border-thea-gold-bright opacity-70"}),e.jsx("div",{className:"py-1",children:$t.map(o=>e.jsxs("div",{children:[e.jsx("div",{className:h("px-3 py-1.5 text-xxs font-orbitron uppercase tracking-wider",o.color,"border-b border-thea-gold-dark/20"),children:o.group}),o.roles.map(u=>{const c=u.icon;return e.jsxs("button",{onClick:()=>d(u.prefix),className:h("w-full flex items-center gap-3 px-3 py-2","hover:bg-thea-gold/10 transition-colors","text-left"),children:[e.jsx(c,{className:h("w-4 h-4 flex-shrink-0",o.color)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-rajdhani text-white",children:u.label}),e.jsx("div",{className:"text-xxs text-thea-gold-dark truncate",children:u.description})]})]},u.prefix||"default")})]},o.group))})]}):null}function Ft({label:s,size:t="sm"}){const{prefix:l}=he(s),n=Js(l);if(!n||!l)return null;const r=n.icon,i={sm:"text-xxs px-1.5 py-0.5 gap-1",md:"text-xs px-2 py-1 gap-1.5"};return e.jsxs("span",{className:h("inline-flex items-center font-mono uppercase tracking-wider","border",n.bgColor,n.borderColor,n.groupColor,i[t]),children:[e.jsx(r,{className:h(t==="sm"?"w-3 h-3":"w-3.5 h-3.5")}),l]})}function He({isOpen:s,onClose:t,onConfirm:l,workerLabel:n,showProjectPicker:r=!1,projects:i=[],onProjectChange:d,selectedProject:o}){const[u,c]=a.useState(""),[y,g]=a.useState(""),[w,v]=a.useState(""),[I,b]=a.useState(!1),O=a.useRef(null);if(a.useEffect(()=>{if(s&&O.current){const p=setTimeout(()=>{var $;return($=O.current)==null?void 0:$.focus()},50);return()=>clearTimeout(p)}},[s]),a.useEffect(()=>{if(!s)return;const p=$=>{$.key==="Escape"&&t()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[s,t]),a.useEffect(()=>{s&&(c(""),g(""),v(""),b(!1))},[s]),!s)return null;const R=()=>{u.trim()&&l({mission:u.trim(),backlog:y.trim(),standingOrders:w.trim()})};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:p=>{p.target===p.currentTarget&&t()},role:"dialog","aria-modal":"true","aria-labelledby":"bulldoze-modal-title",children:e.jsxs("div",{className:"w-full max-w-lg mx-4 bg-[#0a0a0a] border border-thea-gold/40 shadow-lg shadow-black/60 clip-cyber-lg",children:[e.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-thea-gold-bright opacity-60"}),e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-thea-gold-dark/30",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"w-5 h-5 text-amber-400"}),e.jsx("h2",{id:"bulldoze-modal-title",className:"font-rajdhani font-bold text-lg text-thea-gold-bright uppercase tracking-wider",children:r?"New Autonomous Session":"Configure Bulldoze Mode"})]}),e.jsx("button",{onClick:t,className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors","aria-label":"Close dialog",children:e.jsx(le,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-5 py-4 space-y-4 max-h-[70vh] overflow-y-auto",children:[!r&&n&&e.jsxs("div",{className:"text-xs font-mono text-thea-gold-dark/70 truncate",children:["Target: ",e.jsx("span",{className:"text-thea-gold",children:n})]}),r&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-rajdhani text-thea-gold mb-1.5 uppercase tracking-wider",children:"Project"}),e.jsxs("select",{value:o||"",onChange:p=>d==null?void 0:d(p.target.value),className:"w-full bg-black border border-thea-gold-dark/30 text-white px-3 py-2 text-sm font-mono focus:outline-none focus:border-thea-gold/60 transition-colors",children:[e.jsx("option",{value:"",children:"Select a project..."}),i.map(p=>e.jsx("option",{value:p.path||p.name,children:p.name},p.path||p.name))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-rajdhani text-thea-gold mb-1.5 uppercase tracking-wider",children:["Mission ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("textarea",{ref:O,value:u,onChange:p=>c(p.target.value),placeholder:"What should this general focus on?",rows:3,className:"w-full bg-black border border-thea-gold-dark/30 text-white px-3 py-2 text-sm font-mono placeholder-thea-gold-dark/40 resize-none focus:outline-none focus:border-thea-gold/60 transition-colors","aria-required":"true"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-rajdhani text-thea-gold mb-1.5 uppercase tracking-wider",children:"Backlog"}),e.jsx("textarea",{value:y,onChange:p=>g(p.target.value),placeholder:"Specific tasks, one per line",rows:3,className:"w-full bg-black border border-thea-gold-dark/30 text-white px-3 py-2 text-sm font-mono placeholder-thea-gold-dark/40 resize-none focus:outline-none focus:border-thea-gold/60 transition-colors"})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>b(!I),className:"flex items-center gap-2 text-sm font-rajdhani text-thea-gold-dark hover:text-thea-gold transition-colors uppercase tracking-wider","aria-expanded":I,children:[I?e.jsx(ys,{className:"w-4 h-4"}):e.jsx(Ke,{className:"w-4 h-4"}),"Standing Orders"]}),I&&e.jsx("textarea",{value:w,onChange:p=>v(p.target.value),placeholder:"Persistent rules that survive compaction",rows:3,className:"w-full mt-2 bg-black border border-thea-gold-dark/30 text-white px-3 py-2 text-sm font-mono placeholder-thea-gold-dark/40 resize-none focus:outline-none focus:border-thea-gold/60 transition-colors"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 px-5 py-4 border-t border-thea-gold-dark/30",children:[e.jsx("button",{onClick:t,className:"thea-btn px-4 py-2 text-sm font-rajdhani",children:"Cancel"}),e.jsxs("button",{onClick:R,disabled:!u.trim()||r&&!o,className:h("flex items-center gap-2 px-4 py-2 text-sm font-rajdhani font-bold uppercase tracking-wider transition-all border",u.trim()&&(!r||o)?"bg-amber-500/20 border-amber-500 text-amber-300 hover:bg-amber-500/30 shadow-[0_0_8px_rgba(245,158,11,0.3)]":"bg-gray-800/50 border-gray-600 text-gray-500 cursor-not-allowed"),children:[e.jsx(ne,{className:"w-4 h-4"}),r?"Launch Session":"Enable Bulldoze"]})]})]})})}const ea={healthy:100,active:90,stalled:50,warning:40,critical:20,error:10,stopped:0};function Wt(s){return ea[s]??null}function nt(s){if(!s||s<0)return"--";const t=Math.floor(s/1e3);if(t<60)return`${t}s`;const l=Math.floor(t/60);if(l<60)return`${l}m`;const n=Math.floor(l/60);return n<24?`${n}h ${l%60}m`:`${Math.floor(n/24)}d ${n%24}h`}function Bt(s){return s==null?"--":nt(s*1e3)}function ta(s){if(!s)return"--";const t=Date.now()-new Date(s).getTime();return nt(t)}function Ba(s){try{return new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}catch{return"--"}}function Ua(s){if(!s)return"--";const t=new Date(s),l=Date.now()-t.getTime(),n=Math.floor(l/6e4);if(n<1)return"just now";if(n<60)return`${n}m ago`;const r=Math.floor(n/60);if(r<24)return`${r}h ago`;const i=Math.floor(r/24);return i<7?`${i}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function lt({progress:s,className:t=""}){const l=Math.min(100,Math.max(0,s??0));return e.jsx("div",{className:h("h-1.5 bg-black/50 border border-thea-gold-dark/20 overflow-hidden",t),role:"progressbar","aria-valuenow":l,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Task progress",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-thea-gold-bright transition-all duration-500",style:{width:`${l}%`}})})}function sa(s){return s.replace(/\x1b\[[0-9;]*[a-zA-Z]/g,"").replace(/\x1b\([AB]/g,"").replace(/\x1b\][^\x07]*\x07/g,"").replace(/[\x00-\x09\x0b-\x1f]/g,"").replace(/\xa0/g," ")}function aa(s){return!s||s<0?null:nt(s)}const ra=a.memo(function({worker:t,onOpenInMultiTerminal:l}){var B;const{outputs:n,workers:r,killWorker:i,updateWorkerLabel:d,attachToWorker:o,updateWorkerSettings:u}=ke(),[c,y]=a.useState(!1),[g,w]=a.useState(t.label),[v,I]=a.useState(null),[,b]=a.useState(0);a.useEffect(()=>{if(t.status!=="running")return;const H=setInterval(()=>b(P=>P+1),3e4);return()=>clearInterval(H)},[t.status]);const O=t.createdAt?aa(Date.now()-new Date(t.createdAt).getTime()):null,R=a.useMemo(()=>{if(!t.parentWorkerId)return null;const H=r.find(P=>P.id===t.parentWorkerId);return H?H.label:t.parentWorkerId.slice(0,8)},[t.parentWorkerId,r]),p=((B=t.childWorkerIds)==null?void 0:B.length)||0,$=n[t.id]||"",k=a.useMemo(()=>sa($).split(`
`).filter(P=>P.trim()).slice(-8).join(`
`),[$]),A=()=>{g.trim()&&g!==t.label&&d(t.id,g.trim()),y(!1)},W={running:"thea-badge-running",stopped:"thea-badge-stopped",error:"thea-badge-error"}[t.status]||"bg-gray-800 text-gray-400 border-gray-600";return e.jsxs("div",{"data-testid":`worker-card-${t.id}`,role:"article","aria-label":`Worker: ${t.label}`,className:"thea-card group relative p-4 clip-cyber",children:[e.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 border-t-2 border-r-2 border-thea-gold-bright opacity-50 group-hover:opacity-100 transition-opacity animate-corner-pulse"}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[c?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:g,onChange:H=>w(H.target.value),onKeyDown:H=>H.key==="Enter"&&A(),className:"bg-black/50 border border-thea-gold/50 px-2 py-1 text-sm text-thea-gold font-rajdhani rounded-none flex-1",autoFocus:!0,"aria-label":"Worker label"}),e.jsx("button",{onClick:A,className:"text-thea-gold hover:text-thea-gold-bright","aria-label":"Save label",children:e.jsx(ks,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(Ft,{label:t.label,size:"sm"}),e.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright truncate",children:he(t.label).displayName||t.label}),e.jsx("button",{onClick:()=>y(!0),className:"opacity-0 group-hover:opacity-100 text-thea-gold/50 hover:text-thea-gold transition-opacity flex-shrink-0","aria-label":"Edit worker label",children:e.jsx(Ps,{className:"w-3 h-3"})})]}),e.jsx("p",{className:"text-xs text-thea-gold-dark font-mono",children:t.project})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dt,{score:Wt(t.health),size:"md"}),t.backend==="gemini"&&e.jsx("span",{className:"thea-badge bg-blue-500/20 text-blue-300 border-blue-500/30 text-xxxs",children:"Gemini"}),e.jsx("span",{className:h("thea-badge",W),children:t.status}),t.waitingAtPrompt&&e.jsx("span",{className:"thea-badge bg-yellow-500/20 text-yellow-400 border-yellow-500/30 animate-pulse text-xxxs",children:"prompt"})]})]}),e.jsx("div",{className:"bg-black/50 border border-thea-gold-dark/20 p-2 h-32 overflow-hidden mb-3 font-mono text-xxs text-thea-gold-dark/80 leading-tight whitespace-pre-wrap",children:k||"No output yet..."}),t.ralphStatus&&e.jsxs("div",{className:"mb-3 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-3 h-3 text-purple-400 flex-shrink-0"}),e.jsx("span",{className:h("text-xxs font-mono uppercase tracking-wider",{"text-yellow-400":t.ralphStatus==="in_progress","text-green-400":t.ralphStatus==="done","text-red-400":t.ralphStatus==="blocked","text-gray-400":t.ralphStatus==="pending"}),children:t.ralphStatus==="in_progress"?"working":t.ralphStatus}),t.ralphProgress!=null&&e.jsxs("span",{className:"text-xxs font-mono text-thea-gold-dark ml-auto",children:[t.ralphProgress,"%"]})]}),t.ralphProgress!=null&&e.jsx(lt,{progress:t.ralphProgress,className:"w-full h-1"}),t.ralphCurrentStep&&e.jsx("p",{className:"text-xxs text-thea-gold-dark/70 font-mono truncate",title:t.ralphCurrentStep,children:t.ralphCurrentStep})]}),he(t.label).prefix==="GENERAL"&&e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{t.bulldozeMode&&t.bulldozePaused?u(t.id,{bulldozePaused:!1}):t.bulldozeMode?u(t.id,{bulldozeMode:!1}):I(t)},className:h("thea-btn flex items-center gap-1.5 text-xxs py-1 px-2",{"!border-amber-500 !text-amber-300 !bg-amber-500/20 shadow-[0_0_8px_rgba(245,158,11,0.3)]":t.bulldozeMode&&!t.bulldozePaused,"!border-yellow-500/40 !text-yellow-400/80 !bg-yellow-500/10":t.bulldozeMode&&t.bulldozePaused}),title:t.bulldozeMode?t.bulldozePaused?`Paused: ${t.bulldozePauseReason||"unknown"} — click to resume`:"Bulldoze active — click to disable":"Enable bulldoze mode",children:[t.bulldozeMode&&t.bulldozePaused?e.jsx(rt,{className:"w-3 h-3"}):e.jsx(ne,{className:h("w-3 h-3",{"animate-pulse":t.bulldozeMode&&!t.bulldozePaused})}),t.bulldozeMode&&t.bulldozePaused?"Resume":"Bulldoze"]}),t.bulldozeMode&&t.bulldozeCyclesCompleted>0&&e.jsxs("span",{className:"text-xxs font-mono text-thea-gold-dark/70",children:[t.bulldozeCyclesCompleted," cycles"]}),t.bulldozeMode&&t.bulldozePaused&&e.jsx("span",{className:"text-xxxs font-mono text-yellow-400/50 truncate",children:t.bulldozePauseReason})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{"data-testid":`open-worker-${t.id}`,onClick:()=>o(t.id),className:"thea-btn flex-1 flex items-center justify-center gap-2 py-2","aria-label":`Open worker ${he(t.label).displayName||t.label}`,children:[e.jsx(at,{className:"w-4 h-4"}),"Open"]}),l&&e.jsx("button",{onClick:l,className:"thea-btn p-2",title:"Open in Multi-Terminal View","aria-label":"Open in multi-terminal view",children:e.jsx(Te,{className:"w-4 h-4"})}),e.jsx("button",{"data-testid":`kill-worker-${t.id}`,onClick:()=>i(t.id),className:"thea-btn thea-btn-danger p-2","aria-label":`Kill worker ${he(t.label).displayName||t.label}`,children:e.jsx(le,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mt-2 space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xxs font-mono text-thea-gold-dark/50",children:[e.jsxs("span",{children:["ID: ",t.id]}),O&&e.jsxs("span",{className:"flex items-center gap-0.5 ml-auto",children:[e.jsx(ze,{className:"w-3 h-3"}),O]})]}),(R||p>0)&&e.jsxs("div",{className:"flex items-center gap-2 text-xxs font-mono text-thea-gold-dark/40",children:[R&&e.jsxs("span",{className:"truncate max-w-[60%]",title:`Parent: ${R}`,children:["↑ ",R]}),p>0&&e.jsxs("span",{className:"ml-auto",children:[p," ",p===1?"child":"children"]})]})]}),v&&e.jsx(He,{isOpen:!!v,onClose:()=>I(null),onConfirm:({mission:H,backlog:P,standingOrders:E})=>{u(v.id,{bulldozeMode:!0,bulldozeMission:H,bulldozeBacklog:P,bulldozeStandingOrders:E}),I(null)},workerLabel:v.label})]})});function na({message:s="Loading...",className:t=""}){return e.jsxs("div",{className:h("flex items-center justify-center py-8",t),children:[e.jsx(Re,{className:"w-6 h-6 text-thea-gold animate-spin"}),s&&e.jsx("span",{className:"ml-2 text-thea-gold-dark text-sm font-mono",children:s})]})}function la(){const[s,t]=a.useState(!1),[l,n]=a.useState(!1),[r,i]=a.useState(""),[d,o]=a.useState(!1),[u,c]=a.useState(!1),y=a.useRef(null),g=a.useRef(null);a.useEffect(()=>{const R=window.SpeechRecognition||window.webkitSpeechRecognition;if(R){o(!0);const p=new R;p.continuous=!0,p.interimResults=!0,p.lang="en-US",p.onresult=$=>{const A=Array.from($.results).map(W=>W[0].transcript).join("");i(A)},p.onerror=$=>{console.error("Speech recognition error:",$.error),t(!1)},p.onend=()=>{t(!1)},y.current=p}return"speechSynthesis"in window&&c(!0),()=>{y.current&&y.current.stop(),window.speechSynthesis&&window.speechSynthesis.cancel()}},[]);const w=a.useCallback(()=>{if(!(!y.current||s)){i("");try{y.current.start(),t(!0)}catch(R){console.error("Failed to start speech recognition:",R)}}},[s]),v=a.useCallback(()=>{y.current&&(y.current.stop(),t(!1))},[]),I=a.useCallback((R,p={})=>!u||!R?Promise.resolve():new Promise($=>{window.speechSynthesis.cancel();const k=new SpeechSynthesisUtterance(R);k.rate=p.rate||1,k.pitch=p.pitch||1,k.volume=p.volume||1;const A=window.speechSynthesis.getVoices(),W=A.find(B=>B.name.includes("Google")||B.name.includes("Microsoft")||B.name.includes("Natural")||B.lang.startsWith("en"))||A.find(B=>B.lang.startsWith("en"))||A[0];W&&(k.voice=W),k.onstart=()=>n(!0),k.onend=()=>{n(!1),$()},k.onerror=()=>{n(!1),$()},g.current=k,window.speechSynthesis.speak(k)}),[u]),b=a.useCallback(()=>{window.speechSynthesis&&(window.speechSynthesis.cancel(),n(!1))},[]),O=a.useCallback(()=>{i("")},[]);return{isListening:s,transcript:r,sttSupported:d,startListening:w,stopListening:v,clearTranscript:O,isSpeaking:l,ttsSupported:u,speak:I,stopSpeaking:b}}const oa=({status:s})=>{const t={idle:e.jsx(ze,{className:"w-4 h-4 text-gray-400"}),thinking:e.jsx(Re,{className:"w-4 h-4 text-thea-gold animate-spin"}),coding:e.jsx(zt,{className:"w-4 h-4 text-green-400"}),running_command:e.jsx(Xe,{className:"w-4 h-4 text-blue-400"}),waiting_input:e.jsx(ze,{className:"w-4 h-4 text-yellow-400 animate-pulse"}),error:e.jsx(fe,{className:"w-4 h-4 text-red-400"}),completed:e.jsx(qe,{className:"w-4 h-4 text-green-400"}),active:e.jsx(Re,{className:"w-4 h-4 text-thea-gold animate-spin"}),unknown:e.jsx(ze,{className:"w-4 h-4 text-gray-400"})};return t[s]||t.unknown},gt={idle:"bg-gray-800 text-gray-400 border-gray-600",thinking:"bg-thea-gold/20 text-thea-gold border-thea-gold/50",coding:"bg-green-900/50 text-green-400 border-green-600/50",running_command:"bg-blue-900/50 text-blue-400 border-blue-600/50",waiting_input:"bg-yellow-900/50 text-yellow-400 border-yellow-600/50",error:"bg-red-900/50 text-red-400 border-red-600/50",completed:"bg-green-900/50 text-green-400 border-green-600/50",active:"bg-thea-gold/20 text-thea-gold border-thea-gold/50",unknown:"bg-gray-800 text-gray-400 border-gray-600"};function Ut({workerId:s,className:t="",autoSpeak:l=!1,onSummaryChange:n}){const[r,i]=a.useState(null),[d,o]=a.useState(!1),[u,c]=a.useState(null),[y,g]=a.useState(null),[w,v]=a.useState(l),I=a.useRef(""),{speak:b,stopSpeaking:O,isSpeaking:R,ttsSupported:p}=la(),$=a.useCallback(async(P=!1,E)=>{o(!0),c(null);try{const M=`/api/workers/${s}/summary${P?"?refresh=true":""}`,f=await ee(M,{signal:E});if(!f.ok)throw new Error(`Failed to fetch summary: ${f.status}`);const G=await f.json();i(G),g(new Date)}catch(M){if(M.name==="AbortError")return;c(M.message);try{const f=await ee(`/api/workers/${s}/quick-status`,{signal:E});if(f.ok){const G=await f.json();i({status:G.status,summary:`Quick status: ${G.lastLine||"No output"}`,task:null,lastAction:null,pendingItems:[],hasError:G.status==="error"})}}catch{}}finally{o(!1)}},[s]),k=a.useCallback(P=>{var M;if(!P)return"";const E=[];return P.status==="waiting_input"?E.push("Waiting for input."):P.status==="error"&&E.push("Error detected."),P.task&&E.push(`Current task: ${P.task}`),P.summary&&E.push(P.summary),P.lastAction&&E.push(`Last action: ${P.lastAction}`),((M=P.pendingItems)==null?void 0:M.length)>0&&E.push(`${P.pendingItems.length} pending items.`),E.join(" ")},[]),A=a.useCallback(()=>{const P=k(r);P&&b(P,{rate:1.1})},[r,b,k]);a.useEffect(()=>{if(!w||!r||!p)return;const P=k(r);P&&P!==I.current&&(I.current=P,b(P,{rate:1.1}),n&&n(r))},[r,w,p,b,k,n]),a.useEffect(()=>{const P=new AbortController;$(!1,P.signal);const E=setInterval(()=>{$(!1,P.signal)},1e4);return()=>{P.abort(),clearInterval(E),window.speechSynthesis&&window.speechSynthesis.cancel()}},[$]);const W=()=>{$(!0)},B=()=>{R&&O(),v(!w)};if(!r&&d)return e.jsx(na,{message:"Generating summary...",className:t});if(u&&!r)return e.jsxs("div",{className:h("p-4 bg-red-900/20 border border-red-600/30 rounded",t),children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[e.jsx(fe,{className:"w-5 h-5"}),e.jsx("span",{children:"Failed to load summary"})]}),e.jsx("p",{className:"text-sm text-red-400/70 mt-1",children:u}),e.jsx("button",{onClick:W,className:"mt-2 text-sm text-thea-gold hover:text-thea-gold-bright",children:"Try again"})]});const H=(r==null?void 0:r.status)||"unknown";return e.jsxs("div",{className:h("flex flex-col",t),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oa,{status:H}),e.jsx("span",{className:h("px-2 py-0.5 text-xs font-mono rounded border",gt[H]||gt.unknown),children:H.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[p&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:A,disabled:R,className:h("p-1.5 rounded hover:bg-thea-gold/10 transition-colors",R&&"text-thea-gold animate-pulse"),title:R?"Speaking...":"Speak summary",children:e.jsx(pt,{className:"w-4 h-4 text-thea-gold-dark"})}),e.jsx("button",{onClick:B,className:h("p-1.5 rounded transition-colors",w?"bg-thea-gold/20 text-thea-gold":"hover:bg-thea-gold/10 text-thea-gold-dark"),title:w?"Auto-speak ON":"Auto-speak OFF",children:w?e.jsx(pt,{className:"w-4 h-4"}):e.jsx(Gs,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:W,disabled:d,className:h("p-1.5 rounded hover:bg-thea-gold/10 transition-colors",d&&"animate-spin"),title:"Refresh summary",children:e.jsx(tt,{className:"w-4 h-4 text-thea-gold-dark"})})]})]}),(r==null?void 0:r.task)&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-xs font-semibold text-thea-gold-dark uppercase tracking-wider mb-1",children:"Current Task"}),e.jsx("p",{className:"text-sm text-thea-gold-bright",children:r.task})]}),(r==null?void 0:r.summary)&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-xs font-semibold text-thea-gold-dark uppercase tracking-wider mb-1",children:"Summary"}),e.jsx("p",{className:"text-sm text-thea-gold/90 leading-relaxed",children:r.summary})]}),(r==null?void 0:r.lastAction)&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-xs font-semibold text-thea-gold-dark uppercase tracking-wider mb-1",children:"Last Action"}),e.jsx("p",{className:"text-sm text-thea-gold/80",children:r.lastAction})]}),(r==null?void 0:r.pendingItems)&&r.pendingItems.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("h4",{className:"text-xs font-semibold text-thea-gold-dark uppercase tracking-wider mb-1",children:["Pending (",r.pendingItems.length,")"]}),e.jsxs("ul",{className:"text-sm text-thea-gold/70 space-y-1",children:[r.pendingItems.slice(0,5).map((P,E)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-thea-gold-dark",children:"-"}),e.jsx("span",{children:P})]},`${E}-${P.slice(0,32)}`)),r.pendingItems.length>5&&e.jsxs("li",{className:"text-thea-gold-dark text-xs",children:["...and ",r.pendingItems.length-5," more"]})]})]}),(r==null?void 0:r.hasError)&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-900/20 border border-red-600/30 rounded",children:[e.jsx(fe,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-sm text-red-400",children:"Error detected"})]}),y&&e.jsxs("div",{className:"mt-auto pt-2 text-xs text-thea-gold-dark/50 text-right",children:["Updated ",y.toLocaleTimeString()]})]})}function bt({workerId:s,className:t}){var O,R,p,$;const[l,n]=a.useState(null),[r,i]=a.useState(!0),[d,o]=a.useState(null),u=a.useRef(null),c=a.useCallback(async k=>{if(s){i(!0),o(null);try{const A=await ee(`/api/metrics/worker/${s}`,{signal:k});if(!A.ok){if(A.status===404){n(null);return}throw new Error("Failed to fetch worker metrics")}const W=await A.json();n(W)}catch(A){if(A.name==="AbortError")return;o(A.message)}finally{i(!1)}}},[s]);a.useEffect(()=>{const k=new AbortController;u.current=k,c(k.signal);const A=setInterval(()=>c(k.signal),1e4);return()=>{k.abort(),u.current=null,clearInterval(A)}},[c]);const y=a.useCallback(()=>{var A;(A=u.current)==null||A.abort();const k=new AbortController;u.current=k,c(k.signal)},[c]);if(r&&!l)return e.jsxs("div",{className:h("thea-card p-4",t),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(oe,{className:"w-4 h-4 text-thea-gold"}),e.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright uppercase tracking-wider text-sm",children:"Worker Health"})]}),e.jsx("div",{className:"flex items-center justify-center py-8 text-thea-gold-dark",children:e.jsx(tt,{className:"w-5 h-5 animate-spin"})})]});if(d)return e.jsxs("div",{className:h("thea-card p-4",t),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(oe,{className:"w-4 h-4 text-thea-gold"}),e.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright uppercase tracking-wider text-sm",children:"Worker Health"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsx("span",{children:d})]}),e.jsx("button",{onClick:y,className:"mt-2 text-xs text-thea-gold-dark hover:text-thea-gold",children:"Retry"})]});const g=(l==null?void 0:l.healthScore)??null,w=((O=l==null?void 0:l.performance)==null?void 0:O.avgLatency)??null,v=((R=l==null?void 0:l.lifecycle)==null?void 0:R.uptime)??null,I=((p=l==null?void 0:l.lifecycle)==null?void 0:p.spawnTime)??null,b=(($=l==null?void 0:l.performance)==null?void 0:$.avgLatency)??null;return e.jsxs("div",{className:h("thea-card",t),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-thea-gold-dark/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4 text-thea-gold"}),e.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright uppercase tracking-wider text-sm",children:"Worker Health"})]}),e.jsx("button",{onClick:y,className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors",title:"Refresh",children:e.jsx(tt,{className:h("w-3.5 h-3.5",r&&"animate-spin")})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-thea-gold-dark",children:"Health Score"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ia,{score:g}),e.jsx(Qs,{score:g,size:"md",showScore:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(Be,{icon:ne,label:"Response Time",value:w!==null?`${w}ms`:"--",status:ca(w)}),e.jsx(Be,{icon:Us,label:"Spawn Time",value:I!==null?`${I}ms`:"--",status:da(I)}),e.jsx(Be,{icon:ze,label:"Uptime",value:Bt(v),status:"neutral"}),e.jsx(Be,{icon:Vs,label:"Latency",value:b!==null?`${b}ms`:"--",status:ua(b)})]}),!l&&e.jsx("div",{className:"text-center text-thea-gold-dark text-sm py-2",children:"No metrics available for this worker yet."})]})]})}function ia({score:s}){const t=s!==null?Math.min(100,Math.max(0,s)):0,l=t/100*180-90,n=()=>s===null?"#6b7280":s>=80?"#4ade80":s>=50?"#facc15":"#f87171";return e.jsxs("div",{className:"relative w-16 h-8 overflow-hidden",children:[e.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 64 32",children:[e.jsx("path",{d:"M 4 32 A 28 28 0 0 1 60 32",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"4",strokeLinecap:"round"}),e.jsx("path",{d:"M 4 32 A 28 28 0 0 1 60 32",fill:"none",stroke:n(),strokeWidth:"4",strokeLinecap:"round",strokeDasharray:`${t*.88} 88`,style:{filter:`drop-shadow(0 0 4px ${n()})`}})]}),e.jsx("div",{className:"absolute bottom-0 left-1/2 w-0.5 h-6 bg-thea-gold origin-bottom transition-transform duration-500",style:{transform:`translateX(-50%) rotate(${l}deg)`}}),e.jsx("div",{className:"absolute bottom-0 left-1/2 w-2 h-2 -translate-x-1/2 translate-y-1/2 rounded-full bg-thea-gold shadow-[0_0_6px_rgba(218,165,32,0.6)]"})]})}function Be({icon:s,label:t,value:l,status:n}){const r={good:"border-green-500/30 bg-green-500/5",warning:"border-yellow-500/30 bg-yellow-500/5",critical:"border-red-500/30 bg-red-500/5",neutral:"border-thea-gold-dark/30 bg-thea-gold/5"},i={good:"text-green-400",warning:"text-yellow-400",critical:"text-red-400",neutral:"text-thea-gold-bright"};return e.jsxs("div",{className:h("p-2.5 rounded border",r[n]||r.neutral),children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(s,{className:"w-3 h-3 text-thea-gold-dark"}),e.jsx("span",{className:"text-xxs text-thea-gold-dark uppercase tracking-wider",children:t})]}),e.jsx("span",{className:h("font-mono text-sm font-bold",i[n]||i.neutral),children:l})]})}function ca(s){return s===null?"neutral":s<100?"good":s<500?"warning":"critical"}function da(s){return s===null?"neutral":s<2e3?"good":s<5e3?"warning":"critical"}function ua(s){return s===null?"neutral":s<50?"good":s<200?"warning":"critical"}function Vt({onSend:s,onCancel:t,placeholder:l="Speak or type..."}){const[n,r]=a.useState(""),[i,d]=a.useState(!1),[o,u]=a.useState(!1),c=a.useRef(null);a.useEffect(()=>{const v=window.SpeechRecognition||window.webkitSpeechRecognition;if(v){u(!0);const I=new v;I.continuous=!0,I.interimResults=!0,I.lang="en-US",I.onresult=b=>{const O=Array.from(b.results).map(R=>R[0].transcript).join("");r(O)},I.onerror=b=>{console.error("Speech recognition error:",b.error),d(!1)},I.onend=()=>{d(!1)},c.current=I}return()=>{c.current&&c.current.stop()}},[]);const y=()=>{c.current&&(i?(c.current.stop(),d(!1)):(r(""),c.current.start(),d(!0)))},g=()=>{var v;n.trim()&&(s(n.trim()),r(""),i&&((v=c.current)==null||v.stop(),d(!1)))},w=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),g())};return e.jsxs("div",{className:"bg-black/50 border border-thea-gold-dark/30 p-3",children:[e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx("textarea",{value:n,onChange:v=>r(v.target.value),onKeyDown:w,placeholder:l,rows:2,className:"w-full bg-thea-nearBlack border border-thea-gold-dark/30 px-3 py-2 text-sm text-white font-mono placeholder:text-thea-gold-dark/50 focus:outline-none focus:border-thea-gold resize-none","aria-label":l})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[o&&e.jsx("button",{onClick:y,className:h("p-3 border transition-colors",i?"bg-thea-maroon/20 border-thea-maroon text-thea-maroon animate-pulse":"bg-thea-gold/10 border-thea-gold/30 text-thea-gold hover:bg-thea-gold/20"),"aria-label":i?"Stop listening":"Start voice input",children:i?e.jsx(Ts,{className:"w-5 h-5"}):e.jsx(Rt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:g,disabled:!n.trim(),className:"p-3 bg-thea-gold/20 border border-thea-gold text-thea-gold hover:bg-thea-gold/30 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Send message",children:e.jsx(Os,{className:"w-5 h-5"})})]})]}),i&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-thea-maroon",role:"status","aria-live":"polite",children:[e.jsx("span",{className:"w-2 h-2 bg-thea-maroon rounded-full animate-pulse"}),"Listening..."]}),t&&e.jsxs("button",{onClick:t,className:"mt-2 flex items-center gap-1 text-xs text-thea-gold-dark hover:text-thea-gold transition-colors",children:[e.jsx(le,{className:"w-3 h-3"}),"Cancel"]})]})}function ft({children:s,direction:t="horizontal",sizes:l,minSize:n=100,onSizesChange:r,className:i=""}){const d=Array.isArray(s)?s:[s],o=d.length,u=Array(o).fill(100/o),[c,y]=a.useState(l||u),g=a.useRef(null),w=a.useRef(!1),v=a.useRef(null),I=a.useRef(null),b=a.useRef(null);a.useEffect(()=>{if(o!==c.length){const k=Array(o).fill(100/o);y(k)}},[o]);const O=a.useCallback((k,A)=>{A.preventDefault(),w.current=!0,v.current=k,I.current=t==="horizontal"?A.clientX:A.clientY,b.current=[...c],document.body.style.cursor=t==="horizontal"?"col-resize":"row-resize",document.body.style.userSelect="none"},[t,c]),R=a.useCallback(k=>{if(!w.current||!g.current)return;const W=g.current.getBoundingClientRect(),B=t==="horizontal"?W.width:W.height,H=t==="horizontal"?k.clientX:k.clientY,P=I.current,E=(H-P)/B*100,M=v.current,f=[...b.current];let G=f[M]+E,U=f[M+1]-E;const Q=n/B*100;G<Q&&(U+=G-Q,G=Q),U<Q&&(G+=U-Q,U=Q),f[M]=G,f[M+1]=U,y(f),r==null||r(f)},[t,n,r]),p=a.useCallback(()=>{w.current=!1,v.current=null,document.body.style.cursor="",document.body.style.userSelect=""},[]);if(a.useEffect(()=>(document.addEventListener("mousemove",R),document.addEventListener("mouseup",p),()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",p)}),[R,p]),o<=1)return e.jsx("div",{className:h("w-full h-full",i),children:d[0]});const $=t==="horizontal";return e.jsx("div",{ref:g,className:h("flex w-full h-full",$?"flex-row":"flex-col",i),children:d.map((k,A)=>e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"overflow-hidden",style:{[$?"width":"height"]:`${c[A]}%`,flexShrink:0},children:k}),A<o-1&&e.jsxs("div",{className:h("flex-shrink-0 relative group",$?"w-1 cursor-col-resize":"h-1 cursor-row-resize","bg-thea-gold-dark/30 hover:bg-thea-gold/50 transition-colors"),onMouseDown:W=>O(A,W),children:[e.jsx("div",{className:h("absolute",$?"inset-y-0 -left-1 -right-1":"inset-x-0 -top-1 -bottom-1")}),e.jsx("div",{className:h("absolute bg-thea-gold/60 opacity-0 group-hover:opacity-100 transition-opacity",$?"inset-y-0 left-0 right-0":"inset-x-0 top-0 bottom-0")})]})]},(k==null?void 0:k.key)||`pane-${A}`))})}function Ze({children:s,columns:t=2,rows:l=2,gap:n=4,className:r=""}){const i=Array.isArray(s)?s:[s];return e.jsx("div",{className:h("w-full h-full grid",r),style:{gridTemplateColumns:`repeat(${t}, 1fr)`,gridTemplateRows:`repeat(${l}, 1fr)`,gap:`${n}px`},children:i.map((d,o)=>e.jsx("div",{className:"overflow-hidden min-h-0 min-w-0",children:d},(d==null?void 0:d.key)||`grid-${o}`))})}function ha({paneId:s,workerId:t,onWorkerChange:l,onClose:n,onMaximize:r,isMaximized:i=!1,isActive:d,showCloseButton:o=!0,className:u=""}){const{workers:c,outputs:y,sendRawInput:g,resizeTerminal:w,activePaneId:v,setActivePaneId:I,updateWorkerSettings:b}=ke(),[O,R]=a.useState("terminal"),[p,$]=a.useState(!1),[k,A]=a.useState(!1),[W,B]=a.useState(null),[H,P]=a.useState(null),[E,M]=a.useState(null),f=c.find(F=>F.id===t),G=y[t]||"",U=d!==void 0?d:v===s,Q=a.useRef(U);a.useEffect(()=>{Q.current=U},[U]);const te=()=>{I&&I(s)},J=a.useCallback(async F=>{if(!F||!F.type.startsWith("image/")){B("error"),setTimeout(()=>B(null),2e3);return}B("uploading");const Y=new FormData;Y.append("screenshot",F),Y.append("workerId",t||"unknown");try{const _=await ee("/api/uploads/screenshot",{method:"POST",body:Y});if(!_.ok)throw new Error("Upload failed");const ae=await _.json();P(ae.filename),B("success"),setTimeout(()=>B(null),3e3)}catch{B("error"),setTimeout(()=>B(null),2e3)}},[t]),me=a.useCallback(F=>{F.preventDefault(),F.stopPropagation(),A(!0)},[]),ie=a.useCallback(F=>{F.preventDefault(),F.stopPropagation(),A(!1)},[]),pe=a.useCallback(F=>{var _;F.preventDefault(),F.stopPropagation(),A(!1);const Y=(_=F.dataTransfer)==null?void 0:_.files;Y&&Y.length>0&&J(Y[0])},[J]);return a.useEffect(()=>{const F=Y=>{var ae;if(!Q.current)return;const _=(ae=Y.clipboardData)==null?void 0:ae.items;if(_){for(const se of _)if(se.type.startsWith("image/")){const re=se.getAsFile();if(re){J(re);break}}}};return document.addEventListener("paste",F),()=>document.removeEventListener("paste",F)},[J]),e.jsxs("div",{className:h("h-full flex flex-col bg-black/20 border rounded overflow-hidden transition-colors relative",U?"border-thea-gold/60 shadow-gold-sm":"border-thea-gold-dark/30",k&&"border-thea-gold border-2",u),onClick:te,onDragOver:me,onDragLeave:ie,onDrop:pe,children:[k&&e.jsx("div",{className:"absolute inset-0 z-50 bg-thea-gold/20 backdrop-blur-sm flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(At,{className:"w-12 h-12 text-thea-gold-bright mx-auto mb-2"}),e.jsx("p",{className:"text-thea-gold-bright font-rajdhani text-lg",children:"Drop image to upload"})]})}),W&&e.jsxs("div",{className:h("absolute top-12 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded shadow-lg flex items-center gap-2 text-sm font-mono",W==="uploading"&&"bg-thea-gold/90 text-black",W==="success"&&"bg-green-600 text-white",W==="error"&&"bg-red-600 text-white"),children:[W==="uploading"&&e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-4 h-4 animate-pulse"}),"Uploading..."]}),W==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate max-w-[200px]",children:H})]}),W==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-4 h-4"}),"Upload failed"]})]}),e.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5 bg-black/40 border-b border-thea-gold-dark/20 flex-shrink-0",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>$(!p),className:"flex items-center gap-1.5 px-2 py-1 text-xs font-rajdhani text-thea-gold hover:text-thea-gold-bright transition-colors rounded hover:bg-white/5",children:[e.jsx("span",{className:h("w-1.5 h-1.5 rounded-full",(f==null?void 0:f.status)==="running"?"bg-green-500":"bg-thea-gold-dark")}),e.jsx("span",{className:"truncate max-w-[120px]",children:(f==null?void 0:f.label)||"Select Worker"}),e.jsx(Ke,{className:"w-3 h-3"})]}),p&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>$(!1)}),e.jsx("div",{className:"absolute top-full left-0 mt-1 z-20 min-w-[200px] max-h-[300px] overflow-auto bg-thea-nearBlack border border-thea-gold-dark/50 rounded shadow-lg",children:c.length===0?e.jsx("div",{className:"px-3 py-2 text-xs text-thea-gold-dark",children:"No workers available"}):c.map(F=>e.jsxs("button",{onClick:()=>{l==null||l(F.id),$(!1)},className:h("w-full text-left px-3 py-2 text-xs hover:bg-thea-gold/10 transition-colors",F.id===t?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:h("w-1.5 h-1.5 rounded-full flex-shrink-0",F.status==="running"?"bg-green-500":"bg-thea-gold-dark")}),e.jsx("span",{className:"truncate",children:F.label})]}),e.jsx("div",{className:"text-xxs text-thea-gold-dark ml-3.5 truncate",children:F.project})]},F.id))})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:"flex items-center bg-black/30 rounded border border-thea-gold-dark/20",children:[e.jsx("button",{onClick:()=>R("terminal"),className:h("p-1 rounded-l transition-colors",O==="terminal"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Terminal View",children:e.jsx(Xe,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>R("summary"),className:h("p-1 rounded-r transition-colors",O==="summary"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Summary View",children:e.jsx(Tt,{className:"w-3 h-3"})})]}),f&&e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>{f.autoAcceptPaused?b(f.id,{autoAcceptPaused:!1}):b(f.id,{autoAccept:!f.autoAccept})},className:h("p-1 rounded transition-colors relative",f.autoAccept?f.autoAcceptPaused?"bg-yellow-600/30 text-yellow-500 hover:bg-yellow-600/40":"bg-green-600/30 text-green-500 hover:bg-green-600/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:f.autoAccept?f.autoAcceptPaused?"Auto-accept PAUSED (click to resume)":"Auto-accept ON (click to disable)":"Auto-accept OFF (click to enable)",children:f.autoAccept?f.autoAcceptPaused?e.jsx(Ue,{className:"w-3 h-3"}):e.jsx(ne,{className:"w-3 h-3"}):e.jsx(st,{className:"w-3 h-3"})})}),f&&e.jsx("button",{onClick:()=>{b(f.id,{ralphMode:!f.ralphMode})},className:h("p-1 rounded transition-colors",f.ralphMode?"bg-purple-600/30 text-purple-400 hover:bg-purple-600/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:f.ralphMode?"Ralph mode ON - Worker will signal completion via API":"Ralph mode OFF - Enable autonomous completion signaling",children:e.jsx(Ae,{className:"w-3 h-3"})}),f&&he(f.label).prefix==="GENERAL"&&e.jsx("button",{onClick:()=>{f.bulldozeMode&&f.bulldozePaused?b(f.id,{bulldozePaused:!1}):f.bulldozeMode?b(f.id,{bulldozeMode:!1}):M(f)},className:h("p-1 rounded transition-colors",f.bulldozeMode?f.bulldozePaused?"bg-yellow-600/30 text-yellow-400 hover:bg-yellow-600/40":"bg-amber-600/30 text-amber-300 hover:bg-amber-600/40 shadow-[0_0_6px_rgba(245,158,11,0.2)]":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:f.bulldozeMode?f.bulldozePaused?`Bulldoze PAUSED (${f.bulldozePauseReason||"unknown"}) — click to resume`:`Bulldoze ON (${f.bulldozeCyclesCompleted||0} cycles) — click to disable`:"Bulldoze OFF — Enable continuous autonomous work",children:f.bulldozeMode&&f.bulldozePaused?e.jsx(rt,{className:"w-3 h-3"}):e.jsx(ne,{className:h("w-3 h-3",{"animate-pulse":f.bulldozeMode})})}),e.jsxs("label",{className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors cursor-pointer",title:"Upload screenshot (or drag & drop, or paste)",children:[e.jsx(Ve,{className:"w-3 h-3"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:F=>{var _;const Y=(_=F.target.files)==null?void 0:_[0];Y&&J(Y),F.target.value=""}})]}),r&&e.jsx("button",{onClick:r,className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors",title:i?"Restore":"Maximize",children:i?e.jsx(Rs,{className:"w-3 h-3"}):e.jsx(at,{className:"w-3 h-3"})}),o&&n&&e.jsx("button",{onClick:n,className:"p-1 text-thea-gold-dark hover:text-red-400 transition-colors",title:"Close Pane",children:e.jsx(le,{className:"w-3 h-3"})})]})]}),e.jsx("div",{className:"flex-1 min-h-0 p-1",children:!t||!f?e.jsx("div",{className:"h-full flex items-center justify-center text-thea-gold-dark text-sm",children:"Select a worker to display"}):O==="terminal"?e.jsx(_t,{workerId:t,output:G,onRawInput:F=>g(t,F),onResize:(F,Y)=>w(t,F,Y),className:"h-full w-full"}):e.jsx("div",{className:"h-full bg-black/30 rounded overflow-auto p-2",children:e.jsx(Ut,{workerId:t,className:"h-full"})})}),E&&e.jsx(He,{isOpen:!!E,onClose:()=>M(null),onConfirm:({mission:F,backlog:Y,standingOrders:_})=>{b(E.id,{bulldozeMode:!0,bulldozeMission:F,bulldozeBacklog:Y,bulldozeStandingOrders:_}),M(null)},workerLabel:E.label})]})}function xa({className:s=""}){const{layoutMode:t,changeLayoutMode:l,addPane:n,panes:r}=ke(),i=[{mode:Z.SINGLE,icon:at,label:"Single"},{mode:Z.SPLIT_H,icon:js,label:"Split H"},{mode:Z.SPLIT_V,icon:Is,label:"Split V"},{mode:Z.GRID_2X2,icon:Ss,label:"2×2"},{mode:Z.GRID_3X2,icon:Cs,label:"3×2"}];return e.jsxs("div",{className:h("flex items-center gap-1",s),children:[i.map(({mode:d,icon:o,label:u})=>e.jsxs("button",{onClick:()=>l(d),className:h("flex items-center gap-1.5 px-2 py-1 text-xs font-rajdhani rounded transition-all",t===d?"bg-thea-gold/20 text-thea-gold-bright border border-thea-gold/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5 border border-transparent"),title:u,children:[e.jsx(o,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:u})]},d)),e.jsxs("button",{onClick:()=>n(),className:"flex items-center gap-1 px-2 py-1 text-xs font-rajdhani text-thea-gold-dark hover:text-thea-gold hover:bg-white/5 rounded transition-colors border border-transparent",title:"Add Pane",children:[e.jsx(Ls,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Add"})]}),e.jsxs("span",{className:"text-xxs text-thea-gold-dark/50 ml-2",children:[r.length," pane",r.length!==1?"s":""]})]})}function ma({onBack:s}){const{layoutMode:t,panes:l,activePaneId:n,paneSizes:r,setPaneSizes:i,setPaneWorker:d,removePane:o,changeLayoutMode:u,sendInput:c,workers:y}=ke(),g=l.find(b=>b.id===n)||l[0],w=g!=null&&g.workerId?y.find(b=>b.id===g.workerId):null,v=(b,O)=>e.jsx(ha,{paneId:b.id,workerId:b.workerId,onWorkerChange:R=>d(b.id,R),onClose:()=>o(b.id),isActive:n===b.id,showCloseButton:l.length>1,className:"h-full"},b.id),I=()=>{switch(t){case Z.SINGLE:return e.jsx("div",{className:"h-full p-2",children:l[0]&&v(l[0])});case Z.SPLIT_H:return e.jsx("div",{className:"h-full p-2",children:e.jsx(ft,{direction:"horizontal",sizes:r,onSizesChange:i,minSize:200,children:l.slice(0,2).map((R,p)=>v(R))})});case Z.SPLIT_V:return e.jsx("div",{className:"h-full p-2",children:e.jsx(ft,{direction:"vertical",sizes:r,onSizesChange:i,minSize:100,children:l.slice(0,2).map((R,p)=>v(R))})});case Z.GRID_2X2:return e.jsx("div",{className:"h-full p-2",children:e.jsx(Ze,{columns:2,rows:2,gap:8,children:l.slice(0,4).map((R,p)=>v(R))})});case Z.GRID_3X2:return e.jsx("div",{className:"h-full p-2",children:e.jsx(Ze,{columns:3,rows:2,gap:8,children:l.slice(0,6).map((R,p)=>v(R))})});case Z.CUSTOM:default:const b=Math.ceil(Math.sqrt(l.length)),O=Math.ceil(l.length/b);return e.jsx("div",{className:"h-full p-2",children:e.jsx(Ze,{columns:b,rows:O,gap:8,children:l.map((R,p)=>v(R))})})}};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-black/30 border-b border-thea-gold-dark/20 flex-shrink-0",children:[e.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-thea-gold hover:text-thea-gold-bright transition-colors min-h-[44px] min-w-[44px] px-2 -ml-2",children:[e.jsx(Je,{className:"w-6 h-6 flex-shrink-0"}),e.jsx("span",{className:"font-rajdhani font-semibold hidden sm:inline",children:"Back to Grid"})]}),e.jsx(xa,{}),e.jsx("div",{className:"text-xs text-thea-gold-dark font-mono",children:(w==null?void 0:w.label)||"No active worker"})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:I()}),w&&e.jsx("div",{className:"p-4 border-t border-thea-gold-dark/20 flex-shrink-0",children:e.jsx(Vt,{onSend:b=>c(w.id,b),placeholder:`Send to ${w.label}...`})})]})}function pa({icon:s,title:t,message:l,children:n,className:r=""}){return e.jsxs("div",{className:h("flex flex-col items-center justify-center py-12",r),children:[s&&e.jsx(s,{className:"w-12 h-12 text-thea-gold-dark/30 mb-4"}),t&&e.jsx("h3",{className:"font-orbitron text-lg text-thea-gold-dark mb-2",children:t}),l&&e.jsx("p",{className:"text-sm text-thea-gold-dark/50 text-center max-w-xs",children:l}),n]})}const kt={running:"bg-green-500/20 text-green-400 border-green-500/30",stopped:"bg-gray-800 text-gray-400 border-gray-600",error:"bg-red-500/20 text-red-400 border-red-500/30",completed:"bg-blue-500/20 text-blue-400 border-blue-500/30",awaiting_review:"bg-purple-500/20 text-purple-400 border-purple-500/30"};function ga(s){const t=new Map;s.forEach(d=>t.set(d.id,{...d,children:[]}));const l=[];let n=0;s.forEach(d=>{const o=t.get(d.id);d.parentWorkerId&&t.has(d.parentWorkerId)?t.get(d.parentWorkerId).children.push(o):l.push(o)});function r(d,o){return d.length===0?o:Math.max(...d.map(u=>r(u.children,o+1)))}n=l.length>0?r(l,0):0;function i(d){d.sort((o,u)=>new Date(o.createdAt||0)-new Date(u.createdAt||0)),d.forEach(o=>i(o.children))}return i(l),{tree:l,stats:{total:s.length,roots:l.length,maxDepth:n,withChildren:s.filter(d=>{const o=t.get(d.id);return o&&o.children.length>0}).length}}}function ba({ralphStatus:s,ralphProgress:t}){if(!s)return null;const l={in_progress:"text-yellow-400",done:"text-green-400",blocked:"text-red-400",pending:"text-gray-400"}[s]||"text-gray-400";return e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:h("text-xxs font-mono uppercase",l),children:s==="in_progress"?"working":s}),t!=null&&e.jsxs(e.Fragment,{children:[e.jsx(lt,{progress:t,className:"w-16 h-1"}),e.jsxs("span",{className:"text-xxs font-mono text-thea-gold-dark",children:[t,"%"]})]})]})}const fa=a.memo(function s({node:t,depth:l,attachToWorker:n,killWorker:r}){const[i,d]=a.useState(!0),o=t.children&&t.children.length>0,{displayName:u}=he(t.label);return e.jsxs("div",{role:"treeitem","aria-expanded":o?i:void 0,"aria-label":t.label,children:[e.jsxs("div",{className:h("group flex items-center gap-2 py-1.5 px-2 hover:bg-thea-gold/5 transition-colors cursor-pointer border-l border-transparent hover:border-thea-gold-dark/30",l>0&&"ml-5"),style:l>0?{paddingLeft:`${l*12}px`}:void 0,children:[e.jsx("button",{onClick:c=>{c.stopPropagation(),d(!i)},className:h("w-5 h-5 flex items-center justify-center flex-shrink-0 transition-colors",o?"text-thea-gold-dark hover:text-thea-gold":"text-transparent"),disabled:!o,"aria-label":o?i?"Collapse":"Expand":void 0,children:o?i?e.jsx(Ke,{className:"w-3.5 h-3.5"}):e.jsx(Et,{className:"w-3.5 h-3.5"}):e.jsx(bs,{className:"w-3 h-3 text-thea-gold-dark/30"})}),e.jsx(Ft,{label:t.label,size:"sm"}),t.backend==="gemini"&&e.jsx("span",{className:"text-[8px] font-mono px-1 py-0.5 bg-blue-500/20 border border-blue-500/30 text-blue-300 flex-shrink-0",children:"G"}),e.jsx("button",{onClick:()=>n(t.id),className:"font-rajdhani font-semibold text-thea-gold-bright hover:text-white truncate text-sm transition-colors text-left min-w-0 flex-shrink",title:t.label,children:u||t.label}),o&&e.jsx("span",{className:"text-xxxs font-mono px-1.5 py-0.5 bg-thea-gold/10 border border-thea-gold-dark/30 text-thea-gold-dark flex-shrink-0",children:t.children.length}),e.jsx("span",{className:h("text-xxxs font-mono uppercase px-1.5 py-0.5 border flex-shrink-0",kt[t.status]||kt.stopped),children:t.status==="awaiting_review"?"review":t.status}),e.jsx(Dt,{score:Wt(t.health),size:"sm"}),e.jsx("div",{className:"hidden sm:flex flex-shrink-0",children:e.jsx(ba,{ralphStatus:t.ralphStatus,ralphProgress:t.ralphProgress})}),e.jsx("span",{className:"text-xxs font-mono text-thea-gold-dark/60 flex-shrink-0 hidden md:inline",children:ta(t.createdAt)}),e.jsx("button",{onClick:c=>{c.stopPropagation(),r(t.id)},className:"opacity-0 group-hover:opacity-100 p-1 text-red-400/50 hover:text-red-400 hover:bg-red-500/10 transition-all flex-shrink-0 ml-auto",title:"Kill worker","aria-label":`Kill worker ${u||t.label}`,children:e.jsx(le,{className:"w-3.5 h-3.5"})})]}),o&&i&&e.jsx("div",{role:"group",className:"border-l border-thea-gold-dark/15 ml-4",style:{marginLeft:`${(l+1)*12+18}px`},children:t.children.map(c=>e.jsx(s,{node:c,depth:l+1,attachToWorker:n,killWorker:r},c.id))})]})});function ka(){const{workers:s,attachToWorker:t,killWorker:l,selectedProject:n}=ke(),[r,i]=a.useState(null);a.useEffect(()=>{let c=!1;async function y(){try{const g=await ee("/api/workers/tree");if(!g.ok)return;const w=await g.json();c||i(w)}catch{}}return y(),()=>{c=!0}},[]);const d=a.useMemo(()=>{const c=n?s.filter(y=>y.project===n):s;return ga(c)},[s,n]),{tree:o,stats:u}=d;return o.length===0?e.jsx(pa,{icon:et,title:"No Worker Hierarchy",message:n?`No workers running for ${n}.`:"No workers are currently active.",className:"py-20"}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3 px-2 py-2 bg-black/30 border border-thea-gold-dark/20",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Hs,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),e.jsxs("span",{className:"text-xs font-mono text-thea-gold-dark",children:[e.jsx("span",{className:"text-thea-gold",children:u.total})," workers"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(et,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),e.jsxs("span",{className:"text-xs font-mono text-thea-gold-dark",children:[e.jsx("span",{className:"text-thea-gold",children:u.roots})," roots"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(As,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),e.jsxs("span",{className:"text-xs font-mono text-thea-gold-dark",children:["depth ",e.jsx("span",{className:"text-thea-gold",children:u.maxDepth})]})]})]}),e.jsx("div",{role:"tree","aria-label":"Worker hierarchy",className:"border border-thea-gold-dark/20 bg-black/20",children:o.map(c=>e.jsx(fa,{node:c,depth:0,attachToWorker:t,killWorker:l},c.id))})]})}function ya({value:s,onChange:t,placeholder:l="Search...",className:n=""}){return e.jsxs("div",{className:h("relative",n),role:"search",children:[e.jsx(Pt,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-thea-gold-dark pointer-events-none","aria-hidden":"true"}),e.jsx("input",{type:"text",value:s,onChange:r=>t(r.target.value),placeholder:l,className:"w-full bg-black/50 border border-thea-gold-dark/30 pl-10 pr-10 py-2 text-sm text-thea-gold placeholder-thea-gold-dark/50 focus:outline-none focus:border-thea-gold/50 transition-colors font-mono","aria-label":l}),s&&e.jsx("button",{onClick:()=>t(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-thea-gold-dark hover:text-thea-gold transition-colors","aria-label":"Clear search",children:e.jsx(le,{className:"w-4 h-4"})})]})}function ja(){const{workers:s,outputs:t,projects:l,selectedProject:n,focusedWorker:r,sendInput:i,sendRawInput:d,resizeTerminal:o,detachFromWorker:u,layoutMode:c,changeLayoutMode:y,setPaneWorker:g,panes:w,updateWorkerSettings:v,subscribeToWorkerOutput:I,unsubscribeFromWorkerOutput:b,spawnAutonomousSession:O}=ke(),[R,p]=a.useState("summary"),[$,k]=a.useState(!1),[A,W]=a.useState(!1),[B,H]=a.useState(!1),[P,E]=a.useState(null),[M,f]=a.useState(null),[G,U]=a.useState(null),[Q,te]=a.useState(!1),[J,me]=a.useState("grid"),[ie,pe]=a.useState(""),[F,Y]=a.useState(""),[_,ae]=a.useState(null),[se,re]=a.useState(null),ce=a.useCallback(async m=>{if(!m||!m.type.startsWith("image/")){E("error"),setTimeout(()=>E(null),2e3);return}E("uploading");const L=new FormData;L.append("screenshot",m),L.append("workerId",r||"unknown");try{const K=await ee("/api/uploads/screenshot",{method:"POST",body:L});if(!K.ok)throw new Error("Upload failed");const be=await K.json();f(be.filename),E("success"),setTimeout(()=>E(null),5e3)}catch{E("error"),setTimeout(()=>E(null),2e3)}},[r]),Pe=a.useCallback(m=>{m.preventDefault(),H(!0)},[]),Le=a.useCallback(m=>{m.preventDefault(),H(!1)},[]),_e=a.useCallback(m=>{var K;m.preventDefault(),H(!1);const L=(K=m.dataTransfer)==null?void 0:K.files;L!=null&&L[0]&&ce(L[0])},[ce]);a.useEffect(()=>{if(!r)return;const m=L=>{var be;const K=(be=L.clipboardData)==null?void 0:be.items;if(K){for(const Ce of K)if(Ce.type.startsWith("image/")){const Me=Ce.getAsFile();if(Me){ce(Me);break}}}};return document.addEventListener("paste",m),()=>document.removeEventListener("paste",m)},[r,ce]);const q=a.useMemo(()=>n?s.filter(m=>m.project===n):s,[n,s]),Ie=a.useMemo(()=>{const m={};for(const L of q)m[L.status]=(m[L.status]||0)+1;return m},[q]),we=a.useMemo(()=>{const m=new Set;for(const L of q)L.project&&m.add(L.project);return[...m].sort()},[q]),ve=a.useMemo(()=>{let m=q;if(_&&(m=m.filter(L=>L.status===_)),se&&(m=m.filter(L=>L.project===se)),F.trim()){const L=F.toLowerCase();m=m.filter(K=>(K.label||"").toLowerCase().includes(L)||(K.project||"").toLowerCase().includes(L)||(K.id||"").toLowerCase().includes(L))}return m},[q,F,_,se]),Ne=a.useRef(r);Ne.current=r,a.useEffect(()=>{if(r)return;const m=q.map(L=>L.id);return m.forEach(L=>I(L)),()=>{m.forEach(L=>{L!==Ne.current&&b(L)})}},[r,q,I,b]);const S=a.useMemo(()=>r?s.find(m=>m.id===r):null,[r,s]),Se=(m=null)=>{m&&w.length>0&&g(w[0].id,m),k(!0)},ge=a.useMemo(()=>q.length>0&&q.every(m=>m.ralphMode),[q]),de=a.useMemo(()=>q.length>0&&q.every(m=>m.autoAccept&&!m.autoAcceptPaused),[q]),Oe=a.useCallback(()=>{const m=!ge;q.forEach(L=>{v(L.id,{ralphMode:m})})},[q,v,ge]),De=a.useCallback(()=>{const m=!de;q.forEach(L=>{v(L.id,{autoAccept:m,autoAcceptPaused:!1})})},[q,v,de]);return $?e.jsx(ma,{onBack:()=>k(!1)}):S?e.jsxs("div",{className:h("h-full flex flex-col relative",B&&"ring-2 ring-thea-gold"),onDragOver:Pe,onDragLeave:Le,onDrop:_e,children:[B&&e.jsx("div",{className:"absolute inset-0 z-50 bg-thea-gold/20 backdrop-blur-sm flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(At,{className:"w-16 h-16 text-thea-gold-bright mx-auto mb-3"}),e.jsx("p",{className:"text-thea-gold-bright font-rajdhani text-xl",children:"Drop image to upload"})]})}),P&&e.jsxs("div",{className:h("absolute top-16 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded shadow-lg flex items-center gap-2 text-sm font-mono",P==="uploading"&&"bg-thea-gold/90 text-black",P==="success"&&"bg-green-600 text-white",P==="error"&&"bg-red-600 text-white"),children:[P==="uploading"&&e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-4 h-4 animate-pulse"}),"Uploading..."]}),P==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{className:"max-w-[300px] truncate",children:M})]}),P==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-4 h-4"}),"Upload failed"]})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/30 border-b border-thea-gold-dark/20",children:[e.jsxs("button",{onClick:u,className:"flex items-center gap-2 text-thea-gold hover:text-thea-gold-bright transition-colors min-h-[44px] min-w-[44px] px-2 -ml-2","aria-label":"Back to worker grid",children:[e.jsx(Je,{className:"w-6 h-6 flex-shrink-0"}),e.jsx("span",{className:"font-rajdhani font-semibold hidden sm:inline",children:"Back to Grid"})]}),e.jsxs("div",{className:"text-center min-w-0 flex-1 mx-2",children:[e.jsx("h2",{className:"font-orbitron font-bold text-thea-gold-bright uppercase tracking-wider text-sm md:text-base truncate",children:S.label}),e.jsxs("p",{className:"text-xxs md:text-xs text-thea-gold-dark font-mono truncate",children:[S.project," · ",S.id]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>W(!A),className:h("p-2 transition-colors",A?"text-thea-gold-bright bg-thea-gold/10 rounded":"text-thea-gold-dark hover:text-thea-gold"),title:A?"Hide Health Panel":"Show Health Panel","aria-label":A?"Hide health panel":"Show health panel","aria-expanded":A,children:e.jsx(oe,{className:"w-5 h-5"})}),e.jsxs("label",{className:"p-2 text-thea-gold-dark hover:text-thea-gold transition-colors cursor-pointer",title:"Upload screenshot","aria-label":"Upload screenshot",children:[e.jsx(Ve,{className:"w-5 h-5"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:m=>{var L;(L=m.target.files)!=null&&L[0]&&ce(m.target.files[0]),m.target.value=""}})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-black/50 rounded border border-thea-gold-dark/30 p-0.5",role:"tablist","aria-label":"View mode",children:[e.jsxs("button",{role:"tab","aria-selected":R==="summary",onClick:()=>p("summary"),className:h("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",R==="summary"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"AI Summary View",children:[e.jsx(Tt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Summary"})]}),e.jsxs("button",{role:"tab","aria-selected":R==="terminal",onClick:()=>p("terminal"),className:h("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",R==="terminal"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Raw Terminal View",children:[e.jsx(Xe,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Terminal"})]})]}),S&&e.jsxs("button",{onClick:()=>{S.autoAcceptPaused?v(S.id,{autoAcceptPaused:!1}):v(S.id,{autoAccept:!S.autoAccept})},className:h("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",S.autoAccept?S.autoAcceptPaused?"bg-yellow-600/30 text-yellow-500 hover:bg-yellow-600/40":"bg-green-600/30 text-green-500 hover:bg-green-600/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:S.autoAccept?S.autoAcceptPaused?"Auto-accept PAUSED (click to resume)":"Auto-accept ON (click to disable)":"Auto-accept OFF (click to enable)",children:[S.autoAccept?S.autoAcceptPaused?e.jsx(Ue,{className:"w-4 h-4"}):e.jsx(ne,{className:"w-4 h-4"}):e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:S.autoAccept&&S.autoAcceptPaused?"Paused":"Auto"})]}),S&&e.jsxs("button",{onClick:()=>{v(S.id,{ralphMode:!S.ralphMode})},className:h("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",S.ralphMode?"bg-purple-600/30 text-purple-400 hover:bg-purple-600/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:S.ralphMode?"Ralph mode ON - Worker will signal completion via API":"Ralph mode OFF - Enable autonomous completion signaling",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Ralph"})]}),S&&he(S.label).prefix==="GENERAL"&&e.jsxs("button",{onClick:()=>{S.bulldozeMode&&S.bulldozePaused?v(S.id,{bulldozePaused:!1}):S.bulldozeMode?v(S.id,{bulldozeMode:!1}):U(S)},className:h("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",S.bulldozeMode?S.bulldozePaused?"bg-yellow-600/30 text-yellow-400 border border-yellow-500/40 hover:bg-yellow-600/40":"bg-amber-600/30 text-amber-300 border border-amber-500/60 hover:bg-amber-600/40 shadow-[0_0_8px_rgba(245,158,11,0.25)]":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:S.bulldozeMode?S.bulldozePaused?`Bulldoze PAUSED (${S.bulldozePauseReason||"unknown"}) — click to resume`:`Bulldoze ON (${S.bulldozeCyclesCompleted||0} cycles) — click to disable`:"Bulldoze OFF — Enable continuous autonomous work",children:[S.bulldozeMode&&S.bulldozePaused?e.jsx(rt,{className:"w-4 h-4"}):e.jsx(ne,{className:h("w-4 h-4",{"animate-pulse":S.bulldozeMode})}),e.jsx("span",{className:"hidden md:inline",children:S.bulldozeMode&&S.bulldozePaused?"Resume":"Bulldoze"}),S.bulldozeMode&&S.bulldozeCyclesCompleted>0&&e.jsx("span",{className:"text-xxs opacity-70",children:S.bulldozeCyclesCompleted})]}),S&&S.status==="running"&&e.jsxs("button",{onClick:async()=>{try{await ee(`/api/workers/${S.id}/interrupt`,{method:"POST"})}catch{}},className:"flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani text-red-400/70 hover:text-red-400 hover:bg-red-600/20 transition-all",title:"Send Ctrl+C interrupt to worker",children:[e.jsx(Bs,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Interrupt"})]})]})]}),(S==null?void 0:S.ralphStatus)&&e.jsxs("div",{className:"px-4 py-2 border-b border-thea-gold-dark/10 flex items-center gap-3",children:[e.jsx("span",{className:h("text-xs font-mono uppercase tracking-wider",{"text-yellow-400":S.ralphStatus==="in_progress","text-green-400":S.ralphStatus==="done","text-red-400":S.ralphStatus==="blocked","text-gray-400":S.ralphStatus==="pending"}),children:S.ralphStatus==="in_progress"?"working":S.ralphStatus}),S.ralphProgress!=null&&e.jsxs(e.Fragment,{children:[e.jsx(lt,{progress:S.ralphProgress,className:"flex-1 max-w-xs"}),e.jsxs("span",{className:"text-xs font-mono text-thea-gold-dark",children:[S.ralphProgress,"%"]})]}),S.ralphCurrentStep&&e.jsx("span",{className:"text-xs text-thea-gold-dark/70 font-mono truncate",title:S.ralphCurrentStep,children:S.ralphCurrentStep})]}),(S==null?void 0:S.waitingAtPrompt)&&e.jsxs("div",{className:"px-4 py-1.5 border-b border-yellow-500/20 bg-yellow-500/5 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-3.5 h-3.5 text-yellow-400 animate-pulse"}),e.jsx("span",{className:"text-xs font-mono text-yellow-400",children:"Waiting at permission prompt"}),!S.autoAccept&&e.jsx("span",{className:"text-xxs text-yellow-500/60 ml-auto",children:"auto-accept is off"})]}),e.jsxs("div",{className:"flex-1 p-4 min-h-0 flex gap-4 relative",children:[e.jsx("div",{className:h("flex-1 min-w-0",A&&"lg:max-w-[calc(100%-288px)]"),children:R==="summary"?e.jsx("div",{className:"h-full bg-black/30 border border-thea-gold-dark/20 rounded p-4 overflow-auto",children:e.jsx(Ut,{workerId:r,className:"h-full"})}):e.jsx(_t,{workerId:r,output:t[r]||"",onRawInput:m=>d(r,m),onResize:(m,L)=>o(r,m,L),className:"h-full w-full"})}),A&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lg:hidden fixed inset-0 top-16 z-50 bg-black/95 overflow-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-orbitron text-thea-gold-bright uppercase tracking-wider",children:"Health Panel"}),e.jsx("button",{onClick:()=>W(!1),className:"p-2 text-thea-gold hover:text-thea-gold-bright","aria-label":"Close health panel",children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsx(bt,{workerId:r})]}),e.jsx("div",{className:"hidden lg:block w-72 shrink-0",children:e.jsx(bt,{workerId:r})})]})]}),e.jsx("div",{className:"p-4 border-t border-thea-gold-dark/20",children:e.jsx(Vt,{onSend:m=>i(r,m),placeholder:`Send to ${S.label}...`})}),G&&e.jsx(He,{isOpen:!!G,onClose:()=>U(null),onConfirm:({mission:m,backlog:L,standingOrders:K})=>{v(G.id,{bulldozeMode:!0,bulldozeMission:m,bulldozeBacklog:L,bulldozeStandingOrders:K}),U(null)},workerLabel:G.label})]}):e.jsxs("div",{className:"p-4",children:[q.length>0&&e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:De,className:h("flex items-center gap-2 px-3 py-1.5 text-sm font-rajdhani rounded transition-all border",de?"bg-green-600/30 text-green-500 border-green-600/40 hover:bg-green-600/40":"text-thea-gold hover:text-thea-gold-bright bg-black/30 hover:bg-black/50 border-thea-gold-dark/30 hover:border-thea-gold/50"),title:de?"Click to disable auto-accept on all workers":"Click to enable auto-accept on all workers",children:[de?e.jsx(ne,{className:"w-4 h-4"}):e.jsx(st,{className:"w-4 h-4"}),"Auto-Accept All"]}),e.jsxs("button",{onClick:Oe,className:h("flex items-center gap-2 px-3 py-1.5 text-sm font-rajdhani rounded transition-all border",ge?"bg-purple-600/30 text-purple-400 border-purple-600/40 hover:bg-purple-600/40":"text-thea-gold hover:text-thea-gold-bright bg-black/30 hover:bg-black/50 border-thea-gold-dark/30 hover:border-thea-gold/50"),title:ge?"Click to disable Ralph mode on all workers":"Click to enable Ralph mode on all workers",children:[e.jsx(Ae,{className:"w-4 h-4"}),"Ralph All"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center bg-black/50 rounded border border-thea-gold-dark/30 p-0.5",role:"tablist","aria-label":"Worker view mode",children:[e.jsxs("button",{role:"tab","aria-selected":J==="grid",onClick:()=>me("grid"),className:h("flex items-center gap-1.5 px-2 py-1.5 rounded text-sm font-rajdhani transition-all",J==="grid"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Grid View",children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Grid"})]}),e.jsxs("button",{role:"tab","aria-selected":J==="tree",onClick:()=>me("tree"),className:h("flex items-center gap-1.5 px-2 py-1.5 rounded text-sm font-rajdhani transition-all",J==="tree"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Tree View",children:[e.jsx(et,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Tree"})]})]}),e.jsxs("button",{onClick:()=>{var m;pe(n&&((m=l.find(L=>L.name===n))==null?void 0:m.path)||""),te(!0)},className:"flex items-center gap-2 px-3 py-1.5 text-sm font-rajdhani text-amber-300 hover:text-amber-200 bg-amber-500/10 hover:bg-amber-500/20 border border-amber-500/30 hover:border-amber-500/50 rounded transition-all",children:[e.jsx(_s,{className:"w-4 h-4"}),"New Session"]}),e.jsxs("button",{onClick:()=>Se(),className:"flex items-center gap-2 px-3 py-1.5 text-sm font-rajdhani text-thea-gold hover:text-thea-gold-bright bg-black/30 hover:bg-black/50 border border-thea-gold-dark/30 hover:border-thea-gold/50 rounded transition-all",children:[e.jsx(Te,{className:"w-4 h-4"}),"Multi-Terminal View"]})]})]}),J==="grid"&&q.length>0&&e.jsxs("div",{className:"mb-4 space-y-3",children:[e.jsx(ya,{value:F,onChange:Y,placeholder:"Search by label, project, or ID..."}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[Object.entries(Ie).sort(([m],[L])=>m.localeCompare(L)).map(([m,L])=>{const K={running:"bg-green-400/10 border-green-400/30 text-green-400",stopped:"bg-gray-400/10 border-gray-400/30 text-gray-400",error:"bg-red-400/10 border-red-400/30 text-red-400",awaiting_review:"bg-yellow-400/10 border-yellow-400/30 text-yellow-400"};return e.jsxs("button",{onClick:()=>ae(_===m?null:m),className:h("flex items-center gap-1 text-xxs px-2 py-1 font-mono uppercase tracking-wider transition-all border",_===m?(K[m]||"bg-thea-gold/10 border-thea-gold-dark/30 text-thea-gold")+" shadow-sm":"text-thea-gold-dark border-thea-gold-dark/30 hover:border-thea-gold/50 hover:text-thea-gold"),children:[m," (",L,")"]},m)}),!n&&we.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-thea-gold-dark/30 text-xs",children:"|"}),we.map(m=>{const L=q.filter(K=>K.project===m).length;return e.jsxs("button",{onClick:()=>re(se===m?null:m),className:h("flex items-center gap-1 text-xxs px-2 py-1 font-mono tracking-wider transition-all border",se===m?"bg-blue-400/10 border-blue-400/30 text-blue-400 shadow-sm":"text-thea-gold-dark border-thea-gold-dark/30 hover:border-thea-gold/50 hover:text-thea-gold"),children:[m," (",L,")"]},m)})]}),(_||se)&&e.jsxs("button",{onClick:()=>{ae(null),re(null)},className:"text-xxs px-2 py-1 text-thea-maroon-light hover:text-thea-maroon-light/80 transition-colors flex items-center gap-1",children:[e.jsx(le,{className:"w-3 h-3"}),"Clear"]})]})]}),J==="tree"?e.jsx(ka,{}):q.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx("div",{className:"w-16 h-16 mb-4 opacity-30",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",className:"text-thea-gold",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]})}),e.jsx("h3",{className:"font-orbitron text-lg text-thea-gold-dark mb-2",children:"No Workers Active"}),e.jsx("p",{className:"text-sm text-thea-gold-dark/50 text-center max-w-xs",children:n?`No workers running for ${n}. Start one from the project panel.`:"Select a project and start a worker to begin."})]}):ve.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsxs("p",{className:"text-sm text-thea-gold-dark/50 font-mono",children:["No workers match",F&&` "${F}"`,_&&` [${_}]`,se&&` in ${se}`,!F&&!_&&!se&&" current filters"]}),e.jsx("button",{onClick:()=>{Y(""),ae(null),re(null)},className:"mt-2 text-xs text-thea-gold hover:text-thea-gold-bright transition-colors font-mono",children:"Clear all filters"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:ve.map(m=>e.jsx(ra,{worker:m,onOpenInMultiTerminal:()=>Se(m.id)},m.id))}),Q&&e.jsx(He,{isOpen:Q,onClose:()=>te(!1),onConfirm:async({mission:m,backlog:L,standingOrders:K})=>{O&&await O(ie,m,L,K),te(!1)},workerLabel:"",showProjectPicker:!0,projects:l,selectedProject:ie,onProjectChange:pe})]})}const yt={success:{icon:qe,bgClass:"bg-status-success/20 border-status-success",textClass:"text-status-success",glowClass:"shadow-[0_0_20px_rgba(78,201,176,0.4)]"},error:{icon:fe,bgClass:"bg-status-error/20 border-status-error",textClass:"text-status-error",glowClass:"shadow-[0_0_20px_rgba(244,135,113,0.4)]"},info:{icon:zs,bgClass:"bg-thea-gold/20 border-thea-gold",textClass:"text-thea-gold",glowClass:"shadow-gold-sm"},loading:{icon:Re,bgClass:"bg-thea-gold/10 border-thea-gold-dark",textClass:"text-thea-gold-bright",glowClass:""}};function wa({toast:s,onDismiss:t}){const l=yt[s.type]||yt.info,n=l.icon;return a.useEffect(()=>{if(s.duration&&s.duration>0){const r=setTimeout(()=>t(s.id),s.duration);return()=>clearTimeout(r)}},[s.id,s.duration,t]),e.jsxs("div",{role:"alert",className:h("flex items-start gap-3 px-4 py-3 border backdrop-blur-md","animate-[slideIn_0.3s_ease-out]",l.bgClass,l.glowClass,"clip-cyber-sm"),children:[e.jsx(n,{className:h("w-5 h-5 flex-shrink-0 mt-0.5",l.textClass,s.type==="loading"&&"animate-spin")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:h("font-rajdhani font-semibold",l.textClass),children:s.title}),s.message&&e.jsx("p",{className:"text-sm text-white/70 font-mono mt-0.5 truncate",children:s.message})]}),e.jsx("button",{onClick:()=>t(s.id),className:h("p-1 hover:bg-white/10 transition-colors",l.textClass),"aria-label":"Dismiss notification",children:e.jsx(le,{className:"w-4 h-4"})})]})}function jt({toasts:s,onDismiss:t}){return e.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm","aria-live":"polite","aria-label":"Notifications",children:s.map(l=>e.jsx(wa,{toast:l,onDismiss:t},l.id))})}function va(){const[s,t]=a.useState(!1),l=a.useRef(null);return a.useEffect(()=>{if(!s)return;function n(r){l.current&&!l.current.contains(r.target)&&t(!1)}return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[s]),a.useEffect(()=>{if(!s)return;function n(r){r.key==="Escape"&&(r.stopPropagation(),t(!1))}return document.addEventListener("keydown",n,!0),()=>document.removeEventListener("keydown",n,!0)},[s]),e.jsxs("div",{className:"relative",ref:l,children:[e.jsx("button",{"data-shortcut-help":!0,onClick:()=>t(n=>!n),className:h("thea-btn p-2",s&&"bg-thea-gold/20 border-thea-gold shadow-gold-sm"),title:"Keyboard shortcuts (?)","aria-label":"Keyboard shortcuts","aria-expanded":s,"aria-haspopup":"true",children:e.jsx(Es,{className:"w-4 h-4"})}),s&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-72 bg-black/95 border border-thea-gold-dark/50 backdrop-blur-md shadow-lg shadow-black/50 z-50",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-thea-gold-dark/30",children:[e.jsx("span",{className:"font-orbitron text-thea-gold-bright text-xs uppercase tracking-wider",children:"Keyboard Shortcuts"}),e.jsx("button",{onClick:()=>t(!1),className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors","aria-label":"Close keyboard shortcuts",children:e.jsx(le,{className:"w-3.5 h-3.5"})})]}),e.jsx("div",{className:"p-3 space-y-3 max-h-80 overflow-y-auto",children:ms.map(n=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-xxs font-mono text-thea-gold-dark uppercase tracking-wider mb-1.5",children:n.label}),e.jsx("div",{className:"space-y-1",children:n.shortcuts.map(r=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-thea-gold/80 font-rajdhani",children:r.description}),e.jsx("div",{className:"flex items-center gap-0.5",children:r.keys.map(i=>e.jsxs("span",{children:[j>0&&e.jsx("span",{className:"text-thea-gold-dark/50 text-xxs mx-0.5",children:"+"}),e.jsx("kbd",{className:"inline-block px-1.5 py-0.5 text-xxs font-mono text-thea-gold bg-thea-gold/10 border border-thea-gold-dark/40 rounded min-w-[1.5rem] text-center",children:i})]},i))})]},r.description))})]},n.label))}),e.jsx("div",{className:"px-3 py-1.5 border-t border-thea-gold-dark/20 text-center",children:e.jsxs("span",{className:"text-xxs text-thea-gold-dark/50 font-mono",children:["Press ",e.jsx("kbd",{className:"px-1 py-0.5 bg-thea-gold/10 border border-thea-gold-dark/30 rounded text-thea-gold-dark",children:"?"})," to toggle"]})})]})]})}function Na({performanceMode:s,onTogglePerformance:t,summariesEnabled:l,onToggleSummaries:n}){var W,B,H,P;const[r,i]=a.useState(!1),d=a.useRef(null),[o,u]=a.useState(null),[c,y]=a.useState(!1),[g,w]=a.useState(!1),[v,I]=a.useState(null),b=a.useCallback(async E=>{try{const M=await ee("/api/sentinel/status",{signal:E});M.ok&&u(await M.json())}catch(M){if(M.name==="AbortError")return}},[]);a.useEffect(()=>{const E=new AbortController;return b(E.signal),()=>E.abort()},[b]),a.useEffect(()=>{if(!r||!(o!=null&&o.enabled))return;const E=new AbortController,M=setInterval(()=>b(E.signal),3e4);return()=>{E.abort(),clearInterval(M)}},[r,o==null?void 0:o.enabled,b]);const O=a.useCallback(async()=>{y(!0);try{const E=o!=null&&o.enabled?"/api/sentinel/stop":"/api/sentinel/start",f=await(await ee(E,{method:"POST"})).json();f.diagnostics&&I(f.diagnostics),await b()}catch{}finally{y(!1)}},[o==null?void 0:o.enabled,b]),R=a.useCallback(async()=>{y(!0);try{const M=await(await ee("/api/diagnostics?run=true")).json();I(M),await b()}catch{}finally{y(!1)}},[b]);a.useEffect(()=>{if(!r)return;const E=M=>{d.current&&!d.current.contains(M.target)&&i(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[r]);const p=o==null?void 0:o.enabled,$=p?(o==null?void 0:o.lastStatus)==="healthy"?"text-green-400":(o==null?void 0:o.lastStatus)==="degraded"?"text-yellow-400":(o==null?void 0:o.lastStatus)==="unhealthy"?"text-red-400":"text-thea-gold":"text-gray-500",k=p?(o==null?void 0:o.lastStatus)==="unhealthy"?$s:Fs:Lt,A=p&&(o==null?void 0:o.lastStatus)==="unhealthy";return e.jsxs("div",{className:"relative",ref:d,children:[e.jsxs("button",{onClick:()=>i(!r),className:h("thea-btn p-2 relative",r&&"bg-thea-gold/20 border-thea-gold shadow-gold-sm"),title:"Settings","aria-label":"Settings","aria-expanded":r,"aria-haspopup":"true",children:[e.jsx(Ds,{className:"w-4 h-4"}),A&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 rounded-full bg-red-400 animate-pulse"})]}),r&&e.jsxs("div",{role:"menu","aria-label":"Settings menu",className:"absolute right-0 top-full mt-2 w-72 bg-black/95 border border-thea-gold-dark/50 rounded-lg shadow-2xl backdrop-blur-md z-50 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-2.5 border-b border-thea-gold-dark/30 bg-black/40",children:e.jsx("span",{className:"font-rajdhani font-bold text-sm uppercase tracking-wider text-thea-gold-bright",children:"Settings"})}),e.jsxs("div",{className:"py-1",children:[e.jsx(wt,{icon:e.jsx(ne,{className:h("w-4 h-4",s?"text-green-400":"text-thea-gold-dark")}),label:"Performance Mode",description:"Disable animations",enabled:s,onToggle:t}),e.jsx(wt,{icon:e.jsx(Ae,{className:h("w-4 h-4",l?"text-thea-gold":"text-thea-gold-dark")}),label:"AI Summaries",description:"Ollama-powered",enabled:l,onToggle:n}),e.jsxs("div",{className:"border-t border-thea-gold-dark/20 mt-1 pt-1",children:[e.jsxs("button",{onClick:()=>w(!g),className:"w-full flex items-center gap-3 px-4 py-2 hover:bg-thea-gold/5 transition-colors","aria-expanded":g,"aria-label":"Sentinel diagnostics",children:[e.jsxs("div",{className:"relative",children:[c?e.jsx(Re,{className:"w-4 h-4 animate-spin text-thea-gold"}):e.jsx(k,{className:h("w-4 h-4",$)}),p&&!c&&e.jsx("span",{className:h("absolute -top-0.5 -right-0.5 w-1.5 h-1.5 rounded-full",(o==null?void 0:o.lastStatus)==="healthy"?"bg-green-400":(o==null?void 0:o.lastStatus)==="degraded"?"bg-yellow-400":(o==null?void 0:o.lastStatus)==="unhealthy"?"bg-red-400 animate-pulse":"bg-thea-gold")})]}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-xs font-mono text-thea-gold-bright",children:"Sentinel"}),e.jsx("div",{className:"text-xxs text-thea-gold-dark font-mono",children:p?`${(o==null?void 0:o.lastStatus)||"checking..."}`:"Disabled"})]}),e.jsx("button",{onClick:E=>{E.stopPropagation(),O()},disabled:c,role:"switch","aria-checked":!!p,"aria-label":"Toggle sentinel",className:h("px-2 py-0.5 rounded text-xxs font-mono transition-all",p?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-gray-800 text-gray-400 border border-gray-600"),children:c?"...":p?"ON":"OFF"}),g?e.jsx(Ke,{className:"w-3 h-3 text-thea-gold-dark"}):e.jsx(Et,{className:"w-3 h-3 text-thea-gold-dark"})]}),g&&e.jsxs("div",{className:"px-4 pb-2 space-y-2",children:[p&&o&&e.jsxs("div",{className:"text-xs font-mono space-y-1 pl-7",children:[e.jsx(Ye,{label:"Checks",value:o.checksRun}),e.jsx(Ye,{label:"Uptime",value:Bt(o.uptimeSeconds)}),o.lastCheck&&e.jsx(Ye,{label:"Last",value:Sa(o.lastCheck)})]}),v&&e.jsxs("div",{className:"pl-7 space-y-1",children:[e.jsx("span",{className:"text-xxxs text-thea-gold-dark uppercase tracking-wider font-mono",children:"Last Run"}),((W=v.issues)==null?void 0:W.length)>0&&v.issues.map(E=>e.jsx("p",{className:"text-red-400 text-xxs leading-tight font-mono",children:E},E)),((B=v.warnings)==null?void 0:B.length)>0&&v.warnings.map(E=>e.jsx("p",{className:"text-yellow-400 text-xxs leading-tight font-mono",children:E},E)),!((H=v.issues)!=null&&H.length)&&!((P=v.warnings)!=null&&P.length)&&e.jsx("p",{className:"text-green-400 text-xxs font-mono",children:"All checks passed"})]}),e.jsxs("div",{className:"flex gap-2 pl-7",children:[e.jsx("button",{onClick:R,disabled:c,className:"text-xxs font-rajdhani uppercase tracking-wider px-2.5 py-1 bg-thea-gold/10 text-thea-gold border border-thea-gold-dark/30 rounded hover:bg-thea-gold/20 transition-colors disabled:opacity-50",children:"Run Now"}),e.jsx("button",{onClick:O,disabled:c,className:h("text-xxs font-rajdhani uppercase tracking-wider px-2.5 py-1 rounded transition-colors disabled:opacity-50",p?"bg-red-500/10 text-red-400 border border-red-500/30 hover:bg-red-500/20":"bg-green-500/10 text-green-400 border border-green-500/30 hover:bg-green-500/20"),children:p?"Disable":"Enable"})]})]})]})]})]})]})}function wt({icon:s,label:t,description:l,enabled:n,onToggle:r}){return e.jsxs("button",{onClick:r,role:"switch","aria-checked":n,className:"w-full flex items-center gap-3 px-4 py-2 hover:bg-thea-gold/5 transition-colors",children:[s,e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-xs font-mono text-thea-gold-bright",children:t}),l&&e.jsx("div",{className:"text-xxs text-thea-gold-dark font-mono",children:l})]}),e.jsx("span",{className:h("px-2 py-0.5 rounded text-xxs font-mono transition-all",n?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-gray-800 text-gray-400 border border-gray-600"),children:n?"ON":"OFF"})]})}function Ye({label:s,value:t}){return e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-thea-gold-dark",children:s}),e.jsx("span",{className:"text-thea-gold",children:t})]})}function Sa(s){try{return new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return s}}function Ca(s){if(!s)return"";const t=s*1e3-Date.now();if(t<=0)return"now";const l=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4);return l>24?`${Math.floor(l/24)}d ${l%24}h`:l>0?`${l}h ${n}m`:`${n}m`}function Ma(s){return s>=90?{text:"text-red-400",bar:"bg-red-500",border:"border-red-500/40"}:s>=70?{text:"text-yellow-400",bar:"bg-yellow-500",border:"border-yellow-500/40"}:{text:"text-emerald-400",bar:"bg-emerald-500",border:"border-emerald-500/30"}}function vt({label:s,pct:t,reset:l}){const n=Ma(t);return e.jsxs("div",{className:h("flex items-center gap-1.5 px-2 py-1 border rounded-sm bg-black/40",n.border),title:`${s}: ${t}%${l?` — resets in ${Ca(l)}`:""}`,"aria-label":`${s}: ${t}%`,children:[e.jsx("span",{className:"text-xxxs font-mono text-thea-gold-dark uppercase tracking-wider hidden md:inline",children:s}),e.jsx("div",{className:"w-12 h-1.5 bg-black/60 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,children:e.jsx("div",{className:h("h-full rounded-full transition-all duration-700",n.bar),style:{width:`${Math.min(t,100)}%`}})}),e.jsxs("span",{className:h("text-xxs font-mono font-bold tabular-nums",n.text),children:[t,"%"]})]})}function Ea(){const[s,t]=a.useState(null),[l,n]=a.useState(null),r=a.useCallback(async o=>{try{const u=await ee("/api/usage",{signal:o});u.ok?(t(await u.json()),n(null)):u.status===404||u.status===401?n("unavailable"):n("failed")}catch(u){if(u.name==="AbortError")return;n(u.message)}},[]);if(a.useEffect(()=>{const o=new AbortController;r(o.signal);const u=setInterval(()=>r(o.signal),6e4);return()=>{o.abort(),clearInterval(u)}},[r]),l==="unavailable"||!s)return null;const i=Math.round(s.session.utilization*100),d=Math.round(s.weekly.utilization*100);return e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(vt,{label:"5h",pct:i,reset:s.session.reset}),e.jsx(vt,{label:"7d",pct:d,reset:s.weekly.reset})]})}class je extends Nt.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,l){console.error("[ErrorBoundary] Caught rendering error:",t,l)}render(){var t;return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-thea-bg flex items-center justify-center p-8",children:e.jsxs("div",{className:"max-w-lg w-full bg-gray-900 border border-red-500/30 rounded-lg p-6",children:[e.jsx("h2",{className:"text-red-400 text-lg font-bold mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"The UI encountered an error. Your workers are still running — this only affects the dashboard."}),e.jsx("pre",{className:"text-xs text-red-300/70 bg-black/50 rounded p-3 overflow-auto max-h-40 mb-4",children:((t=this.state.error)==null?void 0:t.message)||"Unknown error"}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"px-4 py-2 bg-thea-gold text-black rounded font-medium text-sm hover:bg-thea-gold-bright transition-colors",children:"Try Again"})]})}):this.props.children}}const za=a.lazy(()=>xe(()=>import("./ProjectsView-BNQB3in-.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(s=>({default:s.ProjectsView}))),Aa=a.lazy(()=>xe(()=>import("./VoiceModeView-CrNo3Huo.js"),__vite__mapDeps([7,1,5,6])).then(s=>({default:s.VoiceModeView}))),Ta=a.lazy(()=>xe(()=>import("./CheckpointsView-B-0ESLLN.js"),__vite__mapDeps([8,1,9,5,6])).then(s=>({default:s.CheckpointsView}))),Ra=a.lazy(()=>xe(()=>import("./RalphPanel-C6xwQWAx.js"),__vite__mapDeps([10,1,9,5,6])).then(s=>({default:s.RalphPanel}))),Pa=a.lazy(()=>xe(()=>import("./VoiceControl-LzjWLoqB.js"),__vite__mapDeps([11,1,5,6])).then(s=>({default:s.VoiceControl}))),La=a.lazy(()=>xe(()=>import("./ActivityFeed-KVN2MM2l.js"),__vite__mapDeps([12,3,1,5,6])).then(s=>({default:s.ActivityFeed}))),_a=a.lazy(()=>xe(()=>import("./ADRPanel-Bqfog-51.js"),__vite__mapDeps([13,1,4,5,6])).then(s=>({default:s.ADRPanel}))),Ia=a.lazy(()=>xe(()=>import("./MetricsDashboard-Ba2poWLP.js"),__vite__mapDeps([14,1,2,5,6])).then(s=>({default:s.MetricsDashboard})));function Oa(){const{connected:s,workers:t,toasts:l,dismissToast:n,detachFromWorker:r,focusedWorker:i}=ke();hs();const[d,o]=a.useState(!1),[u,c]=a.useState("workers"),[y,g]=a.useState(!1),[w,v]=a.useState("activity"),[I,b]=a.useState(!1),[O,R]=a.useState(()=>{if(typeof window<"u"){const k=localStorage.getItem("strategos-performance-mode");return k===null?!0:k==="true"}return!0}),p=a.useMemo(()=>t.filter(k=>k.status==="running").length,[t]);xs({setActiveTab:c,detachFromWorker:r,setShowActivity:o,hasFocusedWorker:!!i,showActivity:d}),a.useEffect(()=>{O?document.body.classList.add("performance-mode"):document.body.classList.remove("performance-mode"),localStorage.setItem("strategos-performance-mode",O.toString())},[O]),a.useEffect(()=>{const k=new AbortController;return ee("/api/settings/summaries",{signal:k.signal}).then(A=>A.json()).then(A=>b(A.enabled)).catch(A=>{A.name}),()=>k.abort()},[]);const $=async()=>{const k=!I;b(k);try{const W=await(await ee("/api/settings/summaries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:k})})).json();b(W.enabled)}catch{b(!k)}};return y?e.jsxs("div",{className:"min-h-screen bg-thea-black relative z-10",children:[e.jsx(a.Suspense,{fallback:e.jsx(Ee,{}),children:e.jsx(Aa,{onExit:()=>g(!1)})}),e.jsx(jt,{toasts:l,onDismiss:n})]}):e.jsxs("div",{className:"min-h-screen bg-thea-black flex flex-col relative z-10 pb-mobile-nav sm:pb-0 overflow-x-hidden",children:[e.jsx("header",{role:"banner","aria-label":"Strategos application header",className:"bg-gradient-to-r from-black/80 via-thea-nearBlack/90 to-black/80 border-b border-thea-gold-dark/50 backdrop-blur-md sticky top-0 z-50",children:e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("button",{onClick:()=>{r(),c("workers"),o(!1)},className:"flex items-center gap-4 group cursor-pointer","aria-label":"Strategos home",children:[e.jsxs("div",{className:"relative",children:[e.jsx("h1",{className:"font-orbitron font-bold text-2xl text-thea-gold-bright tracking-widest text-glow-gold group-hover:text-white transition-colors",children:"STRATEGOS"}),e.jsx("div",{className:"absolute -bottom-1 left-0 w-full h-px bg-gradient-to-r from-transparent via-thea-gold to-transparent group-hover:via-white transition-colors"})]}),e.jsx("span",{className:"text-xxs text-thea-gold-dark font-mono hidden sm:block uppercase tracking-[0.2em]",children:"// Thea Orchestrator"})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-5",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 text-sm","aria-live":"polite","aria-label":`${t.length} workers, ${p} active`,children:[e.jsx("span",{className:"hidden sm:inline text-thea-gold-dark font-mono text-xs uppercase tracking-wider",children:"Workers:"}),e.jsx("span",{className:"font-mono text-thea-gold-bright font-bold text-lg",children:t.length}),p<t.length&&e.jsxs("span",{className:"text-xxs text-thea-gold-dark font-mono",children:["(",p," active)"]})]}),e.jsx("div",{"data-testid":"connection-status",role:"status","aria-live":"polite","aria-label":s?"Connected to server":"Disconnected from server",className:h("thea-badge flex items-center gap-1 sm:gap-2 px-2 sm:px-3",s?"thea-badge-running":"thea-badge-stopped"),children:s?e.jsxs(e.Fragment,{children:[e.jsx(Ks,{className:"w-3.5 h-3.5"}),e.jsx("span",{"data-testid":"status-text",className:"hidden sm:inline",children:"Connected"})]}):e.jsxs(e.Fragment,{children:[e.jsx(qs,{className:"w-3.5 h-3.5"}),e.jsx("span",{"data-testid":"status-text",className:"hidden sm:inline",children:"Disconnected"})]})}),e.jsx(Ea,{}),e.jsx(Na,{performanceMode:O,onTogglePerformance:()=>R(!O),summariesEnabled:I,onToggleSummaries:$}),e.jsx("div",{className:"hidden sm:block",children:e.jsx(va,{})}),e.jsx("button",{onClick:()=>g(!0),className:"hidden sm:block thea-btn p-2 group",title:"Enter Voice Mode","aria-label":"Enter voice mode",children:e.jsx(Rt,{className:"w-4 h-4 group-hover:text-thea-gold-bright"})}),e.jsx("button",{"data-testid":"activity-toggle",onClick:()=>o(!d),className:h("hidden sm:block thea-btn p-2",d&&"bg-thea-gold/20 border-thea-gold shadow-gold-sm"),"aria-label":"Toggle activity sidebar","aria-expanded":d,children:e.jsx(oe,{className:"w-4 h-4"})})]})]})})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("main",{role:"main",className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-b from-black/50 to-transparent border-b border-thea-gold-dark/30 px-4",children:e.jsxs("div",{className:"flex gap-2",role:"tablist","aria-label":"Main navigation",children:[e.jsxs("button",{"data-testid":"tab-workers",role:"tab","aria-selected":u==="workers","aria-controls":"tabpanel-workers",onClick:()=>c("workers"),className:h("flex items-center gap-2 px-5 py-3 text-sm font-rajdhani font-bold uppercase tracking-wider border-b-2 transition-all duration-300",u==="workers"?"border-thea-gold text-thea-gold-bright text-glow-gold-sm":"border-transparent text-thea-gold-dark hover:text-thea-gold hover:border-thea-gold/30"),children:[e.jsx(Te,{className:"w-4 h-4"}),"Workers"]}),e.jsxs("button",{"data-testid":"tab-projects",role:"tab","aria-selected":u==="projects","aria-controls":"tabpanel-projects",onClick:()=>c("projects"),className:h("flex items-center gap-2 px-5 py-3 text-sm font-rajdhani font-bold uppercase tracking-wider border-b-2 transition-all duration-300",u==="projects"?"border-thea-gold text-thea-gold-bright text-glow-gold-sm":"border-transparent text-thea-gold-dark hover:text-thea-gold hover:border-thea-gold/30"),children:[e.jsx(mt,{className:"w-4 h-4"}),"Projects"]}),e.jsxs("button",{"data-testid":"tab-ralph",role:"tab","aria-selected":u==="ralph","aria-controls":"tabpanel-ralph",onClick:()=>c("ralph"),className:h("flex items-center gap-2 px-5 py-3 text-sm font-rajdhani font-bold uppercase tracking-wider border-b-2 transition-all duration-300",u==="ralph"?"border-thea-gold text-thea-gold-bright text-glow-gold-sm":"border-transparent text-thea-gold-dark hover:text-thea-gold hover:border-thea-gold/30"),children:[e.jsx(Ae,{className:"w-4 h-4"}),"Ralph"]}),e.jsxs("button",{"data-testid":"tab-history",role:"tab","aria-selected":u==="history","aria-controls":"tabpanel-history",onClick:()=>c("history"),className:h("flex items-center gap-2 px-5 py-3 text-sm font-rajdhani font-bold uppercase tracking-wider border-b-2 transition-all duration-300",u==="history"?"border-thea-gold text-thea-gold-bright text-glow-gold-sm":"border-transparent text-thea-gold-dark hover:text-thea-gold hover:border-thea-gold/30"),children:[e.jsx(xt,{className:"w-4 h-4"}),"History"]})]})}),e.jsxs("div",{className:"flex-1 overflow-auto",role:"tabpanel",id:`tabpanel-${u}`,"aria-label":`${u} panel`,children:[u==="workers"&&e.jsx(je,{children:e.jsx(ja,{})}),u==="projects"&&e.jsx(je,{children:e.jsx(a.Suspense,{fallback:e.jsx(Ee,{}),children:e.jsx(za,{})})}),u==="ralph"&&e.jsx(je,{children:e.jsx(a.Suspense,{fallback:e.jsx(Ee,{}),children:e.jsx(Ra,{className:"h-full"})})}),u==="history"&&e.jsx(je,{children:e.jsx(a.Suspense,{fallback:e.jsx(Ee,{}),children:e.jsx(Ta,{})})})]})]}),e.jsx("aside",{role:"complementary","aria-label":"Activity sidebar","aria-hidden":!d,className:h("bg-gradient-to-l from-black/95 to-thea-nearBlack/95 lg:from-black/60 lg:to-thea-nearBlack/40 border-l border-thea-gold-dark/30 transition-all duration-300 overflow-hidden backdrop-blur-sm flex flex-col",d?"fixed lg:relative inset-0 lg:inset-auto top-16 lg:top-0 z-40 lg:z-auto w-full lg:w-72":"w-0"),children:d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lg:hidden flex items-center justify-between px-4 py-3 bg-black/80 border-b border-thea-gold-dark/30",children:[e.jsx("span",{className:"font-orbitron text-thea-gold-bright text-sm uppercase tracking-wider",children:"Activity"}),e.jsx("button",{onClick:()=>o(!1),className:"p-2 text-thea-gold hover:text-thea-gold-bright hover:bg-thea-gold/10 rounded transition-colors","aria-label":"Close activity sidebar",children:e.jsx(le,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex border-b border-thea-gold-dark/30 bg-black/40 shrink-0",role:"tablist","aria-label":"Sidebar sections",children:[e.jsxs("button",{role:"tab","aria-selected":w==="activity",onClick:()=>v("activity"),className:h("flex-1 flex items-center justify-center gap-1.5 px-2 py-2.5 text-xxs font-rajdhani uppercase tracking-wider transition-all border-b-2",w==="activity"?"border-thea-gold text-thea-gold-bright bg-thea-gold/10":"border-transparent text-thea-gold-dark hover:text-thea-gold"),title:"Activity Feed",children:[e.jsx(oe,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Activity"})]}),e.jsxs("button",{role:"tab","aria-selected":w==="adrs",onClick:()=>v("adrs"),className:h("flex-1 flex items-center justify-center gap-1.5 px-2 py-2.5 text-xxs font-rajdhani uppercase tracking-wider transition-all border-b-2",w==="adrs"?"border-thea-gold text-thea-gold-bright bg-thea-gold/10":"border-transparent text-thea-gold-dark hover:text-thea-gold"),title:"Architecture Decisions",children:[e.jsx(vs,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"ADRs"})]}),e.jsxs("button",{role:"tab","aria-selected":w==="metrics",onClick:()=>v("metrics"),className:h("flex-1 flex items-center justify-center gap-1.5 px-2 py-2.5 text-xxs font-rajdhani uppercase tracking-wider transition-all border-b-2",w==="metrics"?"border-thea-gold text-thea-gold-bright bg-thea-gold/10":"border-transparent text-thea-gold-dark hover:text-thea-gold"),title:"System Metrics",children:[e.jsx(fs,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Metrics"})]})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx(je,{children:e.jsxs(a.Suspense,{fallback:e.jsx(Ee,{}),children:[w==="activity"&&e.jsx(La,{}),w==="adrs"&&e.jsx(_a,{limit:10}),w==="metrics"&&e.jsx(Ia,{})]})})})]})})]}),e.jsx("div",{className:"hidden xl:block fixed bottom-4 right-4 z-40 w-80",children:e.jsx(a.Suspense,{fallback:null,children:e.jsx(Pa,{})})}),e.jsx("nav",{role:"navigation","aria-label":"Mobile navigation",className:"sm:hidden fixed bottom-0 left-0 right-0 bg-black/90 border-t border-thea-gold-dark/30 backdrop-blur-sm z-50",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:e.jsxs("div",{className:"flex justify-around py-2",children:[e.jsxs("button",{onClick:()=>{r(),c("workers"),o(!1)},className:h("flex flex-col items-center gap-1 px-4 py-2",u==="workers"?"text-thea-gold":"text-thea-gold-dark"),children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xxs font-rajdhani",children:"Home"})]}),e.jsxs("button",{onClick:()=>c("projects"),className:h("flex flex-col items-center gap-1 px-4 py-2",u==="projects"?"text-thea-gold":"text-thea-gold-dark"),children:[e.jsx(mt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xxs font-rajdhani",children:"Projects"})]}),e.jsxs("button",{onClick:()=>c("history"),className:h("flex flex-col items-center gap-1 px-4 py-2",u==="history"?"text-thea-gold":"text-thea-gold-dark"),children:[e.jsx(xt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xxs font-rajdhani",children:"History"})]}),e.jsxs("button",{onClick:()=>o(!d),className:h("flex flex-col items-center gap-1 px-4 py-2",d?"text-thea-gold":"text-thea-gold-dark"),children:[e.jsx(oe,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xxs font-rajdhani",children:"Activity"})]})]})}),e.jsx(jt,{toasts:l,onDismiss:n})]})}function Ee(){return e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"text-thea-gold-dark text-sm font-mono animate-pulse",children:"Loading..."})})}window.addEventListener("unhandledrejection",s=>{console.error("[Strategos] Unhandled promise rejection:",s.reason)});window.addEventListener("error",s=>{var t;console.error("[Strategos] Uncaught error:",((t=s.error)==null?void 0:t.message)||s.message)});Qe.createRoot(document.getElementById("root")).render(e.jsx(Nt.StrictMode,{children:e.jsx(je,{children:e.jsx(us,{children:e.jsx(Oa,{})})})}));export{Je as A,Ae as B,Ke as C,lt as D,pa as E,Ns as F,vs as G,Dt as H,Es as I,ys as J,tt as K,Te as L,at as M,fe as N,Qs as O,Ls as P,Bt as Q,Wa as R,Bs as S,Us as T,Hs as U,pt as V,fs as W,le as X,Vs as Y,ne as Z,h as a,Et as b,T as c,ks as d,Re as e,ee as f,ze as g,xt as h,oe as i,e as j,Ue as k,Ba as l,Wt as m,Ft as n,ta as o,he as p,na as q,ya as r,la as s,Gs as t,ke as u,Tt as v,Ts as w,Rt as x,nt as y,Ua as z};
