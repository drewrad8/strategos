const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProjectsView-JrVt0VgO.js","assets/vendor-react-wGySg1uH.js","assets/server-BA-IBQGH.js","assets/play-circle-DzQUAGyb.js","assets/tag-BuMAROJJ.js","assets/vendor-socket-TjCxX7sJ.js","assets/vendor-terminal-CyaXSNWE.js","assets/VoiceModeView-KoqpB_B_.js","assets/CheckpointsView-DEL-84UJ.js","assets/check-circle-2-DTwfEyTy.js","assets/RalphPanel-qk4--n6p.js","assets/VoiceControl-B5cmUIcr.js","assets/ActivityFeed-MsQdCZvi.js","assets/ADRPanel-CKiho6C_.js","assets/MetricsDashboard-CPGgXVi6.js"])))=>i.map(i=>d[i]);
import{r as s,a as Ht,R as vt}from"./vendor-react-wGySg1uH.js";import{l as Gt}from"./vendor-socket-TjCxX7sJ.js";import{x as qt,a as Kt,b as Xt}from"./vendor-terminal-CyaXSNWE.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function l(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=l(r);fetch(r.href,i)}})();var Nt={exports:{}},He={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zt=s,Yt=Symbol.for("react.element"),Qt=Symbol.for("react.fragment"),Jt=Object.prototype.hasOwnProperty,ea=Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ta={key:!0,ref:!0,__self:!0,__source:!0};function St(a,t,l){var n,r={},i=null,c=null;l!==void 0&&(i=""+l),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(c=t.ref);for(n in t)Jt.call(t,n)&&!ta.hasOwnProperty(n)&&(r[n]=t[n]);if(a&&a.defaultProps)for(n in t=a.defaultProps,t)r[n]===void 0&&(r[n]=t[n]);return{$$typeof:Yt,type:a,key:i,ref:c,props:r,_owner:ea.current}}He.Fragment=Qt;He.jsx=St;He.jsxs=St;Nt.exports=He;var e=Nt.exports,Ye={},it=Ht;Ye.createRoot=it.createRoot,Ye.hydrateRoot=it.hydrateRoot;const aa="modulepreload",sa=function(a){return"/"+a},ct={},he=function(t,l,n){let r=Promise.resolve();if(l&&l.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),o=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));r=Promise.allSettled(l.map(u=>{if(u=sa(u),u in ct)return;ct[u]=!0;const d=u.endsWith(".css"),y=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${y}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":aa,d||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),d)return new Promise((j,w)=>{g.addEventListener("load",j),g.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(c){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=c,window.dispatchEvent(o),!o.defaultPrevented)throw c}return r.then(c=>{for(const o of c||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},ra="";function na(){const[a,t]=s.useState(null),[l,n]=s.useState(!1),r=s.useRef(null),i=s.useRef([]);s.useEffect(()=>{const y=Gt(ra,{transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:1e4,randomizationFactor:.5,timeout:45e3});return y.on("connect",()=>{n(!0)}),y.on("disconnect",g=>{n(!1),g==="io server disconnect"&&y.connect()}),y.on("connect_error",g=>{console.error("Socket connection error:",g.message||g),n(!1)}),y.on("reconnect_error",g=>{console.warn("Socket reconnection error:",g.message||g)}),r.current=y,t(y),()=>{i.current.forEach(({event:g,handler:j})=>{y.off(g,j)}),i.current=[],y.disconnect()}},[]);const c=s.useCallback((d,y)=>{var g;(g=r.current)!=null&&g.connected&&r.current.emit(d,y)},[]),o=s.useCallback((d,y)=>r.current?(r.current.on(d,y),i.current.push({event:d,handler:y}),()=>{var g;(g=r.current)==null||g.off(d,y),i.current=i.current.filter(j=>!(j.event===d&&j.handler===y))}):()=>{},[]),u=s.useCallback((d,y)=>{var g;(g=r.current)==null||g.off(d,y),i.current=i.current.filter(j=>!(j.event===d&&j.handler===y))},[]);return{socket:a,connected:l,emit:c,on:o,off:u}}const la="";function J(a,t={}){const l={...t.headers};return fetch(`${la}${a}`,{...t,headers:l})}const Ct=s.createContext(null),oa=50;let ia=0,ca=0;const X={SINGLE:"single",SPLIT_H:"split-h",SPLIT_V:"split-v",GRID_2X2:"grid-2x2",GRID_3X2:"grid-3x2",CUSTOM:"custom"},Fe=()=>`pane-${++ca}`;function da({children:a}){const{socket:t,connected:l,emit:n,on:r}=na(),[i,c]=s.useState([]),[o,u]=s.useState([]),[d,y]=s.useState([]),[g,j]=s.useState({}),[w,_]=s.useState(null),[b,I]=s.useState(null),[T,p]=s.useState([]),[O,k]=s.useState(null),[z,F]=s.useState({}),[W,V]=s.useState(!1),[R,M]=s.useState([]),C=s.useRef({}),f=s.useRef(i),H=s.useRef(b);s.useEffect(()=>{f.current=i},[i]),s.useEffect(()=>{H.current=b},[b]);const[B,Y]=s.useState(X.SINGLE),[ee,Q]=s.useState([{id:Fe(),workerId:null,viewMode:"terminal"}]),[xe,oe]=s.useState(null),[me,$]=s.useState(null),Z=s.useRef(ee);Z.current=ee;const L=s.useCallback(v=>{const E=++ia;return p(U=>{const x=[...U,{...v,id:E}];return x.length>50?x.slice(-50):x}),E},[]),ae=s.useCallback(v=>{p(E=>E.filter(U=>U.id!==v))},[]),te=s.useRef(!1);s.useEffect(()=>{if(l){const v=te.current;if(te.current=!0,se(),v&&t){W&&(V(!1),t.emit("metrics:subscribe"),V(!0));const E=new Set,U=H.current;U&&(t.emit("worker:attach",{workerId:U}),E.add(U));for(const x of Z.current)x.workerId&&!E.has(x.workerId)&&(t.emit("worker:output:subscribe",{workerId:x.workerId}),E.add(x.workerId))}L({type:"success",title:v?"Reconnected to Strategos":"Connected to Strategos",message:v?"Connection restored":"Real-time updates enabled",duration:3e3})}else te.current&&L({type:"warning",title:"Connection Lost",message:"Attempting to reconnect...",duration:5e3})},[l,t]),s.useEffect(()=>{if(!t)return;const E=Object.fromEntries(Object.entries({"workers:list":x=>c(x),"worker:created":x=>{c(S=>[...S,x]),L({type:"success",title:"Worker Spawned",message:`${x.label} is now running`,duration:4e3})},"worker:updated":x=>{c(S=>S.map(D=>D.id===x.id?x:D))},"worker:deleted":({workerId:x})=>{const S=f.current.find(D=>D.id===x);c(D=>D.filter(K=>K.id!==x)),H.current===x&&I(null),clearTimeout(C.current[x]),delete C.current[x],j(D=>{const K={...D};return delete K[x],K}),F(D=>{const K={...D};return delete K[x],K}),L({type:"info",title:"Worker Stopped",message:(S==null?void 0:S.label)||x,duration:3e3})},"worker:output":({workerId:x,output:S})=>{clearTimeout(C.current[x]),C.current[x]=setTimeout(()=>{const K=typeof S=="string"&&S.length>2097152?S.slice(-2097152):S;j(de=>({...de,[x]:K}))},oa)},"activity:list":x=>y(x),"activity:new":x=>y(S=>[x,...S].slice(0,100)),"metrics:update":x=>{x.system&&k(x.system),x.worker&&F(S=>({...S,[x.worker.workerId]:x.worker}))},error:x=>{L({type:"error",title:"Error",message:x.message||"An error occurred",duration:5e3})},"worker:crashed":({workerId:x,label:S,reason:D})=>{L({type:"error",title:"Worker Crashed",message:`${S}: ${D||"Unknown error"}`,duration:1e4})},"worker:stalled":({workerId:x,label:S,stalledMinutes:D})=>{L({type:"warning",title:"Worker Stalled",message:`${S} — no output for ${D} min`,duration:8e3})},"worker:general:dead":({workerId:x,label:S,message:D})=>{L({type:"error",title:"GENERAL Down",message:`${S} — requires human intervention`,duration:0})},"worker:respawned":({oldWorkerId:x,newWorkerId:S,label:D,attempt:K})=>{L({type:"info",title:"Worker Respawned",message:`${D} (attempt ${K})`,duration:6e3})},"worker:kill:blocked":({workerId:x,label:S,reason:D})=>{L({type:"warning",title:"Kill Blocked",message:`${S} is protected (${D})`,duration:6e3})},"worker:completed":({workerId:x,worker:S})=>{L({type:"success",title:"Worker Completed",message:(S==null?void 0:S.label)||x,duration:4e3})},"worker:blocked":({workerId:x,label:S})=>{L({type:"warning",title:"Worker Blocked",message:`${S||x} is blocked`,duration:6e3})},"worker:awaiting_review":({workerId:x,label:S})=>{L({type:"info",title:"Review Needed",message:`${S||x} awaiting review`,duration:1e4})},"dependencies:triggered":({completedWorkerId:x,triggeredWorkerIds:S})=>{(S==null?void 0:S.length)>0&&L({type:"info",title:"Dependencies Triggered",message:`${S.length} worker(s) unblocked`,duration:4e3})},"worker:child:signaled":({parentWorkerId:x,childWorkerId:S,status:D})=>{D==="done"&&L({type:"info",title:"Child Worker Done",message:`Child ${S==null?void 0:S.slice(0,8)} signaled to parent`,duration:3e3})},"worker:queue:error":x=>{L({type:"error",title:"Queue Error",message:`Queue error for worker: ${(x==null?void 0:x.error)||"Unknown error"}`,duration:5e3})},"workers:pending":x=>{M(Array.isArray(x)?x:[])},"worker:bulldoze:paused":({workerId:x,reason:S,cyclesCompleted:D})=>{const K=f.current.find(de=>de.id===x);L({type:"warning",title:"Bulldoze Paused",message:`${(K==null?void 0:K.label)||x}: ${S}`,duration:8e3})},"worker:bulldoze:cycle":({workerId:x,cycle:S,isAudit:D})=>{if(D){const K=f.current.find(de=>de.id===x);L({type:"info",title:"Bulldoze Audit",message:`${(K==null?void 0:K.label)||x} cycle ${S}`,duration:3e3})}}}).map(([x,S])=>[x,(...D)=>{try{S(...D)}catch(K){console.error(`[Socket] Handler error for "${x}":`,K)}}])),U=Object.entries(E).map(([x,S])=>r(x,S));return()=>U.forEach(x=>x())},[t,r,L]),s.useEffect(()=>()=>{Object.values(C.current).forEach(clearTimeout)},[]),s.useEffect(()=>{if(!b||!l)return;const v=new AbortController,U=setInterval(async()=>{try{const x=await J(`/api/workers/${b}/output`,{signal:v.signal});if(!x.ok)return;const S=await x.json();S.output&&j(D=>D[b]===S.output?D:{...D,[b]:S.output})}catch{}},5e3);return()=>{v.abort(),clearInterval(U)}},[b,l]);const se=s.useCallback(async()=>{try{const v=await J("/api/projects");if(!v.ok)throw new Error(`HTTP ${v.status}`);const E=await v.json();u(E)}catch(v){L({type:"error",title:"Failed to fetch projects",message:v.message,duration:5e3})}},[L]),ie=s.useCallback((v,E)=>(n("worker:spawn",{projectPath:v,label:E}),new Promise(U=>{setTimeout(U,100)})),[n]),Re=s.useCallback(v=>{n("worker:kill",{workerId:v})},[n]),Pe=s.useCallback((v,E)=>{n("worker:input",{workerId:v,input:E})},[n]),Le=s.useCallback((v,E)=>{n("worker:rawInput",{workerId:v,keys:E})},[n]),G=s.useCallback((v,E,U)=>{n("worker:resize",{workerId:v,cols:E,rows:U})},[n]),_e=s.useCallback((v,E)=>{n("worker:updateLabel",{workerId:v,label:E})},[n]),je=s.useCallback((v,E)=>{n("worker:settings",{workerId:v,settings:E})},[n]),we=s.useCallback((v,E)=>{n("project:broadcast",{projectName:v,input:E})},[n]),ve=s.useCallback(async(v,E,U,x)=>{const S=`GENERAL: ${E.slice(0,60)}`;try{return await(await J("/api/workers/spawn-from-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:"general",label:S,projectPath:v,task:{description:E},bulldozeMode:!0,bulldozeMission:E,bulldozeBacklog:U||"",bulldozeStandingOrders:x||""})})).json()}catch(D){return L({type:"error",title:"Spawn Failed",message:D.message,duration:5e3}),null}},[L]),N=s.useCallback(v=>{I(E=>(E&&E!==v&&n("worker:output:unsubscribe",{workerId:E}),v)),n("worker:attach",{workerId:v})},[n]),Ne=s.useCallback(()=>{I(v=>(v&&n("worker:output:unsubscribe",{workerId:v}),null))},[n]),pe=s.useCallback(v=>{n("worker:output:subscribe",{workerId:v})},[n]),ce=s.useCallback(v=>{n("worker:output:unsubscribe",{workerId:v})},[n]),Ie=s.useCallback(()=>{W||!t||(n("metrics:subscribe"),V(!0))},[n,W,t]),De=s.useCallback(()=>{!W||!t||(n("metrics:unsubscribe"),V(!1))},[n,W,t]),m=s.useCallback(async v=>{try{const E=await J(`/api/metrics/worker/${v}`);if(!E.ok){if(E.status===404)return null;throw new Error("Failed to fetch worker metrics")}const U=await E.json();return F(x=>({...x,[v]:U})),U}catch{return null}},[]),P=s.useCallback(async()=>{try{const v=await J("/api/metrics/system");if(!v.ok){if(v.status===404)return null;throw new Error("Failed to fetch system metrics")}const E=await v.json();return k(E),E}catch{return null}},[]),q=s.useCallback((v=null)=>{const E={id:Fe(),workerId:v,viewMode:"terminal"};return Q(U=>[...U,E]),oe(E.id),B===X.SINGLE&&Y(X.SPLIT_H),E.id},[B]),ge=s.useCallback(v=>{Q(E=>{const U=E.filter(x=>x.id!==v);return U.length===0?[{id:Fe(),workerId:null,viewMode:"terminal"}]:U}),oe(E=>E===v?null:E)},[]),Se=s.useCallback((v,E)=>{Q(U=>{const x=U.find(S=>S.id===v);return x!=null&&x.workerId&&x.workerId!==E&&n("worker:output:unsubscribe",{workerId:x.workerId}),U.map(S=>S.id===v?{...S,workerId:E}:S)}),E&&n("worker:attach",{workerId:E})},[n]),Ce=s.useCallback((v,E)=>{Q(U=>U.map(x=>x.id===v?{...x,viewMode:E}:x))},[]),Oe=s.useCallback(v=>{Y(v);const U={[X.SINGLE]:1,[X.SPLIT_H]:2,[X.SPLIT_V]:2,[X.GRID_2X2]:4,[X.GRID_3X2]:6,[X.CUSTOM]:ee.length}[v]||1,x=ee.length;if(U>x){const S=new Set(ee.map(ke=>ke.workerId).filter(Boolean)),D=i.filter(ke=>!S.has(ke.id)),K=[...ee];let de=0;for(let ke=x;ke<U;ke++){const $e=D[de];K.push({id:Fe(),workerId:($e==null?void 0:$e.id)||null,viewMode:"terminal"}),$e&&de++}Q(K)}else U<x&&v!==X.CUSTOM&&Q(ee.slice(0,U));$(null)},[ee,i]),lt=s.useCallback(v=>{const E=q(v);return B===X.SINGLE&&Oe(X.SPLIT_H),E},[q,B,Oe]),ot=s.useCallback((v,E)=>{Q(U=>{const x=U.find(D=>D.id===v),S=U.find(D=>D.id===E);return!x||!S?U:U.map(D=>D.id===v?{...D,workerId:S.workerId}:D.id===E?{...D,workerId:x.workerId}:D)})},[]),Vt=s.useMemo(()=>({connected:l,workers:i,projects:o,activity:d,outputs:g,selectedProject:w,focusedWorker:b,toasts:T,systemMetrics:O,workerMetrics:z,metricsSubscribed:W,pendingWorkers:R,layoutMode:B,panes:ee,activePaneId:xe,paneSizes:me,setSelectedProject:_,setFocusedWorker:I,setActivePaneId:oe,setPaneSizes:$,fetchProjects:se,spawnWorker:ie,killWorker:Re,sendInput:Pe,sendRawInput:Le,resizeTerminal:G,updateWorkerLabel:_e,updateWorkerSettings:je,broadcastToProject:we,spawnAutonomousSession:ve,attachToWorker:N,detachFromWorker:Ne,subscribeToWorkerOutput:pe,unsubscribeFromWorkerOutput:ce,addToast:L,dismissToast:ae,subscribeToMetrics:Ie,unsubscribeFromMetrics:De,fetchWorkerMetrics:m,fetchSystemMetrics:P,addPane:q,removePane:ge,setPaneWorker:Se,setPaneViewMode:Ce,changeLayoutMode:Oe,openWorkerInNewPane:lt,swapPaneWorkers:ot}),[l,i,o,d,g,w,b,T,O,z,W,R,B,ee,xe,me,se,ie,Re,Pe,Le,G,_e,je,we,ve,N,Ne,pe,ce,L,ae,Ie,De,m,P,q,ge,Se,Ce,Oe,lt,ot]);return e.jsx(Ct.Provider,{value:Vt,children:a})}function fe(){const a=s.useContext(Ct);if(!a)throw new Error("useOrchestrator must be used within OrchestratorProvider");return a}function ua(){const a=()=>{if(typeof window>"u")return"lg";const i=window.innerWidth;return i<640?"xs":i<768?"sm":i<1024?"md":i<1280?"lg":"xl"},[t,l]=s.useState(a),[n,r]=s.useState(typeof window<"u"?window.innerWidth:1024);return s.useEffect(()=>{let i;const c=()=>{clearTimeout(i),i=setTimeout(()=>{const o=a(),u=window.innerWidth;l(d=>d!==o?o:d),r(d=>Math.abs(u-d)>50?u:d)},100)};return window.addEventListener("resize",c),window.addEventListener("orientationchange",c),c(),()=>{clearTimeout(i),window.removeEventListener("resize",c),window.removeEventListener("orientationchange",c)}},[]),{breakpoint:t,windowWidth:n,isMobile:t==="xs"||t==="sm",isTablet:t==="md",isDesktop:t==="lg"||t==="xl",isLargeDesktop:t==="xl"}}function ha({setActiveTab:a,detachFromWorker:t,setShowActivity:l,hasFocusedWorker:n,showActivity:r}){const i=s.useRef(null),c=s.useRef(null),o=s.useCallback(()=>{i.current=null,clearTimeout(c.current),c.current=null},[]);s.useEffect(()=>{function u(d){const y=d.target.tagName;if(y==="INPUT"||y==="TEXTAREA"||y==="SELECT"||d.target.isContentEditable||d.target.closest('[role="dialog"]')||d.target.closest("dialog"))return;if((d.ctrlKey||d.metaKey)&&d.key==="k"){d.preventDefault(),dt();return}if(d.ctrlKey||d.metaKey||d.altKey)return;if(i.current==="g"){if(o(),d.key==="t"){d.preventDefault(),ut('[title="Tree View"]');return}if(d.key==="g"){d.preventDefault(),ut('[title="Grid View"]');return}}if(d.key==="g"){i.current="g",c.current=setTimeout(o,500);return}if(d.key==="Escape"){if(r){l(!1);return}if(n){t();return}return}if(d.key==="/"){d.preventDefault(),dt();return}const g={1:"workers",2:"projects",3:"ralph",4:"history"};if(g[d.key]){a(g[d.key]);return}if(d.key==="?"&&d.shiftKey){const j=document.querySelector("[data-shortcut-help]");j&&j.click();return}}return document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u),clearTimeout(c.current)}},[a,t,l,n,r,o])}function dt(){const a=document.querySelector('input[placeholder*="Search"]');a&&(a.focus(),a.select())}function ut(a){const t=document.querySelector(a);t&&t.click()}const xa=[{label:"Navigation",shortcuts:[{keys:["1"],description:"Workers tab"},{keys:["2"],description:"Projects tab"},{keys:["3"],description:"Ralph tab"},{keys:["4"],description:"History tab"}]},{label:"Views",shortcuts:[{keys:["g","t"],description:"Tree view"},{keys:["g","g"],description:"Grid view"},{keys:["Esc"],description:"Back to grid / close sidebar"}]},{label:"Search",shortcuts:[{keys:["/"],description:"Focus search"},{keys:["Ctrl","K"],description:"Focus search"}]}];/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ma={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),A=(a,t)=>{const l=s.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:u,...d},y)=>s.createElement("svg",{ref:y,...ma,width:r,height:r,stroke:n,strokeWidth:c?Number(i)*24/Number(r):i,className:["lucide",`lucide-${pa(a)}`,o].join(" "),...d},[...t.map(([g,j])=>s.createElement(g,j)),...Array.isArray(u)?u:[u]]));return l.displayName=`${a}`,l};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=A("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=A("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=A("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=A("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=A("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=A("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=A("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=A("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=A("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=A("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=A("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=A("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=A("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=A("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=A("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=A("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=A("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=A("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=A("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=A("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=A("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=A("Grid2x2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=A("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=A("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=A("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=A("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=A("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=A("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=A("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=A("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=A("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=A("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=A("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=A("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=A("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=A("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=A("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=A("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=A("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=A("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=A("Rows2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=A("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=A("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=A("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=A("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=A("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=A("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=A("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=A("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=A("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=A("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=A("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=A("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=A("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=A("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=A("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=A("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=A("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=A("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=A("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=A("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=A("ZapOff",[["polyline",{points:"12.41 6.75 13 2 10.57 4.92",key:"122m05"}],["polyline",{points:"18.57 12.91 21 10 15.66 10",key:"16r43o"}],["polyline",{points:"8 8 3 14 12 14 11 22 16 16",key:"tmh4bc"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=A("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Za(a){return a&&a.replace(/\\u001b/g,"\x1B")}const Lt=s.memo(function({workerId:t,output:l,onInput:n,onRawInput:r,onResize:i,className:c=""}){const o=s.useRef(null),u=s.useRef(null),d=s.useRef(null),y=s.useRef(0),g=s.useRef({cols:0,rows:0}),j=s.useRef(null),[w,_]=s.useState(!1),b=s.useRef(r),I=s.useRef(n),T=s.useRef(i);return s.useEffect(()=>{b.current=r,I.current=n,T.current=i}),s.useEffect(()=>{if(!o.current)return;y.current=0,_(!1);const p=o.current,O=13,k=new qt.Terminal({theme:{background:"#0a0a0a",foreground:"#DAA520",cursor:"#FFD700",cursorAccent:"#000000",selection:"rgba(218, 165, 32, 0.3)",black:"#0a0a0a",red:"#8B0000",green:"#DAA520",yellow:"#FFD700",blue:"#4169E1",magenta:"#660000",cyan:"#20B2AA",white:"#FFFFFF",brightBlack:"#333333",brightRed:"#DC143C",brightGreen:"#FFD700",brightYellow:"#FFEC8B",brightBlue:"#6495ED",brightMagenta:"#8B0000",brightCyan:"#40E0D0",brightWhite:"#FFFFFF"},fontFamily:'"Share Tech Mono", "Courier New", monospace',fontSize:O,lineHeight:1.2,cursorBlink:!0,cursorStyle:"block",scrollback:1e3,convertEol:!0}),z=new Kt.FitAddon;k.loadAddon(z),u.current=k,d.current=z,k.open(p);try{const C=new Xt.WebglAddon;C.onContextLoss(()=>{C.dispose()}),k.loadAddon(C)}catch(C){console.warn("WebGL addon failed, using DOM renderer:",C.message)}const F=()=>{const C=u.current;if(!C)return;const{cols:f,rows:H}=C,B=g.current;(f!==B.cols||H!==B.rows)&&(g.current={cols:f,rows:H},T.current&&T.current(f,H))};let W=setTimeout(()=>{W=null;try{z.fit(),F()}catch(C){console.warn("Fit error:",C)}_(!0)},100),V;const R=()=>{clearTimeout(V),V=setTimeout(()=>{try{d.current&&o.current&&(d.current.fit(),F())}catch{}},150)},M=new ResizeObserver(R);if(M.observe(p),b.current)k.onKey(({key:C,domEvent:f})=>{var Y;const H=f;let B=null;switch(H.keyCode){case 38:B="\x1B[A";break;case 40:B="\x1B[B";break;case 39:B="\x1B[C";break;case 37:B="\x1B[D";break;case 13:B="\r";break;case 27:B="\x1B";break;case 9:B="	";break;case 8:B="";break;default:C&&(B=C)}B&&(H.preventDefault(),(Y=b.current)==null||Y.call(b,B))}),k.onData(C=>{var f;C.length>1&&((f=b.current)==null||f.call(b,C))});else if(I.current){let C="";k.onKey(({key:f,domEvent:H})=>{var Y;const B=H;B.keyCode===13?(k.write(`\r
`),C.trim()&&((Y=I.current)==null||Y.call(I,C)),C=""):B.keyCode===8?C.length>0&&(C=C.slice(0,-1),k.write("\b \b")):!B.ctrlKey&&!B.altKey&&!B.metaKey&&f.length===1&&(C+=f,k.write(f))})}return()=>{W&&clearTimeout(W),clearTimeout(V),j.current&&clearTimeout(j.current),M.disconnect(),k.dispose(),u.current=null,d.current=null}},[t]),s.useEffect(()=>{const p=u.current,O=o.current;if(!p||!w||!O||!l)return;const k=Za(l),z=k.length+":"+k.slice(-200);if(z===y.current)return;y.current=z;let F=k.replace(/\x1b\[\d*[ABCD]/g,"").replace(/\x1b\[\d+;\d+[Hf]/g,"").replace(/\x1b\[\d+G/g,"").replace(/\x1b\[[su]/g,"").replace(/\x1b\[[12]J/g,"").replace(/\x1b\[[012]?K/g,"");const W=500,V=F.split(`
`);V.length>W&&(F=V.slice(-W).join(`
`)),j.current&&clearTimeout(j.current);const R=F;j.current=setTimeout(()=>{j.current=null;const M=u.current;if(!M)return;const C=M.buffer.active,f=C.baseY===0||C.viewportY>=C.baseY;M.reset(),M.write(R,()=>{f&&M.scrollToBottom()})},100)},[l,w,t]),e.jsx("div",{ref:o,className:`bg-thea-nearBlack rounded border border-thea-gold-dark/30 overflow-hidden ${c}`,style:{opacity:w?1:.5,transition:"opacity 0.2s",maxWidth:"100%",contain:"strict"}})});function _t(a){var t,l,n="";if(typeof a=="string"||typeof a=="number")n+=a;else if(typeof a=="object")if(Array.isArray(a)){var r=a.length;for(t=0;t<r;t++)a[t]&&(l=_t(a[t]))&&(n&&(n+=" "),n+=l)}else for(l in a)a[l]&&(n&&(n+=" "),n+=l);return n}function h(){for(var a,t,l=0,n="",r=arguments.length;l<r;l++)(a=arguments[l])&&(t=_t(a))&&(n&&(n+=" "),n+=t);return n}function Ya({score:a=null,status:t=null,size:l="md",showScore:n=!0,className:r}){const i=t||It(a),c={healthy:{icon:Ca,color:"text-green-400",bgColor:"bg-green-500/20",borderColor:"border-green-500/30",glow:"shadow-[0_0_8px_rgba(74,222,128,0.4)]",label:"Healthy"},warning:{icon:Be,color:"text-yellow-400",bgColor:"bg-yellow-500/20",borderColor:"border-yellow-500/30",glow:"shadow-[0_0_8px_rgba(250,204,21,0.4)]",label:"Warning"},critical:{icon:Xa,color:"text-red-400",bgColor:"bg-red-500/20",borderColor:"border-red-500/30",glow:"shadow-[0_0_8px_rgba(248,113,113,0.4)]",label:"Critical"},unknown:{icon:le,color:"text-thea-gold-dark",bgColor:"bg-thea-gold/10",borderColor:"border-thea-gold-dark/30",glow:"",label:"Unknown"}},o={sm:{container:"gap-1 px-1.5 py-0.5",icon:"w-3 h-3",text:"text-xxs"},md:{container:"gap-1.5 px-2 py-1",icon:"w-3.5 h-3.5",text:"text-xs"},lg:{container:"gap-2 px-3 py-1.5",icon:"w-4 h-4",text:"text-sm"}},{icon:u,color:d,bgColor:y,borderColor:g,glow:j}=c[i]||c.unknown,w=o[l]||o.md;return e.jsxs("div",{className:h("inline-flex items-center rounded border font-mono",y,g,d,j,w.container,r),title:`Health: ${a!==null?`${a}%`:"Unknown"}`,children:[e.jsx(u,{className:h(w.icon,i==="healthy"&&"animate-pulse")}),n&&a!==null&&e.jsx("span",{className:w.text,children:a})]})}function It(a){return a==null?"unknown":a>=80?"healthy":a>=50?"warning":"critical"}function Dt({score:a,status:t,size:l="md",className:n}){const r=t||It(a),i={healthy:"bg-green-400 shadow-[0_0_6px_rgba(74,222,128,0.6)]",warning:"bg-yellow-400 shadow-[0_0_6px_rgba(250,204,21,0.6)]",critical:"bg-red-400 shadow-[0_0_6px_rgba(248,113,113,0.6)]",unknown:"bg-thea-gold-dark/50"},c={sm:"w-1.5 h-1.5",md:"w-2 h-2",lg:"w-2.5 h-2.5"};return e.jsx("span",{className:h("inline-block rounded-full",i[r]||i.unknown,c[l]||c.md,r!=="unknown"&&"animate-pulse",n),title:`Health: ${a!==null?`${a}%`:"Unknown"}`})}const Ot=[{group:"Strategic",color:"text-yellow-400",bgColor:"bg-yellow-400/10",borderColor:"border-yellow-400/50",roles:[{prefix:"GENERAL",label:"General",icon:Fa,description:"Strategic orchestrator"}]},{group:"Operational",color:"text-blue-400",bgColor:"bg-blue-400/10",borderColor:"border-blue-400/50",roles:[{prefix:"COLONEL",label:"Colonel",icon:Pt,description:"Domain supervisor"}]},{group:"Tactical",color:"text-green-400",bgColor:"bg-green-400/10",borderColor:"border-green-400/50",roles:[{prefix:"RESEARCH",label:"Research",icon:Rt,description:"Information gathering"},{prefix:"IMPL",label:"Implement",icon:Et,description:"Implementation"},{prefix:"TEST",label:"Test",icon:va,description:"Testing"},{prefix:"REVIEW",label:"Review",icon:ja,description:"Code review"},{prefix:"FIX",label:"Fix",icon:Ka,description:"Bug fixes"}]},{group:"Other",color:"text-thea-gold",bgColor:"bg-thea-gold/10",borderColor:"border-thea-gold/50",roles:[{prefix:"",label:"Default",icon:Ke,description:"Standard worker"}]}];function Qa(a){for(const t of Ot)for(const l of t.roles)if(l.prefix===a||a&&l.prefix&&a.startsWith(l.prefix))return{...l,groupColor:t.color,bgColor:t.bgColor,borderColor:t.borderColor};return null}function ue(a){if(!a)return{prefix:"",displayName:a||""};const t=a.match(/^([A-Z]+):\s*(.*)$/);return t?{prefix:t[1],displayName:t[2]}:{prefix:"",displayName:a}}function Ws({onSelect:a,position:t="below",triggerRef:l,isOpen:n,onClose:r}){const i=s.useRef(null);s.useEffect(()=>{function o(u){i.current&&!i.current.contains(u.target)&&(l!=null&&l.current)&&!l.current.contains(u.target)&&(r==null||r())}if(n)return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[n,l,r]),s.useEffect(()=>{function o(u){u.key==="Escape"&&(r==null||r())}if(n)return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[n,r]);const c=o=>{a(o),r==null||r()};return n?e.jsxs("div",{ref:i,className:h("absolute z-50 min-w-[200px] max-w-[280px]","bg-black/95 border border-thea-gold/50 shadow-lg shadow-black/50","backdrop-blur-sm",t==="below"?"top-full mt-1":"bottom-full mb-1","right-0 clip-cyber-sm"),onClick:o=>o.stopPropagation(),children:[e.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 border-t border-r border-thea-gold-bright opacity-70"}),e.jsx("div",{className:"py-1",children:Ot.map(o=>e.jsxs("div",{children:[e.jsx("div",{className:h("px-3 py-1.5 text-xxs font-orbitron uppercase tracking-wider",o.color,"border-b border-thea-gold-dark/20"),children:o.group}),o.roles.map(u=>{const d=u.icon;return e.jsxs("button",{onClick:()=>c(u.prefix),className:h("w-full flex items-center gap-3 px-3 py-2","hover:bg-thea-gold/10 transition-colors","text-left"),children:[e.jsx(d,{className:h("w-4 h-4 flex-shrink-0",o.color)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-rajdhani text-white",children:u.label}),e.jsx("div",{className:"text-xxs text-thea-gold-dark truncate",children:u.description})]})]},u.prefix||"default")})]},o.group))})]}):null}function $t({label:a,size:t="sm"}){const{prefix:l}=ue(a),n=Qa(l);if(!n||!l)return null;const r=n.icon,i={sm:"text-xxs px-1.5 py-0.5 gap-1",md:"text-xs px-2 py-1 gap-1.5"};return e.jsxs("span",{className:h("inline-flex items-center font-mono uppercase tracking-wider","border",n.bgColor,n.borderColor,n.groupColor,i[t]),children:[e.jsx(r,{className:h(t==="sm"?"w-3 h-3":"w-3.5 h-3.5")}),l]})}function Ve({isOpen:a,onClose:t,onConfirm:l,workerLabel:n,showProjectPicker:r=!1,projects:i=[],onProjectChange:c,selectedProject:o}){const[u,d]=s.useState(""),[y,g]=s.useState(""),[j,w]=s.useState(""),[_,b]=s.useState(!1),I=s.useRef(null);if(s.useEffect(()=>{if(a&&I.current){const p=setTimeout(()=>{var O;return(O=I.current)==null?void 0:O.focus()},50);return()=>clearTimeout(p)}},[a]),s.useEffect(()=>{if(!a)return;const p=O=>{O.key==="Escape"&&t()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[a,t]),s.useEffect(()=>{a&&(d(""),g(""),w(""),b(!1))},[a]),!a)return null;const T=()=>{u.trim()&&l({mission:u.trim(),backlog:y.trim(),standingOrders:j.trim()})};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:p=>{p.target===p.currentTarget&&t()},role:"dialog","aria-modal":"true","aria-labelledby":"bulldoze-modal-title",children:e.jsxs("div",{className:"w-full max-w-lg mx-4 bg-[#0a0a0a] border border-thea-gold/40 shadow-lg shadow-black/60 clip-cyber-lg",children:[e.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-thea-gold-bright opacity-60"}),e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-thea-gold-dark/30",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{className:"w-5 h-5 text-amber-400"}),e.jsx("h2",{id:"bulldoze-modal-title",className:"font-rajdhani font-bold text-lg text-thea-gold-bright uppercase tracking-wider",children:r?"New Autonomous Session":"Configure Bulldoze Mode"})]}),e.jsx("button",{onClick:t,className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors","aria-label":"Close dialog",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-5 py-4 space-y-4 max-h-[70vh] overflow-y-auto",children:[!r&&n&&e.jsxs("div",{className:"text-xs font-mono text-thea-gold-dark/70 truncate",children:["Target: ",e.jsx("span",{className:"text-thea-gold",children:n})]}),r&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-rajdhani text-thea-gold mb-1.5 uppercase tracking-wider",children:"Project"}),e.jsxs("select",{value:o||"",onChange:p=>c==null?void 0:c(p.target.value),className:"w-full bg-black border border-thea-gold-dark/30 text-white px-3 py-2 text-sm font-mono focus:outline-none focus:border-thea-gold/60 transition-colors",children:[e.jsx("option",{value:"",children:"Select a project..."}),i.map(p=>e.jsx("option",{value:p.path||p.name,children:p.name},p.path||p.name))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-rajdhani text-thea-gold mb-1.5 uppercase tracking-wider",children:["Mission ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("textarea",{ref:I,value:u,onChange:p=>d(p.target.value),placeholder:"What should this general focus on?",rows:3,className:"w-full bg-black border border-thea-gold-dark/30 text-white px-3 py-2 text-sm font-mono placeholder-thea-gold-dark/40 resize-none focus:outline-none focus:border-thea-gold/60 transition-colors","aria-required":"true"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-rajdhani text-thea-gold mb-1.5 uppercase tracking-wider",children:"Backlog"}),e.jsx("textarea",{value:y,onChange:p=>g(p.target.value),placeholder:"Specific tasks, one per line",rows:3,className:"w-full bg-black border border-thea-gold-dark/30 text-white px-3 py-2 text-sm font-mono placeholder-thea-gold-dark/40 resize-none focus:outline-none focus:border-thea-gold/60 transition-colors"})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>b(!_),className:"flex items-center gap-2 text-sm font-rajdhani text-thea-gold-dark hover:text-thea-gold transition-colors uppercase tracking-wider","aria-expanded":_,children:[_?e.jsx(ka,{className:"w-4 h-4"}):e.jsx(qe,{className:"w-4 h-4"}),"Standing Orders"]}),_&&e.jsx("textarea",{value:j,onChange:p=>w(p.target.value),placeholder:"Persistent rules that survive compaction",rows:3,className:"w-full mt-2 bg-black border border-thea-gold-dark/30 text-white px-3 py-2 text-sm font-mono placeholder-thea-gold-dark/40 resize-none focus:outline-none focus:border-thea-gold/60 transition-colors"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 px-5 py-4 border-t border-thea-gold-dark/30",children:[e.jsx("button",{onClick:t,className:"thea-btn px-4 py-2 text-sm font-rajdhani",children:"Cancel"}),e.jsxs("button",{onClick:T,disabled:!u.trim()||r&&!o,className:h("flex items-center gap-2 px-4 py-2 text-sm font-rajdhani font-bold uppercase tracking-wider transition-all border",u.trim()&&(!r||o)?"bg-amber-500/20 border-amber-500 text-amber-300 hover:bg-amber-500/30 shadow-[0_0_8px_rgba(245,158,11,0.3)]":"bg-gray-800/50 border-gray-600 text-gray-500 cursor-not-allowed"),children:[e.jsx(re,{className:"w-4 h-4"}),r?"Launch Session":"Enable Bulldoze"]})]})]})})}const Ja={healthy:100,active:90,stalled:50,warning:40,critical:20,error:10,stopped:0};function Ft(a){return Ja[a]??null}function rt(a){if(!a||a<0)return"--";const t=Math.floor(a/1e3);if(t<60)return`${t}s`;const l=Math.floor(t/60);if(l<60)return`${l}m`;const n=Math.floor(l/60);return n<24?`${n}h ${l%60}m`:`${Math.floor(n/24)}d ${n%24}h`}function Wt(a){return a==null?"--":rt(a*1e3)}function es(a){if(!a)return"--";const t=Date.now()-new Date(a).getTime();return rt(t)}function Bs(a){try{return new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}catch{return"--"}}function ts(a){if(!a)return"--";const t=new Date(a),l=Date.now()-t.getTime(),n=Math.floor(l/6e4);if(n<1)return"just now";if(n<60)return`${n}m ago`;const r=Math.floor(n/60);if(r<24)return`${r}h ago`;const i=Math.floor(r/24);return i<7?`${i}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function nt({progress:a,className:t=""}){const l=Math.min(100,Math.max(0,a??0));return e.jsx("div",{className:h("h-1.5 bg-black/50 border border-thea-gold-dark/20 overflow-hidden",t),role:"progressbar","aria-valuenow":l,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Task progress",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-thea-gold-bright transition-all duration-500",style:{width:`${l}%`}})})}function as(a){return a.replace(/\x1b\[[0-9;]*[a-zA-Z]/g,"").replace(/\x1b\([AB]/g,"").replace(/\x1b\][^\x07]*\x07/g,"").replace(/[\x00-\x09\x0b-\x1f]/g,"").replace(/\xa0/g," ")}function ss(a){return!a||a<0?null:rt(a)}const rs=s.memo(function({worker:t,onOpenInMultiTerminal:l}){var W;const{outputs:n,workers:r,killWorker:i,updateWorkerLabel:c,attachToWorker:o,updateWorkerSettings:u}=fe(),[d,y]=s.useState(!1),[g,j]=s.useState(t.label),[w,_]=s.useState(null),[,b]=s.useState(0);s.useEffect(()=>{if(t.status!=="running")return;const V=setInterval(()=>b(R=>R+1),3e4);return()=>clearInterval(V)},[t.status]);const I=t.createdAt?ss(Date.now()-new Date(t.createdAt).getTime()):null,T=s.useMemo(()=>{if(!t.parentWorkerId)return null;const V=r.find(R=>R.id===t.parentWorkerId);return V?V.label:t.parentWorkerId.slice(0,8)},[t.parentWorkerId,r]),p=((W=t.childWorkerIds)==null?void 0:W.length)||0,O=n[t.id]||"",k=s.useMemo(()=>as(O).split(`
`).filter(R=>R.trim()).slice(-8).join(`
`),[O]),z=()=>{g.trim()&&g!==t.label&&c(t.id,g.trim()),y(!1)},F={running:"thea-badge-running",stopped:"thea-badge-stopped",error:"thea-badge-error"}[t.status]||"bg-gray-800 text-gray-400 border-gray-600";return e.jsxs("div",{"data-testid":`worker-card-${t.id}`,role:"article","aria-label":`Worker: ${t.label}`,className:"thea-card group relative p-4 clip-cyber",children:[e.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 border-t-2 border-r-2 border-thea-gold-bright opacity-50 group-hover:opacity-100 transition-opacity animate-corner-pulse"}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[d?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:g,onChange:V=>j(V.target.value),onKeyDown:V=>V.key==="Enter"&&z(),className:"bg-black/50 border border-thea-gold/50 px-2 py-1 text-sm text-thea-gold font-rajdhani rounded-none flex-1",autoFocus:!0,"aria-label":"Worker label"}),e.jsx("button",{onClick:z,className:"text-thea-gold hover:text-thea-gold-bright","aria-label":"Save label",children:e.jsx(fa,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx($t,{label:t.label,size:"sm"}),e.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright truncate",children:ue(t.label).displayName||t.label}),e.jsx("button",{onClick:()=>y(!0),className:"opacity-0 group-hover:opacity-100 text-thea-gold/50 hover:text-thea-gold transition-opacity flex-shrink-0","aria-label":"Edit worker label",children:e.jsx(Ra,{className:"w-3 h-3"})})]}),e.jsx("p",{className:"text-xs text-thea-gold-dark font-mono",children:t.project})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dt,{score:Ft(t.health),size:"md"}),t.backend==="gemini"&&e.jsx("span",{className:"thea-badge bg-blue-500/20 text-blue-300 border-blue-500/30 text-xxxs",children:"Gemini"}),e.jsx("span",{className:h("thea-badge",F),children:t.status}),t.waitingAtPrompt&&e.jsx("span",{className:"thea-badge bg-yellow-500/20 text-yellow-400 border-yellow-500/30 animate-pulse text-xxxs",children:"prompt"})]})]}),e.jsx("div",{className:"bg-black/50 border border-thea-gold-dark/20 p-2 h-32 overflow-hidden mb-3 font-mono text-xxs text-thea-gold-dark/80 leading-tight whitespace-pre-wrap",children:k||"No output yet..."}),t.ralphStatus&&e.jsxs("div",{className:"mb-3 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-3 h-3 text-purple-400 flex-shrink-0"}),e.jsx("span",{className:h("text-xxs font-mono uppercase tracking-wider",{"text-yellow-400":t.ralphStatus==="in_progress","text-green-400":t.ralphStatus==="done","text-red-400":t.ralphStatus==="blocked","text-gray-400":t.ralphStatus==="pending"}),children:t.ralphStatus==="in_progress"?"working":t.ralphStatus}),t.ralphStatus==="in_progress"&&t.ralphProgress!=null&&e.jsxs("span",{className:"text-xxs font-mono text-thea-gold-dark ml-auto",children:[t.ralphProgress,"%"]})]}),t.ralphStatus==="in_progress"&&t.ralphProgress!=null&&e.jsx(nt,{progress:t.ralphProgress,className:"w-full h-1"}),t.ralphCurrentStep&&e.jsx("p",{className:"text-xxs text-thea-gold-dark/70 font-mono truncate",title:t.ralphCurrentStep,children:t.ralphCurrentStep}),t.status==="running"&&t.ralphStatus==="in_progress"&&t.lastRalphSignalAt&&Date.now()-new Date(t.lastRalphSignalAt).getTime()>30*60*1e3&&e.jsxs("p",{className:"text-xxxs text-yellow-500/70 font-mono",children:["signal stale — last reported ",ts(t.lastRalphSignalAt)]})]}),ue(t.label).prefix==="GENERAL"&&e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{t.bulldozeMode&&t.bulldozePaused?u(t.id,{bulldozePaused:!1}):t.bulldozeMode?u(t.id,{bulldozeMode:!1}):_(t)},className:h("thea-btn flex items-center gap-1.5 text-xxs py-1 px-2",{"!border-amber-500 !text-amber-300 !bg-amber-500/20 shadow-[0_0_8px_rgba(245,158,11,0.3)]":t.bulldozeMode&&!t.bulldozePaused,"!border-yellow-500/40 !text-yellow-400/80 !bg-yellow-500/10":t.bulldozeMode&&t.bulldozePaused}),title:t.bulldozeMode?t.bulldozePaused?`Paused: ${t.bulldozePauseReason||"unknown"} — click to resume`:"Bulldoze active — click to disable":"Enable bulldoze mode",children:[t.bulldozeMode&&t.bulldozePaused?e.jsx(st,{className:"w-3 h-3"}):e.jsx(re,{className:h("w-3 h-3",{"animate-pulse":t.bulldozeMode&&!t.bulldozePaused})}),t.bulldozeMode&&t.bulldozePaused?"Resume":"Bulldoze"]}),t.bulldozeMode&&t.bulldozeCyclesCompleted>0&&e.jsxs("span",{className:"text-xxs font-mono text-thea-gold-dark/70",children:[t.bulldozeCyclesCompleted," cycles"]}),t.bulldozeMode&&t.bulldozePaused&&e.jsx("span",{className:"text-xxxs font-mono text-yellow-400/50 truncate",children:t.bulldozePauseReason})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{"data-testid":`open-worker-${t.id}`,onClick:()=>o(t.id),className:"thea-btn flex-1 flex items-center justify-center gap-2 py-2","aria-label":`Open worker ${ue(t.label).displayName||t.label}`,children:[e.jsx(at,{className:"w-4 h-4"}),"Open"]}),l&&e.jsx("button",{onClick:l,className:"thea-btn p-2",title:"Open in Multi-Terminal View","aria-label":"Open in multi-terminal view",children:e.jsx(Ae,{className:"w-4 h-4"})}),e.jsx("button",{"data-testid":`kill-worker-${t.id}`,onClick:()=>i(t.id),className:"thea-btn thea-btn-danger p-2","aria-label":`Kill worker ${ue(t.label).displayName||t.label}`,children:e.jsx(ne,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mt-2 space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xxs font-mono text-thea-gold-dark/50",children:[e.jsxs("span",{children:["ID: ",t.id]}),I&&e.jsxs("span",{className:"flex items-center gap-0.5 ml-auto",children:[e.jsx(Ee,{className:"w-3 h-3"}),I]})]}),(T||p>0)&&e.jsxs("div",{className:"flex items-center gap-2 text-xxs font-mono text-thea-gold-dark/40",children:[T&&e.jsxs("span",{className:"truncate max-w-[60%]",title:`Parent: ${T}`,children:["↑ ",T]}),p>0&&e.jsxs("span",{className:"ml-auto",children:[p," ",p===1?"child":"children"]})]})]}),w&&e.jsx(Ve,{isOpen:!!w,onClose:()=>_(null),onConfirm:({mission:V,backlog:R,standingOrders:M})=>{u(w.id,{bulldozeMode:!0,bulldozeMission:V,bulldozeBacklog:R,bulldozeStandingOrders:M}),_(null)},workerLabel:w.label})]})});function ns({message:a="Loading...",className:t=""}){return e.jsxs("div",{className:h("flex items-center justify-center py-8",t),children:[e.jsx(Te,{className:"w-6 h-6 text-thea-gold animate-spin"}),a&&e.jsx("span",{className:"ml-2 text-thea-gold-dark text-sm font-mono",children:a})]})}function ls(){const[a,t]=s.useState(!1),[l,n]=s.useState(!1),[r,i]=s.useState(""),[c,o]=s.useState(!1),[u,d]=s.useState(!1),y=s.useRef(null),g=s.useRef(null);s.useEffect(()=>{const T=window.SpeechRecognition||window.webkitSpeechRecognition;if(T){o(!0);const p=new T;p.continuous=!0,p.interimResults=!0,p.lang="en-US",p.onresult=O=>{const z=Array.from(O.results).map(F=>F[0].transcript).join("");i(z)},p.onerror=O=>{console.error("Speech recognition error:",O.error),t(!1)},p.onend=()=>{t(!1)},y.current=p}return"speechSynthesis"in window&&d(!0),()=>{y.current&&y.current.stop(),window.speechSynthesis&&window.speechSynthesis.cancel()}},[]);const j=s.useCallback(()=>{if(!(!y.current||a)){i("");try{y.current.start(),t(!0)}catch(T){console.error("Failed to start speech recognition:",T)}}},[a]),w=s.useCallback(()=>{y.current&&(y.current.stop(),t(!1))},[]),_=s.useCallback((T,p={})=>!u||!T?Promise.resolve():new Promise(O=>{window.speechSynthesis.cancel();const k=new SpeechSynthesisUtterance(T);k.rate=p.rate||1,k.pitch=p.pitch||1,k.volume=p.volume||1;const z=window.speechSynthesis.getVoices(),F=z.find(W=>W.name.includes("Google")||W.name.includes("Microsoft")||W.name.includes("Natural")||W.lang.startsWith("en"))||z.find(W=>W.lang.startsWith("en"))||z[0];F&&(k.voice=F),k.onstart=()=>n(!0),k.onend=()=>{n(!1),O()},k.onerror=()=>{n(!1),O()},g.current=k,window.speechSynthesis.speak(k)}),[u]),b=s.useCallback(()=>{window.speechSynthesis&&(window.speechSynthesis.cancel(),n(!1))},[]),I=s.useCallback(()=>{i("")},[]);return{isListening:a,transcript:r,sttSupported:c,startListening:j,stopListening:w,clearTranscript:I,isSpeaking:l,ttsSupported:u,speak:_,stopSpeaking:b}}const os=({status:a})=>{const t={idle:e.jsx(Ee,{className:"w-4 h-4 text-gray-400"}),thinking:e.jsx(Te,{className:"w-4 h-4 text-thea-gold animate-spin"}),coding:e.jsx(Et,{className:"w-4 h-4 text-green-400"}),running_command:e.jsx(Ke,{className:"w-4 h-4 text-blue-400"}),waiting_input:e.jsx(Ee,{className:"w-4 h-4 text-yellow-400 animate-pulse"}),error:e.jsx(be,{className:"w-4 h-4 text-red-400"}),completed:e.jsx(Ge,{className:"w-4 h-4 text-green-400"}),active:e.jsx(Te,{className:"w-4 h-4 text-thea-gold animate-spin"}),unknown:e.jsx(Ee,{className:"w-4 h-4 text-gray-400"})};return t[a]||t.unknown},pt={idle:"bg-gray-800 text-gray-400 border-gray-600",thinking:"bg-thea-gold/20 text-thea-gold border-thea-gold/50",coding:"bg-green-900/50 text-green-400 border-green-600/50",running_command:"bg-blue-900/50 text-blue-400 border-blue-600/50",waiting_input:"bg-yellow-900/50 text-yellow-400 border-yellow-600/50",error:"bg-red-900/50 text-red-400 border-red-600/50",completed:"bg-green-900/50 text-green-400 border-green-600/50",active:"bg-thea-gold/20 text-thea-gold border-thea-gold/50",unknown:"bg-gray-800 text-gray-400 border-gray-600"};function Bt({workerId:a,className:t="",autoSpeak:l=!1,onSummaryChange:n}){const[r,i]=s.useState(null),[c,o]=s.useState(!1),[u,d]=s.useState(null),[y,g]=s.useState(null),[j,w]=s.useState(l),_=s.useRef(""),{speak:b,stopSpeaking:I,isSpeaking:T,ttsSupported:p}=ls(),O=s.useCallback(async(R=!1,M)=>{o(!0),d(null);try{const C=`/api/workers/${a}/summary${R?"?refresh=true":""}`,f=await J(C,{signal:M});if(!f.ok)throw new Error(`Failed to fetch summary: ${f.status}`);const H=await f.json();i(H),g(new Date)}catch(C){if(C.name==="AbortError")return;d(C.message);try{const f=await J(`/api/workers/${a}/quick-status`,{signal:M});if(f.ok){const H=await f.json();i({status:H.status,summary:`Quick status: ${H.lastLine||"No output"}`,task:null,lastAction:null,pendingItems:[],hasError:H.status==="error"})}}catch{}}finally{o(!1)}},[a]),k=s.useCallback(R=>{var C;if(!R)return"";const M=[];return R.status==="waiting_input"?M.push("Waiting for input."):R.status==="error"&&M.push("Error detected."),R.task&&M.push(`Current task: ${R.task}`),R.summary&&M.push(R.summary),R.lastAction&&M.push(`Last action: ${R.lastAction}`),((C=R.pendingItems)==null?void 0:C.length)>0&&M.push(`${R.pendingItems.length} pending items.`),M.join(" ")},[]),z=s.useCallback(()=>{const R=k(r);R&&b(R,{rate:1.1})},[r,b,k]);s.useEffect(()=>{if(!j||!r||!p)return;const R=k(r);R&&R!==_.current&&(_.current=R,b(R,{rate:1.1}),n&&n(r))},[r,j,p,b,k,n]),s.useEffect(()=>{const R=new AbortController;O(!1,R.signal);const M=setInterval(()=>{O(!1,R.signal)},1e4);return()=>{R.abort(),clearInterval(M),window.speechSynthesis&&window.speechSynthesis.cancel()}},[O]);const F=()=>{O(!0)},W=()=>{T&&I(),w(!j)};if(!r&&c)return e.jsx(ns,{message:"Generating summary...",className:t});if(u&&!r)return e.jsxs("div",{className:h("p-4 bg-red-900/20 border border-red-600/30 rounded",t),children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[e.jsx(be,{className:"w-5 h-5"}),e.jsx("span",{children:"Failed to load summary"})]}),e.jsx("p",{className:"text-sm text-red-400/70 mt-1",children:u}),e.jsx("button",{onClick:F,className:"mt-2 text-sm text-thea-gold hover:text-thea-gold-bright",children:"Try again"})]});const V=(r==null?void 0:r.status)||"unknown";return e.jsxs("div",{className:h("flex flex-col",t),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{status:V}),e.jsx("span",{className:h("px-2 py-0.5 text-xs font-mono rounded border",pt[V]||pt.unknown),children:V.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[p&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:z,disabled:T,className:h("p-1.5 rounded hover:bg-thea-gold/10 transition-colors",T&&"text-thea-gold animate-pulse"),title:T?"Speaking...":"Speak summary",children:e.jsx(mt,{className:"w-4 h-4 text-thea-gold-dark"})}),e.jsx("button",{onClick:W,className:h("p-1.5 rounded transition-colors",j?"bg-thea-gold/20 text-thea-gold":"hover:bg-thea-gold/10 text-thea-gold-dark"),title:j?"Auto-speak ON":"Auto-speak OFF",children:j?e.jsx(mt,{className:"w-4 h-4"}):e.jsx(Ha,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:F,disabled:c,className:h("p-1.5 rounded hover:bg-thea-gold/10 transition-colors",c&&"animate-spin"),title:"Refresh summary",children:e.jsx(et,{className:"w-4 h-4 text-thea-gold-dark"})})]})]}),(r==null?void 0:r.task)&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-xs font-semibold text-thea-gold-dark uppercase tracking-wider mb-1",children:"Current Task"}),e.jsx("p",{className:"text-sm text-thea-gold-bright",children:r.task})]}),(r==null?void 0:r.summary)&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-xs font-semibold text-thea-gold-dark uppercase tracking-wider mb-1",children:"Summary"}),e.jsx("p",{className:"text-sm text-thea-gold/90 leading-relaxed",children:r.summary})]}),(r==null?void 0:r.lastAction)&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-xs font-semibold text-thea-gold-dark uppercase tracking-wider mb-1",children:"Last Action"}),e.jsx("p",{className:"text-sm text-thea-gold/80",children:r.lastAction})]}),(r==null?void 0:r.pendingItems)&&r.pendingItems.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("h4",{className:"text-xs font-semibold text-thea-gold-dark uppercase tracking-wider mb-1",children:["Pending (",r.pendingItems.length,")"]}),e.jsxs("ul",{className:"text-sm text-thea-gold/70 space-y-1",children:[r.pendingItems.slice(0,5).map((R,M)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-thea-gold-dark",children:"-"}),e.jsx("span",{children:R})]},`${M}-${R.slice(0,32)}`)),r.pendingItems.length>5&&e.jsxs("li",{className:"text-thea-gold-dark text-xs",children:["...and ",r.pendingItems.length-5," more"]})]})]}),(r==null?void 0:r.hasError)&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-900/20 border border-red-600/30 rounded",children:[e.jsx(be,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-sm text-red-400",children:"Error detected"})]}),y&&e.jsxs("div",{className:"mt-auto pt-2 text-xs text-thea-gold-dark/50 text-right",children:["Updated ",y.toLocaleTimeString()]})]})}function gt({workerId:a,className:t}){var I,T,p,O;const[l,n]=s.useState(null),[r,i]=s.useState(!0),[c,o]=s.useState(null),u=s.useRef(null),d=s.useCallback(async k=>{if(a){i(!0),o(null);try{const z=await J(`/api/metrics/worker/${a}`,{signal:k});if(!z.ok){if(z.status===404){n(null);return}throw new Error("Failed to fetch worker metrics")}const F=await z.json();n(F)}catch(z){if(z.name==="AbortError")return;o(z.message)}finally{i(!1)}}},[a]);s.useEffect(()=>{const k=new AbortController;u.current=k,d(k.signal);const z=setInterval(()=>d(k.signal),1e4);return()=>{k.abort(),u.current=null,clearInterval(z)}},[d]);const y=s.useCallback(()=>{var z;(z=u.current)==null||z.abort();const k=new AbortController;u.current=k,d(k.signal)},[d]);if(r&&!l)return e.jsxs("div",{className:h("thea-card p-4",t),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(le,{className:"w-4 h-4 text-thea-gold"}),e.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright uppercase tracking-wider text-sm",children:"Worker Health"})]}),e.jsx("div",{className:"flex items-center justify-center py-8 text-thea-gold-dark",children:e.jsx(et,{className:"w-5 h-5 animate-spin"})})]});if(c)return e.jsxs("div",{className:h("thea-card p-4",t),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(le,{className:"w-4 h-4 text-thea-gold"}),e.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright uppercase tracking-wider text-sm",children:"Worker Health"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsx("span",{children:c})]}),e.jsx("button",{onClick:y,className:"mt-2 text-xs text-thea-gold-dark hover:text-thea-gold",children:"Retry"})]});const g=(l==null?void 0:l.healthScore)??null,j=((I=l==null?void 0:l.performance)==null?void 0:I.avgLatency)??null,w=((T=l==null?void 0:l.lifecycle)==null?void 0:T.uptime)??null,_=((p=l==null?void 0:l.lifecycle)==null?void 0:p.spawnTime)??null,b=((O=l==null?void 0:l.performance)==null?void 0:O.avgLatency)??null;return e.jsxs("div",{className:h("thea-card",t),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-thea-gold-dark/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4 text-thea-gold"}),e.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright uppercase tracking-wider text-sm",children:"Worker Health"})]}),e.jsx("button",{onClick:y,className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors",title:"Refresh",children:e.jsx(et,{className:h("w-3.5 h-3.5",r&&"animate-spin")})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-thea-gold-dark",children:"Health Score"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(is,{score:g}),e.jsx(Ya,{score:g,size:"md",showScore:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(We,{icon:re,label:"Response Time",value:j!==null?`${j}ms`:"--",status:cs(j)}),e.jsx(We,{icon:Ba,label:"Spawn Time",value:_!==null?`${_}ms`:"--",status:ds(_)}),e.jsx(We,{icon:Ee,label:"Uptime",value:Wt(w),status:"neutral"}),e.jsx(We,{icon:Ua,label:"Latency",value:b!==null?`${b}ms`:"--",status:us(b)})]}),!l&&e.jsx("div",{className:"text-center text-thea-gold-dark text-sm py-2",children:"No metrics available for this worker yet."})]})]})}function is({score:a}){const t=a!==null?Math.min(100,Math.max(0,a)):0,l=t/100*180-90,n=()=>a===null?"#6b7280":a>=80?"#4ade80":a>=50?"#facc15":"#f87171";return e.jsxs("div",{className:"relative w-16 h-8 overflow-hidden",children:[e.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 64 32",children:[e.jsx("path",{d:"M 4 32 A 28 28 0 0 1 60 32",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"4",strokeLinecap:"round"}),e.jsx("path",{d:"M 4 32 A 28 28 0 0 1 60 32",fill:"none",stroke:n(),strokeWidth:"4",strokeLinecap:"round",strokeDasharray:`${t*.88} 88`,style:{filter:`drop-shadow(0 0 4px ${n()})`}})]}),e.jsx("div",{className:"absolute bottom-0 left-1/2 w-0.5 h-6 bg-thea-gold origin-bottom transition-transform duration-500",style:{transform:`translateX(-50%) rotate(${l}deg)`}}),e.jsx("div",{className:"absolute bottom-0 left-1/2 w-2 h-2 -translate-x-1/2 translate-y-1/2 rounded-full bg-thea-gold shadow-[0_0_6px_rgba(218,165,32,0.6)]"})]})}function We({icon:a,label:t,value:l,status:n}){const r={good:"border-green-500/30 bg-green-500/5",warning:"border-yellow-500/30 bg-yellow-500/5",critical:"border-red-500/30 bg-red-500/5",neutral:"border-thea-gold-dark/30 bg-thea-gold/5"},i={good:"text-green-400",warning:"text-yellow-400",critical:"text-red-400",neutral:"text-thea-gold-bright"};return e.jsxs("div",{className:h("p-2.5 rounded border",r[n]||r.neutral),children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(a,{className:"w-3 h-3 text-thea-gold-dark"}),e.jsx("span",{className:"text-xxs text-thea-gold-dark uppercase tracking-wider",children:t})]}),e.jsx("span",{className:h("font-mono text-sm font-bold",i[n]||i.neutral),children:l})]})}function cs(a){return a===null?"neutral":a<100?"good":a<500?"warning":"critical"}function ds(a){return a===null?"neutral":a<2e3?"good":a<5e3?"warning":"critical"}function us(a){return a===null?"neutral":a<50?"good":a<200?"warning":"critical"}function Ut({onSend:a,onCancel:t,placeholder:l="Speak or type..."}){const[n,r]=s.useState(""),[i,c]=s.useState(!1),[o,u]=s.useState(!1),d=s.useRef(null);s.useEffect(()=>{const w=window.SpeechRecognition||window.webkitSpeechRecognition;if(w){u(!0);const _=new w;_.continuous=!0,_.interimResults=!0,_.lang="en-US",_.onresult=b=>{const I=Array.from(b.results).map(T=>T[0].transcript).join("");r(I)},_.onerror=b=>{console.error("Speech recognition error:",b.error),c(!1)},_.onend=()=>{c(!1)},d.current=_}return()=>{d.current&&d.current.stop()}},[]);const y=()=>{d.current&&(i?(d.current.stop(),c(!1)):(r(""),d.current.start(),c(!0)))},g=()=>{var w;n.trim()&&(a(n.trim()),r(""),i&&((w=d.current)==null||w.stop(),c(!1)))},j=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),g())};return e.jsxs("div",{className:"bg-black/50 border border-thea-gold-dark/30 p-3",children:[e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx("textarea",{value:n,onChange:w=>r(w.target.value),onKeyDown:j,placeholder:l,rows:2,className:"w-full bg-thea-nearBlack border border-thea-gold-dark/30 px-3 py-2 text-sm text-white font-mono placeholder:text-thea-gold-dark/50 focus:outline-none focus:border-thea-gold resize-none","aria-label":l})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[o&&e.jsx("button",{onClick:y,className:h("p-3 border transition-colors",i?"bg-thea-maroon/20 border-thea-maroon text-thea-maroon animate-pulse":"bg-thea-gold/10 border-thea-gold/30 text-thea-gold hover:bg-thea-gold/20"),"aria-label":i?"Stop listening":"Start voice input",children:i?e.jsx(Aa,{className:"w-5 h-5"}):e.jsx(Tt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:g,disabled:!n.trim(),className:"p-3 bg-thea-gold/20 border border-thea-gold text-thea-gold hover:bg-thea-gold/30 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Send message",children:e.jsx(Ia,{className:"w-5 h-5"})})]})]}),i&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-thea-maroon",role:"status","aria-live":"polite",children:[e.jsx("span",{className:"w-2 h-2 bg-thea-maroon rounded-full animate-pulse"}),"Listening..."]}),t&&e.jsxs("button",{onClick:t,className:"mt-2 flex items-center gap-1 text-xs text-thea-gold-dark hover:text-thea-gold transition-colors",children:[e.jsx(ne,{className:"w-3 h-3"}),"Cancel"]})]})}function bt({children:a,direction:t="horizontal",sizes:l,minSize:n=100,onSizesChange:r,className:i=""}){const c=Array.isArray(a)?a:[a],o=c.length,u=Array(o).fill(100/o),[d,y]=s.useState(l||u),g=s.useRef(null),j=s.useRef(!1),w=s.useRef(null),_=s.useRef(null),b=s.useRef(null);s.useEffect(()=>{if(o!==d.length){const k=Array(o).fill(100/o);y(k)}},[o]);const I=s.useCallback((k,z)=>{z.preventDefault(),j.current=!0,w.current=k,_.current=t==="horizontal"?z.clientX:z.clientY,b.current=[...d],document.body.style.cursor=t==="horizontal"?"col-resize":"row-resize",document.body.style.userSelect="none"},[t,d]),T=s.useCallback(k=>{if(!j.current||!g.current)return;const F=g.current.getBoundingClientRect(),W=t==="horizontal"?F.width:F.height,V=t==="horizontal"?k.clientX:k.clientY,R=_.current,M=(V-R)/W*100,C=w.current,f=[...b.current];let H=f[C]+M,B=f[C+1]-M;const Y=n/W*100;H<Y&&(B+=H-Y,H=Y),B<Y&&(H+=B-Y,B=Y),f[C]=H,f[C+1]=B,y(f),r==null||r(f)},[t,n,r]),p=s.useCallback(()=>{j.current=!1,w.current=null,document.body.style.cursor="",document.body.style.userSelect=""},[]);if(s.useEffect(()=>(document.addEventListener("mousemove",T),document.addEventListener("mouseup",p),()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",p)}),[T,p]),o<=1)return e.jsx("div",{className:h("w-full h-full",i),children:c[0]});const O=t==="horizontal";return e.jsx("div",{ref:g,className:h("flex w-full h-full",O?"flex-row":"flex-col",i),children:c.map((k,z)=>e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"overflow-hidden",style:{[O?"width":"height"]:`${d[z]}%`,flexShrink:0},children:k}),z<o-1&&e.jsxs("div",{className:h("flex-shrink-0 relative group",O?"w-1 cursor-col-resize":"h-1 cursor-row-resize","bg-thea-gold-dark/30 hover:bg-thea-gold/50 transition-colors"),onMouseDown:F=>I(z,F),children:[e.jsx("div",{className:h("absolute",O?"inset-y-0 -left-1 -right-1":"inset-x-0 -top-1 -bottom-1")}),e.jsx("div",{className:h("absolute bg-thea-gold/60 opacity-0 group-hover:opacity-100 transition-opacity",O?"inset-y-0 left-0 right-0":"inset-x-0 top-0 bottom-0")})]})]},(k==null?void 0:k.key)||`pane-${z}`))})}function Xe({children:a,columns:t=2,rows:l=2,gap:n=4,className:r=""}){const i=Array.isArray(a)?a:[a];return e.jsx("div",{className:h("w-full h-full grid",r),style:{gridTemplateColumns:`repeat(${t}, 1fr)`,gridTemplateRows:`repeat(${l}, 1fr)`,gap:`${n}px`},children:i.map((c,o)=>e.jsx("div",{className:"overflow-hidden min-h-0 min-w-0",children:c},(c==null?void 0:c.key)||`grid-${o}`))})}function hs({paneId:a,workerId:t,onWorkerChange:l,onClose:n,onMaximize:r,isMaximized:i=!1,isActive:c,showCloseButton:o=!0,className:u=""}){const{workers:d,outputs:y,sendRawInput:g,resizeTerminal:j,activePaneId:w,setActivePaneId:_,updateWorkerSettings:b}=fe(),[I,T]=s.useState("terminal"),[p,O]=s.useState(!1),[k,z]=s.useState(!1),[F,W]=s.useState(null),[V,R]=s.useState(null),[M,C]=s.useState(null),f=d.find($=>$.id===t),H=y[t]||"",B=c!==void 0?c:w===a,Y=s.useRef(B);s.useEffect(()=>{Y.current=B},[B]);const ee=()=>{_&&_(a)},Q=s.useCallback(async $=>{if(!$||!$.type.startsWith("image/")){W("error"),setTimeout(()=>W(null),2e3);return}W("uploading");const Z=new FormData;Z.append("screenshot",$),Z.append("workerId",t||"unknown");try{const L=await J("/api/uploads/screenshot",{method:"POST",body:Z});if(!L.ok)throw new Error("Upload failed");const ae=await L.json();R(ae.filename),W("success"),setTimeout(()=>W(null),3e3)}catch{W("error"),setTimeout(()=>W(null),2e3)}},[t]),xe=s.useCallback($=>{$.preventDefault(),$.stopPropagation(),z(!0)},[]),oe=s.useCallback($=>{$.preventDefault(),$.stopPropagation(),z(!1)},[]),me=s.useCallback($=>{var L;$.preventDefault(),$.stopPropagation(),z(!1);const Z=(L=$.dataTransfer)==null?void 0:L.files;Z&&Z.length>0&&Q(Z[0])},[Q]);return s.useEffect(()=>{const $=Z=>{var ae;if(!Y.current)return;const L=(ae=Z.clipboardData)==null?void 0:ae.items;if(L){for(const te of L)if(te.type.startsWith("image/")){const se=te.getAsFile();if(se){Q(se);break}}}};return document.addEventListener("paste",$),()=>document.removeEventListener("paste",$)},[Q]),e.jsxs("div",{className:h("h-full flex flex-col bg-black/20 border rounded overflow-hidden transition-colors relative",B?"border-thea-gold/60 shadow-gold-sm":"border-thea-gold-dark/30",k&&"border-thea-gold border-2",u),onClick:ee,onDragOver:xe,onDragLeave:oe,onDrop:me,children:[k&&e.jsx("div",{className:"absolute inset-0 z-50 bg-thea-gold/20 backdrop-blur-sm flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(zt,{className:"w-12 h-12 text-thea-gold-bright mx-auto mb-2"}),e.jsx("p",{className:"text-thea-gold-bright font-rajdhani text-lg",children:"Drop image to upload"})]})}),F&&e.jsxs("div",{className:h("absolute top-12 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded shadow-lg flex items-center gap-2 text-sm font-mono",F==="uploading"&&"bg-thea-gold/90 text-black",F==="success"&&"bg-green-600 text-white",F==="error"&&"bg-red-600 text-white"),children:[F==="uploading"&&e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"w-4 h-4 animate-pulse"}),"Uploading..."]}),F==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate max-w-[200px]",children:V})]}),F==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4"}),"Upload failed"]})]}),e.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5 bg-black/40 border-b border-thea-gold-dark/20 flex-shrink-0",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>O(!p),className:"flex items-center gap-1.5 px-2 py-1 text-xs font-rajdhani text-thea-gold hover:text-thea-gold-bright transition-colors rounded hover:bg-white/5",children:[e.jsx("span",{className:h("w-1.5 h-1.5 rounded-full",(f==null?void 0:f.status)==="running"?"bg-green-500":"bg-thea-gold-dark")}),e.jsx("span",{className:"truncate max-w-[120px]",children:(f==null?void 0:f.label)||"Select Worker"}),e.jsx(qe,{className:"w-3 h-3"})]}),p&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>O(!1)}),e.jsx("div",{className:"absolute top-full left-0 mt-1 z-20 min-w-[200px] max-h-[300px] overflow-auto bg-thea-nearBlack border border-thea-gold-dark/50 rounded shadow-lg",children:d.length===0?e.jsx("div",{className:"px-3 py-2 text-xs text-thea-gold-dark",children:"No workers available"}):d.map($=>e.jsxs("button",{onClick:()=>{l==null||l($.id),O(!1)},className:h("w-full text-left px-3 py-2 text-xs hover:bg-thea-gold/10 transition-colors",$.id===t?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:h("w-1.5 h-1.5 rounded-full flex-shrink-0",$.status==="running"?"bg-green-500":"bg-thea-gold-dark")}),e.jsx("span",{className:"truncate",children:$.label})]}),e.jsx("div",{className:"text-xxs text-thea-gold-dark ml-3.5 truncate",children:$.project})]},$.id))})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:"flex items-center bg-black/30 rounded border border-thea-gold-dark/20",children:[e.jsx("button",{onClick:()=>T("terminal"),className:h("p-1 rounded-l transition-colors",I==="terminal"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Terminal View",children:e.jsx(Ke,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>T("summary"),className:h("p-1 rounded-r transition-colors",I==="summary"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Summary View",children:e.jsx(At,{className:"w-3 h-3"})})]}),f&&e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>{f.autoAcceptPaused?b(f.id,{autoAcceptPaused:!1}):b(f.id,{autoAccept:!f.autoAccept})},className:h("p-1 rounded transition-colors relative",f.autoAccept?f.autoAcceptPaused?"bg-yellow-600/30 text-yellow-500 hover:bg-yellow-600/40":"bg-green-600/30 text-green-500 hover:bg-green-600/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:f.autoAccept?f.autoAcceptPaused?"Auto-accept PAUSED (click to resume)":"Auto-accept ON (click to disable)":"Auto-accept OFF (click to enable)",children:f.autoAccept?f.autoAcceptPaused?e.jsx(Be,{className:"w-3 h-3"}):e.jsx(re,{className:"w-3 h-3"}):e.jsx(tt,{className:"w-3 h-3"})})}),f&&e.jsx("button",{onClick:()=>{b(f.id,{ralphMode:!f.ralphMode})},className:h("p-1 rounded transition-colors",f.ralphMode?"bg-purple-600/30 text-purple-400 hover:bg-purple-600/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:f.ralphMode?"Ralph mode ON - Worker will signal completion via API":"Ralph mode OFF - Enable autonomous completion signaling",children:e.jsx(ze,{className:"w-3 h-3"})}),f&&ue(f.label).prefix==="GENERAL"&&e.jsx("button",{onClick:()=>{f.bulldozeMode&&f.bulldozePaused?b(f.id,{bulldozePaused:!1}):f.bulldozeMode?b(f.id,{bulldozeMode:!1}):C(f)},className:h("p-1 rounded transition-colors",f.bulldozeMode?f.bulldozePaused?"bg-yellow-600/30 text-yellow-400 hover:bg-yellow-600/40":"bg-amber-600/30 text-amber-300 hover:bg-amber-600/40 shadow-[0_0_6px_rgba(245,158,11,0.2)]":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:f.bulldozeMode?f.bulldozePaused?`Bulldoze PAUSED (${f.bulldozePauseReason||"unknown"}) — click to resume`:`Bulldoze ON (${f.bulldozeCyclesCompleted||0} cycles) — click to disable`:"Bulldoze OFF — Enable continuous autonomous work",children:f.bulldozeMode&&f.bulldozePaused?e.jsx(st,{className:"w-3 h-3"}):e.jsx(re,{className:h("w-3 h-3",{"animate-pulse":f.bulldozeMode})})}),e.jsxs("label",{className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors cursor-pointer",title:"Upload screenshot (or drag & drop, or paste)",children:[e.jsx(Ue,{className:"w-3 h-3"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:$=>{var L;const Z=(L=$.target.files)==null?void 0:L[0];Z&&Q(Z),$.target.value=""}})]}),r&&e.jsx("button",{onClick:r,className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors",title:i?"Restore":"Maximize",children:i?e.jsx(Ta,{className:"w-3 h-3"}):e.jsx(at,{className:"w-3 h-3"})}),o&&n&&e.jsx("button",{onClick:n,className:"p-1 text-thea-gold-dark hover:text-red-400 transition-colors",title:"Close Pane",children:e.jsx(ne,{className:"w-3 h-3"})})]})]}),e.jsx("div",{className:"flex-1 min-h-0 p-1",children:!t||!f?e.jsx("div",{className:"h-full flex items-center justify-center text-thea-gold-dark text-sm",children:"Select a worker to display"}):I==="terminal"?e.jsx(Lt,{workerId:t,output:H,onRawInput:$=>g(t,$),onResize:($,Z)=>j(t,$,Z),className:"h-full w-full"}):e.jsx("div",{className:"h-full bg-black/30 rounded overflow-auto p-2",children:e.jsx(Bt,{workerId:t,className:"h-full"})})}),M&&e.jsx(Ve,{isOpen:!!M,onClose:()=>C(null),onConfirm:({mission:$,backlog:Z,standingOrders:L})=>{b(M.id,{bulldozeMode:!0,bulldozeMission:$,bulldozeBacklog:Z,bulldozeStandingOrders:L}),C(null)},workerLabel:M.label})]})}function xs({className:a=""}){const{layoutMode:t,changeLayoutMode:l,addPane:n,panes:r}=fe(),i=[{mode:X.SINGLE,icon:at,label:"Single"},{mode:X.SPLIT_H,icon:ya,label:"Split H"},{mode:X.SPLIT_V,icon:_a,label:"Split V"},{mode:X.GRID_2X2,icon:Na,label:"2×2"},{mode:X.GRID_3X2,icon:Sa,label:"3×2"}];return e.jsxs("div",{className:h("flex items-center gap-1",a),children:[i.map(({mode:c,icon:o,label:u})=>e.jsxs("button",{onClick:()=>l(c),className:h("flex items-center gap-1.5 px-2 py-1 text-xs font-rajdhani rounded transition-all",t===c?"bg-thea-gold/20 text-thea-gold-bright border border-thea-gold/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5 border border-transparent"),title:u,children:[e.jsx(o,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:u})]},c)),e.jsxs("button",{onClick:()=>n(),className:"flex items-center gap-1 px-2 py-1 text-xs font-rajdhani text-thea-gold-dark hover:text-thea-gold hover:bg-white/5 rounded transition-colors border border-transparent",title:"Add Pane",children:[e.jsx(Pa,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Add"})]}),e.jsxs("span",{className:"text-xxs text-thea-gold-dark/50 ml-2",children:[r.length," pane",r.length!==1?"s":""]})]})}function ms({onBack:a}){const{layoutMode:t,panes:l,activePaneId:n,paneSizes:r,setPaneSizes:i,setPaneWorker:c,removePane:o,changeLayoutMode:u,sendInput:d,workers:y}=fe(),g=l.find(b=>b.id===n)||l[0],j=g!=null&&g.workerId?y.find(b=>b.id===g.workerId):null,w=(b,I)=>e.jsx(hs,{paneId:b.id,workerId:b.workerId,onWorkerChange:T=>c(b.id,T),onClose:()=>o(b.id),isActive:n===b.id,showCloseButton:l.length>1,className:"h-full"},b.id),_=()=>{switch(t){case X.SINGLE:return e.jsx("div",{className:"h-full p-2",children:l[0]&&w(l[0])});case X.SPLIT_H:return e.jsx("div",{className:"h-full p-2",children:e.jsx(bt,{direction:"horizontal",sizes:r,onSizesChange:i,minSize:200,children:l.slice(0,2).map((T,p)=>w(T))})});case X.SPLIT_V:return e.jsx("div",{className:"h-full p-2",children:e.jsx(bt,{direction:"vertical",sizes:r,onSizesChange:i,minSize:100,children:l.slice(0,2).map((T,p)=>w(T))})});case X.GRID_2X2:return e.jsx("div",{className:"h-full p-2",children:e.jsx(Xe,{columns:2,rows:2,gap:8,children:l.slice(0,4).map((T,p)=>w(T))})});case X.GRID_3X2:return e.jsx("div",{className:"h-full p-2",children:e.jsx(Xe,{columns:3,rows:2,gap:8,children:l.slice(0,6).map((T,p)=>w(T))})});case X.CUSTOM:default:const b=Math.ceil(Math.sqrt(l.length)),I=Math.ceil(l.length/b);return e.jsx("div",{className:"h-full p-2",children:e.jsx(Xe,{columns:b,rows:I,gap:8,children:l.map((T,p)=>w(T))})})}};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-black/30 border-b border-thea-gold-dark/20 flex-shrink-0",children:[e.jsxs("button",{onClick:a,className:"flex items-center gap-2 text-thea-gold hover:text-thea-gold-bright transition-colors min-h-[44px] min-w-[44px] px-2 -ml-2",children:[e.jsx(Qe,{className:"w-6 h-6 flex-shrink-0"}),e.jsx("span",{className:"font-rajdhani font-semibold hidden sm:inline",children:"Back to Grid"})]}),e.jsx(xs,{}),e.jsx("div",{className:"text-xs text-thea-gold-dark font-mono",children:(j==null?void 0:j.label)||"No active worker"})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:_()}),j&&e.jsx("div",{className:"p-4 border-t border-thea-gold-dark/20 flex-shrink-0",children:e.jsx(Ut,{onSend:b=>d(j.id,b),placeholder:`Send to ${j.label}...`})})]})}function ps({icon:a,title:t,message:l,children:n,className:r=""}){return e.jsxs("div",{className:h("flex flex-col items-center justify-center py-12",r),children:[a&&e.jsx(a,{className:"w-12 h-12 text-thea-gold-dark/30 mb-4"}),t&&e.jsx("h3",{className:"font-orbitron text-lg text-thea-gold-dark mb-2",children:t}),l&&e.jsx("p",{className:"text-sm text-thea-gold-dark/50 text-center max-w-xs",children:l}),n]})}const ft={running:"bg-green-500/20 text-green-400 border-green-500/30",stopped:"bg-gray-800 text-gray-400 border-gray-600",error:"bg-red-500/20 text-red-400 border-red-500/30",completed:"bg-blue-500/20 text-blue-400 border-blue-500/30",awaiting_review:"bg-purple-500/20 text-purple-400 border-purple-500/30"};function gs(a){const t=new Map;a.forEach(c=>t.set(c.id,{...c,children:[]}));const l=[];let n=0;a.forEach(c=>{const o=t.get(c.id);c.parentWorkerId&&t.has(c.parentWorkerId)?t.get(c.parentWorkerId).children.push(o):l.push(o)});function r(c,o){return c.length===0?o:Math.max(...c.map(u=>r(u.children,o+1)))}n=l.length>0?r(l,0):0;function i(c){c.sort((o,u)=>new Date(o.createdAt||0)-new Date(u.createdAt||0)),c.forEach(o=>i(o.children))}return i(l),{tree:l,stats:{total:a.length,roots:l.length,maxDepth:n,withChildren:a.filter(c=>{const o=t.get(c.id);return o&&o.children.length>0}).length}}}function bs({ralphStatus:a,ralphProgress:t,lastRalphSignalAt:l,workerStatus:n}){if(!a)return null;const r=n==="running"&&a==="in_progress"&&l&&Date.now()-new Date(l).getTime()>30*60*1e3,i={in_progress:r?"text-yellow-500/60":"text-yellow-400",done:"text-green-400",blocked:"text-red-400",pending:"text-gray-400"}[a]||"text-gray-400";return e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:h("text-xxs font-mono uppercase",i),children:a==="in_progress"?r?"stale":"working":a}),a==="in_progress"&&t!=null&&e.jsxs(e.Fragment,{children:[e.jsx(nt,{progress:t,className:"w-16 h-1"}),e.jsxs("span",{className:h("text-xxs font-mono",r?"text-yellow-500/60":"text-thea-gold-dark"),children:[t,"%"]})]})]})}const fs=s.memo(function a({node:t,depth:l,attachToWorker:n,killWorker:r}){const[i,c]=s.useState(!0),o=t.children&&t.children.length>0,{displayName:u}=ue(t.label);return e.jsxs("div",{role:"treeitem","aria-expanded":o?i:void 0,"aria-label":t.label,children:[e.jsxs("div",{className:h("group flex items-center gap-2 py-1.5 px-2 hover:bg-thea-gold/5 transition-colors cursor-pointer border-l border-transparent hover:border-thea-gold-dark/30",l>0&&"ml-5"),style:l>0?{paddingLeft:`${l*12}px`}:void 0,children:[e.jsx("button",{onClick:d=>{d.stopPropagation(),c(!i)},className:h("w-5 h-5 flex items-center justify-center flex-shrink-0 transition-colors",o?"text-thea-gold-dark hover:text-thea-gold":"text-transparent"),disabled:!o,"aria-label":o?i?"Collapse":"Expand":void 0,children:o?i?e.jsx(qe,{className:"w-3.5 h-3.5"}):e.jsx(Mt,{className:"w-3.5 h-3.5"}):e.jsx(ga,{className:"w-3 h-3 text-thea-gold-dark/30"})}),e.jsx($t,{label:t.label,size:"sm"}),t.backend==="gemini"&&e.jsx("span",{className:"text-[8px] font-mono px-1 py-0.5 bg-blue-500/20 border border-blue-500/30 text-blue-300 flex-shrink-0",children:"G"}),e.jsx("button",{onClick:()=>n(t.id),className:"font-rajdhani font-semibold text-thea-gold-bright hover:text-white truncate text-sm transition-colors text-left min-w-0 flex-shrink",title:t.label,children:u||t.label}),o&&e.jsx("span",{className:"text-xxxs font-mono px-1.5 py-0.5 bg-thea-gold/10 border border-thea-gold-dark/30 text-thea-gold-dark flex-shrink-0",children:t.children.length}),e.jsx("span",{className:h("text-xxxs font-mono uppercase px-1.5 py-0.5 border flex-shrink-0",ft[t.status]||ft.stopped),children:t.status==="awaiting_review"?"review":t.status}),e.jsx(Dt,{score:Ft(t.health),size:"sm"}),e.jsx("div",{className:"hidden sm:flex flex-shrink-0",children:e.jsx(bs,{ralphStatus:t.ralphStatus,ralphProgress:t.ralphProgress,lastRalphSignalAt:t.lastRalphSignalAt,workerStatus:t.status})}),e.jsx("span",{className:"text-xxs font-mono text-thea-gold-dark/60 flex-shrink-0 hidden md:inline",children:es(t.createdAt)}),e.jsx("button",{onClick:d=>{d.stopPropagation(),r(t.id)},className:"opacity-0 group-hover:opacity-100 p-1 text-red-400/50 hover:text-red-400 hover:bg-red-500/10 transition-all flex-shrink-0 ml-auto",title:"Kill worker","aria-label":`Kill worker ${u||t.label}`,children:e.jsx(ne,{className:"w-3.5 h-3.5"})})]}),o&&i&&e.jsx("div",{role:"group",className:"border-l border-thea-gold-dark/15 ml-4",style:{marginLeft:`${(l+1)*12+18}px`},children:t.children.map(d=>e.jsx(a,{node:d,depth:l+1,attachToWorker:n,killWorker:r},d.id))})]})});function ks(){const{workers:a,attachToWorker:t,killWorker:l,selectedProject:n}=fe(),[r,i]=s.useState(null);s.useEffect(()=>{let d=!1;async function y(){try{const g=await J("/api/workers/tree");if(!g.ok)return;const j=await g.json();d||i(j)}catch{}}return y(),()=>{d=!0}},[]);const c=s.useMemo(()=>{const d=n?a.filter(y=>y.project===n):a;return gs(d)},[a,n]),{tree:o,stats:u}=c;return o.length===0?e.jsx(ps,{icon:Je,title:"No Worker Hierarchy",message:n?`No workers running for ${n}.`:"No workers are currently active.",className:"py-20"}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3 px-2 py-2 bg-black/30 border border-thea-gold-dark/20",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Va,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),e.jsxs("span",{className:"text-xs font-mono text-thea-gold-dark",children:[e.jsx("span",{className:"text-thea-gold",children:u.total})," workers"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Je,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),e.jsxs("span",{className:"text-xs font-mono text-thea-gold-dark",children:[e.jsx("span",{className:"text-thea-gold",children:u.roots})," roots"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(za,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),e.jsxs("span",{className:"text-xs font-mono text-thea-gold-dark",children:["depth ",e.jsx("span",{className:"text-thea-gold",children:u.maxDepth})]})]})]}),e.jsx("div",{role:"tree","aria-label":"Worker hierarchy",className:"border border-thea-gold-dark/20 bg-black/20",children:o.map(d=>e.jsx(fs,{node:d,depth:0,attachToWorker:t,killWorker:l},d.id))})]})}function ys({value:a,onChange:t,placeholder:l="Search...",className:n=""}){return e.jsxs("div",{className:h("relative",n),role:"search",children:[e.jsx(Rt,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-thea-gold-dark pointer-events-none","aria-hidden":"true"}),e.jsx("input",{type:"text",value:a,onChange:r=>t(r.target.value),placeholder:l,className:"w-full bg-black/50 border border-thea-gold-dark/30 pl-10 pr-10 py-2 text-sm text-thea-gold placeholder-thea-gold-dark/50 focus:outline-none focus:border-thea-gold/50 transition-colors font-mono","aria-label":l}),a&&e.jsx("button",{onClick:()=>t(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-thea-gold-dark hover:text-thea-gold transition-colors","aria-label":"Clear search",children:e.jsx(ne,{className:"w-4 h-4"})})]})}function js(){const{workers:a,outputs:t,projects:l,selectedProject:n,focusedWorker:r,sendInput:i,sendRawInput:c,resizeTerminal:o,detachFromWorker:u,layoutMode:d,changeLayoutMode:y,setPaneWorker:g,panes:j,updateWorkerSettings:w,subscribeToWorkerOutput:_,unsubscribeFromWorkerOutput:b,spawnAutonomousSession:I}=fe(),[T,p]=s.useState("summary"),[O,k]=s.useState(!1),[z,F]=s.useState(!1),[W,V]=s.useState(!1),[R,M]=s.useState(null),[C,f]=s.useState(null),[H,B]=s.useState(null),[Y,ee]=s.useState(!1),[Q,xe]=s.useState("grid"),[oe,me]=s.useState(""),[$,Z]=s.useState(""),[L,ae]=s.useState(null),[te,se]=s.useState(null),ie=s.useCallback(async m=>{if(!m||!m.type.startsWith("image/")){M("error"),setTimeout(()=>M(null),2e3);return}M("uploading");const P=new FormData;P.append("screenshot",m),P.append("workerId",r||"unknown");try{const q=await J("/api/uploads/screenshot",{method:"POST",body:P});if(!q.ok)throw new Error("Upload failed");const ge=await q.json();f(ge.filename),M("success"),setTimeout(()=>M(null),5e3)}catch{M("error"),setTimeout(()=>M(null),2e3)}},[r]),Re=s.useCallback(m=>{m.preventDefault(),V(!0)},[]),Pe=s.useCallback(m=>{m.preventDefault(),V(!1)},[]),Le=s.useCallback(m=>{var q;m.preventDefault(),V(!1);const P=(q=m.dataTransfer)==null?void 0:q.files;P!=null&&P[0]&&ie(P[0])},[ie]);s.useEffect(()=>{if(!r)return;const m=P=>{var ge;const q=(ge=P.clipboardData)==null?void 0:ge.items;if(q){for(const Se of q)if(Se.type.startsWith("image/")){const Ce=Se.getAsFile();if(Ce){ie(Ce);break}}}};return document.addEventListener("paste",m),()=>document.removeEventListener("paste",m)},[r,ie]);const G=s.useMemo(()=>n?a.filter(m=>m.project===n):a,[n,a]),_e=s.useMemo(()=>{const m={};for(const P of G)m[P.status]=(m[P.status]||0)+1;return m},[G]),je=s.useMemo(()=>{const m=new Set;for(const P of G)P.project&&m.add(P.project);return[...m].sort()},[G]),we=s.useMemo(()=>{let m=G;if(L&&(m=m.filter(P=>P.status===L)),te&&(m=m.filter(P=>P.project===te)),$.trim()){const P=$.toLowerCase();m=m.filter(q=>(q.label||"").toLowerCase().includes(P)||(q.project||"").toLowerCase().includes(P)||(q.id||"").toLowerCase().includes(P))}return m},[G,$,L,te]),ve=s.useRef(r);ve.current=r,s.useEffect(()=>{if(r)return;const m=G.map(P=>P.id);return m.forEach(P=>_(P)),()=>{m.forEach(P=>{P!==ve.current&&b(P)})}},[r,G,_,b]);const N=s.useMemo(()=>r?a.find(m=>m.id===r):null,[r,a]),Ne=(m=null)=>{m&&j.length>0&&g(j[0].id,m),k(!0)},pe=s.useMemo(()=>G.length>0&&G.every(m=>m.ralphMode),[G]),ce=s.useMemo(()=>G.length>0&&G.every(m=>m.autoAccept&&!m.autoAcceptPaused),[G]),Ie=s.useCallback(()=>{const m=!pe;G.forEach(P=>{w(P.id,{ralphMode:m})})},[G,w,pe]),De=s.useCallback(()=>{const m=!ce;G.forEach(P=>{w(P.id,{autoAccept:m,autoAcceptPaused:!1})})},[G,w,ce]);return O?e.jsx(ms,{onBack:()=>k(!1)}):N?e.jsxs("div",{className:h("h-full flex flex-col relative",W&&"ring-2 ring-thea-gold"),onDragOver:Re,onDragLeave:Pe,onDrop:Le,children:[W&&e.jsx("div",{className:"absolute inset-0 z-50 bg-thea-gold/20 backdrop-blur-sm flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(zt,{className:"w-16 h-16 text-thea-gold-bright mx-auto mb-3"}),e.jsx("p",{className:"text-thea-gold-bright font-rajdhani text-xl",children:"Drop image to upload"})]})}),R&&e.jsxs("div",{className:h("absolute top-16 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded shadow-lg flex items-center gap-2 text-sm font-mono",R==="uploading"&&"bg-thea-gold/90 text-black",R==="success"&&"bg-green-600 text-white",R==="error"&&"bg-red-600 text-white"),children:[R==="uploading"&&e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"w-4 h-4 animate-pulse"}),"Uploading..."]}),R==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{className:"max-w-[300px] truncate",children:C})]}),R==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4"}),"Upload failed"]})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/30 border-b border-thea-gold-dark/20",children:[e.jsxs("button",{onClick:u,className:"flex items-center gap-2 text-thea-gold hover:text-thea-gold-bright transition-colors min-h-[44px] min-w-[44px] px-2 -ml-2","aria-label":"Back to worker grid",children:[e.jsx(Qe,{className:"w-6 h-6 flex-shrink-0"}),e.jsx("span",{className:"font-rajdhani font-semibold hidden sm:inline",children:"Back to Grid"})]}),e.jsxs("div",{className:"text-center min-w-0 flex-1 mx-2",children:[e.jsx("h2",{className:"font-orbitron font-bold text-thea-gold-bright uppercase tracking-wider text-sm md:text-base truncate",children:N.label}),e.jsxs("p",{className:"text-xxs md:text-xs text-thea-gold-dark font-mono truncate",children:[N.project," · ",N.id]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>F(!z),className:h("p-2 transition-colors",z?"text-thea-gold-bright bg-thea-gold/10 rounded":"text-thea-gold-dark hover:text-thea-gold"),title:z?"Hide Health Panel":"Show Health Panel","aria-label":z?"Hide health panel":"Show health panel","aria-expanded":z,children:e.jsx(le,{className:"w-5 h-5"})}),e.jsxs("label",{className:"p-2 text-thea-gold-dark hover:text-thea-gold transition-colors cursor-pointer",title:"Upload screenshot","aria-label":"Upload screenshot",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:m=>{var P;(P=m.target.files)!=null&&P[0]&&ie(m.target.files[0]),m.target.value=""}})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-black/50 rounded border border-thea-gold-dark/30 p-0.5",role:"tablist","aria-label":"View mode",children:[e.jsxs("button",{role:"tab","aria-selected":T==="summary",onClick:()=>p("summary"),className:h("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",T==="summary"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"AI Summary View",children:[e.jsx(At,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Summary"})]}),e.jsxs("button",{role:"tab","aria-selected":T==="terminal",onClick:()=>p("terminal"),className:h("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",T==="terminal"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Raw Terminal View",children:[e.jsx(Ke,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Terminal"})]})]}),N&&e.jsxs("button",{onClick:()=>{N.autoAcceptPaused?w(N.id,{autoAcceptPaused:!1}):w(N.id,{autoAccept:!N.autoAccept})},className:h("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",N.autoAccept?N.autoAcceptPaused?"bg-yellow-600/30 text-yellow-500 hover:bg-yellow-600/40":"bg-green-600/30 text-green-500 hover:bg-green-600/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:N.autoAccept?N.autoAcceptPaused?"Auto-accept PAUSED (click to resume)":"Auto-accept ON (click to disable)":"Auto-accept OFF (click to enable)",children:[N.autoAccept?N.autoAcceptPaused?e.jsx(Be,{className:"w-4 h-4"}):e.jsx(re,{className:"w-4 h-4"}):e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:N.autoAccept&&N.autoAcceptPaused?"Paused":"Auto"})]}),N&&e.jsxs("button",{onClick:()=>{w(N.id,{ralphMode:!N.ralphMode})},className:h("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",N.ralphMode?"bg-purple-600/30 text-purple-400 hover:bg-purple-600/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:N.ralphMode?"Ralph mode ON - Worker will signal completion via API":"Ralph mode OFF - Enable autonomous completion signaling",children:[e.jsx(ze,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Ralph"})]}),N&&ue(N.label).prefix==="GENERAL"&&e.jsxs("button",{onClick:()=>{N.bulldozeMode&&N.bulldozePaused?w(N.id,{bulldozePaused:!1}):N.bulldozeMode?w(N.id,{bulldozeMode:!1}):B(N)},className:h("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",N.bulldozeMode?N.bulldozePaused?"bg-yellow-600/30 text-yellow-400 border border-yellow-500/40 hover:bg-yellow-600/40":"bg-amber-600/30 text-amber-300 border border-amber-500/60 hover:bg-amber-600/40 shadow-[0_0_8px_rgba(245,158,11,0.25)]":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:N.bulldozeMode?N.bulldozePaused?`Bulldoze PAUSED (${N.bulldozePauseReason||"unknown"}) — click to resume`:`Bulldoze ON (${N.bulldozeCyclesCompleted||0} cycles) — click to disable`:"Bulldoze OFF — Enable continuous autonomous work",children:[N.bulldozeMode&&N.bulldozePaused?e.jsx(st,{className:"w-4 h-4"}):e.jsx(re,{className:h("w-4 h-4",{"animate-pulse":N.bulldozeMode})}),e.jsx("span",{className:"hidden md:inline",children:N.bulldozeMode&&N.bulldozePaused?"Resume":"Bulldoze"}),N.bulldozeMode&&N.bulldozeCyclesCompleted>0&&e.jsx("span",{className:"text-xxs opacity-70",children:N.bulldozeCyclesCompleted})]}),N&&N.status==="running"&&e.jsxs("button",{onClick:async()=>{try{await J(`/api/workers/${N.id}/interrupt`,{method:"POST"})}catch{}},className:"flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani text-red-400/70 hover:text-red-400 hover:bg-red-600/20 transition-all",title:"Send Ctrl+C interrupt to worker",children:[e.jsx(Wa,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Interrupt"})]})]})]}),(N==null?void 0:N.ralphStatus)&&e.jsxs("div",{className:"px-4 py-2 border-b border-thea-gold-dark/10 flex items-center gap-3",children:[e.jsx("span",{className:h("text-xs font-mono uppercase tracking-wider",{"text-yellow-400":N.ralphStatus==="in_progress","text-green-400":N.ralphStatus==="done","text-red-400":N.ralphStatus==="blocked","text-gray-400":N.ralphStatus==="pending"}),children:N.ralphStatus==="in_progress"?"working":N.ralphStatus}),N.ralphProgress!=null&&e.jsxs(e.Fragment,{children:[e.jsx(nt,{progress:N.ralphProgress,className:"flex-1 max-w-xs"}),e.jsxs("span",{className:"text-xs font-mono text-thea-gold-dark",children:[N.ralphProgress,"%"]})]}),N.ralphCurrentStep&&e.jsx("span",{className:"text-xs text-thea-gold-dark/70 font-mono truncate",title:N.ralphCurrentStep,children:N.ralphCurrentStep})]}),(N==null?void 0:N.waitingAtPrompt)&&e.jsxs("div",{className:"px-4 py-1.5 border-b border-yellow-500/20 bg-yellow-500/5 flex items-center gap-2",children:[e.jsx(Be,{className:"w-3.5 h-3.5 text-yellow-400 animate-pulse"}),e.jsx("span",{className:"text-xs font-mono text-yellow-400",children:"Waiting at permission prompt"}),!N.autoAccept&&e.jsx("span",{className:"text-xxs text-yellow-500/60 ml-auto",children:"auto-accept is off"})]}),e.jsxs("div",{className:"flex-1 p-4 min-h-0 flex gap-4 relative",children:[e.jsx("div",{className:h("flex-1 min-w-0",z&&"lg:max-w-[calc(100%-288px)]"),children:T==="summary"?e.jsx("div",{className:"h-full bg-black/30 border border-thea-gold-dark/20 rounded p-4 overflow-auto",children:e.jsx(Bt,{workerId:r,className:"h-full"})}):e.jsx(Lt,{workerId:r,output:t[r]||"",onRawInput:m=>c(r,m),onResize:(m,P)=>o(r,m,P),className:"h-full w-full"})}),z&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lg:hidden fixed inset-0 top-16 z-50 bg-black/95 overflow-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-orbitron text-thea-gold-bright uppercase tracking-wider",children:"Health Panel"}),e.jsx("button",{onClick:()=>F(!1),className:"p-2 text-thea-gold hover:text-thea-gold-bright","aria-label":"Close health panel",children:e.jsx(Qe,{className:"w-5 h-5"})})]}),e.jsx(gt,{workerId:r})]}),e.jsx("div",{className:"hidden lg:block w-72 shrink-0",children:e.jsx(gt,{workerId:r})})]})]}),e.jsx("div",{className:"p-4 border-t border-thea-gold-dark/20",children:e.jsx(Ut,{onSend:m=>i(r,m),placeholder:`Send to ${N.label}...`})}),H&&e.jsx(Ve,{isOpen:!!H,onClose:()=>B(null),onConfirm:({mission:m,backlog:P,standingOrders:q})=>{w(H.id,{bulldozeMode:!0,bulldozeMission:m,bulldozeBacklog:P,bulldozeStandingOrders:q}),B(null)},workerLabel:H.label})]}):e.jsxs("div",{className:"p-4",children:[G.length>0&&e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:De,className:h("flex items-center gap-2 px-3 py-1.5 text-sm font-rajdhani rounded transition-all border",ce?"bg-green-600/30 text-green-500 border-green-600/40 hover:bg-green-600/40":"text-thea-gold hover:text-thea-gold-bright bg-black/30 hover:bg-black/50 border-thea-gold-dark/30 hover:border-thea-gold/50"),title:ce?"Click to disable auto-accept on all workers":"Click to enable auto-accept on all workers",children:[ce?e.jsx(re,{className:"w-4 h-4"}):e.jsx(tt,{className:"w-4 h-4"}),"Auto-Accept All"]}),e.jsxs("button",{onClick:Ie,className:h("flex items-center gap-2 px-3 py-1.5 text-sm font-rajdhani rounded transition-all border",pe?"bg-purple-600/30 text-purple-400 border-purple-600/40 hover:bg-purple-600/40":"text-thea-gold hover:text-thea-gold-bright bg-black/30 hover:bg-black/50 border-thea-gold-dark/30 hover:border-thea-gold/50"),title:pe?"Click to disable Ralph mode on all workers":"Click to enable Ralph mode on all workers",children:[e.jsx(ze,{className:"w-4 h-4"}),"Ralph All"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center bg-black/50 rounded border border-thea-gold-dark/30 p-0.5",role:"tablist","aria-label":"Worker view mode",children:[e.jsxs("button",{role:"tab","aria-selected":Q==="grid",onClick:()=>xe("grid"),className:h("flex items-center gap-1.5 px-2 py-1.5 rounded text-sm font-rajdhani transition-all",Q==="grid"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Grid View",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Grid"})]}),e.jsxs("button",{role:"tab","aria-selected":Q==="tree",onClick:()=>xe("tree"),className:h("flex items-center gap-1.5 px-2 py-1.5 rounded text-sm font-rajdhani transition-all",Q==="tree"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Tree View",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Tree"})]})]}),e.jsxs("button",{onClick:()=>{var m;me(n&&((m=l.find(P=>P.name===n))==null?void 0:m.path)||""),ee(!0)},className:"flex items-center gap-2 px-3 py-1.5 text-sm font-rajdhani text-amber-300 hover:text-amber-200 bg-amber-500/10 hover:bg-amber-500/20 border border-amber-500/30 hover:border-amber-500/50 rounded transition-all",children:[e.jsx(La,{className:"w-4 h-4"}),"New Session"]}),e.jsxs("button",{onClick:()=>Ne(),className:"flex items-center gap-2 px-3 py-1.5 text-sm font-rajdhani text-thea-gold hover:text-thea-gold-bright bg-black/30 hover:bg-black/50 border border-thea-gold-dark/30 hover:border-thea-gold/50 rounded transition-all",children:[e.jsx(Ae,{className:"w-4 h-4"}),"Multi-Terminal View"]})]})]}),Q==="grid"&&G.length>0&&e.jsxs("div",{className:"mb-4 space-y-3",children:[e.jsx(ys,{value:$,onChange:Z,placeholder:"Search by label, project, or ID..."}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[Object.entries(_e).sort(([m],[P])=>m.localeCompare(P)).map(([m,P])=>{const q={running:"bg-green-400/10 border-green-400/30 text-green-400",stopped:"bg-gray-400/10 border-gray-400/30 text-gray-400",error:"bg-red-400/10 border-red-400/30 text-red-400",awaiting_review:"bg-yellow-400/10 border-yellow-400/30 text-yellow-400"};return e.jsxs("button",{onClick:()=>ae(L===m?null:m),className:h("flex items-center gap-1 text-xxs px-2 py-1 font-mono uppercase tracking-wider transition-all border",L===m?(q[m]||"bg-thea-gold/10 border-thea-gold-dark/30 text-thea-gold")+" shadow-sm":"text-thea-gold-dark border-thea-gold-dark/30 hover:border-thea-gold/50 hover:text-thea-gold"),children:[m," (",P,")"]},m)}),!n&&je.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-thea-gold-dark/30 text-xs",children:"|"}),je.map(m=>{const P=G.filter(q=>q.project===m).length;return e.jsxs("button",{onClick:()=>se(te===m?null:m),className:h("flex items-center gap-1 text-xxs px-2 py-1 font-mono tracking-wider transition-all border",te===m?"bg-blue-400/10 border-blue-400/30 text-blue-400 shadow-sm":"text-thea-gold-dark border-thea-gold-dark/30 hover:border-thea-gold/50 hover:text-thea-gold"),children:[m," (",P,")"]},m)})]}),(L||te)&&e.jsxs("button",{onClick:()=>{ae(null),se(null)},className:"text-xxs px-2 py-1 text-thea-maroon-light hover:text-thea-maroon-light/80 transition-colors flex items-center gap-1",children:[e.jsx(ne,{className:"w-3 h-3"}),"Clear"]})]})]}),Q==="tree"?e.jsx(ks,{}):G.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx("div",{className:"w-16 h-16 mb-4 opacity-30",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",className:"text-thea-gold",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]})}),e.jsx("h3",{className:"font-orbitron text-lg text-thea-gold-dark mb-2",children:"No Workers Active"}),e.jsx("p",{className:"text-sm text-thea-gold-dark/50 text-center max-w-xs",children:n?`No workers running for ${n}. Start one from the project panel.`:"Select a project and start a worker to begin."})]}):we.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsxs("p",{className:"text-sm text-thea-gold-dark/50 font-mono",children:["No workers match",$&&` "${$}"`,L&&` [${L}]`,te&&` in ${te}`,!$&&!L&&!te&&" current filters"]}),e.jsx("button",{onClick:()=>{Z(""),ae(null),se(null)},className:"mt-2 text-xs text-thea-gold hover:text-thea-gold-bright transition-colors font-mono",children:"Clear all filters"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:we.map(m=>e.jsx(rs,{worker:m,onOpenInMultiTerminal:()=>Ne(m.id)},m.id))}),Y&&e.jsx(Ve,{isOpen:Y,onClose:()=>ee(!1),onConfirm:async({mission:m,backlog:P,standingOrders:q})=>{I&&await I(oe,m,P,q),ee(!1)},workerLabel:"",showProjectPicker:!0,projects:l,selectedProject:oe,onProjectChange:me})]})}const kt={success:{icon:Ge,bgClass:"bg-status-success/20 border-status-success",textClass:"text-status-success",glowClass:"shadow-[0_0_20px_rgba(78,201,176,0.4)]"},error:{icon:be,bgClass:"bg-status-error/20 border-status-error",textClass:"text-status-error",glowClass:"shadow-[0_0_20px_rgba(244,135,113,0.4)]"},info:{icon:Ea,bgClass:"bg-thea-gold/20 border-thea-gold",textClass:"text-thea-gold",glowClass:"shadow-gold-sm"},loading:{icon:Te,bgClass:"bg-thea-gold/10 border-thea-gold-dark",textClass:"text-thea-gold-bright",glowClass:""}};function ws({toast:a,onDismiss:t}){const l=kt[a.type]||kt.info,n=l.icon;return s.useEffect(()=>{if(a.duration&&a.duration>0){const r=setTimeout(()=>t(a.id),a.duration);return()=>clearTimeout(r)}},[a.id,a.duration,t]),e.jsxs("div",{role:"alert",className:h("flex items-start gap-3 px-4 py-3 border backdrop-blur-md","animate-[slideIn_0.3s_ease-out]",l.bgClass,l.glowClass,"clip-cyber-sm"),children:[e.jsx(n,{className:h("w-5 h-5 flex-shrink-0 mt-0.5",l.textClass,a.type==="loading"&&"animate-spin")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:h("font-rajdhani font-semibold",l.textClass),children:a.title}),a.message&&e.jsx("p",{className:"text-sm text-white/70 font-mono mt-0.5 truncate",children:a.message})]}),e.jsx("button",{onClick:()=>t(a.id),className:h("p-1 hover:bg-white/10 transition-colors",l.textClass),"aria-label":"Dismiss notification",children:e.jsx(ne,{className:"w-4 h-4"})})]})}function yt({toasts:a,onDismiss:t}){return e.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm","aria-live":"polite","aria-label":"Notifications",children:a.map(l=>e.jsx(ws,{toast:l,onDismiss:t},l.id))})}function vs(){const[a,t]=s.useState(!1),l=s.useRef(null);return s.useEffect(()=>{if(!a)return;function n(r){l.current&&!l.current.contains(r.target)&&t(!1)}return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[a]),s.useEffect(()=>{if(!a)return;function n(r){r.key==="Escape"&&(r.stopPropagation(),t(!1))}return document.addEventListener("keydown",n,!0),()=>document.removeEventListener("keydown",n,!0)},[a]),e.jsxs("div",{className:"relative",ref:l,children:[e.jsx("button",{"data-shortcut-help":!0,onClick:()=>t(n=>!n),className:h("thea-btn p-2",a&&"bg-thea-gold/20 border-thea-gold shadow-gold-sm"),title:"Keyboard shortcuts (?)","aria-label":"Keyboard shortcuts","aria-expanded":a,"aria-haspopup":"true",children:e.jsx(Ma,{className:"w-4 h-4"})}),a&&e.jsxs("div",{role:"dialog","aria-label":"Keyboard shortcuts",className:"absolute right-0 top-full mt-2 w-72 bg-black/95 border border-thea-gold-dark/50 backdrop-blur-md shadow-lg shadow-black/50 z-50",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-thea-gold-dark/30",children:[e.jsx("span",{className:"font-orbitron text-thea-gold-bright text-xs uppercase tracking-wider",children:"Keyboard Shortcuts"}),e.jsx("button",{onClick:()=>t(!1),className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors","aria-label":"Close keyboard shortcuts",children:e.jsx(ne,{className:"w-3.5 h-3.5"})})]}),e.jsx("div",{className:"p-3 space-y-3 max-h-80 overflow-y-auto",children:xa.map(n=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-xxs font-mono text-thea-gold-dark uppercase tracking-wider mb-1.5",children:n.label}),e.jsx("div",{className:"space-y-1",children:n.shortcuts.map(r=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-thea-gold/80 font-rajdhani",children:r.description}),e.jsx("div",{className:"flex items-center gap-0.5",children:r.keys.map((i,c)=>e.jsxs("span",{children:[c>0&&e.jsx("span",{className:"text-thea-gold-dark/50 text-xxs mx-0.5",children:"+"}),e.jsx("kbd",{className:"inline-block px-1.5 py-0.5 text-xxs font-mono text-thea-gold bg-thea-gold/10 border border-thea-gold-dark/40 rounded min-w-[1.5rem] text-center",children:i})]},i))})]},r.description))})]},n.label))}),e.jsx("div",{className:"px-3 py-1.5 border-t border-thea-gold-dark/20 text-center",children:e.jsxs("span",{className:"text-xxs text-thea-gold-dark/50 font-mono",children:["Press ",e.jsx("kbd",{className:"px-1 py-0.5 bg-thea-gold/10 border border-thea-gold-dark/30 rounded text-thea-gold-dark",children:"?"})," to toggle"]})})]})]})}function Ns({performanceMode:a,onTogglePerformance:t,summariesEnabled:l,onToggleSummaries:n}){var F,W,V,R;const[r,i]=s.useState(!1),c=s.useRef(null),[o,u]=s.useState(null),[d,y]=s.useState(!1),[g,j]=s.useState(!1),[w,_]=s.useState(null),b=s.useCallback(async M=>{try{const C=await J("/api/sentinel/status",{signal:M});C.ok&&u(await C.json())}catch(C){if(C.name==="AbortError")return}},[]);s.useEffect(()=>{const M=new AbortController;return b(M.signal),()=>M.abort()},[b]),s.useEffect(()=>{if(!r||!(o!=null&&o.enabled))return;const M=new AbortController,C=setInterval(()=>b(M.signal),3e4);return()=>{M.abort(),clearInterval(C)}},[r,o==null?void 0:o.enabled,b]);const I=s.useCallback(async()=>{y(!0);try{const M=o!=null&&o.enabled?"/api/sentinel/stop":"/api/sentinel/start",f=await(await J(M,{method:"POST"})).json();f.diagnostics&&_(f.diagnostics),await b()}catch{}finally{y(!1)}},[o==null?void 0:o.enabled,b]),T=s.useCallback(async()=>{y(!0);try{const C=await(await J("/api/diagnostics?run=true")).json();_(C),await b()}catch{}finally{y(!1)}},[b]);s.useEffect(()=>{if(!r)return;const M=C=>{c.current&&!c.current.contains(C.target)&&i(!1)};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[r]);const p=o==null?void 0:o.enabled,O=p?(o==null?void 0:o.lastStatus)==="healthy"?"text-green-400":(o==null?void 0:o.lastStatus)==="degraded"?"text-yellow-400":(o==null?void 0:o.lastStatus)==="unhealthy"?"text-red-400":"text-thea-gold":"text-gray-500",k=p?(o==null?void 0:o.lastStatus)==="unhealthy"?Oa:$a:Pt,z=p&&(o==null?void 0:o.lastStatus)==="unhealthy";return e.jsxs("div",{className:"relative",ref:c,children:[e.jsxs("button",{onClick:()=>i(!r),className:h("thea-btn p-2 relative",r&&"bg-thea-gold/20 border-thea-gold shadow-gold-sm"),title:"Settings","aria-label":"Settings","aria-expanded":r,"aria-haspopup":"true",children:[e.jsx(Da,{className:"w-4 h-4"}),z&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 rounded-full bg-red-400 animate-pulse"})]}),r&&e.jsxs("div",{role:"menu","aria-label":"Settings menu",className:"absolute right-0 top-full mt-2 w-72 bg-black/95 border border-thea-gold-dark/50 rounded-lg shadow-2xl backdrop-blur-md z-50 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-2.5 border-b border-thea-gold-dark/30 bg-black/40",children:e.jsx("span",{className:"font-rajdhani font-bold text-sm uppercase tracking-wider text-thea-gold-bright",children:"Settings"})}),e.jsxs("div",{className:"py-1",children:[e.jsx(jt,{icon:e.jsx(re,{className:h("w-4 h-4",a?"text-green-400":"text-thea-gold-dark")}),label:"Performance Mode",description:"Disable animations",enabled:a,onToggle:t}),e.jsx(jt,{icon:e.jsx(ze,{className:h("w-4 h-4",l?"text-thea-gold":"text-thea-gold-dark")}),label:"AI Summaries",description:"Ollama-powered",enabled:l,onToggle:n}),e.jsxs("div",{className:"border-t border-thea-gold-dark/20 mt-1 pt-1",children:[e.jsxs("button",{onClick:()=>j(!g),className:"w-full flex items-center gap-3 px-4 py-2 hover:bg-thea-gold/5 transition-colors","aria-expanded":g,"aria-label":"Sentinel diagnostics",children:[e.jsxs("div",{className:"relative",children:[d?e.jsx(Te,{className:"w-4 h-4 animate-spin text-thea-gold"}):e.jsx(k,{className:h("w-4 h-4",O)}),p&&!d&&e.jsx("span",{className:h("absolute -top-0.5 -right-0.5 w-1.5 h-1.5 rounded-full",(o==null?void 0:o.lastStatus)==="healthy"?"bg-green-400":(o==null?void 0:o.lastStatus)==="degraded"?"bg-yellow-400":(o==null?void 0:o.lastStatus)==="unhealthy"?"bg-red-400 animate-pulse":"bg-thea-gold")})]}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-xs font-mono text-thea-gold-bright",children:"Sentinel"}),e.jsx("div",{className:"text-xxs text-thea-gold-dark font-mono",children:p?`${(o==null?void 0:o.lastStatus)||"checking..."}`:"Disabled"})]}),e.jsx("button",{onClick:M=>{M.stopPropagation(),I()},disabled:d,role:"switch","aria-checked":!!p,"aria-label":"Toggle sentinel",className:h("px-2 py-0.5 rounded text-xxs font-mono transition-all",p?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-gray-800 text-gray-400 border border-gray-600"),children:d?"...":p?"ON":"OFF"}),g?e.jsx(qe,{className:"w-3 h-3 text-thea-gold-dark"}):e.jsx(Mt,{className:"w-3 h-3 text-thea-gold-dark"})]}),g&&e.jsxs("div",{className:"px-4 pb-2 space-y-2",children:[p&&o&&e.jsxs("div",{className:"text-xs font-mono space-y-1 pl-7",children:[e.jsx(Ze,{label:"Checks",value:o.checksRun}),e.jsx(Ze,{label:"Uptime",value:Wt(o.uptimeSeconds)}),o.lastCheck&&e.jsx(Ze,{label:"Last",value:Ss(o.lastCheck)})]}),w&&e.jsxs("div",{className:"pl-7 space-y-1",children:[e.jsx("span",{className:"text-xxxs text-thea-gold-dark uppercase tracking-wider font-mono",children:"Last Run"}),((F=w.issues)==null?void 0:F.length)>0&&w.issues.map(M=>e.jsx("p",{className:"text-red-400 text-xxs leading-tight font-mono",children:M},M)),((W=w.warnings)==null?void 0:W.length)>0&&w.warnings.map(M=>e.jsx("p",{className:"text-yellow-400 text-xxs leading-tight font-mono",children:M},M)),!((V=w.issues)!=null&&V.length)&&!((R=w.warnings)!=null&&R.length)&&e.jsx("p",{className:"text-green-400 text-xxs font-mono",children:"All checks passed"})]}),e.jsxs("div",{className:"flex gap-2 pl-7",children:[e.jsx("button",{onClick:T,disabled:d,className:"text-xxs font-rajdhani uppercase tracking-wider px-2.5 py-1 bg-thea-gold/10 text-thea-gold border border-thea-gold-dark/30 rounded hover:bg-thea-gold/20 transition-colors disabled:opacity-50",children:"Run Now"}),e.jsx("button",{onClick:I,disabled:d,className:h("text-xxs font-rajdhani uppercase tracking-wider px-2.5 py-1 rounded transition-colors disabled:opacity-50",p?"bg-red-500/10 text-red-400 border border-red-500/30 hover:bg-red-500/20":"bg-green-500/10 text-green-400 border border-green-500/30 hover:bg-green-500/20"),children:p?"Disable":"Enable"})]})]})]})]})]})]})}function jt({icon:a,label:t,description:l,enabled:n,onToggle:r}){return e.jsxs("button",{onClick:r,role:"switch","aria-checked":n,className:"w-full flex items-center gap-3 px-4 py-2 hover:bg-thea-gold/5 transition-colors",children:[a,e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-xs font-mono text-thea-gold-bright",children:t}),l&&e.jsx("div",{className:"text-xxs text-thea-gold-dark font-mono",children:l})]}),e.jsx("span",{className:h("px-2 py-0.5 rounded text-xxs font-mono transition-all",n?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-gray-800 text-gray-400 border border-gray-600"),children:n?"ON":"OFF"})]})}function Ze({label:a,value:t}){return e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-thea-gold-dark",children:a}),e.jsx("span",{className:"text-thea-gold",children:t})]})}function Ss(a){try{return new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return a}}function Cs(a){if(!a)return"";const t=a*1e3-Date.now();if(t<=0)return"now";const l=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4);return l>24?`${Math.floor(l/24)}d ${l%24}h`:l>0?`${l}h ${n}m`:`${n}m`}function Ms(a){return a>=90?{text:"text-red-400",bar:"bg-red-500",border:"border-red-500/40"}:a>=70?{text:"text-yellow-400",bar:"bg-yellow-500",border:"border-yellow-500/40"}:{text:"text-emerald-400",bar:"bg-emerald-500",border:"border-emerald-500/30"}}function wt({label:a,pct:t,reset:l}){const n=Ms(t);return e.jsxs("div",{className:h("flex items-center gap-1.5 px-2 py-1 border rounded-sm bg-black/40",n.border),title:`${a}: ${t}%${l?` — resets in ${Cs(l)}`:""}`,"aria-label":`${a}: ${t}%`,children:[e.jsx("span",{className:"text-xxxs font-mono text-thea-gold-dark uppercase tracking-wider hidden md:inline",children:a}),e.jsx("div",{className:"w-12 h-1.5 bg-black/60 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,children:e.jsx("div",{className:h("h-full rounded-full transition-all duration-700",n.bar),style:{width:`${Math.min(t,100)}%`}})}),e.jsxs("span",{className:h("text-xxs font-mono font-bold tabular-nums",n.text),children:[t,"%"]})]})}function Es(){const[a,t]=s.useState(null),[l,n]=s.useState(null),r=s.useCallback(async o=>{try{const u=await J("/api/usage",{signal:o});u.ok?(t(await u.json()),n(null)):u.status===404||u.status===401?n("unavailable"):n("failed")}catch(u){if(u.name==="AbortError")return;n(u.message)}},[]);if(s.useEffect(()=>{const o=new AbortController;r(o.signal);const u=setInterval(()=>r(o.signal),6e4);return()=>{o.abort(),clearInterval(u)}},[r]),l==="unavailable"||!a)return null;const i=Math.round(a.session.utilization*100),c=Math.round(a.weekly.utilization*100);return e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(wt,{label:"5h",pct:i,reset:a.session.reset}),e.jsx(wt,{label:"7d",pct:c,reset:a.weekly.reset})]})}class ye extends vt.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,l){console.error("[ErrorBoundary] Caught rendering error:",t,l)}render(){var t;return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-thea-bg flex items-center justify-center p-8",children:e.jsxs("div",{className:"max-w-lg w-full bg-gray-900 border border-red-500/30 rounded-lg p-6",children:[e.jsx("h2",{className:"text-red-400 text-lg font-bold mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"The UI encountered an error. Your workers are still running — this only affects the dashboard."}),e.jsx("pre",{className:"text-xs text-red-300/70 bg-black/50 rounded p-3 overflow-auto max-h-40 mb-4",children:((t=this.state.error)==null?void 0:t.message)||"Unknown error"}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"px-4 py-2 bg-thea-gold text-black rounded font-medium text-sm hover:bg-thea-gold-bright transition-colors",children:"Try Again"})]})}):this.props.children}}const zs=s.lazy(()=>he(()=>import("./ProjectsView-JrVt0VgO.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(a=>({default:a.ProjectsView}))),As=s.lazy(()=>he(()=>import("./VoiceModeView-KoqpB_B_.js"),__vite__mapDeps([7,1,5,6])).then(a=>({default:a.VoiceModeView}))),Ts=s.lazy(()=>he(()=>import("./CheckpointsView-DEL-84UJ.js"),__vite__mapDeps([8,1,9,5,6])).then(a=>({default:a.CheckpointsView}))),Rs=s.lazy(()=>he(()=>import("./RalphPanel-qk4--n6p.js"),__vite__mapDeps([10,1,9,5,6])).then(a=>({default:a.RalphPanel}))),Ps=s.lazy(()=>he(()=>import("./VoiceControl-B5cmUIcr.js"),__vite__mapDeps([11,1,5,6])).then(a=>({default:a.VoiceControl}))),Ls=s.lazy(()=>he(()=>import("./ActivityFeed-MsQdCZvi.js"),__vite__mapDeps([12,3,1,5,6])).then(a=>({default:a.ActivityFeed}))),_s=s.lazy(()=>he(()=>import("./ADRPanel-CKiho6C_.js"),__vite__mapDeps([13,1,4,5,6])).then(a=>({default:a.ADRPanel}))),Is=s.lazy(()=>he(()=>import("./MetricsDashboard-CPGgXVi6.js"),__vite__mapDeps([14,1,2,5,6])).then(a=>({default:a.MetricsDashboard})));function Ds(){const{connected:a,workers:t,toasts:l,dismissToast:n,detachFromWorker:r,focusedWorker:i}=fe();ua();const[c,o]=s.useState(!1),[u,d]=s.useState("workers"),[y,g]=s.useState(!1),[j,w]=s.useState("activity"),[_,b]=s.useState(!1),[I,T]=s.useState(()=>{if(typeof window<"u"){const k=localStorage.getItem("strategos-performance-mode");return k===null?!0:k==="true"}return!0}),p=s.useMemo(()=>t.filter(k=>k.status==="running").length,[t]);ha({setActiveTab:d,detachFromWorker:r,setShowActivity:o,hasFocusedWorker:!!i,showActivity:c}),s.useEffect(()=>{I?document.body.classList.add("performance-mode"):document.body.classList.remove("performance-mode"),localStorage.setItem("strategos-performance-mode",I.toString())},[I]),s.useEffect(()=>{const k=new AbortController;return J("/api/settings/summaries",{signal:k.signal}).then(z=>z.json()).then(z=>b(z.enabled)).catch(z=>{z.name}),()=>k.abort()},[]);const O=async()=>{const k=!_;b(k);try{const F=await(await J("/api/settings/summaries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:k})})).json();b(F.enabled)}catch{b(!k)}};return y?e.jsxs("div",{className:"min-h-screen bg-thea-black relative z-10",children:[e.jsx(s.Suspense,{fallback:e.jsx(Me,{}),children:e.jsx(As,{onExit:()=>g(!1)})}),e.jsx(yt,{toasts:l,onDismiss:n})]}):e.jsxs("div",{className:"min-h-screen bg-thea-black flex flex-col relative z-10 pb-mobile-nav sm:pb-0 overflow-x-hidden",children:[e.jsx("header",{role:"banner","aria-label":"Strategos application header",className:"bg-gradient-to-r from-black/80 via-thea-nearBlack/90 to-black/80 border-b border-thea-gold-dark/50 backdrop-blur-md sticky top-0 z-50",children:e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("button",{onClick:()=>{r(),d("workers"),o(!1)},className:"flex items-center gap-4 group cursor-pointer","aria-label":"Strategos home",children:[e.jsxs("div",{className:"relative",children:[e.jsx("h1",{className:"font-orbitron font-bold text-2xl text-thea-gold-bright tracking-widest text-glow-gold group-hover:text-white transition-colors",children:"STRATEGOS"}),e.jsx("div",{className:"absolute -bottom-1 left-0 w-full h-px bg-gradient-to-r from-transparent via-thea-gold to-transparent group-hover:via-white transition-colors"})]}),e.jsx("span",{className:"text-xxs text-thea-gold-dark font-mono hidden sm:block uppercase tracking-[0.2em]",children:"// Thea Orchestrator"})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-5",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 text-sm","aria-live":"polite","aria-label":`${t.length} workers, ${p} active`,children:[e.jsx("span",{className:"hidden sm:inline text-thea-gold-dark font-mono text-xs uppercase tracking-wider",children:"Workers:"}),e.jsx("span",{className:"font-mono text-thea-gold-bright font-bold text-lg",children:t.length}),p<t.length&&e.jsxs("span",{className:"text-xxs text-thea-gold-dark font-mono",children:["(",p," active)"]})]}),e.jsx("div",{"data-testid":"connection-status",role:"status","aria-live":"polite","aria-label":a?"Connected to server":"Disconnected from server",className:h("thea-badge flex items-center gap-1 sm:gap-2 px-2 sm:px-3",a?"thea-badge-running":"thea-badge-stopped"),children:a?e.jsxs(e.Fragment,{children:[e.jsx(qa,{className:"w-3.5 h-3.5"}),e.jsx("span",{"data-testid":"status-text",className:"hidden sm:inline",children:"Connected"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ga,{className:"w-3.5 h-3.5"}),e.jsx("span",{"data-testid":"status-text",className:"hidden sm:inline",children:"Disconnected"})]})}),e.jsx(Es,{}),e.jsx(Ns,{performanceMode:I,onTogglePerformance:()=>T(!I),summariesEnabled:_,onToggleSummaries:O}),e.jsx("div",{className:"hidden sm:block",children:e.jsx(vs,{})}),e.jsx("button",{onClick:()=>g(!0),className:"hidden sm:block thea-btn p-2 group",title:"Enter Voice Mode","aria-label":"Enter voice mode",children:e.jsx(Tt,{className:"w-4 h-4 group-hover:text-thea-gold-bright"})}),e.jsx("button",{"data-testid":"activity-toggle",onClick:()=>o(!c),className:h("hidden sm:block thea-btn p-2",c&&"bg-thea-gold/20 border-thea-gold shadow-gold-sm"),"aria-label":"Toggle activity sidebar","aria-expanded":c,children:e.jsx(le,{className:"w-4 h-4"})})]})]})})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("main",{role:"main",className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-b from-black/50 to-transparent border-b border-thea-gold-dark/30 px-4",children:e.jsxs("div",{className:"flex gap-2",role:"tablist","aria-label":"Main navigation",children:[e.jsxs("button",{"data-testid":"tab-workers",role:"tab","aria-selected":u==="workers","aria-controls":"tabpanel-workers",onClick:()=>d("workers"),className:h("flex items-center gap-2 px-5 py-3 text-sm font-rajdhani font-bold uppercase tracking-wider border-b-2 transition-all duration-300",u==="workers"?"border-thea-gold text-thea-gold-bright text-glow-gold-sm":"border-transparent text-thea-gold-dark hover:text-thea-gold hover:border-thea-gold/30"),children:[e.jsx(Ae,{className:"w-4 h-4","aria-hidden":"true"}),"Workers"]}),e.jsxs("button",{"data-testid":"tab-projects",role:"tab","aria-selected":u==="projects","aria-controls":"tabpanel-projects",onClick:()=>d("projects"),className:h("flex items-center gap-2 px-5 py-3 text-sm font-rajdhani font-bold uppercase tracking-wider border-b-2 transition-all duration-300",u==="projects"?"border-thea-gold text-thea-gold-bright text-glow-gold-sm":"border-transparent text-thea-gold-dark hover:text-thea-gold hover:border-thea-gold/30"),children:[e.jsx(xt,{className:"w-4 h-4","aria-hidden":"true"}),"Projects"]}),e.jsxs("button",{"data-testid":"tab-ralph",role:"tab","aria-selected":u==="ralph","aria-controls":"tabpanel-ralph",onClick:()=>d("ralph"),className:h("flex items-center gap-2 px-5 py-3 text-sm font-rajdhani font-bold uppercase tracking-wider border-b-2 transition-all duration-300",u==="ralph"?"border-thea-gold text-thea-gold-bright text-glow-gold-sm":"border-transparent text-thea-gold-dark hover:text-thea-gold hover:border-thea-gold/30"),children:[e.jsx(ze,{className:"w-4 h-4","aria-hidden":"true"}),"Ralph"]}),e.jsxs("button",{"data-testid":"tab-history",role:"tab","aria-selected":u==="history","aria-controls":"tabpanel-history",onClick:()=>d("history"),className:h("flex items-center gap-2 px-5 py-3 text-sm font-rajdhani font-bold uppercase tracking-wider border-b-2 transition-all duration-300",u==="history"?"border-thea-gold text-thea-gold-bright text-glow-gold-sm":"border-transparent text-thea-gold-dark hover:text-thea-gold hover:border-thea-gold/30"),children:[e.jsx(ht,{className:"w-4 h-4","aria-hidden":"true"}),"History"]})]})}),e.jsxs("div",{className:"flex-1 overflow-auto",role:"tabpanel",id:`tabpanel-${u}`,"aria-label":`${u} panel`,children:[u==="workers"&&e.jsx(ye,{children:e.jsx(js,{})}),u==="projects"&&e.jsx(ye,{children:e.jsx(s.Suspense,{fallback:e.jsx(Me,{}),children:e.jsx(zs,{})})}),u==="ralph"&&e.jsx(ye,{children:e.jsx(s.Suspense,{fallback:e.jsx(Me,{}),children:e.jsx(Rs,{className:"h-full"})})}),u==="history"&&e.jsx(ye,{children:e.jsx(s.Suspense,{fallback:e.jsx(Me,{}),children:e.jsx(Ts,{})})})]})]}),e.jsx("aside",{role:"complementary","aria-label":"Activity sidebar","aria-hidden":!c,className:h("bg-gradient-to-l from-black/95 to-thea-nearBlack/95 lg:from-black/60 lg:to-thea-nearBlack/40 border-l border-thea-gold-dark/30 transition-all duration-300 overflow-hidden backdrop-blur-sm flex flex-col",c?"fixed lg:relative inset-0 lg:inset-auto top-16 lg:top-0 z-40 lg:z-auto w-full lg:w-72":"w-0"),children:c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lg:hidden flex items-center justify-between px-4 py-3 bg-black/80 border-b border-thea-gold-dark/30",children:[e.jsx("span",{className:"font-orbitron text-thea-gold-bright text-sm uppercase tracking-wider",children:"Activity"}),e.jsx("button",{onClick:()=>o(!1),className:"p-2 text-thea-gold hover:text-thea-gold-bright hover:bg-thea-gold/10 rounded transition-colors","aria-label":"Close activity sidebar",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex border-b border-thea-gold-dark/30 bg-black/40 shrink-0",role:"tablist","aria-label":"Sidebar sections",children:[e.jsxs("button",{role:"tab","aria-selected":j==="activity",onClick:()=>w("activity"),className:h("flex-1 flex items-center justify-center gap-1.5 px-2 py-2.5 text-xxs font-rajdhani uppercase tracking-wider transition-all border-b-2",j==="activity"?"border-thea-gold text-thea-gold-bright bg-thea-gold/10":"border-transparent text-thea-gold-dark hover:text-thea-gold"),title:"Activity Feed",children:[e.jsx(le,{className:"w-3.5 h-3.5","aria-hidden":"true"}),e.jsx("span",{className:"hidden sm:inline",children:"Activity"})]}),e.jsxs("button",{role:"tab","aria-selected":j==="adrs",onClick:()=>w("adrs"),className:h("flex-1 flex items-center justify-center gap-1.5 px-2 py-2.5 text-xxs font-rajdhani uppercase tracking-wider transition-all border-b-2",j==="adrs"?"border-thea-gold text-thea-gold-bright bg-thea-gold/10":"border-transparent text-thea-gold-dark hover:text-thea-gold"),title:"Architecture Decisions",children:[e.jsx(wa,{className:"w-3.5 h-3.5","aria-hidden":"true"}),e.jsx("span",{className:"hidden sm:inline",children:"ADRs"})]}),e.jsxs("button",{role:"tab","aria-selected":j==="metrics",onClick:()=>w("metrics"),className:h("flex-1 flex items-center justify-center gap-1.5 px-2 py-2.5 text-xxs font-rajdhani uppercase tracking-wider transition-all border-b-2",j==="metrics"?"border-thea-gold text-thea-gold-bright bg-thea-gold/10":"border-transparent text-thea-gold-dark hover:text-thea-gold"),title:"System Metrics",children:[e.jsx(ba,{className:"w-3.5 h-3.5","aria-hidden":"true"}),e.jsx("span",{className:"hidden sm:inline",children:"Metrics"})]})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx(ye,{children:e.jsxs(s.Suspense,{fallback:e.jsx(Me,{}),children:[j==="activity"&&e.jsx(Ls,{}),j==="adrs"&&e.jsx(_s,{limit:10}),j==="metrics"&&e.jsx(Is,{})]})})})]})})]}),e.jsx("div",{className:"hidden xl:block fixed bottom-4 right-4 z-40 w-80",children:e.jsx(s.Suspense,{fallback:null,children:e.jsx(Ps,{})})}),e.jsx("nav",{role:"navigation","aria-label":"Mobile navigation",className:"sm:hidden fixed bottom-0 left-0 right-0 bg-black/90 border-t border-thea-gold-dark/30 backdrop-blur-sm z-50",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:e.jsxs("div",{className:"flex justify-around py-2",children:[e.jsxs("button",{onClick:()=>{r(),d("workers"),o(!1)},className:h("flex flex-col items-center gap-1 px-4 py-2",u==="workers"?"text-thea-gold":"text-thea-gold-dark"),children:[e.jsx(Ae,{className:"w-5 h-5","aria-hidden":"true"}),e.jsx("span",{className:"text-xxs font-rajdhani",children:"Home"})]}),e.jsxs("button",{onClick:()=>d("projects"),className:h("flex flex-col items-center gap-1 px-4 py-2",u==="projects"?"text-thea-gold":"text-thea-gold-dark"),children:[e.jsx(xt,{className:"w-5 h-5","aria-hidden":"true"}),e.jsx("span",{className:"text-xxs font-rajdhani",children:"Projects"})]}),e.jsxs("button",{onClick:()=>d("history"),className:h("flex flex-col items-center gap-1 px-4 py-2",u==="history"?"text-thea-gold":"text-thea-gold-dark"),children:[e.jsx(ht,{className:"w-5 h-5","aria-hidden":"true"}),e.jsx("span",{className:"text-xxs font-rajdhani",children:"History"})]}),e.jsxs("button",{onClick:()=>o(!c),className:h("flex flex-col items-center gap-1 px-4 py-2",c?"text-thea-gold":"text-thea-gold-dark"),children:[e.jsx(le,{className:"w-5 h-5","aria-hidden":"true"}),e.jsx("span",{className:"text-xxs font-rajdhani",children:"Activity"})]})]})}),e.jsx(yt,{toasts:l,onDismiss:n})]})}function Me(){return e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"text-thea-gold-dark text-sm font-mono animate-pulse",children:"Loading..."})})}window.addEventListener("unhandledrejection",a=>{console.error("[Strategos] Unhandled promise rejection:",a.reason)});window.addEventListener("error",a=>{var t;console.error("[Strategos] Uncaught error:",((t=a.error)==null?void 0:t.message)||a.message)});Ye.createRoot(document.getElementById("root")).render(e.jsx(vt.StrictMode,{children:e.jsx(ye,{children:e.jsx(da,{children:e.jsx(Ds,{})})})}));export{Qe as A,ze as B,qe as C,nt as D,ps as E,va as F,wa as G,Dt as H,Ma as I,ka as J,et as K,Ae as L,at as M,be as N,Ya as O,Pa as P,Wt as Q,Ws as R,Wa as S,Ba as T,Va as U,mt as V,ba as W,ne as X,Ua as Y,re as Z,h as a,Mt as b,A as c,fa as d,Te as e,J as f,Ee as g,ht as h,le as i,e as j,Be as k,Bs as l,Ft as m,$t as n,es as o,ue as p,ns as q,ys as r,ls as s,Ha as t,fe as u,At as v,Aa as w,Tt as x,rt as y,ts as z};
