const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProjectsView-B_8bOpAS.js","assets/vendor-react-wGySg1uH.js","assets/server-Dbo3Yauv.js","assets/play-circle-gyoy9M-C.js","assets/tag-CD-ra2jd.js","assets/vendor-socket-TjCxX7sJ.js","assets/vendor-terminal-CyaXSNWE.js","assets/VoiceModeView-DSJA0q-e.js","assets/CheckpointsView-BHVg8Yw9.js","assets/check-circle-2-BBvmL1bA.js","assets/RalphPanel-Dwn7C5KC.js","assets/VoiceControl-7ihJotUZ.js","assets/ActivityFeed-D57yR7OS.js","assets/ADRPanel-CbyO4n_v.js","assets/MetricsDashboard-FiDI4-DB.js"])))=>i.map(i=>d[i]);
import{r as s,a as Ht,R as vt}from"./vendor-react-wGySg1uH.js";import{l as Gt}from"./vendor-socket-TjCxX7sJ.js";import{x as qt,a as Kt,b as Xt}from"./vendor-terminal-CyaXSNWE.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function l(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(r){if(r.ep)return;r.ep=!0;const c=l(r);fetch(r.href,c)}})();var Nt={exports:{}},He={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zt=s,Yt=Symbol.for("react.element"),Qt=Symbol.for("react.fragment"),Jt=Object.prototype.hasOwnProperty,ea=Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ta={key:!0,ref:!0,__self:!0,__source:!0};function St(a,t,l){var n,r={},c=null,d=null;l!==void 0&&(c=""+l),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(d=t.ref);for(n in t)Jt.call(t,n)&&!ta.hasOwnProperty(n)&&(r[n]=t[n]);if(a&&a.defaultProps)for(n in t=a.defaultProps,t)r[n]===void 0&&(r[n]=t[n]);return{$$typeof:Yt,type:a,key:c,ref:d,props:r,_owner:ea.current}}He.Fragment=Qt;He.jsx=St;He.jsxs=St;Nt.exports=He;var e=Nt.exports,Ye={},it=Ht;Ye.createRoot=it.createRoot,Ye.hydrateRoot=it.hydrateRoot;const aa="modulepreload",sa=function(a){return"/"+a},ct={},xe=function(t,l,n){let r=Promise.resolve();if(l&&l.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),o=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));r=Promise.allSettled(l.map(u=>{if(u=sa(u),u in ct)return;ct[u]=!0;const i=u.endsWith(".css"),f=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const b=document.createElement("link");if(b.rel=i?"stylesheet":aa,i||(b.as="script"),b.crossOrigin="",b.href=u,o&&b.setAttribute("nonce",o),document.head.appendChild(b),i)return new Promise((k,j)=>{b.addEventListener("load",k),b.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${u}`)))})}))}function c(d){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=d,window.dispatchEvent(o),!o.defaultPrevented)throw d}return r.then(d=>{for(const o of d||[])o.status==="rejected"&&c(o.reason);return t().catch(c)})},ra="";function na(){const[a,t]=s.useState(null),[l,n]=s.useState(!1),r=s.useRef(null),c=s.useRef([]);s.useEffect(()=>{const f=Gt(ra,{transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:1e4,randomizationFactor:.5,timeout:45e3});return f.on("connect",()=>{n(!0)}),f.on("disconnect",b=>{n(!1),b==="io server disconnect"&&f.connect()}),f.on("connect_error",b=>{console.error("Socket connection error:",b.message||b),n(!1)}),f.on("reconnect_error",b=>{console.warn("Socket reconnection error:",b.message||b)}),r.current=f,t(f),()=>{c.current.forEach(({event:b,handler:k})=>{f.off(b,k)}),c.current=[],f.disconnect()}},[]);const d=s.useCallback((i,f)=>{var b;(b=r.current)!=null&&b.connected&&r.current.emit(i,f)},[]),o=s.useCallback((i,f)=>r.current?(r.current.on(i,f),c.current.push({event:i,handler:f}),()=>{var b;(b=r.current)==null||b.off(i,f),c.current=c.current.filter(k=>!(k.event===i&&k.handler===f))}):()=>{},[]),u=s.useCallback((i,f)=>{var b;(b=r.current)==null||b.off(i,f),c.current=c.current.filter(k=>!(k.event===i&&k.handler===f))},[]);return{socket:a,connected:l,emit:d,on:o,off:u}}const la="";function J(a,t={}){const l={...t.headers};return fetch(`${la}${a}`,{...t,headers:l})}const Ct=s.createContext(null),oa=50;let ia=0,ca=0;const X={SINGLE:"single",SPLIT_H:"split-h",SPLIT_V:"split-v",GRID_2X2:"grid-2x2",GRID_3X2:"grid-3x2",CUSTOM:"custom"},We=()=>`pane-${++ca}`;function da({children:a}){const{socket:t,connected:l,emit:n,on:r}=na(),[c,d]=s.useState([]),[o,u]=s.useState([]),[i,f]=s.useState([]),[b,k]=s.useState({}),[j,P]=s.useState(null),[p,I]=s.useState(null),[T,C]=s.useState([]),[F,h]=s.useState(null),[N,$]=s.useState({}),[W,V]=s.useState(!1),[R,E]=s.useState([]),M=s.useRef({}),y=s.useRef(c),H=s.useRef(p);s.useEffect(()=>{y.current=c},[c]),s.useEffect(()=>{H.current=p},[p]);const[B,Y]=s.useState(X.SINGLE),[ee,Q]=s.useState([{id:We(),workerId:null,viewMode:"terminal"}]),[me,ce]=s.useState(null),[pe,D]=s.useState(null),Z=s.useRef(ee);Z.current=ee;const _=s.useCallback(w=>{const z=++ia;return C(U=>{const m=[...U,{...w,id:z}];return m.length>50?m.slice(-50):m}),z},[]),ae=s.useCallback(w=>{C(z=>z.filter(U=>U.id!==w))},[]),te=s.useRef(!1);s.useEffect(()=>{if(l){const w=te.current;if(te.current=!0,re(),w&&t){W&&(V(!1),t.emit("metrics:subscribe"),V(!0));const z=new Set,U=H.current;U&&(t.emit("worker:attach",{workerId:U}),z.add(U));for(const m of Z.current)m.workerId&&!z.has(m.workerId)&&(t.emit("worker:output:subscribe",{workerId:m.workerId}),z.add(m.workerId))}_({type:"success",title:w?"Reconnected to Strategos":"Connected to Strategos",message:w?"Connection restored":"Real-time updates enabled",duration:3e3})}else te.current&&_({type:"warning",title:"Connection Lost",message:"Attempting to reconnect...",duration:5e3})},[l,t]),s.useEffect(()=>{if(!t)return;const z=Object.fromEntries(Object.entries({"workers:list":m=>d(m),"worker:created":m=>{d(S=>[...S,m]),_({type:"success",title:"Worker Spawned",message:`${m.label} is now running`,duration:4e3})},"worker:updated":m=>{d(S=>S.map(O=>O.id===m.id?m:O))},"worker:deleted":({workerId:m})=>{const S=y.current.find(O=>O.id===m);d(O=>O.filter(G=>G.id!==m)),H.current===m&&I(null),clearTimeout(M.current[m]),delete M.current[m],k(O=>{const G={...O};return delete G[m],G}),$(O=>{const G={...O};return delete G[m],G}),_({type:"info",title:"Worker Stopped",message:(S==null?void 0:S.label)||m,duration:3e3})},"worker:output":({workerId:m,output:S})=>{clearTimeout(M.current[m]),M.current[m]=setTimeout(()=>{const G=typeof S=="string"&&S.length>2097152?S.slice(-2097152):S;k(se=>({...se,[m]:G}))},oa)},"activity:list":m=>f(m),"activity:new":m=>f(S=>[m,...S].slice(0,100)),"metrics:update":m=>{m.system&&h(m.system),m.worker&&$(S=>({...S,[m.worker.workerId]:m.worker}))},error:m=>{_({type:"error",title:"Error",message:m.message||"An error occurred",duration:5e3})},"worker:crashed":({workerId:m,label:S,reason:O})=>{_({type:"error",title:"Worker Crashed",message:`${S}: ${O||"Unknown error"}`,duration:1e4})},"worker:stalled":({workerId:m,label:S,stalledMinutes:O})=>{_({type:"warning",title:"Worker Stalled",message:`${S} — no output for ${O} min`,duration:8e3})},"worker:general:dead":({workerId:m,label:S,message:O})=>{_({type:"error",title:"GENERAL Down",message:`${S} — requires human intervention`,duration:0})},"worker:respawned":({oldWorkerId:m,newWorkerId:S,label:O,attempt:G})=>{_({type:"info",title:"Worker Respawned",message:`${O} (attempt ${G})`,duration:6e3})},"worker:kill:blocked":({workerId:m,label:S,reason:O})=>{_({type:"warning",title:"Kill Blocked",message:`${S} is protected (${O})`,duration:6e3})},"worker:completed":({workerId:m,worker:S})=>{_({type:"success",title:"Worker Completed",message:(S==null?void 0:S.label)||m,duration:4e3})},"worker:blocked":({workerId:m,label:S})=>{_({type:"warning",title:"Worker Blocked",message:`${S||m} is blocked`,duration:6e3})},"worker:awaiting_review":({workerId:m,label:S})=>{_({type:"info",title:"Review Needed",message:`${S||m} awaiting review`,duration:1e4})},"dependencies:triggered":({completedWorkerId:m,triggeredWorkerIds:S})=>{(S==null?void 0:S.length)>0&&_({type:"info",title:"Dependencies Triggered",message:`${S.length} worker(s) unblocked`,duration:4e3})},"worker:child:signaled":({parentWorkerId:m,childWorkerId:S,status:O})=>{O==="done"&&_({type:"info",title:"Child Worker Done",message:`Child ${S==null?void 0:S.slice(0,8)} signaled to parent`,duration:3e3})},"worker:queue:error":m=>{_({type:"error",title:"Queue Error",message:`Queue error for worker: ${(m==null?void 0:m.error)||"Unknown error"}`,duration:5e3})},"workers:pending":m=>{E(Array.isArray(m)?m:[])},"worker:bulldoze:paused":({workerId:m,reason:S,cyclesCompleted:O})=>{const G=y.current.find(se=>se.id===m);_({type:"warning",title:"Bulldoze Paused",message:`${(G==null?void 0:G.label)||m}: ${S}`,duration:8e3})},"worker:bulldoze:cycle":({workerId:m,cycle:S,isAudit:O})=>{if(O){const G=y.current.find(se=>se.id===m);_({type:"info",title:"Bulldoze Audit",message:`${(G==null?void 0:G.label)||m} cycle ${S}`,duration:3e3})}}}).map(([m,S])=>[m,(...O)=>{try{S(...O)}catch(G){console.error(`[Socket] Handler error for "${m}":`,G)}}])),U=Object.entries(z).map(([m,S])=>r(m,S));return()=>U.forEach(m=>m())},[t,r,_]),s.useEffect(()=>()=>{Object.values(M.current).forEach(clearTimeout)},[]),s.useEffect(()=>{if(!p||!l)return;const w=new AbortController,U=setInterval(async()=>{try{const m=await J(`/api/workers/${p}/output`,{signal:w.signal});if(!m.ok)return;const S=await m.json();S.output&&k(O=>O[p]===S.output?O:{...O,[p]:S.output})}catch{}},5e3);return()=>{w.abort(),clearInterval(U)}},[p,l]);const re=s.useCallback(async()=>{try{const w=await J("/api/projects");if(!w.ok)throw new Error(`HTTP ${w.status}`);const z=await w.json();u(z)}catch(w){_({type:"error",title:"Failed to fetch projects",message:w.message,duration:5e3})}},[_]),de=s.useCallback((w,z)=>(n("worker:spawn",{projectPath:w,label:z}),new Promise(U=>{setTimeout(U,100)})),[n]),Re=s.useCallback(w=>{n("worker:kill",{workerId:w,force:!0})},[n]),Pe=s.useCallback((w,z)=>{n("worker:input",{workerId:w,input:z})},[n]),Le=s.useCallback((w,z)=>{n("worker:rawInput",{workerId:w,keys:z})},[n]),q=s.useCallback((w,z,U)=>{n("worker:resize",{workerId:w,cols:z,rows:U})},[n]),_e=s.useCallback((w,z)=>{n("worker:updateLabel",{workerId:w,label:z})},[n]),je=s.useCallback((w,z)=>{n("worker:settings",{workerId:w,settings:z})},[n]),we=s.useCallback((w,z)=>{n("project:broadcast",{projectName:w,input:z})},[n]),ve=s.useCallback(async(w,z,U,m,S)=>{const O=`GENERAL: ${z.slice(0,60)}`,G=S==="gemini"?"gemini-general":"general";try{return await(await J("/api/workers/spawn-from-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:G,label:O,projectPath:w,task:{description:z},bulldozeMode:!0,bulldozeMission:z,bulldozeBacklog:U||"",bulldozeStandingOrders:m||""})})).json()}catch(se){return _({type:"error",title:"Spawn Failed",message:se.message,duration:5e3}),null}},[_]),v=s.useCallback(w=>{I(z=>(z&&z!==w&&n("worker:output:unsubscribe",{workerId:z}),w)),n("worker:attach",{workerId:w})},[n]),Ne=s.useCallback(()=>{I(w=>(w&&n("worker:output:unsubscribe",{workerId:w}),null))},[n]),ge=s.useCallback(w=>{n("worker:output:subscribe",{workerId:w})},[n]),ue=s.useCallback(w=>{n("worker:output:unsubscribe",{workerId:w})},[n]),Ie=s.useCallback(()=>{W||!t||(n("metrics:subscribe"),V(!0))},[n,W,t]),De=s.useCallback(()=>{!W||!t||(n("metrics:unsubscribe"),V(!1))},[n,W,t]),g=s.useCallback(async w=>{try{const z=await J(`/api/metrics/worker/${w}`);if(!z.ok){if(z.status===404)return null;throw new Error("Failed to fetch worker metrics")}const U=await z.json();return $(m=>({...m,[w]:U})),U}catch{return null}},[]),L=s.useCallback(async()=>{try{const w=await J("/api/metrics/system");if(!w.ok){if(w.status===404)return null;throw new Error("Failed to fetch system metrics")}const z=await w.json();return h(z),z}catch{return null}},[]),K=s.useCallback((w=null)=>{const z={id:We(),workerId:w,viewMode:"terminal"};return Q(U=>[...U,z]),ce(z.id),B===X.SINGLE&&Y(X.SPLIT_H),z.id},[B]),oe=s.useCallback(w=>{Q(z=>{const U=z.filter(m=>m.id!==w);return U.length===0?[{id:We(),workerId:null,viewMode:"terminal"}]:U}),ce(z=>z===w?null:z)},[]),Se=s.useCallback((w,z)=>{Q(U=>{const m=U.find(S=>S.id===w);return m!=null&&m.workerId&&m.workerId!==z&&n("worker:output:unsubscribe",{workerId:m.workerId}),U.map(S=>S.id===w?{...S,workerId:z}:S)}),z&&n("worker:attach",{workerId:z})},[n]),Ce=s.useCallback((w,z)=>{Q(U=>U.map(m=>m.id===w?{...m,viewMode:z}:m))},[]),Oe=s.useCallback(w=>{Y(w);const U={[X.SINGLE]:1,[X.SPLIT_H]:2,[X.SPLIT_V]:2,[X.GRID_2X2]:4,[X.GRID_3X2]:6,[X.CUSTOM]:ee.length}[w]||1,m=ee.length;if(U>m){const S=new Set(ee.map(be=>be.workerId).filter(Boolean)),O=c.filter(be=>!S.has(be.id)),G=[...ee];let se=0;for(let be=m;be<U;be++){const $e=O[se];G.push({id:We(),workerId:($e==null?void 0:$e.id)||null,viewMode:"terminal"}),$e&&se++}Q(G)}else U<m&&w!==X.CUSTOM&&Q(ee.slice(0,U));D(null)},[ee,c]),lt=s.useCallback(w=>{const z=K(w);return B===X.SINGLE&&Oe(X.SPLIT_H),z},[K,B,Oe]),ot=s.useCallback((w,z)=>{Q(U=>{const m=U.find(O=>O.id===w),S=U.find(O=>O.id===z);return!m||!S?U:U.map(O=>O.id===w?{...O,workerId:S.workerId}:O.id===z?{...O,workerId:m.workerId}:O)})},[]),Vt=s.useMemo(()=>({connected:l,workers:c,projects:o,activity:i,outputs:b,selectedProject:j,focusedWorker:p,toasts:T,systemMetrics:F,workerMetrics:N,metricsSubscribed:W,pendingWorkers:R,layoutMode:B,panes:ee,activePaneId:me,paneSizes:pe,setSelectedProject:P,setFocusedWorker:I,setActivePaneId:ce,setPaneSizes:D,fetchProjects:re,spawnWorker:de,killWorker:Re,sendInput:Pe,sendRawInput:Le,resizeTerminal:q,updateWorkerLabel:_e,updateWorkerSettings:je,broadcastToProject:we,spawnAutonomousSession:ve,attachToWorker:v,detachFromWorker:Ne,subscribeToWorkerOutput:ge,unsubscribeFromWorkerOutput:ue,addToast:_,dismissToast:ae,subscribeToMetrics:Ie,unsubscribeFromMetrics:De,fetchWorkerMetrics:g,fetchSystemMetrics:L,addPane:K,removePane:oe,setPaneWorker:Se,setPaneViewMode:Ce,changeLayoutMode:Oe,openWorkerInNewPane:lt,swapPaneWorkers:ot}),[l,c,o,i,b,j,p,T,F,N,W,R,B,ee,me,pe,re,de,Re,Pe,Le,q,_e,je,we,ve,v,Ne,ge,ue,_,ae,Ie,De,g,L,K,oe,Se,Ce,Oe,lt,ot]);return e.jsx(Ct.Provider,{value:Vt,children:a})}function ke(){const a=s.useContext(Ct);if(!a)throw new Error("useOrchestrator must be used within OrchestratorProvider");return a}function ua(){const a=()=>{if(typeof window>"u")return"lg";const c=window.innerWidth;return c<640?"xs":c<768?"sm":c<1024?"md":c<1280?"lg":"xl"},[t,l]=s.useState(a),[n,r]=s.useState(typeof window<"u"?window.innerWidth:1024);return s.useEffect(()=>{let c;const d=()=>{clearTimeout(c),c=setTimeout(()=>{const o=a(),u=window.innerWidth;l(i=>i!==o?o:i),r(i=>Math.abs(u-i)>50?u:i)},100)};return window.addEventListener("resize",d),window.addEventListener("orientationchange",d),d(),()=>{clearTimeout(c),window.removeEventListener("resize",d),window.removeEventListener("orientationchange",d)}},[]),{breakpoint:t,windowWidth:n,isMobile:t==="xs"||t==="sm",isTablet:t==="md",isDesktop:t==="lg"||t==="xl",isLargeDesktop:t==="xl"}}function ha({setActiveTab:a,detachFromWorker:t,setShowActivity:l,hasFocusedWorker:n,showActivity:r}){const c=s.useRef(null),d=s.useRef(null),o=s.useCallback(()=>{c.current=null,clearTimeout(d.current),d.current=null},[]);s.useEffect(()=>{function u(i){const f=i.target.tagName;if(f==="INPUT"||f==="TEXTAREA"||f==="SELECT"||i.target.isContentEditable||i.target.closest('[role="dialog"]')||i.target.closest("dialog"))return;if((i.ctrlKey||i.metaKey)&&i.key==="k"){i.preventDefault(),dt();return}if(i.ctrlKey||i.metaKey||i.altKey)return;if(c.current==="g"){if(o(),i.key==="t"){i.preventDefault(),ut('[title="Tree View"]');return}if(i.key==="g"){i.preventDefault(),ut('[title="Grid View"]');return}}if(i.key==="g"){c.current="g",d.current=setTimeout(o,500);return}if(i.key==="Escape"){if(r){l(!1);return}if(n){t();return}return}if(i.key==="/"){i.preventDefault(),dt();return}const b={1:"workers",2:"projects",3:"ralph",4:"history"};if(b[i.key]){a(b[i.key]);return}if(i.key==="?"&&i.shiftKey){const k=document.querySelector("[data-shortcut-help]");k&&k.click();return}}return document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u),clearTimeout(d.current)}},[a,t,l,n,r,o])}function dt(){const a=document.querySelector('input[placeholder*="Search"]');a&&(a.focus(),a.select())}function ut(a){const t=document.querySelector(a);t&&t.click()}const xa=[{label:"Navigation",shortcuts:[{keys:["1"],description:"Workers tab"},{keys:["2"],description:"Projects tab"},{keys:["3"],description:"Ralph tab"},{keys:["4"],description:"History tab"}]},{label:"Views",shortcuts:[{keys:["g","t"],description:"Tree view"},{keys:["g","g"],description:"Grid view"},{keys:["Esc"],description:"Back to grid / close sidebar"}]},{label:"Search",shortcuts:[{keys:["/"],description:"Focus search"},{keys:["Ctrl","K"],description:"Focus search"}]}];/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ma={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),A=(a,t)=>{const l=s.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:o="",children:u,...i},f)=>s.createElement("svg",{ref:f,...ma,width:r,height:r,stroke:n,strokeWidth:d?Number(c)*24/Number(r):c,className:["lucide",`lucide-${pa(a)}`,o].join(" "),...i},[...t.map(([b,k])=>s.createElement(b,k)),...Array.isArray(u)?u:[u]]));return l.displayName=`${a}`,l};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=A("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=A("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=A("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=A("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=A("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=A("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=A("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=A("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=A("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=A("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=A("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=A("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=A("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=A("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=A("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=A("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=A("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=A("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=A("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=A("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=A("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=A("Grid2x2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=A("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=A("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=A("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=A("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=A("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=A("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=A("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=A("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=A("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=A("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=A("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=A("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=A("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=A("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=A("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=A("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=A("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=A("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=A("Rows2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=A("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=A("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=A("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=A("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=A("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=A("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=A("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=A("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=A("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=A("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=A("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=A("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=A("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=A("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=A("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=A("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=A("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=A("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=A("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=A("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=A("ZapOff",[["polyline",{points:"12.41 6.75 13 2 10.57 4.92",key:"122m05"}],["polyline",{points:"18.57 12.91 21 10 15.66 10",key:"16r43o"}],["polyline",{points:"8 8 3 14 12 14 11 22 16 16",key:"tmh4bc"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=A("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Za(a){return a&&a.replace(/\\u001b/g,"\x1B")}const Lt=s.memo(function({workerId:t,output:l,onInput:n,onRawInput:r,onResize:c,className:d=""}){const o=s.useRef(null),u=s.useRef(null),i=s.useRef(null),f=s.useRef(0),b=s.useRef({cols:0,rows:0}),k=s.useRef(null),[j,P]=s.useState(!1),p=s.useRef(r),I=s.useRef(n),T=s.useRef(c);return s.useEffect(()=>{p.current=r,I.current=n,T.current=c}),s.useEffect(()=>{if(!o.current)return;f.current=0,P(!1);const C=o.current,F=13,h=new qt.Terminal({theme:{background:"#0a0a0a",foreground:"#DAA520",cursor:"#FFD700",cursorAccent:"#000000",selection:"rgba(218, 165, 32, 0.3)",black:"#0a0a0a",red:"#8B0000",green:"#DAA520",yellow:"#FFD700",blue:"#4169E1",magenta:"#660000",cyan:"#20B2AA",white:"#FFFFFF",brightBlack:"#333333",brightRed:"#DC143C",brightGreen:"#FFD700",brightYellow:"#FFEC8B",brightBlue:"#6495ED",brightMagenta:"#8B0000",brightCyan:"#40E0D0",brightWhite:"#FFFFFF"},fontFamily:'"Share Tech Mono", "Courier New", monospace',fontSize:F,lineHeight:1.2,cursorBlink:!0,cursorStyle:"block",scrollback:1e3,convertEol:!0}),N=new Kt.FitAddon;h.loadAddon(N),u.current=h,i.current=N,h.open(C);try{const M=new Xt.WebglAddon;M.onContextLoss(()=>{M.dispose()}),h.loadAddon(M)}catch(M){console.warn("WebGL addon failed, using DOM renderer:",M.message)}const $=()=>{const M=u.current;if(!M)return;const{cols:y,rows:H}=M,B=b.current;(y!==B.cols||H!==B.rows)&&(b.current={cols:y,rows:H},T.current&&T.current(y,H))};let W=setTimeout(()=>{W=null;try{N.fit(),$()}catch(M){console.warn("Fit error:",M)}P(!0)},100),V;const R=()=>{clearTimeout(V),V=setTimeout(()=>{try{i.current&&o.current&&(i.current.fit(),$())}catch{}},150)},E=new ResizeObserver(R);if(E.observe(C),p.current)h.onKey(({key:M,domEvent:y})=>{var Y;const H=y;let B=null;switch(H.keyCode){case 38:B="\x1B[A";break;case 40:B="\x1B[B";break;case 39:B="\x1B[C";break;case 37:B="\x1B[D";break;case 13:B="\r";break;case 27:B="\x1B";break;case 9:B="	";break;case 8:B="";break;default:M&&(B=M)}B&&(H.preventDefault(),(Y=p.current)==null||Y.call(p,B))}),h.onData(M=>{var y;M.length>1&&((y=p.current)==null||y.call(p,M))});else if(I.current){let M="";h.onKey(({key:y,domEvent:H})=>{var Y;const B=H;B.keyCode===13?(h.write(`\r
`),M.trim()&&((Y=I.current)==null||Y.call(I,M)),M=""):B.keyCode===8?M.length>0&&(M=M.slice(0,-1),h.write("\b \b")):!B.ctrlKey&&!B.altKey&&!B.metaKey&&y.length===1&&(M+=y,h.write(y))})}return()=>{W&&clearTimeout(W),clearTimeout(V),k.current&&clearTimeout(k.current),E.disconnect(),h.dispose(),u.current=null,i.current=null}},[t]),s.useEffect(()=>{const C=u.current,F=o.current;if(!C||!j||!F||!l)return;const h=Za(l),N=h.length+":"+h.slice(-200);if(N===f.current)return;f.current=N;let $=h.replace(/\x1b\[\d*[ABCD]/g,"").replace(/\x1b\[\d+;\d+[Hf]/g,"").replace(/\x1b\[\d+G/g,"").replace(/\x1b\[[su]/g,"").replace(/\x1b\[[12]J/g,"").replace(/\x1b\[[012]?K/g,"");const W=500,V=$.split(`
`);V.length>W&&($=V.slice(-W).join(`
`)),k.current&&clearTimeout(k.current);const R=$;k.current=setTimeout(()=>{k.current=null;const E=u.current;if(!E)return;const M=E.buffer.active,y=M.baseY===0||M.viewportY>=M.baseY;E.reset(),E.write(R,()=>{y&&E.scrollToBottom()})},100)},[l,j,t]),e.jsx("div",{ref:o,className:`bg-thea-nearBlack rounded border border-thea-gold-dark/30 overflow-hidden ${d}`,style:{opacity:j?1:.5,transition:"opacity 0.2s",maxWidth:"100%",contain:"strict"}})});function _t(a){var t,l,n="";if(typeof a=="string"||typeof a=="number")n+=a;else if(typeof a=="object")if(Array.isArray(a)){var r=a.length;for(t=0;t<r;t++)a[t]&&(l=_t(a[t]))&&(n&&(n+=" "),n+=l)}else for(l in a)a[l]&&(n&&(n+=" "),n+=l);return n}function x(){for(var a,t,l=0,n="",r=arguments.length;l<r;l++)(a=arguments[l])&&(t=_t(a))&&(n&&(n+=" "),n+=t);return n}function Ya({score:a=null,status:t=null,size:l="md",showScore:n=!0,className:r}){const c=t||It(a),d={healthy:{icon:Ca,color:"text-green-400",bgColor:"bg-green-500/20",borderColor:"border-green-500/30",glow:"shadow-[0_0_8px_rgba(74,222,128,0.4)]",label:"Healthy"},warning:{icon:Be,color:"text-yellow-400",bgColor:"bg-yellow-500/20",borderColor:"border-yellow-500/30",glow:"shadow-[0_0_8px_rgba(250,204,21,0.4)]",label:"Warning"},critical:{icon:Xa,color:"text-red-400",bgColor:"bg-red-500/20",borderColor:"border-red-500/30",glow:"shadow-[0_0_8px_rgba(248,113,113,0.4)]",label:"Critical"},unknown:{icon:ie,color:"text-thea-gold-dark",bgColor:"bg-thea-gold/10",borderColor:"border-thea-gold-dark/30",glow:"",label:"Unknown"}},o={sm:{container:"gap-1 px-1.5 py-0.5",icon:"w-3 h-3",text:"text-xxs"},md:{container:"gap-1.5 px-2 py-1",icon:"w-3.5 h-3.5",text:"text-xs"},lg:{container:"gap-2 px-3 py-1.5",icon:"w-4 h-4",text:"text-sm"}},{icon:u,color:i,bgColor:f,borderColor:b,glow:k}=d[c]||d.unknown,j=o[l]||o.md;return e.jsxs("div",{className:x("inline-flex items-center rounded border font-mono",f,b,i,k,j.container,r),title:`Health: ${a!==null?`${a}%`:"Unknown"}`,children:[e.jsx(u,{className:x(j.icon,c==="healthy"&&"animate-pulse")}),n&&a!==null&&e.jsx("span",{className:j.text,children:a})]})}function It(a){return a==null?"unknown":a>=80?"healthy":a>=50?"warning":"critical"}function Dt({score:a,status:t,size:l="md",className:n}){const r=t||It(a),c={healthy:"bg-green-400 shadow-[0_0_6px_rgba(74,222,128,0.6)]",warning:"bg-yellow-400 shadow-[0_0_6px_rgba(250,204,21,0.6)]",critical:"bg-red-400 shadow-[0_0_6px_rgba(248,113,113,0.6)]",unknown:"bg-thea-gold-dark/50"},d={sm:"w-1.5 h-1.5",md:"w-2 h-2",lg:"w-2.5 h-2.5"};return e.jsx("span",{className:x("inline-block rounded-full",c[r]||c.unknown,d[l]||d.md,r!=="unknown"&&"animate-pulse",n),title:`Health: ${a!==null?`${a}%`:"Unknown"}`})}const Ot=[{group:"Strategic",color:"text-yellow-400",bgColor:"bg-yellow-400/10",borderColor:"border-yellow-400/50",roles:[{prefix:"GENERAL",label:"General",icon:Wa,description:"Strategic orchestrator"}]},{group:"Operational",color:"text-blue-400",bgColor:"bg-blue-400/10",borderColor:"border-blue-400/50",roles:[{prefix:"COLONEL",label:"Colonel",icon:Pt,description:"Domain supervisor"}]},{group:"Tactical",color:"text-green-400",bgColor:"bg-green-400/10",borderColor:"border-green-400/50",roles:[{prefix:"RESEARCH",label:"Research",icon:Rt,description:"Information gathering"},{prefix:"IMPL",label:"Implement",icon:Et,description:"Implementation"},{prefix:"TEST",label:"Test",icon:va,description:"Testing"},{prefix:"REVIEW",label:"Review",icon:ja,description:"Code review"},{prefix:"FIX",label:"Fix",icon:Ka,description:"Bug fixes"}]},{group:"Other",color:"text-thea-gold",bgColor:"bg-thea-gold/10",borderColor:"border-thea-gold/50",roles:[{prefix:"",label:"Default",icon:Ke,description:"Standard worker"}]}];function Qa(a){for(const t of Ot)for(const l of t.roles)if(l.prefix===a||a&&l.prefix&&a.startsWith(l.prefix))return{...l,groupColor:t.color,bgColor:t.bgColor,borderColor:t.borderColor};return null}function he(a){if(!a)return{prefix:"",displayName:a||""};const t=a.match(/^([A-Z]+):\s*(.*)$/);return t?{prefix:t[1],displayName:t[2]}:{prefix:"",displayName:a}}function Fs({onSelect:a,position:t="below",triggerRef:l,isOpen:n,onClose:r}){const c=s.useRef(null);s.useEffect(()=>{function o(u){c.current&&!c.current.contains(u.target)&&(l!=null&&l.current)&&!l.current.contains(u.target)&&(r==null||r())}if(n)return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[n,l,r]),s.useEffect(()=>{function o(u){u.key==="Escape"&&(r==null||r())}if(n)return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[n,r]);const d=o=>{a(o),r==null||r()};return n?e.jsxs("div",{ref:c,className:x("absolute z-50 min-w-[200px] max-w-[280px]","bg-black/95 border border-thea-gold/50 shadow-lg shadow-black/50","backdrop-blur-sm",t==="below"?"top-full mt-1":"bottom-full mb-1","right-0 clip-cyber-sm"),onClick:o=>o.stopPropagation(),children:[e.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 border-t border-r border-thea-gold-bright opacity-70"}),e.jsx("div",{className:"py-1",children:Ot.map(o=>e.jsxs("div",{children:[e.jsx("div",{className:x("px-3 py-1.5 text-xxs font-orbitron uppercase tracking-wider",o.color,"border-b border-thea-gold-dark/20"),children:o.group}),o.roles.map(u=>{const i=u.icon;return e.jsxs("button",{onClick:()=>d(u.prefix),className:x("w-full flex items-center gap-3 px-3 py-2","hover:bg-thea-gold/10 transition-colors","text-left"),children:[e.jsx(i,{className:x("w-4 h-4 flex-shrink-0",o.color)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-rajdhani text-white",children:u.label}),e.jsx("div",{className:"text-xxs text-thea-gold-dark truncate",children:u.description})]})]},u.prefix||"default")})]},o.group))})]}):null}function $t({label:a,size:t="sm"}){const{prefix:l}=he(a),n=Qa(l);if(!n||!l)return null;const r=n.icon,c={sm:"text-xxs px-1.5 py-0.5 gap-1",md:"text-xs px-2 py-1 gap-1.5"};return e.jsxs("span",{className:x("inline-flex items-center font-mono uppercase tracking-wider","border",n.bgColor,n.borderColor,n.groupColor,c[t]),children:[e.jsx(r,{className:x(t==="sm"?"w-3 h-3":"w-3.5 h-3.5")}),l]})}function Ve({isOpen:a,onClose:t,onConfirm:l,workerLabel:n,showProjectPicker:r=!1,projects:c=[],onProjectChange:d,selectedProject:o}){const[u,i]=s.useState(""),[f,b]=s.useState(""),[k,j]=s.useState(""),[P,p]=s.useState(!1),[I,T]=s.useState("claude"),C=s.useRef(null);if(s.useEffect(()=>{if(a&&C.current){const h=setTimeout(()=>{var N;return(N=C.current)==null?void 0:N.focus()},50);return()=>clearTimeout(h)}},[a]),s.useEffect(()=>{if(!a)return;const h=N=>{N.key==="Escape"&&t()};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[a,t]),s.useEffect(()=>{a&&(i(""),b(""),j(""),p(!1),T("claude"))},[a]),!a)return null;const F=()=>{u.trim()&&l({mission:u.trim(),backlog:f.trim(),standingOrders:k.trim(),backend:I})};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:h=>{h.target===h.currentTarget&&t()},role:"dialog","aria-modal":"true","aria-labelledby":"bulldoze-modal-title",children:e.jsxs("div",{className:"w-full max-w-lg mx-4 bg-[#0a0a0a] border border-thea-gold/40 shadow-lg shadow-black/60 clip-cyber-lg",children:[e.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-thea-gold-bright opacity-60"}),e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-thea-gold-dark/30",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"w-5 h-5 text-amber-400"}),e.jsx("h2",{id:"bulldoze-modal-title",className:"font-rajdhani font-bold text-lg text-thea-gold-bright uppercase tracking-wider",children:r?"New Autonomous Session":"Configure Bulldoze Mode"})]}),e.jsx("button",{onClick:t,className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors","aria-label":"Close dialog",children:e.jsx(le,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-5 py-4 space-y-4 max-h-[70vh] overflow-y-auto",children:[!r&&n&&e.jsxs("div",{className:"text-xs font-mono text-thea-gold-dark/70 truncate",children:["Target: ",e.jsx("span",{className:"text-thea-gold",children:n})]}),r&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-rajdhani text-thea-gold mb-1.5 uppercase tracking-wider",children:"Project"}),e.jsxs("select",{value:o||"",onChange:h=>d==null?void 0:d(h.target.value),className:"w-full bg-black border border-thea-gold-dark/30 text-white px-3 py-2 text-sm font-mono focus:outline-none focus:border-thea-gold/60 transition-colors",children:[e.jsx("option",{value:"",children:"Select a project..."}),c.map(h=>e.jsx("option",{value:h.path||h.name,children:h.name},h.path||h.name))]})]}),r&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-rajdhani text-thea-gold mb-1.5 uppercase tracking-wider",children:"Backend"}),e.jsx("div",{className:"flex gap-2",children:["claude","gemini"].map(h=>e.jsx("button",{onClick:()=>T(h),className:x("flex-1 px-3 py-2 text-sm font-mono uppercase tracking-wider border transition-all",I===h?h==="gemini"?"bg-blue-500/20 border-blue-500/60 text-blue-300":"bg-thea-gold/20 border-thea-gold/60 text-thea-gold-bright":"bg-black border-thea-gold-dark/20 text-thea-gold-dark/50 hover:border-thea-gold-dark/40"),children:h},h))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-rajdhani text-thea-gold mb-1.5 uppercase tracking-wider",children:["Mission ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("textarea",{ref:C,value:u,onChange:h=>i(h.target.value),placeholder:"What should this general focus on?",rows:3,className:"w-full bg-black border border-thea-gold-dark/30 text-white px-3 py-2 text-sm font-mono placeholder-thea-gold-dark/40 resize-none focus:outline-none focus:border-thea-gold/60 transition-colors","aria-required":"true"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-rajdhani text-thea-gold mb-1.5 uppercase tracking-wider",children:"Backlog"}),e.jsx("textarea",{value:f,onChange:h=>b(h.target.value),placeholder:"Specific tasks, one per line",rows:3,className:"w-full bg-black border border-thea-gold-dark/30 text-white px-3 py-2 text-sm font-mono placeholder-thea-gold-dark/40 resize-none focus:outline-none focus:border-thea-gold/60 transition-colors"})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>p(!P),className:"flex items-center gap-2 text-sm font-rajdhani text-thea-gold-dark hover:text-thea-gold transition-colors uppercase tracking-wider","aria-expanded":P,children:[P?e.jsx(ka,{className:"w-4 h-4"}):e.jsx(qe,{className:"w-4 h-4"}),"Standing Orders"]}),P&&e.jsx("textarea",{value:k,onChange:h=>j(h.target.value),placeholder:"Persistent rules that survive compaction",rows:3,className:"w-full mt-2 bg-black border border-thea-gold-dark/30 text-white px-3 py-2 text-sm font-mono placeholder-thea-gold-dark/40 resize-none focus:outline-none focus:border-thea-gold/60 transition-colors"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 px-5 py-4 border-t border-thea-gold-dark/30",children:[e.jsx("button",{onClick:t,className:"thea-btn px-4 py-2 text-sm font-rajdhani",children:"Cancel"}),e.jsxs("button",{onClick:F,disabled:!u.trim()||r&&!o,className:x("flex items-center gap-2 px-4 py-2 text-sm font-rajdhani font-bold uppercase tracking-wider transition-all border",u.trim()&&(!r||o)?"bg-amber-500/20 border-amber-500 text-amber-300 hover:bg-amber-500/30 shadow-[0_0_8px_rgba(245,158,11,0.3)]":"bg-gray-800/50 border-gray-600 text-gray-500 cursor-not-allowed"),children:[e.jsx(ne,{className:"w-4 h-4"}),r?"Launch Session":"Enable Bulldoze"]})]})]})})}const Ja={healthy:100,active:90,stalled:50,warning:40,critical:20,error:10,stopped:0};function Wt(a){return Ja[a]??null}function rt(a){if(!a||a<0)return"--";const t=Math.floor(a/1e3);if(t<60)return`${t}s`;const l=Math.floor(t/60);if(l<60)return`${l}m`;const n=Math.floor(l/60);return n<24?`${n}h ${l%60}m`:`${Math.floor(n/24)}d ${n%24}h`}function Ft(a){return a==null?"--":rt(a*1e3)}function es(a){if(!a)return"--";const t=Date.now()-new Date(a).getTime();return rt(t)}function Bs(a){try{return new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}catch{return"--"}}function ts(a){if(!a)return"--";const t=new Date(a),l=Date.now()-t.getTime(),n=Math.floor(l/6e4);if(n<1)return"just now";if(n<60)return`${n}m ago`;const r=Math.floor(n/60);if(r<24)return`${r}h ago`;const c=Math.floor(r/24);return c<7?`${c}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function nt({progress:a,className:t=""}){const l=Math.min(100,Math.max(0,a??0));return e.jsx("div",{className:x("h-1.5 bg-black/50 border border-thea-gold-dark/20 overflow-hidden",t),role:"progressbar","aria-valuenow":l,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Task progress",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-thea-gold-bright transition-all duration-500",style:{width:`${l}%`}})})}function as(a){return a.replace(/\x1b\[[0-9;]*[a-zA-Z]/g,"").replace(/\x1b\([AB]/g,"").replace(/\x1b\][^\x07]*\x07/g,"").replace(/[\x00-\x09\x0b-\x1f]/g,"").replace(/\xa0/g," ")}function ss(a){return!a||a<0?null:rt(a)}const rs=s.memo(function({worker:t,onOpenInMultiTerminal:l}){var W;const{outputs:n,workers:r,killWorker:c,updateWorkerLabel:d,attachToWorker:o,updateWorkerSettings:u}=ke(),[i,f]=s.useState(!1),[b,k]=s.useState(t.label),[j,P]=s.useState(null),[,p]=s.useState(0);s.useEffect(()=>{if(t.status!=="running")return;const V=setInterval(()=>p(R=>R+1),3e4);return()=>clearInterval(V)},[t.status]);const I=t.createdAt?ss(Date.now()-new Date(t.createdAt).getTime()):null,T=s.useMemo(()=>{if(!t.parentWorkerId)return null;const V=r.find(R=>R.id===t.parentWorkerId);return V?V.label:t.parentWorkerId.slice(0,8)},[t.parentWorkerId,r]),C=((W=t.childWorkerIds)==null?void 0:W.length)||0,F=n[t.id]||"",h=s.useMemo(()=>as(F).split(`
`).filter(R=>R.trim()).slice(-8).join(`
`),[F]),N=()=>{b.trim()&&b!==t.label&&d(t.id,b.trim()),f(!1)},$={running:"thea-badge-running",stopped:"thea-badge-stopped",error:"thea-badge-error"}[t.status]||"bg-gray-800 text-gray-400 border-gray-600";return e.jsxs("div",{"data-testid":`worker-card-${t.id}`,role:"article","aria-label":`Worker: ${t.label}`,className:"thea-card group relative p-4 clip-cyber",children:[e.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 border-t-2 border-r-2 border-thea-gold-bright opacity-50 group-hover:opacity-100 transition-opacity animate-corner-pulse"}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[i?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:b,onChange:V=>k(V.target.value),onKeyDown:V=>V.key==="Enter"&&N(),className:"bg-black/50 border border-thea-gold/50 px-2 py-1 text-sm text-thea-gold font-rajdhani rounded-none flex-1",autoFocus:!0,"aria-label":"Worker label"}),e.jsx("button",{onClick:N,className:"text-thea-gold hover:text-thea-gold-bright","aria-label":"Save label",children:e.jsx(fa,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx($t,{label:t.label,size:"sm"}),e.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright truncate",children:he(t.label).displayName||t.label}),e.jsx("button",{onClick:()=>f(!0),className:"opacity-0 group-hover:opacity-100 text-thea-gold/50 hover:text-thea-gold transition-opacity flex-shrink-0","aria-label":"Edit worker label",children:e.jsx(Ra,{className:"w-3 h-3"})})]}),e.jsx("p",{className:"text-xs text-thea-gold-dark font-mono",children:t.project})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dt,{score:Wt(t.health),size:"md"}),t.backend==="gemini"&&e.jsx("span",{className:"thea-badge bg-blue-500/20 text-blue-300 border-blue-500/30 text-xxxs",children:"Gemini"}),e.jsx("span",{className:x("thea-badge",$),children:t.status}),t.waitingAtPrompt&&e.jsx("span",{className:"thea-badge bg-yellow-500/20 text-yellow-400 border-yellow-500/30 animate-pulse text-xxxs",children:"prompt"})]})]}),e.jsx("div",{className:"bg-black/50 border border-thea-gold-dark/20 p-2 h-32 overflow-hidden mb-3 font-mono text-xxs text-thea-gold-dark/80 leading-tight whitespace-pre-wrap",children:h||"No output yet..."}),t.ralphStatus&&e.jsxs("div",{className:"mb-3 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-3 h-3 text-purple-400 flex-shrink-0"}),e.jsx("span",{className:x("text-xxs font-mono uppercase tracking-wider",{"text-yellow-400":t.ralphStatus==="in_progress","text-green-400":t.ralphStatus==="done","text-red-400":t.ralphStatus==="blocked","text-gray-400":t.ralphStatus==="pending"}),children:t.ralphStatus==="in_progress"?"working":t.ralphStatus}),t.ralphStatus==="in_progress"&&t.ralphProgress!=null&&e.jsxs("span",{className:"text-xxs font-mono text-thea-gold-dark ml-auto",children:[t.ralphProgress,"%"]})]}),t.ralphStatus==="in_progress"&&t.ralphProgress!=null&&e.jsx(nt,{progress:t.ralphProgress,className:"w-full h-1"}),t.ralphCurrentStep&&e.jsx("p",{className:"text-xxs text-thea-gold-dark/70 font-mono truncate",title:t.ralphCurrentStep,children:t.ralphCurrentStep}),t.status==="running"&&t.ralphStatus==="in_progress"&&t.lastRalphSignalAt&&Date.now()-new Date(t.lastRalphSignalAt).getTime()>30*60*1e3&&e.jsxs("p",{className:"text-xxxs text-yellow-500/70 font-mono",children:["signal stale — last reported ",ts(t.lastRalphSignalAt)]})]}),he(t.label).prefix==="GENERAL"&&e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{t.bulldozeMode&&t.bulldozePaused?u(t.id,{bulldozePaused:!1}):t.bulldozeMode?u(t.id,{bulldozeMode:!1}):P(t)},className:x("thea-btn flex items-center gap-1.5 text-xxs py-1 px-2",{"!border-amber-500 !text-amber-300 !bg-amber-500/20 shadow-[0_0_8px_rgba(245,158,11,0.3)]":t.bulldozeMode&&!t.bulldozePaused,"!border-yellow-500/40 !text-yellow-400/80 !bg-yellow-500/10":t.bulldozeMode&&t.bulldozePaused}),title:t.bulldozeMode?t.bulldozePaused?`Paused: ${t.bulldozePauseReason||"unknown"} — click to resume`:"Bulldoze active — click to disable":"Enable bulldoze mode",children:[t.bulldozeMode&&t.bulldozePaused?e.jsx(st,{className:"w-3 h-3"}):e.jsx(ne,{className:x("w-3 h-3",{"animate-pulse":t.bulldozeMode&&!t.bulldozePaused})}),t.bulldozeMode&&t.bulldozePaused?"Resume":"Bulldoze"]}),t.bulldozeMode&&t.bulldozeCyclesCompleted>0&&e.jsxs("span",{className:"text-xxs font-mono text-thea-gold-dark/70",children:[t.bulldozeCyclesCompleted," cycles"]}),t.bulldozeMode&&t.bulldozePaused&&e.jsx("span",{className:"text-xxxs font-mono text-yellow-400/50 truncate",children:t.bulldozePauseReason})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{"data-testid":`open-worker-${t.id}`,onClick:()=>o(t.id),className:"thea-btn flex-1 flex items-center justify-center gap-2 py-2","aria-label":`Open worker ${he(t.label).displayName||t.label}`,children:[e.jsx(at,{className:"w-4 h-4"}),"Open"]}),l&&e.jsx("button",{onClick:l,className:"thea-btn p-2",title:"Open in Multi-Terminal View","aria-label":"Open in multi-terminal view",children:e.jsx(Ae,{className:"w-4 h-4"})}),e.jsx("button",{"data-testid":`kill-worker-${t.id}`,onClick:()=>c(t.id),className:"thea-btn thea-btn-danger p-2","aria-label":`Kill worker ${he(t.label).displayName||t.label}`,children:e.jsx(le,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mt-2 space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xxs font-mono text-thea-gold-dark/50",children:[e.jsxs("span",{children:["ID: ",t.id]}),I&&e.jsxs("span",{className:"flex items-center gap-0.5 ml-auto",children:[e.jsx(Ee,{className:"w-3 h-3"}),I]})]}),(T||C>0)&&e.jsxs("div",{className:"flex items-center gap-2 text-xxs font-mono text-thea-gold-dark/40",children:[T&&e.jsxs("span",{className:"truncate max-w-[60%]",title:`Parent: ${T}`,children:["↑ ",T]}),C>0&&e.jsxs("span",{className:"ml-auto",children:[C," ",C===1?"child":"children"]})]})]}),j&&e.jsx(Ve,{isOpen:!!j,onClose:()=>P(null),onConfirm:({mission:V,backlog:R,standingOrders:E})=>{u(j.id,{bulldozeMode:!0,bulldozeMission:V,bulldozeBacklog:R,bulldozeStandingOrders:E}),P(null)},workerLabel:j.label})]})});function ns({message:a="Loading...",className:t=""}){return e.jsxs("div",{className:x("flex items-center justify-center py-8",t),children:[e.jsx(Te,{className:"w-6 h-6 text-thea-gold animate-spin"}),a&&e.jsx("span",{className:"ml-2 text-thea-gold-dark text-sm font-mono",children:a})]})}function ls(){const[a,t]=s.useState(!1),[l,n]=s.useState(!1),[r,c]=s.useState(""),[d,o]=s.useState(!1),[u,i]=s.useState(!1),f=s.useRef(null),b=s.useRef(null);s.useEffect(()=>{const T=window.SpeechRecognition||window.webkitSpeechRecognition;if(T){o(!0);const C=new T;C.continuous=!0,C.interimResults=!0,C.lang="en-US",C.onresult=F=>{const N=Array.from(F.results).map($=>$[0].transcript).join("");c(N)},C.onerror=F=>{console.error("Speech recognition error:",F.error),t(!1)},C.onend=()=>{t(!1)},f.current=C}return"speechSynthesis"in window&&i(!0),()=>{f.current&&f.current.stop(),window.speechSynthesis&&window.speechSynthesis.cancel()}},[]);const k=s.useCallback(()=>{if(!(!f.current||a)){c("");try{f.current.start(),t(!0)}catch(T){console.error("Failed to start speech recognition:",T)}}},[a]),j=s.useCallback(()=>{f.current&&(f.current.stop(),t(!1))},[]),P=s.useCallback((T,C={})=>!u||!T?Promise.resolve():new Promise(F=>{window.speechSynthesis.cancel();const h=new SpeechSynthesisUtterance(T);h.rate=C.rate||1,h.pitch=C.pitch||1,h.volume=C.volume||1;const N=window.speechSynthesis.getVoices(),$=N.find(W=>W.name.includes("Google")||W.name.includes("Microsoft")||W.name.includes("Natural")||W.lang.startsWith("en"))||N.find(W=>W.lang.startsWith("en"))||N[0];$&&(h.voice=$),h.onstart=()=>n(!0),h.onend=()=>{n(!1),F()},h.onerror=()=>{n(!1),F()},b.current=h,window.speechSynthesis.speak(h)}),[u]),p=s.useCallback(()=>{window.speechSynthesis&&(window.speechSynthesis.cancel(),n(!1))},[]),I=s.useCallback(()=>{c("")},[]);return{isListening:a,transcript:r,sttSupported:d,startListening:k,stopListening:j,clearTranscript:I,isSpeaking:l,ttsSupported:u,speak:P,stopSpeaking:p}}const os=({status:a})=>{const t={idle:e.jsx(Ee,{className:"w-4 h-4 text-gray-400"}),thinking:e.jsx(Te,{className:"w-4 h-4 text-thea-gold animate-spin"}),coding:e.jsx(Et,{className:"w-4 h-4 text-green-400"}),running_command:e.jsx(Ke,{className:"w-4 h-4 text-blue-400"}),waiting_input:e.jsx(Ee,{className:"w-4 h-4 text-yellow-400 animate-pulse"}),error:e.jsx(fe,{className:"w-4 h-4 text-red-400"}),completed:e.jsx(Ge,{className:"w-4 h-4 text-green-400"}),active:e.jsx(Te,{className:"w-4 h-4 text-thea-gold animate-spin"}),unknown:e.jsx(Ee,{className:"w-4 h-4 text-gray-400"})};return t[a]||t.unknown},pt={idle:"bg-gray-800 text-gray-400 border-gray-600",thinking:"bg-thea-gold/20 text-thea-gold border-thea-gold/50",coding:"bg-green-900/50 text-green-400 border-green-600/50",running_command:"bg-blue-900/50 text-blue-400 border-blue-600/50",waiting_input:"bg-yellow-900/50 text-yellow-400 border-yellow-600/50",error:"bg-red-900/50 text-red-400 border-red-600/50",completed:"bg-green-900/50 text-green-400 border-green-600/50",active:"bg-thea-gold/20 text-thea-gold border-thea-gold/50",unknown:"bg-gray-800 text-gray-400 border-gray-600"};function Bt({workerId:a,className:t="",autoSpeak:l=!1,onSummaryChange:n}){const[r,c]=s.useState(null),[d,o]=s.useState(!1),[u,i]=s.useState(null),[f,b]=s.useState(null),[k,j]=s.useState(l),P=s.useRef(""),{speak:p,stopSpeaking:I,isSpeaking:T,ttsSupported:C}=ls(),F=s.useCallback(async(R=!1,E)=>{o(!0),i(null);try{const M=`/api/workers/${a}/summary${R?"?refresh=true":""}`,y=await J(M,{signal:E});if(!y.ok)throw new Error(`Failed to fetch summary: ${y.status}`);const H=await y.json();c(H),b(new Date)}catch(M){if(M.name==="AbortError")return;i(M.message);try{const y=await J(`/api/workers/${a}/quick-status`,{signal:E});if(y.ok){const H=await y.json();c({status:H.status,summary:`Quick status: ${H.lastLine||"No output"}`,task:null,lastAction:null,pendingItems:[],hasError:H.status==="error"})}}catch{}}finally{o(!1)}},[a]),h=s.useCallback(R=>{var M;if(!R)return"";const E=[];return R.status==="waiting_input"?E.push("Waiting for input."):R.status==="error"&&E.push("Error detected."),R.task&&E.push(`Current task: ${R.task}`),R.summary&&E.push(R.summary),R.lastAction&&E.push(`Last action: ${R.lastAction}`),((M=R.pendingItems)==null?void 0:M.length)>0&&E.push(`${R.pendingItems.length} pending items.`),E.join(" ")},[]),N=s.useCallback(()=>{const R=h(r);R&&p(R,{rate:1.1})},[r,p,h]);s.useEffect(()=>{if(!k||!r||!C)return;const R=h(r);R&&R!==P.current&&(P.current=R,p(R,{rate:1.1}),n&&n(r))},[r,k,C,p,h,n]),s.useEffect(()=>{const R=new AbortController;F(!1,R.signal);const E=setInterval(()=>{F(!1,R.signal)},1e4);return()=>{R.abort(),clearInterval(E),window.speechSynthesis&&window.speechSynthesis.cancel()}},[F]);const $=()=>{F(!0)},W=()=>{T&&I(),j(!k)};if(!r&&d)return e.jsx(ns,{message:"Generating summary...",className:t});if(u&&!r)return e.jsxs("div",{className:x("p-4 bg-red-900/20 border border-red-600/30 rounded",t),children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[e.jsx(fe,{className:"w-5 h-5"}),e.jsx("span",{children:"Failed to load summary"})]}),e.jsx("p",{className:"text-sm text-red-400/70 mt-1",children:u}),e.jsx("button",{onClick:$,className:"mt-2 text-sm text-thea-gold hover:text-thea-gold-bright",children:"Try again"})]});const V=(r==null?void 0:r.status)||"unknown";return e.jsxs("div",{className:x("flex flex-col",t),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{status:V}),e.jsx("span",{className:x("px-2 py-0.5 text-xs font-mono rounded border",pt[V]||pt.unknown),children:V.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[C&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:N,disabled:T,className:x("p-1.5 rounded hover:bg-thea-gold/10 transition-colors",T&&"text-thea-gold animate-pulse"),title:T?"Speaking...":"Speak summary",children:e.jsx(mt,{className:"w-4 h-4 text-thea-gold-dark"})}),e.jsx("button",{onClick:W,className:x("p-1.5 rounded transition-colors",k?"bg-thea-gold/20 text-thea-gold":"hover:bg-thea-gold/10 text-thea-gold-dark"),title:k?"Auto-speak ON":"Auto-speak OFF",children:k?e.jsx(mt,{className:"w-4 h-4"}):e.jsx(Ha,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:$,disabled:d,className:x("p-1.5 rounded hover:bg-thea-gold/10 transition-colors",d&&"animate-spin"),title:"Refresh summary",children:e.jsx(et,{className:"w-4 h-4 text-thea-gold-dark"})})]})]}),(r==null?void 0:r.task)&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-xs font-semibold text-thea-gold-dark uppercase tracking-wider mb-1",children:"Current Task"}),e.jsx("p",{className:"text-sm text-thea-gold-bright",children:r.task})]}),(r==null?void 0:r.summary)&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-xs font-semibold text-thea-gold-dark uppercase tracking-wider mb-1",children:"Summary"}),e.jsx("p",{className:"text-sm text-thea-gold/90 leading-relaxed",children:r.summary})]}),(r==null?void 0:r.lastAction)&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-xs font-semibold text-thea-gold-dark uppercase tracking-wider mb-1",children:"Last Action"}),e.jsx("p",{className:"text-sm text-thea-gold/80",children:r.lastAction})]}),(r==null?void 0:r.pendingItems)&&r.pendingItems.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("h4",{className:"text-xs font-semibold text-thea-gold-dark uppercase tracking-wider mb-1",children:["Pending (",r.pendingItems.length,")"]}),e.jsxs("ul",{className:"text-sm text-thea-gold/70 space-y-1",children:[r.pendingItems.slice(0,5).map((R,E)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-thea-gold-dark",children:"-"}),e.jsx("span",{children:R})]},`${E}-${R.slice(0,32)}`)),r.pendingItems.length>5&&e.jsxs("li",{className:"text-thea-gold-dark text-xs",children:["...and ",r.pendingItems.length-5," more"]})]})]}),(r==null?void 0:r.hasError)&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-900/20 border border-red-600/30 rounded",children:[e.jsx(fe,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-sm text-red-400",children:"Error detected"})]}),f&&e.jsxs("div",{className:"mt-auto pt-2 text-xs text-thea-gold-dark/50 text-right",children:["Updated ",f.toLocaleTimeString()]})]})}function gt({workerId:a,className:t}){var I,T,C,F;const[l,n]=s.useState(null),[r,c]=s.useState(!0),[d,o]=s.useState(null),u=s.useRef(null),i=s.useCallback(async h=>{if(a){c(!0),o(null);try{const N=await J(`/api/metrics/worker/${a}`,{signal:h});if(!N.ok){if(N.status===404){n(null);return}throw new Error("Failed to fetch worker metrics")}const $=await N.json();n($)}catch(N){if(N.name==="AbortError")return;o(N.message)}finally{c(!1)}}},[a]);s.useEffect(()=>{const h=new AbortController;u.current=h,i(h.signal);const N=setInterval(()=>i(h.signal),1e4);return()=>{h.abort(),u.current=null,clearInterval(N)}},[i]);const f=s.useCallback(()=>{var N;(N=u.current)==null||N.abort();const h=new AbortController;u.current=h,i(h.signal)},[i]);if(r&&!l)return e.jsxs("div",{className:x("thea-card p-4",t),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ie,{className:"w-4 h-4 text-thea-gold"}),e.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright uppercase tracking-wider text-sm",children:"Worker Health"})]}),e.jsx("div",{className:"flex items-center justify-center py-8 text-thea-gold-dark",children:e.jsx(et,{className:"w-5 h-5 animate-spin"})})]});if(d)return e.jsxs("div",{className:x("thea-card p-4",t),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ie,{className:"w-4 h-4 text-thea-gold"}),e.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright uppercase tracking-wider text-sm",children:"Worker Health"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsx("span",{children:d})]}),e.jsx("button",{onClick:f,className:"mt-2 text-xs text-thea-gold-dark hover:text-thea-gold",children:"Retry"})]});const b=(l==null?void 0:l.healthScore)??null,k=((I=l==null?void 0:l.performance)==null?void 0:I.avgLatency)??null,j=((T=l==null?void 0:l.lifecycle)==null?void 0:T.uptime)??null,P=((C=l==null?void 0:l.lifecycle)==null?void 0:C.spawnTime)??null,p=((F=l==null?void 0:l.performance)==null?void 0:F.avgLatency)??null;return e.jsxs("div",{className:x("thea-card",t),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-thea-gold-dark/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4 text-thea-gold"}),e.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright uppercase tracking-wider text-sm",children:"Worker Health"})]}),e.jsx("button",{onClick:f,className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors",title:"Refresh",children:e.jsx(et,{className:x("w-3.5 h-3.5",r&&"animate-spin")})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-thea-gold-dark",children:"Health Score"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(is,{score:b}),e.jsx(Ya,{score:b,size:"md",showScore:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(Fe,{icon:ne,label:"Response Time",value:k!==null?`${k}ms`:"--",status:cs(k)}),e.jsx(Fe,{icon:Ba,label:"Spawn Time",value:P!==null?`${P}ms`:"--",status:ds(P)}),e.jsx(Fe,{icon:Ee,label:"Uptime",value:Ft(j),status:"neutral"}),e.jsx(Fe,{icon:Ua,label:"Latency",value:p!==null?`${p}ms`:"--",status:us(p)})]}),!l&&e.jsx("div",{className:"text-center text-thea-gold-dark text-sm py-2",children:"No metrics available for this worker yet."})]})]})}function is({score:a}){const t=a!==null?Math.min(100,Math.max(0,a)):0,l=t/100*180-90,n=()=>a===null?"#6b7280":a>=80?"#4ade80":a>=50?"#facc15":"#f87171";return e.jsxs("div",{className:"relative w-16 h-8 overflow-hidden",children:[e.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 64 32",children:[e.jsx("path",{d:"M 4 32 A 28 28 0 0 1 60 32",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"4",strokeLinecap:"round"}),e.jsx("path",{d:"M 4 32 A 28 28 0 0 1 60 32",fill:"none",stroke:n(),strokeWidth:"4",strokeLinecap:"round",strokeDasharray:`${t*.88} 88`,style:{filter:`drop-shadow(0 0 4px ${n()})`}})]}),e.jsx("div",{className:"absolute bottom-0 left-1/2 w-0.5 h-6 bg-thea-gold origin-bottom transition-transform duration-500",style:{transform:`translateX(-50%) rotate(${l}deg)`}}),e.jsx("div",{className:"absolute bottom-0 left-1/2 w-2 h-2 -translate-x-1/2 translate-y-1/2 rounded-full bg-thea-gold shadow-[0_0_6px_rgba(218,165,32,0.6)]"})]})}function Fe({icon:a,label:t,value:l,status:n}){const r={good:"border-green-500/30 bg-green-500/5",warning:"border-yellow-500/30 bg-yellow-500/5",critical:"border-red-500/30 bg-red-500/5",neutral:"border-thea-gold-dark/30 bg-thea-gold/5"},c={good:"text-green-400",warning:"text-yellow-400",critical:"text-red-400",neutral:"text-thea-gold-bright"};return e.jsxs("div",{className:x("p-2.5 rounded border",r[n]||r.neutral),children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(a,{className:"w-3 h-3 text-thea-gold-dark"}),e.jsx("span",{className:"text-xxs text-thea-gold-dark uppercase tracking-wider",children:t})]}),e.jsx("span",{className:x("font-mono text-sm font-bold",c[n]||c.neutral),children:l})]})}function cs(a){return a===null?"neutral":a<100?"good":a<500?"warning":"critical"}function ds(a){return a===null?"neutral":a<2e3?"good":a<5e3?"warning":"critical"}function us(a){return a===null?"neutral":a<50?"good":a<200?"warning":"critical"}function Ut({onSend:a,onCancel:t,placeholder:l="Speak or type..."}){const[n,r]=s.useState(""),[c,d]=s.useState(!1),[o,u]=s.useState(!1),i=s.useRef(null);s.useEffect(()=>{const j=window.SpeechRecognition||window.webkitSpeechRecognition;if(j){u(!0);const P=new j;P.continuous=!0,P.interimResults=!0,P.lang="en-US",P.onresult=p=>{const I=Array.from(p.results).map(T=>T[0].transcript).join("");r(I)},P.onerror=p=>{console.error("Speech recognition error:",p.error),d(!1)},P.onend=()=>{d(!1)},i.current=P}return()=>{i.current&&i.current.stop()}},[]);const f=()=>{i.current&&(c?(i.current.stop(),d(!1)):(r(""),i.current.start(),d(!0)))},b=()=>{var j;n.trim()&&(a(n.trim()),r(""),c&&((j=i.current)==null||j.stop(),d(!1)))},k=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),b())};return e.jsxs("div",{className:"bg-black/50 border border-thea-gold-dark/30 p-3",children:[e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx("textarea",{value:n,onChange:j=>r(j.target.value),onKeyDown:k,placeholder:l,rows:2,className:"w-full bg-thea-nearBlack border border-thea-gold-dark/30 px-3 py-2 text-sm text-white font-mono placeholder:text-thea-gold-dark/50 focus:outline-none focus:border-thea-gold resize-none","aria-label":l})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[o&&e.jsx("button",{onClick:f,className:x("p-3 border transition-colors",c?"bg-thea-maroon/20 border-thea-maroon text-thea-maroon animate-pulse":"bg-thea-gold/10 border-thea-gold/30 text-thea-gold hover:bg-thea-gold/20"),"aria-label":c?"Stop listening":"Start voice input",children:c?e.jsx(Aa,{className:"w-5 h-5"}):e.jsx(Tt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:b,disabled:!n.trim(),className:"p-3 bg-thea-gold/20 border border-thea-gold text-thea-gold hover:bg-thea-gold/30 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Send message",children:e.jsx(Ia,{className:"w-5 h-5"})})]})]}),c&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-thea-maroon",role:"status","aria-live":"polite",children:[e.jsx("span",{className:"w-2 h-2 bg-thea-maroon rounded-full animate-pulse"}),"Listening..."]}),t&&e.jsxs("button",{onClick:t,className:"mt-2 flex items-center gap-1 text-xs text-thea-gold-dark hover:text-thea-gold transition-colors",children:[e.jsx(le,{className:"w-3 h-3"}),"Cancel"]})]})}function bt({children:a,direction:t="horizontal",sizes:l,minSize:n=100,onSizesChange:r,className:c=""}){const d=Array.isArray(a)?a:[a],o=d.length,u=Array(o).fill(100/o),[i,f]=s.useState(l||u),b=s.useRef(null),k=s.useRef(!1),j=s.useRef(null),P=s.useRef(null),p=s.useRef(null);s.useEffect(()=>{if(o!==i.length){const h=Array(o).fill(100/o);f(h)}},[o]);const I=s.useCallback((h,N)=>{N.preventDefault(),k.current=!0,j.current=h,P.current=t==="horizontal"?N.clientX:N.clientY,p.current=[...i],document.body.style.cursor=t==="horizontal"?"col-resize":"row-resize",document.body.style.userSelect="none"},[t,i]),T=s.useCallback(h=>{if(!k.current||!b.current)return;const $=b.current.getBoundingClientRect(),W=t==="horizontal"?$.width:$.height,V=t==="horizontal"?h.clientX:h.clientY,R=P.current,E=(V-R)/W*100,M=j.current,y=[...p.current];let H=y[M]+E,B=y[M+1]-E;const Y=n/W*100;H<Y&&(B+=H-Y,H=Y),B<Y&&(H+=B-Y,B=Y),y[M]=H,y[M+1]=B,f(y),r==null||r(y)},[t,n,r]),C=s.useCallback(()=>{k.current=!1,j.current=null,document.body.style.cursor="",document.body.style.userSelect=""},[]);if(s.useEffect(()=>(document.addEventListener("mousemove",T),document.addEventListener("mouseup",C),()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",C)}),[T,C]),o<=1)return e.jsx("div",{className:x("w-full h-full",c),children:d[0]});const F=t==="horizontal";return e.jsx("div",{ref:b,className:x("flex w-full h-full",F?"flex-row":"flex-col",c),children:d.map((h,N)=>e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"overflow-hidden",style:{[F?"width":"height"]:`${i[N]}%`,flexShrink:0},children:h}),N<o-1&&e.jsxs("div",{className:x("flex-shrink-0 relative group",F?"w-1 cursor-col-resize":"h-1 cursor-row-resize","bg-thea-gold-dark/30 hover:bg-thea-gold/50 transition-colors"),onMouseDown:$=>I(N,$),children:[e.jsx("div",{className:x("absolute",F?"inset-y-0 -left-1 -right-1":"inset-x-0 -top-1 -bottom-1")}),e.jsx("div",{className:x("absolute bg-thea-gold/60 opacity-0 group-hover:opacity-100 transition-opacity",F?"inset-y-0 left-0 right-0":"inset-x-0 top-0 bottom-0")})]})]},(h==null?void 0:h.key)||`pane-${N}`))})}function Xe({children:a,columns:t=2,rows:l=2,gap:n=4,className:r=""}){const c=Array.isArray(a)?a:[a];return e.jsx("div",{className:x("w-full h-full grid",r),style:{gridTemplateColumns:`repeat(${t}, 1fr)`,gridTemplateRows:`repeat(${l}, 1fr)`,gap:`${n}px`},children:c.map((d,o)=>e.jsx("div",{className:"overflow-hidden min-h-0 min-w-0",children:d},(d==null?void 0:d.key)||`grid-${o}`))})}function hs({paneId:a,workerId:t,onWorkerChange:l,onClose:n,onMaximize:r,isMaximized:c=!1,isActive:d,showCloseButton:o=!0,className:u=""}){const{workers:i,outputs:f,sendRawInput:b,resizeTerminal:k,activePaneId:j,setActivePaneId:P,updateWorkerSettings:p}=ke(),[I,T]=s.useState("terminal"),[C,F]=s.useState(!1),[h,N]=s.useState(!1),[$,W]=s.useState(null),[V,R]=s.useState(null),[E,M]=s.useState(null),y=i.find(D=>D.id===t),H=f[t]||"",B=d!==void 0?d:j===a,Y=s.useRef(B);s.useEffect(()=>{Y.current=B},[B]);const ee=()=>{P&&P(a)},Q=s.useCallback(async D=>{if(!D||!D.type.startsWith("image/")){W("error"),setTimeout(()=>W(null),2e3);return}W("uploading");const Z=new FormData;Z.append("screenshot",D),Z.append("workerId",t||"unknown");try{const _=await J("/api/uploads/screenshot",{method:"POST",body:Z});if(!_.ok)throw new Error("Upload failed");const ae=await _.json();R(ae.filename),W("success"),setTimeout(()=>W(null),3e3)}catch{W("error"),setTimeout(()=>W(null),2e3)}},[t]),me=s.useCallback(D=>{D.preventDefault(),D.stopPropagation(),N(!0)},[]),ce=s.useCallback(D=>{D.preventDefault(),D.stopPropagation(),N(!1)},[]),pe=s.useCallback(D=>{var _;D.preventDefault(),D.stopPropagation(),N(!1);const Z=(_=D.dataTransfer)==null?void 0:_.files;Z&&Z.length>0&&Q(Z[0])},[Q]);return s.useEffect(()=>{const D=Z=>{var ae;if(!Y.current)return;const _=(ae=Z.clipboardData)==null?void 0:ae.items;if(_){for(const te of _)if(te.type.startsWith("image/")){const re=te.getAsFile();if(re){Q(re);break}}}};return document.addEventListener("paste",D),()=>document.removeEventListener("paste",D)},[Q]),e.jsxs("div",{className:x("h-full flex flex-col bg-black/20 border rounded overflow-hidden transition-colors relative",B?"border-thea-gold/60 shadow-gold-sm":"border-thea-gold-dark/30",h&&"border-thea-gold border-2",u),onClick:ee,onDragOver:me,onDragLeave:ce,onDrop:pe,children:[h&&e.jsx("div",{className:"absolute inset-0 z-50 bg-thea-gold/20 backdrop-blur-sm flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(zt,{className:"w-12 h-12 text-thea-gold-bright mx-auto mb-2"}),e.jsx("p",{className:"text-thea-gold-bright font-rajdhani text-lg",children:"Drop image to upload"})]})}),$&&e.jsxs("div",{className:x("absolute top-12 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded shadow-lg flex items-center gap-2 text-sm font-mono",$==="uploading"&&"bg-thea-gold/90 text-black",$==="success"&&"bg-green-600 text-white",$==="error"&&"bg-red-600 text-white"),children:[$==="uploading"&&e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"w-4 h-4 animate-pulse"}),"Uploading..."]}),$==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate max-w-[200px]",children:V})]}),$==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-4 h-4"}),"Upload failed"]})]}),e.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5 bg-black/40 border-b border-thea-gold-dark/20 flex-shrink-0",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>F(!C),className:"flex items-center gap-1.5 px-2 py-1 text-xs font-rajdhani text-thea-gold hover:text-thea-gold-bright transition-colors rounded hover:bg-white/5",children:[e.jsx("span",{className:x("w-1.5 h-1.5 rounded-full",(y==null?void 0:y.status)==="running"?"bg-green-500":"bg-thea-gold-dark")}),e.jsx("span",{className:"truncate max-w-[120px]",children:(y==null?void 0:y.label)||"Select Worker"}),e.jsx(qe,{className:"w-3 h-3"})]}),C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>F(!1)}),e.jsx("div",{className:"absolute top-full left-0 mt-1 z-20 min-w-[200px] max-h-[300px] overflow-auto bg-thea-nearBlack border border-thea-gold-dark/50 rounded shadow-lg",children:i.length===0?e.jsx("div",{className:"px-3 py-2 text-xs text-thea-gold-dark",children:"No workers available"}):i.map(D=>e.jsxs("button",{onClick:()=>{l==null||l(D.id),F(!1)},className:x("w-full text-left px-3 py-2 text-xs hover:bg-thea-gold/10 transition-colors",D.id===t?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:x("w-1.5 h-1.5 rounded-full flex-shrink-0",D.status==="running"?"bg-green-500":"bg-thea-gold-dark")}),e.jsx("span",{className:"truncate",children:D.label})]}),e.jsx("div",{className:"text-xxs text-thea-gold-dark ml-3.5 truncate",children:D.project})]},D.id))})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:"flex items-center bg-black/30 rounded border border-thea-gold-dark/20",children:[e.jsx("button",{onClick:()=>T("terminal"),className:x("p-1 rounded-l transition-colors",I==="terminal"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Terminal View",children:e.jsx(Ke,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>T("summary"),className:x("p-1 rounded-r transition-colors",I==="summary"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Summary View",children:e.jsx(At,{className:"w-3 h-3"})})]}),y&&e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>{y.autoAcceptPaused?p(y.id,{autoAcceptPaused:!1}):p(y.id,{autoAccept:!y.autoAccept})},className:x("p-1 rounded transition-colors relative",y.autoAccept?y.autoAcceptPaused?"bg-yellow-600/30 text-yellow-500 hover:bg-yellow-600/40":"bg-green-600/30 text-green-500 hover:bg-green-600/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:y.autoAccept?y.autoAcceptPaused?"Auto-accept PAUSED (click to resume)":"Auto-accept ON (click to disable)":"Auto-accept OFF (click to enable)",children:y.autoAccept?y.autoAcceptPaused?e.jsx(Be,{className:"w-3 h-3"}):e.jsx(ne,{className:"w-3 h-3"}):e.jsx(tt,{className:"w-3 h-3"})})}),y&&e.jsx("button",{onClick:()=>{p(y.id,{ralphMode:!y.ralphMode})},className:x("p-1 rounded transition-colors",y.ralphMode?"bg-purple-600/30 text-purple-400 hover:bg-purple-600/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:y.ralphMode?"Ralph mode ON - Worker will signal completion via API":"Ralph mode OFF - Enable autonomous completion signaling",children:e.jsx(ze,{className:"w-3 h-3"})}),y&&he(y.label).prefix==="GENERAL"&&e.jsx("button",{onClick:()=>{y.bulldozeMode&&y.bulldozePaused?p(y.id,{bulldozePaused:!1}):y.bulldozeMode?p(y.id,{bulldozeMode:!1}):M(y)},className:x("p-1 rounded transition-colors",y.bulldozeMode?y.bulldozePaused?"bg-yellow-600/30 text-yellow-400 hover:bg-yellow-600/40":"bg-amber-600/30 text-amber-300 hover:bg-amber-600/40 shadow-[0_0_6px_rgba(245,158,11,0.2)]":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:y.bulldozeMode?y.bulldozePaused?`Bulldoze PAUSED (${y.bulldozePauseReason||"unknown"}) — click to resume`:`Bulldoze ON (${y.bulldozeCyclesCompleted||0} cycles) — click to disable`:"Bulldoze OFF — Enable continuous autonomous work",children:y.bulldozeMode&&y.bulldozePaused?e.jsx(st,{className:"w-3 h-3"}):e.jsx(ne,{className:x("w-3 h-3",{"animate-pulse":y.bulldozeMode})})}),e.jsxs("label",{className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors cursor-pointer",title:"Upload screenshot (or drag & drop, or paste)",children:[e.jsx(Ue,{className:"w-3 h-3"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:D=>{var _;const Z=(_=D.target.files)==null?void 0:_[0];Z&&Q(Z),D.target.value=""}})]}),r&&e.jsx("button",{onClick:r,className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors",title:c?"Restore":"Maximize",children:c?e.jsx(Ta,{className:"w-3 h-3"}):e.jsx(at,{className:"w-3 h-3"})}),o&&n&&e.jsx("button",{onClick:n,className:"p-1 text-thea-gold-dark hover:text-red-400 transition-colors",title:"Close Pane",children:e.jsx(le,{className:"w-3 h-3"})})]})]}),e.jsx("div",{className:"flex-1 min-h-0 p-1",children:!t||!y?e.jsx("div",{className:"h-full flex items-center justify-center text-thea-gold-dark text-sm",children:"Select a worker to display"}):I==="terminal"?e.jsx(Lt,{workerId:t,output:H,onRawInput:D=>b(t,D),onResize:(D,Z)=>k(t,D,Z),className:"h-full w-full"}):e.jsx("div",{className:"h-full bg-black/30 rounded overflow-auto p-2",children:e.jsx(Bt,{workerId:t,className:"h-full"})})}),E&&e.jsx(Ve,{isOpen:!!E,onClose:()=>M(null),onConfirm:({mission:D,backlog:Z,standingOrders:_})=>{p(E.id,{bulldozeMode:!0,bulldozeMission:D,bulldozeBacklog:Z,bulldozeStandingOrders:_}),M(null)},workerLabel:E.label})]})}function xs({className:a=""}){const{layoutMode:t,changeLayoutMode:l,addPane:n,panes:r}=ke(),c=[{mode:X.SINGLE,icon:at,label:"Single"},{mode:X.SPLIT_H,icon:ya,label:"Split H"},{mode:X.SPLIT_V,icon:_a,label:"Split V"},{mode:X.GRID_2X2,icon:Na,label:"2×2"},{mode:X.GRID_3X2,icon:Sa,label:"3×2"}];return e.jsxs("div",{className:x("flex items-center gap-1",a),children:[c.map(({mode:d,icon:o,label:u})=>e.jsxs("button",{onClick:()=>l(d),className:x("flex items-center gap-1.5 px-2 py-1 text-xs font-rajdhani rounded transition-all",t===d?"bg-thea-gold/20 text-thea-gold-bright border border-thea-gold/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5 border border-transparent"),title:u,children:[e.jsx(o,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:u})]},d)),e.jsxs("button",{onClick:()=>n(),className:"flex items-center gap-1 px-2 py-1 text-xs font-rajdhani text-thea-gold-dark hover:text-thea-gold hover:bg-white/5 rounded transition-colors border border-transparent",title:"Add Pane",children:[e.jsx(Pa,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Add"})]}),e.jsxs("span",{className:"text-xxs text-thea-gold-dark/50 ml-2",children:[r.length," pane",r.length!==1?"s":""]})]})}function ms({onBack:a}){const{layoutMode:t,panes:l,activePaneId:n,paneSizes:r,setPaneSizes:c,setPaneWorker:d,removePane:o,changeLayoutMode:u,sendInput:i,workers:f}=ke(),b=l.find(p=>p.id===n)||l[0],k=b!=null&&b.workerId?f.find(p=>p.id===b.workerId):null,j=(p,I)=>e.jsx(hs,{paneId:p.id,workerId:p.workerId,onWorkerChange:T=>d(p.id,T),onClose:()=>o(p.id),isActive:n===p.id,showCloseButton:l.length>1,className:"h-full"},p.id),P=()=>{switch(t){case X.SINGLE:return e.jsx("div",{className:"h-full p-2",children:l[0]&&j(l[0])});case X.SPLIT_H:return e.jsx("div",{className:"h-full p-2",children:e.jsx(bt,{direction:"horizontal",sizes:r,onSizesChange:c,minSize:200,children:l.slice(0,2).map((T,C)=>j(T))})});case X.SPLIT_V:return e.jsx("div",{className:"h-full p-2",children:e.jsx(bt,{direction:"vertical",sizes:r,onSizesChange:c,minSize:100,children:l.slice(0,2).map((T,C)=>j(T))})});case X.GRID_2X2:return e.jsx("div",{className:"h-full p-2",children:e.jsx(Xe,{columns:2,rows:2,gap:8,children:l.slice(0,4).map((T,C)=>j(T))})});case X.GRID_3X2:return e.jsx("div",{className:"h-full p-2",children:e.jsx(Xe,{columns:3,rows:2,gap:8,children:l.slice(0,6).map((T,C)=>j(T))})});case X.CUSTOM:default:const p=Math.ceil(Math.sqrt(l.length)),I=Math.ceil(l.length/p);return e.jsx("div",{className:"h-full p-2",children:e.jsx(Xe,{columns:p,rows:I,gap:8,children:l.map((T,C)=>j(T))})})}};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-black/30 border-b border-thea-gold-dark/20 flex-shrink-0",children:[e.jsxs("button",{onClick:a,className:"flex items-center gap-2 text-thea-gold hover:text-thea-gold-bright transition-colors min-h-[44px] min-w-[44px] px-2 -ml-2",children:[e.jsx(Qe,{className:"w-6 h-6 flex-shrink-0"}),e.jsx("span",{className:"font-rajdhani font-semibold hidden sm:inline",children:"Back to Grid"})]}),e.jsx(xs,{}),e.jsx("div",{className:"text-xs text-thea-gold-dark font-mono",children:(k==null?void 0:k.label)||"No active worker"})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:P()}),k&&e.jsx("div",{className:"p-4 border-t border-thea-gold-dark/20 flex-shrink-0",children:e.jsx(Ut,{onSend:p=>i(k.id,p),placeholder:`Send to ${k.label}...`})})]})}function ps({icon:a,title:t,message:l,children:n,className:r=""}){return e.jsxs("div",{className:x("flex flex-col items-center justify-center py-12",r),children:[a&&e.jsx(a,{className:"w-12 h-12 text-thea-gold-dark/30 mb-4"}),t&&e.jsx("h3",{className:"font-orbitron text-lg text-thea-gold-dark mb-2",children:t}),l&&e.jsx("p",{className:"text-sm text-thea-gold-dark/50 text-center max-w-xs",children:l}),n]})}const ft={running:"bg-green-500/20 text-green-400 border-green-500/30",stopped:"bg-gray-800 text-gray-400 border-gray-600",error:"bg-red-500/20 text-red-400 border-red-500/30",completed:"bg-blue-500/20 text-blue-400 border-blue-500/30",awaiting_review:"bg-purple-500/20 text-purple-400 border-purple-500/30"};function gs(a){const t=new Map;a.forEach(d=>t.set(d.id,{...d,children:[]}));const l=[];let n=0;a.forEach(d=>{const o=t.get(d.id);d.parentWorkerId&&t.has(d.parentWorkerId)?t.get(d.parentWorkerId).children.push(o):l.push(o)});function r(d,o){return d.length===0?o:Math.max(...d.map(u=>r(u.children,o+1)))}n=l.length>0?r(l,0):0;function c(d){d.sort((o,u)=>new Date(o.createdAt||0)-new Date(u.createdAt||0)),d.forEach(o=>c(o.children))}return c(l),{tree:l,stats:{total:a.length,roots:l.length,maxDepth:n,withChildren:a.filter(d=>{const o=t.get(d.id);return o&&o.children.length>0}).length}}}function bs({ralphStatus:a,ralphProgress:t,lastRalphSignalAt:l,workerStatus:n}){if(!a)return null;const r=n==="running"&&a==="in_progress"&&l&&Date.now()-new Date(l).getTime()>30*60*1e3,c={in_progress:r?"text-yellow-500/60":"text-yellow-400",done:"text-green-400",blocked:"text-red-400",pending:"text-gray-400"}[a]||"text-gray-400";return e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:x("text-xxs font-mono uppercase",c),children:a==="in_progress"?r?"stale":"working":a}),a==="in_progress"&&t!=null&&e.jsxs(e.Fragment,{children:[e.jsx(nt,{progress:t,className:"w-16 h-1"}),e.jsxs("span",{className:x("text-xxs font-mono",r?"text-yellow-500/60":"text-thea-gold-dark"),children:[t,"%"]})]})]})}const fs=s.memo(function a({node:t,depth:l,attachToWorker:n,killWorker:r}){const[c,d]=s.useState(!0),o=t.children&&t.children.length>0,{displayName:u}=he(t.label);return e.jsxs("div",{role:"treeitem","aria-expanded":o?c:void 0,"aria-label":t.label,children:[e.jsxs("div",{className:x("group flex items-center gap-2 py-1.5 px-2 hover:bg-thea-gold/5 transition-colors cursor-pointer border-l border-transparent hover:border-thea-gold-dark/30",l>0&&"ml-5"),style:l>0?{paddingLeft:`${l*12}px`}:void 0,children:[e.jsx("button",{onClick:i=>{i.stopPropagation(),d(!c)},className:x("w-5 h-5 flex items-center justify-center flex-shrink-0 transition-colors",o?"text-thea-gold-dark hover:text-thea-gold":"text-transparent"),disabled:!o,"aria-label":o?c?"Collapse":"Expand":void 0,children:o?c?e.jsx(qe,{className:"w-3.5 h-3.5"}):e.jsx(Mt,{className:"w-3.5 h-3.5"}):e.jsx(ga,{className:"w-3 h-3 text-thea-gold-dark/30"})}),e.jsx($t,{label:t.label,size:"sm"}),t.backend==="gemini"&&e.jsx("span",{className:"text-[8px] font-mono px-1 py-0.5 bg-blue-500/20 border border-blue-500/30 text-blue-300 flex-shrink-0",children:"G"}),e.jsx("button",{onClick:()=>n(t.id),className:"font-rajdhani font-semibold text-thea-gold-bright hover:text-white truncate text-sm transition-colors text-left min-w-0 flex-shrink",title:t.label,children:u||t.label}),o&&e.jsx("span",{className:"text-xxxs font-mono px-1.5 py-0.5 bg-thea-gold/10 border border-thea-gold-dark/30 text-thea-gold-dark flex-shrink-0",children:t.children.length}),e.jsx("span",{className:x("text-xxxs font-mono uppercase px-1.5 py-0.5 border flex-shrink-0",ft[t.status]||ft.stopped),children:t.status==="awaiting_review"?"review":t.status}),e.jsx(Dt,{score:Wt(t.health),size:"sm"}),e.jsx("div",{className:"hidden sm:flex flex-shrink-0",children:e.jsx(bs,{ralphStatus:t.ralphStatus,ralphProgress:t.ralphProgress,lastRalphSignalAt:t.lastRalphSignalAt,workerStatus:t.status})}),e.jsx("span",{className:"text-xxs font-mono text-thea-gold-dark/60 flex-shrink-0 hidden md:inline",children:es(t.createdAt)}),e.jsx("button",{onClick:i=>{i.stopPropagation(),r(t.id)},className:"opacity-0 group-hover:opacity-100 p-1 text-red-400/50 hover:text-red-400 hover:bg-red-500/10 transition-all flex-shrink-0 ml-auto",title:"Kill worker","aria-label":`Kill worker ${u||t.label}`,children:e.jsx(le,{className:"w-3.5 h-3.5"})})]}),o&&c&&e.jsx("div",{role:"group",className:"border-l border-thea-gold-dark/15 ml-4",style:{marginLeft:`${(l+1)*12+18}px`},children:t.children.map(i=>e.jsx(a,{node:i,depth:l+1,attachToWorker:n,killWorker:r},i.id))})]})});function ks(){const{workers:a,attachToWorker:t,killWorker:l,selectedProject:n}=ke(),[r,c]=s.useState(null);s.useEffect(()=>{let i=!1;async function f(){try{const b=await J("/api/workers/tree");if(!b.ok)return;const k=await b.json();i||c(k)}catch{}}return f(),()=>{i=!0}},[]);const d=s.useMemo(()=>{const i=n?a.filter(f=>f.project===n):a;return gs(i)},[a,n]),{tree:o,stats:u}=d;return o.length===0?e.jsx(ps,{icon:Je,title:"No Worker Hierarchy",message:n?`No workers running for ${n}.`:"No workers are currently active.",className:"py-20"}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3 px-2 py-2 bg-black/30 border border-thea-gold-dark/20",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Va,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),e.jsxs("span",{className:"text-xs font-mono text-thea-gold-dark",children:[e.jsx("span",{className:"text-thea-gold",children:u.total})," workers"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Je,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),e.jsxs("span",{className:"text-xs font-mono text-thea-gold-dark",children:[e.jsx("span",{className:"text-thea-gold",children:u.roots})," roots"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(za,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),e.jsxs("span",{className:"text-xs font-mono text-thea-gold-dark",children:["depth ",e.jsx("span",{className:"text-thea-gold",children:u.maxDepth})]})]})]}),e.jsx("div",{role:"tree","aria-label":"Worker hierarchy",className:"border border-thea-gold-dark/20 bg-black/20",children:o.map(i=>e.jsx(fs,{node:i,depth:0,attachToWorker:t,killWorker:l},i.id))})]})}function ys({value:a,onChange:t,placeholder:l="Search...",className:n=""}){return e.jsxs("div",{className:x("relative",n),role:"search",children:[e.jsx(Rt,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-thea-gold-dark pointer-events-none","aria-hidden":"true"}),e.jsx("input",{type:"text",value:a,onChange:r=>t(r.target.value),placeholder:l,className:"w-full bg-black/50 border border-thea-gold-dark/30 pl-10 pr-10 py-2 text-sm text-thea-gold placeholder-thea-gold-dark/50 focus:outline-none focus:border-thea-gold/50 transition-colors font-mono","aria-label":l}),a&&e.jsx("button",{onClick:()=>t(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-thea-gold-dark hover:text-thea-gold transition-colors","aria-label":"Clear search",children:e.jsx(le,{className:"w-4 h-4"})})]})}function js(){const{workers:a,outputs:t,projects:l,selectedProject:n,focusedWorker:r,sendInput:c,sendRawInput:d,resizeTerminal:o,detachFromWorker:u,layoutMode:i,changeLayoutMode:f,setPaneWorker:b,panes:k,updateWorkerSettings:j,subscribeToWorkerOutput:P,unsubscribeFromWorkerOutput:p,spawnAutonomousSession:I}=ke(),[T,C]=s.useState("summary"),[F,h]=s.useState(!1),[N,$]=s.useState(!1),[W,V]=s.useState(!1),[R,E]=s.useState(null),[M,y]=s.useState(null),[H,B]=s.useState(null),[Y,ee]=s.useState(!1),[Q,me]=s.useState("grid"),[ce,pe]=s.useState(""),[D,Z]=s.useState(""),[_,ae]=s.useState(null),[te,re]=s.useState(null),de=s.useCallback(async g=>{if(!g||!g.type.startsWith("image/")){E("error"),setTimeout(()=>E(null),2e3);return}E("uploading");const L=new FormData;L.append("screenshot",g),L.append("workerId",r||"unknown");try{const K=await J("/api/uploads/screenshot",{method:"POST",body:L});if(!K.ok)throw new Error("Upload failed");const oe=await K.json();y(oe.filename),E("success"),setTimeout(()=>E(null),5e3)}catch{E("error"),setTimeout(()=>E(null),2e3)}},[r]),Re=s.useCallback(g=>{g.preventDefault(),V(!0)},[]),Pe=s.useCallback(g=>{g.preventDefault(),V(!1)},[]),Le=s.useCallback(g=>{var K;g.preventDefault(),V(!1);const L=(K=g.dataTransfer)==null?void 0:K.files;L!=null&&L[0]&&de(L[0])},[de]);s.useEffect(()=>{if(!r)return;const g=L=>{var oe;const K=(oe=L.clipboardData)==null?void 0:oe.items;if(K){for(const Se of K)if(Se.type.startsWith("image/")){const Ce=Se.getAsFile();if(Ce){de(Ce);break}}}};return document.addEventListener("paste",g),()=>document.removeEventListener("paste",g)},[r,de]);const q=s.useMemo(()=>n?a.filter(g=>g.project===n):a,[n,a]),_e=s.useMemo(()=>{const g={};for(const L of q)g[L.status]=(g[L.status]||0)+1;return g},[q]),je=s.useMemo(()=>{const g=new Set;for(const L of q)L.project&&g.add(L.project);return[...g].sort()},[q]),we=s.useMemo(()=>{let g=q;if(_&&(g=g.filter(L=>L.status===_)),te&&(g=g.filter(L=>L.project===te)),D.trim()){const L=D.toLowerCase();g=g.filter(K=>(K.label||"").toLowerCase().includes(L)||(K.project||"").toLowerCase().includes(L)||(K.id||"").toLowerCase().includes(L))}return g},[q,D,_,te]),ve=s.useRef(r);ve.current=r,s.useEffect(()=>{if(r)return;const g=q.map(L=>L.id);return g.forEach(L=>P(L)),()=>{g.forEach(L=>{L!==ve.current&&p(L)})}},[r,q,P,p]);const v=s.useMemo(()=>r?a.find(g=>g.id===r):null,[r,a]),Ne=(g=null)=>{g&&k.length>0&&b(k[0].id,g),h(!0)},ge=s.useMemo(()=>q.length>0&&q.every(g=>g.ralphMode),[q]),ue=s.useMemo(()=>q.length>0&&q.every(g=>g.autoAccept&&!g.autoAcceptPaused),[q]),Ie=s.useCallback(()=>{const g=!ge;q.forEach(L=>{j(L.id,{ralphMode:g})})},[q,j,ge]),De=s.useCallback(()=>{const g=!ue;q.forEach(L=>{j(L.id,{autoAccept:g,autoAcceptPaused:!1})})},[q,j,ue]);return F?e.jsx(ms,{onBack:()=>h(!1)}):v?e.jsxs("div",{className:x("h-full flex flex-col relative",W&&"ring-2 ring-thea-gold"),onDragOver:Re,onDragLeave:Pe,onDrop:Le,children:[W&&e.jsx("div",{className:"absolute inset-0 z-50 bg-thea-gold/20 backdrop-blur-sm flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(zt,{className:"w-16 h-16 text-thea-gold-bright mx-auto mb-3"}),e.jsx("p",{className:"text-thea-gold-bright font-rajdhani text-xl",children:"Drop image to upload"})]})}),R&&e.jsxs("div",{className:x("absolute top-16 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded shadow-lg flex items-center gap-2 text-sm font-mono",R==="uploading"&&"bg-thea-gold/90 text-black",R==="success"&&"bg-green-600 text-white",R==="error"&&"bg-red-600 text-white"),children:[R==="uploading"&&e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"w-4 h-4 animate-pulse"}),"Uploading..."]}),R==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{className:"max-w-[300px] truncate",children:M})]}),R==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-4 h-4"}),"Upload failed"]})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/30 border-b border-thea-gold-dark/20",children:[e.jsxs("button",{onClick:u,className:"flex items-center gap-2 text-thea-gold hover:text-thea-gold-bright transition-colors min-h-[44px] min-w-[44px] px-2 -ml-2","aria-label":"Back to worker grid",children:[e.jsx(Qe,{className:"w-6 h-6 flex-shrink-0"}),e.jsx("span",{className:"font-rajdhani font-semibold hidden sm:inline",children:"Back to Grid"})]}),e.jsxs("div",{className:"text-center min-w-0 flex-1 mx-2",children:[e.jsx("h2",{className:"font-orbitron font-bold text-thea-gold-bright uppercase tracking-wider text-sm md:text-base truncate",children:v.label}),e.jsxs("p",{className:"text-xxs md:text-xs text-thea-gold-dark font-mono truncate",children:[v.project," · ",v.id]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>$(!N),className:x("p-2 transition-colors",N?"text-thea-gold-bright bg-thea-gold/10 rounded":"text-thea-gold-dark hover:text-thea-gold"),title:N?"Hide Health Panel":"Show Health Panel","aria-label":N?"Hide health panel":"Show health panel","aria-expanded":N,children:e.jsx(ie,{className:"w-5 h-5"})}),e.jsxs("label",{className:"p-2 text-thea-gold-dark hover:text-thea-gold transition-colors cursor-pointer",title:"Upload screenshot","aria-label":"Upload screenshot",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:g=>{var L;(L=g.target.files)!=null&&L[0]&&de(g.target.files[0]),g.target.value=""}})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-black/50 rounded border border-thea-gold-dark/30 p-0.5",role:"tablist","aria-label":"View mode",children:[e.jsxs("button",{role:"tab","aria-selected":T==="summary",onClick:()=>C("summary"),className:x("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",T==="summary"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"AI Summary View",children:[e.jsx(At,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Summary"})]}),e.jsxs("button",{role:"tab","aria-selected":T==="terminal",onClick:()=>C("terminal"),className:x("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",T==="terminal"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Raw Terminal View",children:[e.jsx(Ke,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Terminal"})]})]}),v&&e.jsxs("button",{onClick:()=>{v.autoAcceptPaused?j(v.id,{autoAcceptPaused:!1}):j(v.id,{autoAccept:!v.autoAccept})},className:x("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",v.autoAccept?v.autoAcceptPaused?"bg-yellow-600/30 text-yellow-500 hover:bg-yellow-600/40":"bg-green-600/30 text-green-500 hover:bg-green-600/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:v.autoAccept?v.autoAcceptPaused?"Auto-accept PAUSED (click to resume)":"Auto-accept ON (click to disable)":"Auto-accept OFF (click to enable)",children:[v.autoAccept?v.autoAcceptPaused?e.jsx(Be,{className:"w-4 h-4"}):e.jsx(ne,{className:"w-4 h-4"}):e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:v.autoAccept&&v.autoAcceptPaused?"Paused":"Auto"})]}),v&&e.jsxs("button",{onClick:()=>{j(v.id,{ralphMode:!v.ralphMode})},className:x("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",v.ralphMode?"bg-purple-600/30 text-purple-400 hover:bg-purple-600/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:v.ralphMode?"Ralph mode ON - Worker will signal completion via API":"Ralph mode OFF - Enable autonomous completion signaling",children:[e.jsx(ze,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Ralph"})]}),v&&he(v.label).prefix==="GENERAL"&&e.jsxs("button",{onClick:()=>{v.bulldozeMode&&v.bulldozePaused?j(v.id,{bulldozePaused:!1}):v.bulldozeMode?j(v.id,{bulldozeMode:!1}):B(v)},className:x("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",v.bulldozeMode?v.bulldozePaused?"bg-yellow-600/30 text-yellow-400 border border-yellow-500/40 hover:bg-yellow-600/40":"bg-amber-600/30 text-amber-300 border border-amber-500/60 hover:bg-amber-600/40 shadow-[0_0_8px_rgba(245,158,11,0.25)]":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:v.bulldozeMode?v.bulldozePaused?`Bulldoze PAUSED (${v.bulldozePauseReason||"unknown"}) — click to resume`:`Bulldoze ON (${v.bulldozeCyclesCompleted||0} cycles) — click to disable`:"Bulldoze OFF — Enable continuous autonomous work",children:[v.bulldozeMode&&v.bulldozePaused?e.jsx(st,{className:"w-4 h-4"}):e.jsx(ne,{className:x("w-4 h-4",{"animate-pulse":v.bulldozeMode})}),e.jsx("span",{className:"hidden md:inline",children:v.bulldozeMode&&v.bulldozePaused?"Resume":"Bulldoze"}),v.bulldozeMode&&v.bulldozeCyclesCompleted>0&&e.jsx("span",{className:"text-xxs opacity-70",children:v.bulldozeCyclesCompleted})]}),v&&v.status==="running"&&e.jsxs("button",{onClick:async()=>{try{await J(`/api/workers/${v.id}/interrupt`,{method:"POST"})}catch{}},className:"flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani text-red-400/70 hover:text-red-400 hover:bg-red-600/20 transition-all",title:"Send Ctrl+C interrupt to worker",children:[e.jsx(Fa,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Interrupt"})]})]})]}),(v==null?void 0:v.ralphStatus)&&e.jsxs("div",{className:"px-4 py-2 border-b border-thea-gold-dark/10 flex items-center gap-3",children:[e.jsx("span",{className:x("text-xs font-mono uppercase tracking-wider",{"text-yellow-400":v.ralphStatus==="in_progress","text-green-400":v.ralphStatus==="done","text-red-400":v.ralphStatus==="blocked","text-gray-400":v.ralphStatus==="pending"}),children:v.ralphStatus==="in_progress"?"working":v.ralphStatus}),v.ralphProgress!=null&&e.jsxs(e.Fragment,{children:[e.jsx(nt,{progress:v.ralphProgress,className:"flex-1 max-w-xs"}),e.jsxs("span",{className:"text-xs font-mono text-thea-gold-dark",children:[v.ralphProgress,"%"]})]}),v.ralphCurrentStep&&e.jsx("span",{className:"text-xs text-thea-gold-dark/70 font-mono truncate",title:v.ralphCurrentStep,children:v.ralphCurrentStep})]}),(v==null?void 0:v.waitingAtPrompt)&&e.jsxs("div",{className:"px-4 py-1.5 border-b border-yellow-500/20 bg-yellow-500/5 flex items-center gap-2",children:[e.jsx(Be,{className:"w-3.5 h-3.5 text-yellow-400 animate-pulse"}),e.jsx("span",{className:"text-xs font-mono text-yellow-400",children:"Waiting at permission prompt"}),!v.autoAccept&&e.jsx("span",{className:"text-xxs text-yellow-500/60 ml-auto",children:"auto-accept is off"})]}),e.jsxs("div",{className:"flex-1 p-4 min-h-0 flex gap-4 relative",children:[e.jsx("div",{className:x("flex-1 min-w-0",N&&"lg:max-w-[calc(100%-288px)]"),children:T==="summary"?e.jsx("div",{className:"h-full bg-black/30 border border-thea-gold-dark/20 rounded p-4 overflow-auto",children:e.jsx(Bt,{workerId:r,className:"h-full"})}):e.jsx(Lt,{workerId:r,output:t[r]||"",onRawInput:g=>d(r,g),onResize:(g,L)=>o(r,g,L),className:"h-full w-full"})}),N&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lg:hidden fixed inset-0 top-16 z-50 bg-black/95 overflow-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-orbitron text-thea-gold-bright uppercase tracking-wider",children:"Health Panel"}),e.jsx("button",{onClick:()=>$(!1),className:"p-2 text-thea-gold hover:text-thea-gold-bright","aria-label":"Close health panel",children:e.jsx(Qe,{className:"w-5 h-5"})})]}),e.jsx(gt,{workerId:r})]}),e.jsx("div",{className:"hidden lg:block w-72 shrink-0",children:e.jsx(gt,{workerId:r})})]})]}),e.jsx("div",{className:"p-4 border-t border-thea-gold-dark/20",children:e.jsx(Ut,{onSend:g=>c(r,g),placeholder:`Send to ${v.label}...`})}),H&&e.jsx(Ve,{isOpen:!!H,onClose:()=>B(null),onConfirm:({mission:g,backlog:L,standingOrders:K})=>{j(H.id,{bulldozeMode:!0,bulldozeMission:g,bulldozeBacklog:L,bulldozeStandingOrders:K}),B(null)},workerLabel:H.label})]}):e.jsxs("div",{className:"p-4",children:[q.length>0&&e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:De,className:x("flex items-center gap-2 px-3 py-1.5 text-sm font-rajdhani rounded transition-all border",ue?"bg-green-600/30 text-green-500 border-green-600/40 hover:bg-green-600/40":"text-thea-gold hover:text-thea-gold-bright bg-black/30 hover:bg-black/50 border-thea-gold-dark/30 hover:border-thea-gold/50"),title:ue?"Click to disable auto-accept on all workers":"Click to enable auto-accept on all workers",children:[ue?e.jsx(ne,{className:"w-4 h-4"}):e.jsx(tt,{className:"w-4 h-4"}),"Auto-Accept All"]}),e.jsxs("button",{onClick:Ie,className:x("flex items-center gap-2 px-3 py-1.5 text-sm font-rajdhani rounded transition-all border",ge?"bg-purple-600/30 text-purple-400 border-purple-600/40 hover:bg-purple-600/40":"text-thea-gold hover:text-thea-gold-bright bg-black/30 hover:bg-black/50 border-thea-gold-dark/30 hover:border-thea-gold/50"),title:ge?"Click to disable Ralph mode on all workers":"Click to enable Ralph mode on all workers",children:[e.jsx(ze,{className:"w-4 h-4"}),"Ralph All"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center bg-black/50 rounded border border-thea-gold-dark/30 p-0.5",role:"tablist","aria-label":"Worker view mode",children:[e.jsxs("button",{role:"tab","aria-selected":Q==="grid",onClick:()=>me("grid"),className:x("flex items-center gap-1.5 px-2 py-1.5 rounded text-sm font-rajdhani transition-all",Q==="grid"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Grid View",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Grid"})]}),e.jsxs("button",{role:"tab","aria-selected":Q==="tree",onClick:()=>me("tree"),className:x("flex items-center gap-1.5 px-2 py-1.5 rounded text-sm font-rajdhani transition-all",Q==="tree"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Tree View",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Tree"})]})]}),e.jsxs("button",{onClick:()=>{var g;pe(n&&((g=l.find(L=>L.name===n))==null?void 0:g.path)||""),ee(!0)},className:"flex items-center gap-2 px-3 py-1.5 text-sm font-rajdhani text-amber-300 hover:text-amber-200 bg-amber-500/10 hover:bg-amber-500/20 border border-amber-500/30 hover:border-amber-500/50 rounded transition-all",children:[e.jsx(La,{className:"w-4 h-4"}),"New Session"]}),e.jsxs("button",{onClick:()=>Ne(),className:"flex items-center gap-2 px-3 py-1.5 text-sm font-rajdhani text-thea-gold hover:text-thea-gold-bright bg-black/30 hover:bg-black/50 border border-thea-gold-dark/30 hover:border-thea-gold/50 rounded transition-all",children:[e.jsx(Ae,{className:"w-4 h-4"}),"Multi-Terminal View"]})]})]}),Q==="grid"&&q.length>0&&e.jsxs("div",{className:"mb-4 space-y-3",children:[e.jsx(ys,{value:D,onChange:Z,placeholder:"Search by label, project, or ID..."}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[Object.entries(_e).sort(([g],[L])=>g.localeCompare(L)).map(([g,L])=>{const K={running:"bg-green-400/10 border-green-400/30 text-green-400",stopped:"bg-gray-400/10 border-gray-400/30 text-gray-400",error:"bg-red-400/10 border-red-400/30 text-red-400",awaiting_review:"bg-yellow-400/10 border-yellow-400/30 text-yellow-400"};return e.jsxs("button",{onClick:()=>ae(_===g?null:g),className:x("flex items-center gap-1 text-xxs px-2 py-1 font-mono uppercase tracking-wider transition-all border",_===g?(K[g]||"bg-thea-gold/10 border-thea-gold-dark/30 text-thea-gold")+" shadow-sm":"text-thea-gold-dark border-thea-gold-dark/30 hover:border-thea-gold/50 hover:text-thea-gold"),children:[g," (",L,")"]},g)}),!n&&je.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-thea-gold-dark/30 text-xs",children:"|"}),je.map(g=>{const L=q.filter(K=>K.project===g).length;return e.jsxs("button",{onClick:()=>re(te===g?null:g),className:x("flex items-center gap-1 text-xxs px-2 py-1 font-mono tracking-wider transition-all border",te===g?"bg-blue-400/10 border-blue-400/30 text-blue-400 shadow-sm":"text-thea-gold-dark border-thea-gold-dark/30 hover:border-thea-gold/50 hover:text-thea-gold"),children:[g," (",L,")"]},g)})]}),(_||te)&&e.jsxs("button",{onClick:()=>{ae(null),re(null)},className:"text-xxs px-2 py-1 text-thea-maroon-light hover:text-thea-maroon-light/80 transition-colors flex items-center gap-1",children:[e.jsx(le,{className:"w-3 h-3"}),"Clear"]})]})]}),Q==="tree"?e.jsx(ks,{}):q.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx("div",{className:"w-16 h-16 mb-4 opacity-30",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",className:"text-thea-gold",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]})}),e.jsx("h3",{className:"font-orbitron text-lg text-thea-gold-dark mb-2",children:"No Workers Active"}),e.jsx("p",{className:"text-sm text-thea-gold-dark/50 text-center max-w-xs",children:n?`No workers running for ${n}. Start one from the project panel.`:"Select a project and start a worker to begin."})]}):we.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsxs("p",{className:"text-sm text-thea-gold-dark/50 font-mono",children:["No workers match",D&&` "${D}"`,_&&` [${_}]`,te&&` in ${te}`,!D&&!_&&!te&&" current filters"]}),e.jsx("button",{onClick:()=>{Z(""),ae(null),re(null)},className:"mt-2 text-xs text-thea-gold hover:text-thea-gold-bright transition-colors font-mono",children:"Clear all filters"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:we.map(g=>e.jsx(rs,{worker:g,onOpenInMultiTerminal:()=>Ne(g.id)},g.id))}),Y&&e.jsx(Ve,{isOpen:Y,onClose:()=>ee(!1),onConfirm:async({mission:g,backlog:L,standingOrders:K,backend:oe})=>{I&&await I(ce,g,L,K,oe),ee(!1)},workerLabel:"",showProjectPicker:!0,projects:l,selectedProject:ce,onProjectChange:pe})]})}const kt={success:{icon:Ge,bgClass:"bg-status-success/20 border-status-success",textClass:"text-status-success",glowClass:"shadow-[0_0_20px_rgba(78,201,176,0.4)]"},error:{icon:fe,bgClass:"bg-status-error/20 border-status-error",textClass:"text-status-error",glowClass:"shadow-[0_0_20px_rgba(244,135,113,0.4)]"},info:{icon:Ea,bgClass:"bg-thea-gold/20 border-thea-gold",textClass:"text-thea-gold",glowClass:"shadow-gold-sm"},loading:{icon:Te,bgClass:"bg-thea-gold/10 border-thea-gold-dark",textClass:"text-thea-gold-bright",glowClass:""}};function ws({toast:a,onDismiss:t}){const l=kt[a.type]||kt.info,n=l.icon;return s.useEffect(()=>{if(a.duration&&a.duration>0){const r=setTimeout(()=>t(a.id),a.duration);return()=>clearTimeout(r)}},[a.id,a.duration,t]),e.jsxs("div",{role:"alert",className:x("flex items-start gap-3 px-4 py-3 border backdrop-blur-md","animate-[slideIn_0.3s_ease-out]",l.bgClass,l.glowClass,"clip-cyber-sm"),children:[e.jsx(n,{className:x("w-5 h-5 flex-shrink-0 mt-0.5",l.textClass,a.type==="loading"&&"animate-spin")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:x("font-rajdhani font-semibold",l.textClass),children:a.title}),a.message&&e.jsx("p",{className:"text-sm text-white/70 font-mono mt-0.5 truncate",children:a.message})]}),e.jsx("button",{onClick:()=>t(a.id),className:x("p-1 hover:bg-white/10 transition-colors",l.textClass),"aria-label":"Dismiss notification",children:e.jsx(le,{className:"w-4 h-4"})})]})}function yt({toasts:a,onDismiss:t}){return e.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm","aria-live":"polite","aria-label":"Notifications",children:a.map(l=>e.jsx(ws,{toast:l,onDismiss:t},l.id))})}function vs(){const[a,t]=s.useState(!1),l=s.useRef(null);return s.useEffect(()=>{if(!a)return;function n(r){l.current&&!l.current.contains(r.target)&&t(!1)}return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[a]),s.useEffect(()=>{if(!a)return;function n(r){r.key==="Escape"&&(r.stopPropagation(),t(!1))}return document.addEventListener("keydown",n,!0),()=>document.removeEventListener("keydown",n,!0)},[a]),e.jsxs("div",{className:"relative",ref:l,children:[e.jsx("button",{"data-shortcut-help":!0,onClick:()=>t(n=>!n),className:x("thea-btn p-2",a&&"bg-thea-gold/20 border-thea-gold shadow-gold-sm"),title:"Keyboard shortcuts (?)","aria-label":"Keyboard shortcuts","aria-expanded":a,"aria-haspopup":"true",children:e.jsx(Ma,{className:"w-4 h-4"})}),a&&e.jsxs("div",{role:"dialog","aria-label":"Keyboard shortcuts",className:"absolute right-0 top-full mt-2 w-72 bg-black/95 border border-thea-gold-dark/50 backdrop-blur-md shadow-lg shadow-black/50 z-50",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-thea-gold-dark/30",children:[e.jsx("span",{className:"font-orbitron text-thea-gold-bright text-xs uppercase tracking-wider",children:"Keyboard Shortcuts"}),e.jsx("button",{onClick:()=>t(!1),className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors","aria-label":"Close keyboard shortcuts",children:e.jsx(le,{className:"w-3.5 h-3.5"})})]}),e.jsx("div",{className:"p-3 space-y-3 max-h-80 overflow-y-auto",children:xa.map(n=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-xxs font-mono text-thea-gold-dark uppercase tracking-wider mb-1.5",children:n.label}),e.jsx("div",{className:"space-y-1",children:n.shortcuts.map(r=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-thea-gold/80 font-rajdhani",children:r.description}),e.jsx("div",{className:"flex items-center gap-0.5",children:r.keys.map((c,d)=>e.jsxs("span",{children:[d>0&&e.jsx("span",{className:"text-thea-gold-dark/50 text-xxs mx-0.5",children:"+"}),e.jsx("kbd",{className:"inline-block px-1.5 py-0.5 text-xxs font-mono text-thea-gold bg-thea-gold/10 border border-thea-gold-dark/40 rounded min-w-[1.5rem] text-center",children:c})]},c))})]},r.description))})]},n.label))}),e.jsx("div",{className:"px-3 py-1.5 border-t border-thea-gold-dark/20 text-center",children:e.jsxs("span",{className:"text-xxs text-thea-gold-dark/50 font-mono",children:["Press ",e.jsx("kbd",{className:"px-1 py-0.5 bg-thea-gold/10 border border-thea-gold-dark/30 rounded text-thea-gold-dark",children:"?"})," to toggle"]})})]})]})}function Ns({performanceMode:a,onTogglePerformance:t,summariesEnabled:l,onToggleSummaries:n}){var $,W,V,R;const[r,c]=s.useState(!1),d=s.useRef(null),[o,u]=s.useState(null),[i,f]=s.useState(!1),[b,k]=s.useState(!1),[j,P]=s.useState(null),p=s.useCallback(async E=>{try{const M=await J("/api/sentinel/status",{signal:E});M.ok&&u(await M.json())}catch(M){if(M.name==="AbortError")return}},[]);s.useEffect(()=>{const E=new AbortController;return p(E.signal),()=>E.abort()},[p]),s.useEffect(()=>{if(!r||!(o!=null&&o.enabled))return;const E=new AbortController,M=setInterval(()=>p(E.signal),3e4);return()=>{E.abort(),clearInterval(M)}},[r,o==null?void 0:o.enabled,p]);const I=s.useCallback(async()=>{f(!0);try{const E=o!=null&&o.enabled?"/api/sentinel/stop":"/api/sentinel/start",y=await(await J(E,{method:"POST"})).json();y.diagnostics&&P(y.diagnostics),await p()}catch{}finally{f(!1)}},[o==null?void 0:o.enabled,p]),T=s.useCallback(async()=>{f(!0);try{const M=await(await J("/api/diagnostics?run=true")).json();P(M),await p()}catch{}finally{f(!1)}},[p]);s.useEffect(()=>{if(!r)return;const E=M=>{d.current&&!d.current.contains(M.target)&&c(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[r]);const C=o==null?void 0:o.enabled,F=C?(o==null?void 0:o.lastStatus)==="healthy"?"text-green-400":(o==null?void 0:o.lastStatus)==="degraded"?"text-yellow-400":(o==null?void 0:o.lastStatus)==="unhealthy"?"text-red-400":"text-thea-gold":"text-gray-500",h=C?(o==null?void 0:o.lastStatus)==="unhealthy"?Oa:$a:Pt,N=C&&(o==null?void 0:o.lastStatus)==="unhealthy";return e.jsxs("div",{className:"relative",ref:d,children:[e.jsxs("button",{onClick:()=>c(!r),className:x("thea-btn p-2 relative",r&&"bg-thea-gold/20 border-thea-gold shadow-gold-sm"),title:"Settings","aria-label":"Settings","aria-expanded":r,"aria-haspopup":"true",children:[e.jsx(Da,{className:"w-4 h-4"}),N&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 rounded-full bg-red-400 animate-pulse"})]}),r&&e.jsxs("div",{role:"menu","aria-label":"Settings menu",className:"absolute right-0 top-full mt-2 w-72 bg-black/95 border border-thea-gold-dark/50 rounded-lg shadow-2xl backdrop-blur-md z-50 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-2.5 border-b border-thea-gold-dark/30 bg-black/40",children:e.jsx("span",{className:"font-rajdhani font-bold text-sm uppercase tracking-wider text-thea-gold-bright",children:"Settings"})}),e.jsxs("div",{className:"py-1",children:[e.jsx(jt,{icon:e.jsx(ne,{className:x("w-4 h-4",a?"text-green-400":"text-thea-gold-dark")}),label:"Performance Mode",description:"Disable animations",enabled:a,onToggle:t}),e.jsx(jt,{icon:e.jsx(ze,{className:x("w-4 h-4",l?"text-thea-gold":"text-thea-gold-dark")}),label:"AI Summaries",description:"Ollama-powered",enabled:l,onToggle:n}),e.jsxs("div",{className:"border-t border-thea-gold-dark/20 mt-1 pt-1",children:[e.jsxs("button",{onClick:()=>k(!b),className:"w-full flex items-center gap-3 px-4 py-2 hover:bg-thea-gold/5 transition-colors","aria-expanded":b,"aria-label":"Sentinel diagnostics",children:[e.jsxs("div",{className:"relative",children:[i?e.jsx(Te,{className:"w-4 h-4 animate-spin text-thea-gold"}):e.jsx(h,{className:x("w-4 h-4",F)}),C&&!i&&e.jsx("span",{className:x("absolute -top-0.5 -right-0.5 w-1.5 h-1.5 rounded-full",(o==null?void 0:o.lastStatus)==="healthy"?"bg-green-400":(o==null?void 0:o.lastStatus)==="degraded"?"bg-yellow-400":(o==null?void 0:o.lastStatus)==="unhealthy"?"bg-red-400 animate-pulse":"bg-thea-gold")})]}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-xs font-mono text-thea-gold-bright",children:"Sentinel"}),e.jsx("div",{className:"text-xxs text-thea-gold-dark font-mono",children:C?`${(o==null?void 0:o.lastStatus)||"checking..."}`:"Disabled"})]}),e.jsx("button",{onClick:E=>{E.stopPropagation(),I()},disabled:i,role:"switch","aria-checked":!!C,"aria-label":"Toggle sentinel",className:x("px-2 py-0.5 rounded text-xxs font-mono transition-all",C?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-gray-800 text-gray-400 border border-gray-600"),children:i?"...":C?"ON":"OFF"}),b?e.jsx(qe,{className:"w-3 h-3 text-thea-gold-dark"}):e.jsx(Mt,{className:"w-3 h-3 text-thea-gold-dark"})]}),b&&e.jsxs("div",{className:"px-4 pb-2 space-y-2",children:[C&&o&&e.jsxs("div",{className:"text-xs font-mono space-y-1 pl-7",children:[e.jsx(Ze,{label:"Checks",value:o.checksRun}),e.jsx(Ze,{label:"Uptime",value:Ft(o.uptimeSeconds)}),o.lastCheck&&e.jsx(Ze,{label:"Last",value:Ss(o.lastCheck)})]}),j&&e.jsxs("div",{className:"pl-7 space-y-1",children:[e.jsx("span",{className:"text-xxxs text-thea-gold-dark uppercase tracking-wider font-mono",children:"Last Run"}),(($=j.issues)==null?void 0:$.length)>0&&j.issues.map(E=>e.jsx("p",{className:"text-red-400 text-xxs leading-tight font-mono",children:E},E)),((W=j.warnings)==null?void 0:W.length)>0&&j.warnings.map(E=>e.jsx("p",{className:"text-yellow-400 text-xxs leading-tight font-mono",children:E},E)),!((V=j.issues)!=null&&V.length)&&!((R=j.warnings)!=null&&R.length)&&e.jsx("p",{className:"text-green-400 text-xxs font-mono",children:"All checks passed"})]}),e.jsxs("div",{className:"flex gap-2 pl-7",children:[e.jsx("button",{onClick:T,disabled:i,className:"text-xxs font-rajdhani uppercase tracking-wider px-2.5 py-1 bg-thea-gold/10 text-thea-gold border border-thea-gold-dark/30 rounded hover:bg-thea-gold/20 transition-colors disabled:opacity-50",children:"Run Now"}),e.jsx("button",{onClick:I,disabled:i,className:x("text-xxs font-rajdhani uppercase tracking-wider px-2.5 py-1 rounded transition-colors disabled:opacity-50",C?"bg-red-500/10 text-red-400 border border-red-500/30 hover:bg-red-500/20":"bg-green-500/10 text-green-400 border border-green-500/30 hover:bg-green-500/20"),children:C?"Disable":"Enable"})]})]})]})]})]})]})}function jt({icon:a,label:t,description:l,enabled:n,onToggle:r}){return e.jsxs("button",{onClick:r,role:"switch","aria-checked":n,className:"w-full flex items-center gap-3 px-4 py-2 hover:bg-thea-gold/5 transition-colors",children:[a,e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-xs font-mono text-thea-gold-bright",children:t}),l&&e.jsx("div",{className:"text-xxs text-thea-gold-dark font-mono",children:l})]}),e.jsx("span",{className:x("px-2 py-0.5 rounded text-xxs font-mono transition-all",n?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-gray-800 text-gray-400 border border-gray-600"),children:n?"ON":"OFF"})]})}function Ze({label:a,value:t}){return e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-thea-gold-dark",children:a}),e.jsx("span",{className:"text-thea-gold",children:t})]})}function Ss(a){try{return new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return a}}function Cs(a){if(!a)return"";const t=a*1e3-Date.now();if(t<=0)return"now";const l=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4);return l>24?`${Math.floor(l/24)}d ${l%24}h`:l>0?`${l}h ${n}m`:`${n}m`}function Ms(a){return a>=90?{text:"text-red-400",bar:"bg-red-500",border:"border-red-500/40"}:a>=70?{text:"text-yellow-400",bar:"bg-yellow-500",border:"border-yellow-500/40"}:{text:"text-emerald-400",bar:"bg-emerald-500",border:"border-emerald-500/30"}}function wt({label:a,pct:t,reset:l}){const n=Ms(t),r=Cs(l);return e.jsxs("div",{className:x("flex items-center gap-1.5 px-2 py-1 border rounded-sm bg-black/40",n.border),title:`${a}: ${t}%${r?` — resets in ${r}`:""}`,"aria-label":`${a}: ${t}%, resets in ${r}`,children:[e.jsx("span",{className:"text-xxxs font-mono text-thea-gold-dark uppercase tracking-wider hidden md:inline",children:a}),e.jsx("div",{className:"w-12 h-1.5 bg-black/60 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,children:e.jsx("div",{className:x("h-full rounded-full transition-all duration-700",n.bar),style:{width:`${Math.min(t,100)}%`}})}),e.jsxs("span",{className:x("text-xxs font-mono font-bold tabular-nums",n.text),children:[t,"%"]}),r&&e.jsx("span",{className:"text-xxxs font-mono text-thea-gold-dark/60 tabular-nums hidden sm:inline",children:r})]})}function Es(){const[a,t]=s.useState(null),[l,n]=s.useState(null),[,r]=s.useState(0),c=s.useRef(!1),d=s.useCallback(async i=>{var f,b,k,j;try{const P=await J("/api/usage",{signal:i});if(P.ok){const p=await P.json();(((f=p.session)==null?void 0:f.utilization)>0||((b=p.weekly)==null?void 0:b.utilization)>0||!c.current)&&(t(p),(((k=p.session)==null?void 0:k.utilization)>0||((j=p.weekly)==null?void 0:j.utilization)>0)&&(c.current=!0)),n(null)}else P.status===404||P.status===401?n("unavailable"):c.current||n("failed")}catch(P){if(P.name==="AbortError")return;c.current||n(P.message)}},[]);if(s.useEffect(()=>{const i=new AbortController;d(i.signal);const f=setInterval(()=>d(i.signal),6e4);return()=>{i.abort(),clearInterval(f)}},[d]),s.useEffect(()=>{if(!a)return;const i=setInterval(()=>r(f=>f+1),6e4);return()=>clearInterval(i)},[a]),l==="unavailable"||!a)return null;const o=Math.round(a.session.utilization*100),u=Math.round(a.weekly.utilization*100);return e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(wt,{label:"5h",pct:o,reset:a.session.reset}),e.jsx(wt,{label:"7d",pct:u,reset:a.weekly.reset})]})}class ye extends vt.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,l){console.error("[ErrorBoundary] Caught rendering error:",t,l)}render(){var t;return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-thea-bg flex items-center justify-center p-8",children:e.jsxs("div",{className:"max-w-lg w-full bg-gray-900 border border-red-500/30 rounded-lg p-6",children:[e.jsx("h2",{className:"text-red-400 text-lg font-bold mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"The UI encountered an error. Your workers are still running — this only affects the dashboard."}),e.jsx("pre",{className:"text-xs text-red-300/70 bg-black/50 rounded p-3 overflow-auto max-h-40 mb-4",children:((t=this.state.error)==null?void 0:t.message)||"Unknown error"}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"px-4 py-2 bg-thea-gold text-black rounded font-medium text-sm hover:bg-thea-gold-bright transition-colors",children:"Try Again"})]})}):this.props.children}}const zs=s.lazy(()=>xe(()=>import("./ProjectsView-B_8bOpAS.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(a=>({default:a.ProjectsView}))),As=s.lazy(()=>xe(()=>import("./VoiceModeView-DSJA0q-e.js"),__vite__mapDeps([7,1,5,6])).then(a=>({default:a.VoiceModeView}))),Ts=s.lazy(()=>xe(()=>import("./CheckpointsView-BHVg8Yw9.js"),__vite__mapDeps([8,1,9,5,6])).then(a=>({default:a.CheckpointsView}))),Rs=s.lazy(()=>xe(()=>import("./RalphPanel-Dwn7C5KC.js"),__vite__mapDeps([10,1,9,5,6])).then(a=>({default:a.RalphPanel}))),Ps=s.lazy(()=>xe(()=>import("./VoiceControl-7ihJotUZ.js"),__vite__mapDeps([11,1,5,6])).then(a=>({default:a.VoiceControl}))),Ls=s.lazy(()=>xe(()=>import("./ActivityFeed-D57yR7OS.js"),__vite__mapDeps([12,3,1,5,6])).then(a=>({default:a.ActivityFeed}))),_s=s.lazy(()=>xe(()=>import("./ADRPanel-CbyO4n_v.js"),__vite__mapDeps([13,1,4,5,6])).then(a=>({default:a.ADRPanel}))),Is=s.lazy(()=>xe(()=>import("./MetricsDashboard-FiDI4-DB.js"),__vite__mapDeps([14,1,2,5,6])).then(a=>({default:a.MetricsDashboard})));function Ds(){const{connected:a,workers:t,toasts:l,dismissToast:n,detachFromWorker:r,focusedWorker:c}=ke();ua();const[d,o]=s.useState(!1),[u,i]=s.useState("workers"),[f,b]=s.useState(!1),[k,j]=s.useState("activity"),[P,p]=s.useState(!1),[I,T]=s.useState(()=>{if(typeof window<"u"){const h=localStorage.getItem("strategos-performance-mode");return h===null?!0:h==="true"}return!0}),C=s.useMemo(()=>t.filter(h=>h.status==="running").length,[t]);ha({setActiveTab:i,detachFromWorker:r,setShowActivity:o,hasFocusedWorker:!!c,showActivity:d}),s.useEffect(()=>{I?document.body.classList.add("performance-mode"):document.body.classList.remove("performance-mode"),localStorage.setItem("strategos-performance-mode",I.toString())},[I]),s.useEffect(()=>{const h=new AbortController;return J("/api/settings/summaries",{signal:h.signal}).then(N=>N.json()).then(N=>p(N.enabled)).catch(N=>{N.name}),()=>h.abort()},[]);const F=async()=>{const h=!P;p(h);try{const $=await(await J("/api/settings/summaries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:h})})).json();p($.enabled)}catch{p(!h)}};return f?e.jsxs("div",{className:"min-h-screen bg-thea-black relative z-10",children:[e.jsx(s.Suspense,{fallback:e.jsx(Me,{}),children:e.jsx(As,{onExit:()=>b(!1)})}),e.jsx(yt,{toasts:l,onDismiss:n})]}):e.jsxs("div",{className:"min-h-screen bg-thea-black flex flex-col relative z-10 pb-mobile-nav sm:pb-0 overflow-x-hidden",children:[e.jsx("header",{role:"banner","aria-label":"Strategos application header",className:"bg-gradient-to-r from-black/80 via-thea-nearBlack/90 to-black/80 border-b border-thea-gold-dark/50 backdrop-blur-md sticky top-0 z-50",children:e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("button",{onClick:()=>{r(),i("workers"),o(!1)},className:"flex items-center gap-4 group cursor-pointer","aria-label":"Strategos home",children:[e.jsxs("div",{className:"relative",children:[e.jsx("h1",{className:"font-orbitron font-bold text-2xl text-thea-gold-bright tracking-widest text-glow-gold group-hover:text-white transition-colors",children:"STRATEGOS"}),e.jsx("div",{className:"absolute -bottom-1 left-0 w-full h-px bg-gradient-to-r from-transparent via-thea-gold to-transparent group-hover:via-white transition-colors"})]}),e.jsx("span",{className:"text-xxs text-thea-gold-dark font-mono hidden sm:block uppercase tracking-[0.2em]",children:"// Thea Orchestrator"})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-5",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 text-sm","aria-live":"polite","aria-label":`${t.length} workers, ${C} active`,children:[e.jsx("span",{className:"hidden sm:inline text-thea-gold-dark font-mono text-xs uppercase tracking-wider",children:"Workers:"}),e.jsx("span",{className:"font-mono text-thea-gold-bright font-bold text-lg",children:t.length}),C<t.length&&e.jsxs("span",{className:"text-xxs text-thea-gold-dark font-mono",children:["(",C," active)"]})]}),e.jsx("div",{"data-testid":"connection-status",role:"status","aria-live":"polite","aria-label":a?"Connected to server":"Disconnected from server",className:x("thea-badge flex items-center gap-1 sm:gap-2 px-2 sm:px-3",a?"thea-badge-running":"thea-badge-stopped"),children:a?e.jsxs(e.Fragment,{children:[e.jsx(qa,{className:"w-3.5 h-3.5"}),e.jsx("span",{"data-testid":"status-text",className:"hidden sm:inline",children:"Connected"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ga,{className:"w-3.5 h-3.5"}),e.jsx("span",{"data-testid":"status-text",className:"hidden sm:inline",children:"Disconnected"})]})}),e.jsx(Es,{}),e.jsx(Ns,{performanceMode:I,onTogglePerformance:()=>T(!I),summariesEnabled:P,onToggleSummaries:F}),e.jsx("div",{className:"hidden sm:block",children:e.jsx(vs,{})}),e.jsx("button",{onClick:()=>b(!0),className:"hidden sm:block thea-btn p-2 group",title:"Enter Voice Mode","aria-label":"Enter voice mode",children:e.jsx(Tt,{className:"w-4 h-4 group-hover:text-thea-gold-bright"})}),e.jsx("button",{"data-testid":"activity-toggle",onClick:()=>o(!d),className:x("hidden sm:block thea-btn p-2",d&&"bg-thea-gold/20 border-thea-gold shadow-gold-sm"),"aria-label":"Toggle activity sidebar","aria-expanded":d,children:e.jsx(ie,{className:"w-4 h-4"})})]})]})})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("main",{role:"main",className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-b from-black/50 to-transparent border-b border-thea-gold-dark/30 px-4",children:e.jsxs("div",{className:"flex gap-2",role:"tablist","aria-label":"Main navigation",children:[e.jsxs("button",{"data-testid":"tab-workers",role:"tab","aria-selected":u==="workers","aria-controls":"tabpanel-workers",onClick:()=>i("workers"),className:x("flex items-center gap-2 px-5 py-3 text-sm font-rajdhani font-bold uppercase tracking-wider border-b-2 transition-all duration-300",u==="workers"?"border-thea-gold text-thea-gold-bright text-glow-gold-sm":"border-transparent text-thea-gold-dark hover:text-thea-gold hover:border-thea-gold/30"),children:[e.jsx(Ae,{className:"w-4 h-4","aria-hidden":"true"}),"Workers"]}),e.jsxs("button",{"data-testid":"tab-projects",role:"tab","aria-selected":u==="projects","aria-controls":"tabpanel-projects",onClick:()=>i("projects"),className:x("flex items-center gap-2 px-5 py-3 text-sm font-rajdhani font-bold uppercase tracking-wider border-b-2 transition-all duration-300",u==="projects"?"border-thea-gold text-thea-gold-bright text-glow-gold-sm":"border-transparent text-thea-gold-dark hover:text-thea-gold hover:border-thea-gold/30"),children:[e.jsx(xt,{className:"w-4 h-4","aria-hidden":"true"}),"Projects"]}),e.jsxs("button",{"data-testid":"tab-ralph",role:"tab","aria-selected":u==="ralph","aria-controls":"tabpanel-ralph",onClick:()=>i("ralph"),className:x("flex items-center gap-2 px-5 py-3 text-sm font-rajdhani font-bold uppercase tracking-wider border-b-2 transition-all duration-300",u==="ralph"?"border-thea-gold text-thea-gold-bright text-glow-gold-sm":"border-transparent text-thea-gold-dark hover:text-thea-gold hover:border-thea-gold/30"),children:[e.jsx(ze,{className:"w-4 h-4","aria-hidden":"true"}),"Ralph"]}),e.jsxs("button",{"data-testid":"tab-history",role:"tab","aria-selected":u==="history","aria-controls":"tabpanel-history",onClick:()=>i("history"),className:x("flex items-center gap-2 px-5 py-3 text-sm font-rajdhani font-bold uppercase tracking-wider border-b-2 transition-all duration-300",u==="history"?"border-thea-gold text-thea-gold-bright text-glow-gold-sm":"border-transparent text-thea-gold-dark hover:text-thea-gold hover:border-thea-gold/30"),children:[e.jsx(ht,{className:"w-4 h-4","aria-hidden":"true"}),"History"]})]})}),e.jsxs("div",{className:"flex-1 overflow-auto",role:"tabpanel",id:`tabpanel-${u}`,"aria-label":`${u} panel`,children:[u==="workers"&&e.jsx(ye,{children:e.jsx(js,{})}),u==="projects"&&e.jsx(ye,{children:e.jsx(s.Suspense,{fallback:e.jsx(Me,{}),children:e.jsx(zs,{})})}),u==="ralph"&&e.jsx(ye,{children:e.jsx(s.Suspense,{fallback:e.jsx(Me,{}),children:e.jsx(Rs,{className:"h-full"})})}),u==="history"&&e.jsx(ye,{children:e.jsx(s.Suspense,{fallback:e.jsx(Me,{}),children:e.jsx(Ts,{})})})]})]}),e.jsx("aside",{role:"complementary","aria-label":"Activity sidebar","aria-hidden":!d,className:x("bg-gradient-to-l from-black/95 to-thea-nearBlack/95 lg:from-black/60 lg:to-thea-nearBlack/40 border-l border-thea-gold-dark/30 transition-all duration-300 overflow-hidden backdrop-blur-sm flex flex-col",d?"fixed lg:relative inset-0 lg:inset-auto top-16 lg:top-0 z-40 lg:z-auto w-full lg:w-72":"w-0"),children:d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lg:hidden flex items-center justify-between px-4 py-3 bg-black/80 border-b border-thea-gold-dark/30",children:[e.jsx("span",{className:"font-orbitron text-thea-gold-bright text-sm uppercase tracking-wider",children:"Activity"}),e.jsx("button",{onClick:()=>o(!1),className:"p-2 text-thea-gold hover:text-thea-gold-bright hover:bg-thea-gold/10 rounded transition-colors","aria-label":"Close activity sidebar",children:e.jsx(le,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex border-b border-thea-gold-dark/30 bg-black/40 shrink-0",role:"tablist","aria-label":"Sidebar sections",children:[e.jsxs("button",{role:"tab","aria-selected":k==="activity",onClick:()=>j("activity"),className:x("flex-1 flex items-center justify-center gap-1.5 px-2 py-2.5 text-xxs font-rajdhani uppercase tracking-wider transition-all border-b-2",k==="activity"?"border-thea-gold text-thea-gold-bright bg-thea-gold/10":"border-transparent text-thea-gold-dark hover:text-thea-gold"),title:"Activity Feed",children:[e.jsx(ie,{className:"w-3.5 h-3.5","aria-hidden":"true"}),e.jsx("span",{className:"hidden sm:inline",children:"Activity"})]}),e.jsxs("button",{role:"tab","aria-selected":k==="adrs",onClick:()=>j("adrs"),className:x("flex-1 flex items-center justify-center gap-1.5 px-2 py-2.5 text-xxs font-rajdhani uppercase tracking-wider transition-all border-b-2",k==="adrs"?"border-thea-gold text-thea-gold-bright bg-thea-gold/10":"border-transparent text-thea-gold-dark hover:text-thea-gold"),title:"Architecture Decisions",children:[e.jsx(wa,{className:"w-3.5 h-3.5","aria-hidden":"true"}),e.jsx("span",{className:"hidden sm:inline",children:"ADRs"})]}),e.jsxs("button",{role:"tab","aria-selected":k==="metrics",onClick:()=>j("metrics"),className:x("flex-1 flex items-center justify-center gap-1.5 px-2 py-2.5 text-xxs font-rajdhani uppercase tracking-wider transition-all border-b-2",k==="metrics"?"border-thea-gold text-thea-gold-bright bg-thea-gold/10":"border-transparent text-thea-gold-dark hover:text-thea-gold"),title:"System Metrics",children:[e.jsx(ba,{className:"w-3.5 h-3.5","aria-hidden":"true"}),e.jsx("span",{className:"hidden sm:inline",children:"Metrics"})]})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx(ye,{children:e.jsxs(s.Suspense,{fallback:e.jsx(Me,{}),children:[k==="activity"&&e.jsx(Ls,{}),k==="adrs"&&e.jsx(_s,{limit:10}),k==="metrics"&&e.jsx(Is,{})]})})})]})})]}),e.jsx("div",{className:"hidden xl:flex fixed bottom-4 right-4 z-40 flex-col items-end",style:{width:"auto",maxWidth:"20rem"},children:e.jsx(s.Suspense,{fallback:null,children:e.jsx(Ps,{})})}),e.jsx("nav",{role:"navigation","aria-label":"Mobile navigation",className:"sm:hidden fixed bottom-0 left-0 right-0 bg-black/90 border-t border-thea-gold-dark/30 backdrop-blur-sm z-50",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:e.jsxs("div",{className:"flex justify-around py-2",children:[e.jsxs("button",{onClick:()=>{r(),i("workers"),o(!1)},className:x("flex flex-col items-center gap-1 px-4 py-2",u==="workers"?"text-thea-gold":"text-thea-gold-dark"),children:[e.jsx(Ae,{className:"w-5 h-5","aria-hidden":"true"}),e.jsx("span",{className:"text-xxs font-rajdhani",children:"Home"})]}),e.jsxs("button",{onClick:()=>i("projects"),className:x("flex flex-col items-center gap-1 px-4 py-2",u==="projects"?"text-thea-gold":"text-thea-gold-dark"),children:[e.jsx(xt,{className:"w-5 h-5","aria-hidden":"true"}),e.jsx("span",{className:"text-xxs font-rajdhani",children:"Projects"})]}),e.jsxs("button",{onClick:()=>i("history"),className:x("flex flex-col items-center gap-1 px-4 py-2",u==="history"?"text-thea-gold":"text-thea-gold-dark"),children:[e.jsx(ht,{className:"w-5 h-5","aria-hidden":"true"}),e.jsx("span",{className:"text-xxs font-rajdhani",children:"History"})]}),e.jsxs("button",{onClick:()=>o(!d),className:x("flex flex-col items-center gap-1 px-4 py-2",d?"text-thea-gold":"text-thea-gold-dark"),children:[e.jsx(ie,{className:"w-5 h-5","aria-hidden":"true"}),e.jsx("span",{className:"text-xxs font-rajdhani",children:"Activity"})]})]})}),e.jsx(yt,{toasts:l,onDismiss:n})]})}function Me(){return e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"text-thea-gold-dark text-sm font-mono animate-pulse",children:"Loading..."})})}window.addEventListener("unhandledrejection",a=>{console.error("[Strategos] Unhandled promise rejection:",a.reason)});window.addEventListener("error",a=>{var t;console.error("[Strategos] Uncaught error:",((t=a.error)==null?void 0:t.message)||a.message)});Ye.createRoot(document.getElementById("root")).render(e.jsx(vt.StrictMode,{children:e.jsx(ye,{children:e.jsx(da,{children:e.jsx(Ds,{})})})}));export{Qe as A,ze as B,qe as C,nt as D,ps as E,va as F,wa as G,Dt as H,Ma as I,ka as J,et as K,Ae as L,at as M,fe as N,Ya as O,Pa as P,Ft as Q,Fs as R,Fa as S,Ba as T,Va as U,mt as V,ba as W,le as X,Ua as Y,ne as Z,x as a,Mt as b,A as c,fa as d,Te as e,J as f,Ee as g,ht as h,ie as i,e as j,Be as k,Bs as l,Wt as m,$t as n,es as o,he as p,ns as q,ys as r,ls as s,Ha as t,ke as u,At as v,Aa as w,Tt as x,rt as y,ts as z};
