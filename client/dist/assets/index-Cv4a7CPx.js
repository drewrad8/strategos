(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const g of a)if(g.type==="childList")for(const x of g.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&s(x)}).observe(document,{childList:!0,subtree:!0});function r(a){const g={};return a.integrity&&(g.integrity=a.integrity),a.referrerPolicy&&(g.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?g.credentials="include":a.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function s(a){if(a.ep)return;a.ep=!0;const g=r(a);fetch(a.href,g)}})();function jf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ah={exports:{}},Nn={},Mh={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ui=Symbol.for("react.element"),Nf=Symbol.for("react.portal"),Af=Symbol.for("react.fragment"),Mf=Symbol.for("react.strict_mode"),Tf=Symbol.for("react.profiler"),Df=Symbol.for("react.provider"),Pf=Symbol.for("react.context"),Bf=Symbol.for("react.forward_ref"),Of=Symbol.for("react.suspense"),If=Symbol.for("react.memo"),Ff=Symbol.for("react.lazy"),Jl=Symbol.iterator;function Hf(e){return e===null||typeof e!="object"?null:(e=Jl&&e[Jl]||e["@@iterator"],typeof e=="function"?e:null)}var Th={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dh=Object.assign,Ph={};function xs(e,t,r){this.props=e,this.context=t,this.refs=Ph,this.updater=r||Th}xs.prototype.isReactComponent={};xs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Bh(){}Bh.prototype=xs.prototype;function Va(e,t,r){this.props=e,this.context=t,this.refs=Ph,this.updater=r||Th}var qa=Va.prototype=new Bh;qa.constructor=Va;Dh(qa,xs.prototype);qa.isPureReactComponent=!0;var Zl=Array.isArray,Oh=Object.prototype.hasOwnProperty,Ka={current:null},Ih={key:!0,ref:!0,__self:!0,__source:!0};function Fh(e,t,r){var s,a={},g=null,x=null;if(t!=null)for(s in t.ref!==void 0&&(x=t.ref),t.key!==void 0&&(g=""+t.key),t)Oh.call(t,s)&&!Ih.hasOwnProperty(s)&&(a[s]=t[s]);var i=arguments.length-2;if(i===1)a.children=r;else if(1<i){for(var c=Array(i),f=0;f<i;f++)c[f]=arguments[f+2];a.children=c}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)a[s]===void 0&&(a[s]=i[s]);return{$$typeof:ui,type:e,key:g,ref:x,props:a,_owner:Ka.current}}function zf(e,t){return{$$typeof:ui,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ga(e){return typeof e=="object"&&e!==null&&e.$$typeof===ui}function $f(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ec=/\/+/g;function no(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$f(""+e.key):t.toString(36)}function Hi(e,t,r,s,a){var g=typeof e;(g==="undefined"||g==="boolean")&&(e=null);var x=!1;if(e===null)x=!0;else switch(g){case"string":case"number":x=!0;break;case"object":switch(e.$$typeof){case ui:case Nf:x=!0}}if(x)return x=e,a=a(x),e=s===""?"."+no(x,0):s,Zl(a)?(r="",e!=null&&(r=e.replace(ec,"$&/")+"/"),Hi(a,t,r,"",function(f){return f})):a!=null&&(Ga(a)&&(a=zf(a,r+(!a.key||x&&x.key===a.key?"":(""+a.key).replace(ec,"$&/")+"/")+e)),t.push(a)),1;if(x=0,s=s===""?".":s+":",Zl(e))for(var i=0;i<e.length;i++){g=e[i];var c=s+no(g,i);x+=Hi(g,t,r,c,a)}else if(c=Hf(e),typeof c=="function")for(e=c.call(e),i=0;!(g=e.next()).done;)g=g.value,c=s+no(g,i++),x+=Hi(g,t,r,c,a);else if(g==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return x}function xi(e,t,r){if(e==null)return e;var s=[],a=0;return Hi(e,s,"","",function(g){return t.call(r,g,a++)}),s}function Wf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ot={current:null},zi={transition:null},Uf={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:zi,ReactCurrentOwner:Ka};function Hh(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:xi,forEach:function(e,t,r){xi(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return xi(e,function(){t++}),t},toArray:function(e){return xi(e,function(t){return t})||[]},only:function(e){if(!Ga(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_e.Component=xs;_e.Fragment=Af;_e.Profiler=Tf;_e.PureComponent=Va;_e.StrictMode=Mf;_e.Suspense=Of;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uf;_e.act=Hh;_e.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Dh({},e.props),a=e.key,g=e.ref,x=e._owner;if(t!=null){if(t.ref!==void 0&&(g=t.ref,x=Ka.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Oh.call(t,c)&&!Ih.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){i=Array(c);for(var f=0;f<c;f++)i[f]=arguments[f+2];s.children=i}return{$$typeof:ui,type:e.type,key:a,ref:g,props:s,_owner:x}};_e.createContext=function(e){return e={$$typeof:Pf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Df,_context:e},e.Consumer=e};_e.createElement=Fh;_e.createFactory=function(e){var t=Fh.bind(null,e);return t.type=e,t};_e.createRef=function(){return{current:null}};_e.forwardRef=function(e){return{$$typeof:Bf,render:e}};_e.isValidElement=Ga;_e.lazy=function(e){return{$$typeof:Ff,_payload:{_status:-1,_result:e},_init:Wf}};_e.memo=function(e,t){return{$$typeof:If,type:e,compare:t===void 0?null:t}};_e.startTransition=function(e){var t=zi.transition;zi.transition={};try{e()}finally{zi.transition=t}};_e.unstable_act=Hh;_e.useCallback=function(e,t){return ot.current.useCallback(e,t)};_e.useContext=function(e){return ot.current.useContext(e)};_e.useDebugValue=function(){};_e.useDeferredValue=function(e){return ot.current.useDeferredValue(e)};_e.useEffect=function(e,t){return ot.current.useEffect(e,t)};_e.useId=function(){return ot.current.useId()};_e.useImperativeHandle=function(e,t,r){return ot.current.useImperativeHandle(e,t,r)};_e.useInsertionEffect=function(e,t){return ot.current.useInsertionEffect(e,t)};_e.useLayoutEffect=function(e,t){return ot.current.useLayoutEffect(e,t)};_e.useMemo=function(e,t){return ot.current.useMemo(e,t)};_e.useReducer=function(e,t,r){return ot.current.useReducer(e,t,r)};_e.useRef=function(e){return ot.current.useRef(e)};_e.useState=function(e){return ot.current.useState(e)};_e.useSyncExternalStore=function(e,t,r){return ot.current.useSyncExternalStore(e,t,r)};_e.useTransition=function(){return ot.current.useTransition()};_e.version="18.3.1";Mh.exports=_e;var B=Mh.exports;const zh=jf(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vf=B,qf=Symbol.for("react.element"),Kf=Symbol.for("react.fragment"),Gf=Object.prototype.hasOwnProperty,Xf=Vf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yf={key:!0,ref:!0,__self:!0,__source:!0};function $h(e,t,r){var s,a={},g=null,x=null;r!==void 0&&(g=""+r),t.key!==void 0&&(g=""+t.key),t.ref!==void 0&&(x=t.ref);for(s in t)Gf.call(t,s)&&!Yf.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:qf,type:e,key:g,ref:x,props:a,_owner:Xf.current}}Nn.Fragment=Kf;Nn.jsx=$h;Nn.jsxs=$h;Ah.exports=Nn;var o=Ah.exports,Ho={},Wh={exports:{}},vt={},Uh={exports:{}},Vh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,D){var P=N.length;N.push(D);e:for(;0<P;){var I=P-1>>>1,W=N[I];if(0<a(W,D))N[I]=D,N[P]=W,P=I;else break e}}function r(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var D=N[0],P=N.pop();if(P!==D){N[0]=P;e:for(var I=0,W=N.length,V=W>>>1;I<V;){var Z=2*(I+1)-1,te=N[Z],K=Z+1,M=N[K];if(0>a(te,P))K<W&&0>a(M,te)?(N[I]=M,N[K]=P,I=K):(N[I]=te,N[Z]=P,I=Z);else if(K<W&&0>a(M,P))N[I]=M,N[K]=P,I=K;else break e}}return D}function a(N,D){var P=N.sortIndex-D.sortIndex;return P!==0?P:N.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var x=Date,i=x.now();e.unstable_now=function(){return x.now()-i}}var c=[],f=[],_=1,u=null,m=3,S=!1,w=!1,p=!1,n=typeof setTimeout=="function"?setTimeout:null,l=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function d(N){for(var D=r(f);D!==null;){if(D.callback===null)s(f);else if(D.startTime<=N)s(f),D.sortIndex=D.expirationTime,t(c,D);else break;D=r(f)}}function v(N){if(p=!1,d(N),!w)if(r(c)!==null)w=!0,$(y);else{var D=r(f);D!==null&&F(v,D.startTime-N)}}function y(N,D){w=!1,p&&(p=!1,l(b),b=-1),S=!0;var P=m;try{for(d(D),u=r(c);u!==null&&(!(u.expirationTime>D)||N&&!A());){var I=u.callback;if(typeof I=="function"){u.callback=null,m=u.priorityLevel;var W=I(u.expirationTime<=D);D=e.unstable_now(),typeof W=="function"?u.callback=W:u===r(c)&&s(c),d(D)}else s(c);u=r(c)}if(u!==null)var V=!0;else{var Z=r(f);Z!==null&&F(v,Z.startTime-D),V=!1}return V}finally{u=null,m=P,S=!1}}var C=!1,L=null,b=-1,k=5,E=-1;function A(){return!(e.unstable_now()-E<k)}function R(){if(L!==null){var N=e.unstable_now();E=N;var D=!0;try{D=L(!0,N)}finally{D?T():(C=!1,L=null)}}else C=!1}var T;if(typeof h=="function")T=function(){h(R)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,H=O.port2;O.port1.onmessage=R,T=function(){H.postMessage(null)}}else T=function(){n(R,0)};function $(N){L=N,C||(C=!0,T())}function F(N,D){b=n(function(){N(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){w||S||(w=!0,$(y))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(N){switch(m){case 1:case 2:case 3:var D=3;break;default:D=m}var P=m;m=D;try{return N()}finally{m=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,D){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var P=m;m=N;try{return D()}finally{m=P}},e.unstable_scheduleCallback=function(N,D,P){var I=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?I+P:I):P=I,N){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=P+W,N={id:_++,callback:D,priorityLevel:N,startTime:P,expirationTime:W,sortIndex:-1},P>I?(N.sortIndex=P,t(f,N),r(c)===null&&N===r(f)&&(p?(l(b),b=-1):p=!0,F(v,P-I))):(N.sortIndex=W,t(c,N),w||S||(w=!0,$(y))),N},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(N){var D=m;return function(){var P=m;m=D;try{return N.apply(this,arguments)}finally{m=P}}}})(Vh);Uh.exports=Vh;var Qf=Uh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf=B,_t=Qf;function ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qh=new Set,Ks={};function Ur(e,t){us(e,t),us(e+"Capture",t)}function us(e,t){for(Ks[e]=t,e=0;e<t.length;e++)qh.add(t[e])}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zo=Object.prototype.hasOwnProperty,Zf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tc={},rc={};function ep(e){return zo.call(rc,e)?!0:zo.call(tc,e)?!1:Zf.test(e)?rc[e]=!0:(tc[e]=!0,!1)}function tp(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function rp(e,t,r,s){if(t===null||typeof t>"u"||tp(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function at(e,t,r,s,a,g,x){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=g,this.removeEmptyString=x}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ye[e]=new at(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ye[t]=new at(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ye[e]=new at(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ye[e]=new at(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ye[e]=new at(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ye[e]=new at(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ye[e]=new at(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ye[e]=new at(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ye[e]=new at(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xa=/[\-:]([a-z])/g;function Ya(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xa,Ya);Ye[t]=new at(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xa,Ya);Ye[t]=new at(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xa,Ya);Ye[t]=new at(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ye[e]=new at(e,1,!1,e.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new at("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ye[e]=new at(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qa(e,t,r,s){var a=Ye.hasOwnProperty(t)?Ye[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(rp(t,r,a,s)&&(r=null),s||a===null?ep(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var nr=Jf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yi=Symbol.for("react.element"),Gr=Symbol.for("react.portal"),Xr=Symbol.for("react.fragment"),Ja=Symbol.for("react.strict_mode"),$o=Symbol.for("react.profiler"),Kh=Symbol.for("react.provider"),Gh=Symbol.for("react.context"),Za=Symbol.for("react.forward_ref"),Wo=Symbol.for("react.suspense"),Uo=Symbol.for("react.suspense_list"),el=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),Xh=Symbol.for("react.offscreen"),sc=Symbol.iterator;function Ss(e){return e===null||typeof e!="object"?null:(e=sc&&e[sc]||e["@@iterator"],typeof e=="function"?e:null)}var Pe=Object.assign,oo;function Ms(e){if(oo===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);oo=t&&t[1]||""}return`
`+oo+e}var ao=!1;function lo(e,t){if(!e||ao)return"";ao=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var s=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){s=f}e.call(t.prototype)}else{try{throw Error()}catch(f){s=f}e()}}catch(f){if(f&&s&&typeof f.stack=="string"){for(var a=f.stack.split(`
`),g=s.stack.split(`
`),x=a.length-1,i=g.length-1;1<=x&&0<=i&&a[x]!==g[i];)i--;for(;1<=x&&0<=i;x--,i--)if(a[x]!==g[i]){if(x!==1||i!==1)do if(x--,i--,0>i||a[x]!==g[i]){var c=`
`+a[x].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=x&&0<=i);break}}}finally{ao=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ms(e):""}function sp(e){switch(e.tag){case 5:return Ms(e.type);case 16:return Ms("Lazy");case 13:return Ms("Suspense");case 19:return Ms("SuspenseList");case 0:case 2:case 15:return e=lo(e.type,!1),e;case 11:return e=lo(e.type.render,!1),e;case 1:return e=lo(e.type,!0),e;default:return""}}function Vo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xr:return"Fragment";case Gr:return"Portal";case $o:return"Profiler";case Ja:return"StrictMode";case Wo:return"Suspense";case Uo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Gh:return(e.displayName||"Context")+".Consumer";case Kh:return(e._context.displayName||"Context")+".Provider";case Za:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case el:return t=e.displayName||null,t!==null?t:Vo(e.type)||"Memo";case ar:t=e._payload,e=e._init;try{return Vo(e(t))}catch{}}return null}function ip(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vo(t);case 8:return t===Ja?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function wr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function np(e){var t=Yh(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,g=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(x){s=""+x,g.call(this,x)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(x){s=""+x},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bi(e){e._valueTracker||(e._valueTracker=np(e))}function Qh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Yh(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function rn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function qo(e,t){var r=t.checked;return Pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ic(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=wr(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Jh(e,t){t=t.checked,t!=null&&Qa(e,"checked",t,!1)}function Ko(e,t){Jh(e,t);var r=wr(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Go(e,t.type,r):t.hasOwnProperty("defaultValue")&&Go(e,t.type,wr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function nc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Go(e,t,r){(t!=="number"||rn(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ts=Array.isArray;function os(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+wr(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Xo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ee(91));return Pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ee(92));if(Ts(r)){if(1<r.length)throw Error(ee(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:wr(r)}}function Zh(e,t){var r=wr(t.value),s=wr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function ac(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ed(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ed(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wi,td=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(wi=wi||document.createElement("div"),wi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Os={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},op=["Webkit","ms","Moz","O"];Object.keys(Os).forEach(function(e){op.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Os[t]=Os[e]})});function rd(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Os.hasOwnProperty(e)&&Os[e]?(""+t).trim():t+"px"}function sd(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=rd(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var ap=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qo(e,t){if(t){if(ap[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ee(62))}}function Jo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zo=null;function tl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ea=null,as=null,ls=null;function lc(e){if(e=gi(e)){if(typeof ea!="function")throw Error(ee(280));var t=e.stateNode;t&&(t=Pn(t),ea(e.stateNode,e.type,t))}}function id(e){as?ls?ls.push(e):ls=[e]:as=e}function nd(){if(as){var e=as,t=ls;if(ls=as=null,lc(e),t)for(e=0;e<t.length;e++)lc(t[e])}}function od(e,t){return e(t)}function ad(){}var co=!1;function ld(e,t,r){if(co)return e(t,r);co=!0;try{return od(e,t,r)}finally{co=!1,(as!==null||ls!==null)&&(ad(),nd())}}function Xs(e,t){var r=e.stateNode;if(r===null)return null;var s=Pn(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ee(231,t,typeof r));return r}var ta=!1;if(tr)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){ta=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{ta=!1}function lp(e,t,r,s,a,g,x,i,c){var f=Array.prototype.slice.call(arguments,3);try{t.apply(r,f)}catch(_){this.onError(_)}}var Is=!1,sn=null,nn=!1,ra=null,cp={onError:function(e){Is=!0,sn=e}};function hp(e,t,r,s,a,g,x,i,c){Is=!1,sn=null,lp.apply(cp,arguments)}function dp(e,t,r,s,a,g,x,i,c){if(hp.apply(this,arguments),Is){if(Is){var f=sn;Is=!1,sn=null}else throw Error(ee(198));nn||(nn=!0,ra=f)}}function Vr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function cd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cc(e){if(Vr(e)!==e)throw Error(ee(188))}function up(e){var t=e.alternate;if(!t){if(t=Vr(e),t===null)throw Error(ee(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var g=a.alternate;if(g===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===g.child){for(g=a.child;g;){if(g===r)return cc(a),e;if(g===s)return cc(a),t;g=g.sibling}throw Error(ee(188))}if(r.return!==s.return)r=a,s=g;else{for(var x=!1,i=a.child;i;){if(i===r){x=!0,r=a,s=g;break}if(i===s){x=!0,s=a,r=g;break}i=i.sibling}if(!x){for(i=g.child;i;){if(i===r){x=!0,r=g,s=a;break}if(i===s){x=!0,s=g,r=a;break}i=i.sibling}if(!x)throw Error(ee(189))}}if(r.alternate!==s)throw Error(ee(190))}if(r.tag!==3)throw Error(ee(188));return r.stateNode.current===r?e:t}function hd(e){return e=up(e),e!==null?dd(e):null}function dd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=dd(e);if(t!==null)return t;e=e.sibling}return null}var ud=_t.unstable_scheduleCallback,hc=_t.unstable_cancelCallback,fp=_t.unstable_shouldYield,pp=_t.unstable_requestPaint,Ie=_t.unstable_now,gp=_t.unstable_getCurrentPriorityLevel,rl=_t.unstable_ImmediatePriority,fd=_t.unstable_UserBlockingPriority,on=_t.unstable_NormalPriority,mp=_t.unstable_LowPriority,pd=_t.unstable_IdlePriority,An=null,Vt=null;function _p(e){if(Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(An,e,void 0,(e.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:yp,vp=Math.log,xp=Math.LN2;function yp(e){return e>>>=0,e===0?32:31-(vp(e)/xp|0)|0}var Si=64,Ci=4194304;function Ds(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function an(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,g=e.pingedLanes,x=r&268435455;if(x!==0){var i=x&~a;i!==0?s=Ds(i):(g&=x,g!==0&&(s=Ds(g)))}else x=r&~a,x!==0?s=Ds(x):g!==0&&(s=Ds(g));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,g=t&-t,a>=g||a===16&&(g&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Bt(t),a=1<<r,s|=e[r],t&=~a;return s}function bp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wp(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,g=e.pendingLanes;0<g;){var x=31-Bt(g),i=1<<x,c=a[x];c===-1?(!(i&r)||i&s)&&(a[x]=bp(i,t)):c<=t&&(e.expiredLanes|=i),g&=~i}}function sa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gd(){var e=Si;return Si<<=1,!(Si&4194240)&&(Si=64),e}function ho(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function fi(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Bt(t),e[t]=r}function Sp(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Bt(r),g=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~g}}function sl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Bt(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var Se=0;function md(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _d,il,vd,xd,yd,ia=!1,ki=[],fr=null,pr=null,gr=null,Ys=new Map,Qs=new Map,cr=[],Cp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dc(e,t){switch(e){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":Ys.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qs.delete(t.pointerId)}}function ks(e,t,r,s,a,g){return e===null||e.nativeEvent!==g?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:g,targetContainers:[a]},t!==null&&(t=gi(t),t!==null&&il(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function kp(e,t,r,s,a){switch(t){case"focusin":return fr=ks(fr,e,t,r,s,a),!0;case"dragenter":return pr=ks(pr,e,t,r,s,a),!0;case"mouseover":return gr=ks(gr,e,t,r,s,a),!0;case"pointerover":var g=a.pointerId;return Ys.set(g,ks(Ys.get(g)||null,e,t,r,s,a)),!0;case"gotpointercapture":return g=a.pointerId,Qs.set(g,ks(Qs.get(g)||null,e,t,r,s,a)),!0}return!1}function bd(e){var t=Ar(e.target);if(t!==null){var r=Vr(t);if(r!==null){if(t=r.tag,t===13){if(t=cd(r),t!==null){e.blockedOn=t,yd(e.priority,function(){vd(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $i(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=na(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Zo=s,r.target.dispatchEvent(s),Zo=null}else return t=gi(r),t!==null&&il(t),e.blockedOn=r,!1;t.shift()}return!0}function uc(e,t,r){$i(e)&&r.delete(t)}function Ep(){ia=!1,fr!==null&&$i(fr)&&(fr=null),pr!==null&&$i(pr)&&(pr=null),gr!==null&&$i(gr)&&(gr=null),Ys.forEach(uc),Qs.forEach(uc)}function Es(e,t){e.blockedOn===t&&(e.blockedOn=null,ia||(ia=!0,_t.unstable_scheduleCallback(_t.unstable_NormalPriority,Ep)))}function Js(e){function t(a){return Es(a,e)}if(0<ki.length){Es(ki[0],e);for(var r=1;r<ki.length;r++){var s=ki[r];s.blockedOn===e&&(s.blockedOn=null)}}for(fr!==null&&Es(fr,e),pr!==null&&Es(pr,e),gr!==null&&Es(gr,e),Ys.forEach(t),Qs.forEach(t),r=0;r<cr.length;r++)s=cr[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<cr.length&&(r=cr[0],r.blockedOn===null);)bd(r),r.blockedOn===null&&cr.shift()}var cs=nr.ReactCurrentBatchConfig,ln=!0;function Lp(e,t,r,s){var a=Se,g=cs.transition;cs.transition=null;try{Se=1,nl(e,t,r,s)}finally{Se=a,cs.transition=g}}function Rp(e,t,r,s){var a=Se,g=cs.transition;cs.transition=null;try{Se=4,nl(e,t,r,s)}finally{Se=a,cs.transition=g}}function nl(e,t,r,s){if(ln){var a=na(e,t,r,s);if(a===null)bo(e,t,s,cn,r),dc(e,s);else if(kp(a,e,t,r,s))s.stopPropagation();else if(dc(e,s),t&4&&-1<Cp.indexOf(e)){for(;a!==null;){var g=gi(a);if(g!==null&&_d(g),g=na(e,t,r,s),g===null&&bo(e,t,s,cn,r),g===a)break;a=g}a!==null&&s.stopPropagation()}else bo(e,t,s,null,r)}}var cn=null;function na(e,t,r,s){if(cn=null,e=tl(s),e=Ar(e),e!==null)if(t=Vr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=cd(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return cn=e,null}function wd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gp()){case rl:return 1;case fd:return 4;case on:case mp:return 16;case pd:return 536870912;default:return 16}default:return 16}}var dr=null,ol=null,Wi=null;function Sd(){if(Wi)return Wi;var e,t=ol,r=t.length,s,a="value"in dr?dr.value:dr.textContent,g=a.length;for(e=0;e<r&&t[e]===a[e];e++);var x=r-e;for(s=1;s<=x&&t[r-s]===a[g-s];s++);return Wi=a.slice(e,1<s?1-s:void 0)}function Ui(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ei(){return!0}function fc(){return!1}function xt(e){function t(r,s,a,g,x){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=g,this.target=x,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(g):g[i]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ei:fc,this.isPropagationStopped=fc,this}return Pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),t}var ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},al=xt(ys),pi=Pe({},ys,{view:0,detail:0}),jp=xt(pi),uo,fo,Ls,Mn=Pe({},pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ll,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ls&&(Ls&&e.type==="mousemove"?(uo=e.screenX-Ls.screenX,fo=e.screenY-Ls.screenY):fo=uo=0,Ls=e),uo)},movementY:function(e){return"movementY"in e?e.movementY:fo}}),pc=xt(Mn),Np=Pe({},Mn,{dataTransfer:0}),Ap=xt(Np),Mp=Pe({},pi,{relatedTarget:0}),po=xt(Mp),Tp=Pe({},ys,{animationName:0,elapsedTime:0,pseudoElement:0}),Dp=xt(Tp),Pp=Pe({},ys,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bp=xt(Pp),Op=Pe({},ys,{data:0}),gc=xt(Op),Ip={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Hp[e])?!!t[e]:!1}function ll(){return zp}var $p=Pe({},pi,{key:function(e){if(e.key){var t=Ip[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ui(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ll,charCode:function(e){return e.type==="keypress"?Ui(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ui(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Wp=xt($p),Up=Pe({},Mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mc=xt(Up),Vp=Pe({},pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ll}),qp=xt(Vp),Kp=Pe({},ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gp=xt(Kp),Xp=Pe({},Mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Yp=xt(Xp),Qp=[9,13,27,32],cl=tr&&"CompositionEvent"in window,Fs=null;tr&&"documentMode"in document&&(Fs=document.documentMode);var Jp=tr&&"TextEvent"in window&&!Fs,Cd=tr&&(!cl||Fs&&8<Fs&&11>=Fs),_c=" ",vc=!1;function kd(e,t){switch(e){case"keyup":return Qp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ed(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yr=!1;function Zp(e,t){switch(e){case"compositionend":return Ed(t);case"keypress":return t.which!==32?null:(vc=!0,_c);case"textInput":return e=t.data,e===_c&&vc?null:e;default:return null}}function eg(e,t){if(Yr)return e==="compositionend"||!cl&&kd(e,t)?(e=Sd(),Wi=ol=dr=null,Yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cd&&t.locale!=="ko"?null:t.data;default:return null}}var tg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!tg[e.type]:t==="textarea"}function Ld(e,t,r,s){id(s),t=hn(t,"onChange"),0<t.length&&(r=new al("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Hs=null,Zs=null;function rg(e){Id(e,0)}function Tn(e){var t=Zr(e);if(Qh(t))return e}function sg(e,t){if(e==="change")return t}var Rd=!1;if(tr){var go;if(tr){var mo="oninput"in document;if(!mo){var yc=document.createElement("div");yc.setAttribute("oninput","return;"),mo=typeof yc.oninput=="function"}go=mo}else go=!1;Rd=go&&(!document.documentMode||9<document.documentMode)}function bc(){Hs&&(Hs.detachEvent("onpropertychange",jd),Zs=Hs=null)}function jd(e){if(e.propertyName==="value"&&Tn(Zs)){var t=[];Ld(t,Zs,e,tl(e)),ld(rg,t)}}function ig(e,t,r){e==="focusin"?(bc(),Hs=t,Zs=r,Hs.attachEvent("onpropertychange",jd)):e==="focusout"&&bc()}function ng(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tn(Zs)}function og(e,t){if(e==="click")return Tn(t)}function ag(e,t){if(e==="input"||e==="change")return Tn(t)}function lg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var It=typeof Object.is=="function"?Object.is:lg;function ei(e,t){if(It(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!zo.call(t,a)||!It(e[a],t[a]))return!1}return!0}function wc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sc(e,t){var r=wc(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=wc(r)}}function Nd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ad(){for(var e=window,t=rn();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=rn(e.document)}return t}function hl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function cg(e){var t=Ad(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Nd(r.ownerDocument.documentElement,r)){if(s!==null&&hl(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,g=Math.min(s.start,a);s=s.end===void 0?g:Math.min(s.end,a),!e.extend&&g>s&&(a=s,s=g,g=a),a=Sc(r,g);var x=Sc(r,s);a&&x&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==x.node||e.focusOffset!==x.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),g>s?(e.addRange(t),e.extend(x.node,x.offset)):(t.setEnd(x.node,x.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hg=tr&&"documentMode"in document&&11>=document.documentMode,Qr=null,oa=null,zs=null,aa=!1;function Cc(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;aa||Qr==null||Qr!==rn(s)||(s=Qr,"selectionStart"in s&&hl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),zs&&ei(zs,s)||(zs=s,s=hn(oa,"onSelect"),0<s.length&&(t=new al("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Qr)))}function Li(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Jr={animationend:Li("Animation","AnimationEnd"),animationiteration:Li("Animation","AnimationIteration"),animationstart:Li("Animation","AnimationStart"),transitionend:Li("Transition","TransitionEnd")},_o={},Md={};tr&&(Md=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function Dn(e){if(_o[e])return _o[e];if(!Jr[e])return e;var t=Jr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Md)return _o[e]=t[r];return e}var Td=Dn("animationend"),Dd=Dn("animationiteration"),Pd=Dn("animationstart"),Bd=Dn("transitionend"),Od=new Map,kc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){Od.set(e,t),Ur(t,[e])}for(var vo=0;vo<kc.length;vo++){var xo=kc[vo],dg=xo.toLowerCase(),ug=xo[0].toUpperCase()+xo.slice(1);kr(dg,"on"+ug)}kr(Td,"onAnimationEnd");kr(Dd,"onAnimationIteration");kr(Pd,"onAnimationStart");kr("dblclick","onDoubleClick");kr("focusin","onFocus");kr("focusout","onBlur");kr(Bd,"onTransitionEnd");us("onMouseEnter",["mouseout","mouseover"]);us("onMouseLeave",["mouseout","mouseover"]);us("onPointerEnter",["pointerout","pointerover"]);us("onPointerLeave",["pointerout","pointerover"]);Ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ps="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ps));function Ec(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,dp(s,t,void 0,e),e.currentTarget=null}function Id(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var g=void 0;if(t)for(var x=s.length-1;0<=x;x--){var i=s[x],c=i.instance,f=i.currentTarget;if(i=i.listener,c!==g&&a.isPropagationStopped())break e;Ec(a,i,f),g=c}else for(x=0;x<s.length;x++){if(i=s[x],c=i.instance,f=i.currentTarget,i=i.listener,c!==g&&a.isPropagationStopped())break e;Ec(a,i,f),g=c}}}if(nn)throw e=ra,nn=!1,ra=null,e}function Re(e,t){var r=t[ua];r===void 0&&(r=t[ua]=new Set);var s=e+"__bubble";r.has(s)||(Fd(t,e,2,!1),r.add(s))}function yo(e,t,r){var s=0;t&&(s|=4),Fd(r,e,s,t)}var Ri="_reactListening"+Math.random().toString(36).slice(2);function ti(e){if(!e[Ri]){e[Ri]=!0,qh.forEach(function(r){r!=="selectionchange"&&(fg.has(r)||yo(r,!1,e),yo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ri]||(t[Ri]=!0,yo("selectionchange",!1,t))}}function Fd(e,t,r,s){switch(wd(t)){case 1:var a=Lp;break;case 4:a=Rp;break;default:a=nl}r=a.bind(null,t,r,e),a=void 0,!ta||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function bo(e,t,r,s,a){var g=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var x=s.tag;if(x===3||x===4){var i=s.stateNode.containerInfo;if(i===a||i.nodeType===8&&i.parentNode===a)break;if(x===4)for(x=s.return;x!==null;){var c=x.tag;if((c===3||c===4)&&(c=x.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;x=x.return}for(;i!==null;){if(x=Ar(i),x===null)return;if(c=x.tag,c===5||c===6){s=g=x;continue e}i=i.parentNode}}s=s.return}ld(function(){var f=g,_=tl(r),u=[];e:{var m=Od.get(e);if(m!==void 0){var S=al,w=e;switch(e){case"keypress":if(Ui(r)===0)break e;case"keydown":case"keyup":S=Wp;break;case"focusin":w="focus",S=po;break;case"focusout":w="blur",S=po;break;case"beforeblur":case"afterblur":S=po;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=pc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Ap;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=qp;break;case Td:case Dd:case Pd:S=Dp;break;case Bd:S=Gp;break;case"scroll":S=jp;break;case"wheel":S=Yp;break;case"copy":case"cut":case"paste":S=Bp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=mc}var p=(t&4)!==0,n=!p&&e==="scroll",l=p?m!==null?m+"Capture":null:m;p=[];for(var h=f,d;h!==null;){d=h;var v=d.stateNode;if(d.tag===5&&v!==null&&(d=v,l!==null&&(v=Xs(h,l),v!=null&&p.push(ri(h,v,d)))),n)break;h=h.return}0<p.length&&(m=new S(m,w,null,r,_),u.push({event:m,listeners:p}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",m&&r!==Zo&&(w=r.relatedTarget||r.fromElement)&&(Ar(w)||w[rr]))break e;if((S||m)&&(m=_.window===_?_:(m=_.ownerDocument)?m.defaultView||m.parentWindow:window,S?(w=r.relatedTarget||r.toElement,S=f,w=w?Ar(w):null,w!==null&&(n=Vr(w),w!==n||w.tag!==5&&w.tag!==6)&&(w=null)):(S=null,w=f),S!==w)){if(p=pc,v="onMouseLeave",l="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(p=mc,v="onPointerLeave",l="onPointerEnter",h="pointer"),n=S==null?m:Zr(S),d=w==null?m:Zr(w),m=new p(v,h+"leave",S,r,_),m.target=n,m.relatedTarget=d,v=null,Ar(_)===f&&(p=new p(l,h+"enter",w,r,_),p.target=d,p.relatedTarget=n,v=p),n=v,S&&w)t:{for(p=S,l=w,h=0,d=p;d;d=qr(d))h++;for(d=0,v=l;v;v=qr(v))d++;for(;0<h-d;)p=qr(p),h--;for(;0<d-h;)l=qr(l),d--;for(;h--;){if(p===l||l!==null&&p===l.alternate)break t;p=qr(p),l=qr(l)}p=null}else p=null;S!==null&&Lc(u,m,S,p,!1),w!==null&&n!==null&&Lc(u,n,w,p,!0)}}e:{if(m=f?Zr(f):window,S=m.nodeName&&m.nodeName.toLowerCase(),S==="select"||S==="input"&&m.type==="file")var y=sg;else if(xc(m))if(Rd)y=ag;else{y=ng;var C=ig}else(S=m.nodeName)&&S.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(y=og);if(y&&(y=y(e,f))){Ld(u,y,r,_);break e}C&&C(e,m,f),e==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&Go(m,"number",m.value)}switch(C=f?Zr(f):window,e){case"focusin":(xc(C)||C.contentEditable==="true")&&(Qr=C,oa=f,zs=null);break;case"focusout":zs=oa=Qr=null;break;case"mousedown":aa=!0;break;case"contextmenu":case"mouseup":case"dragend":aa=!1,Cc(u,r,_);break;case"selectionchange":if(hg)break;case"keydown":case"keyup":Cc(u,r,_)}var L;if(cl)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Yr?kd(e,r)&&(b="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(b="onCompositionStart");b&&(Cd&&r.locale!=="ko"&&(Yr||b!=="onCompositionStart"?b==="onCompositionEnd"&&Yr&&(L=Sd()):(dr=_,ol="value"in dr?dr.value:dr.textContent,Yr=!0)),C=hn(f,b),0<C.length&&(b=new gc(b,e,null,r,_),u.push({event:b,listeners:C}),L?b.data=L:(L=Ed(r),L!==null&&(b.data=L)))),(L=Jp?Zp(e,r):eg(e,r))&&(f=hn(f,"onBeforeInput"),0<f.length&&(_=new gc("onBeforeInput","beforeinput",null,r,_),u.push({event:_,listeners:f}),_.data=L))}Id(u,t)})}function ri(e,t,r){return{instance:e,listener:t,currentTarget:r}}function hn(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,g=a.stateNode;a.tag===5&&g!==null&&(a=g,g=Xs(e,r),g!=null&&s.unshift(ri(e,g,a)),g=Xs(e,t),g!=null&&s.push(ri(e,g,a))),e=e.return}return s}function qr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Lc(e,t,r,s,a){for(var g=t._reactName,x=[];r!==null&&r!==s;){var i=r,c=i.alternate,f=i.stateNode;if(c!==null&&c===s)break;i.tag===5&&f!==null&&(i=f,a?(c=Xs(r,g),c!=null&&x.unshift(ri(r,c,i))):a||(c=Xs(r,g),c!=null&&x.push(ri(r,c,i)))),r=r.return}x.length!==0&&e.push({event:t,listeners:x})}var pg=/\r\n?/g,gg=/\u0000|\uFFFD/g;function Rc(e){return(typeof e=="string"?e:""+e).replace(pg,`
`).replace(gg,"")}function ji(e,t,r){if(t=Rc(t),Rc(e)!==t&&r)throw Error(ee(425))}function dn(){}var la=null,ca=null;function ha(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var da=typeof setTimeout=="function"?setTimeout:void 0,mg=typeof clearTimeout=="function"?clearTimeout:void 0,jc=typeof Promise=="function"?Promise:void 0,_g=typeof queueMicrotask=="function"?queueMicrotask:typeof jc<"u"?function(e){return jc.resolve(null).then(e).catch(vg)}:da;function vg(e){setTimeout(function(){throw e})}function wo(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),Js(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);Js(t)}function mr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var bs=Math.random().toString(36).slice(2),Wt="__reactFiber$"+bs,si="__reactProps$"+bs,rr="__reactContainer$"+bs,ua="__reactEvents$"+bs,xg="__reactListeners$"+bs,yg="__reactHandles$"+bs;function Ar(e){var t=e[Wt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[rr]||r[Wt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Nc(e);e!==null;){if(r=e[Wt])return r;e=Nc(e)}return t}e=r,r=e.parentNode}return null}function gi(e){return e=e[Wt]||e[rr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ee(33))}function Pn(e){return e[si]||null}var fa=[],es=-1;function Er(e){return{current:e}}function je(e){0>es||(e.current=fa[es],fa[es]=null,es--)}function Le(e,t){es++,fa[es]=e.current,e.current=t}var Sr={},tt=Er(Sr),dt=Er(!1),Or=Sr;function fs(e,t){var r=e.type.contextTypes;if(!r)return Sr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},g;for(g in r)a[g]=t[g];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ut(e){return e=e.childContextTypes,e!=null}function un(){je(dt),je(tt)}function Ac(e,t,r){if(tt.current!==Sr)throw Error(ee(168));Le(tt,t),Le(dt,r)}function Hd(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(ee(108,ip(e)||"Unknown",a));return Pe({},r,s)}function fn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sr,Or=tt.current,Le(tt,e),Le(dt,dt.current),!0}function Mc(e,t,r){var s=e.stateNode;if(!s)throw Error(ee(169));r?(e=Hd(e,t,Or),s.__reactInternalMemoizedMergedChildContext=e,je(dt),je(tt),Le(tt,e)):je(dt),Le(dt,r)}var Yt=null,Bn=!1,So=!1;function zd(e){Yt===null?Yt=[e]:Yt.push(e)}function bg(e){Bn=!0,zd(e)}function Lr(){if(!So&&Yt!==null){So=!0;var e=0,t=Se;try{var r=Yt;for(Se=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Yt=null,Bn=!1}catch(a){throw Yt!==null&&(Yt=Yt.slice(e+1)),ud(rl,Lr),a}finally{Se=t,So=!1}}return null}var ts=[],rs=0,pn=null,gn=0,bt=[],wt=0,Ir=null,Qt=1,Jt="";function jr(e,t){ts[rs++]=gn,ts[rs++]=pn,pn=e,gn=t}function $d(e,t,r){bt[wt++]=Qt,bt[wt++]=Jt,bt[wt++]=Ir,Ir=e;var s=Qt;e=Jt;var a=32-Bt(s)-1;s&=~(1<<a),r+=1;var g=32-Bt(t)+a;if(30<g){var x=a-a%5;g=(s&(1<<x)-1).toString(32),s>>=x,a-=x,Qt=1<<32-Bt(t)+a|r<<a|s,Jt=g+e}else Qt=1<<g|r<<a|s,Jt=e}function dl(e){e.return!==null&&(jr(e,1),$d(e,1,0))}function ul(e){for(;e===pn;)pn=ts[--rs],ts[rs]=null,gn=ts[--rs],ts[rs]=null;for(;e===Ir;)Ir=bt[--wt],bt[wt]=null,Jt=bt[--wt],bt[wt]=null,Qt=bt[--wt],bt[wt]=null}var mt=null,gt=null,Ne=!1,Pt=null;function Wd(e,t){var r=Ct(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Tc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,mt=e,gt=mr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,mt=e,gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ir!==null?{id:Qt,overflow:Jt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ct(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,mt=e,gt=null,!0):!1;default:return!1}}function pa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ga(e){if(Ne){var t=gt;if(t){var r=t;if(!Tc(e,t)){if(pa(e))throw Error(ee(418));t=mr(r.nextSibling);var s=mt;t&&Tc(e,t)?Wd(s,r):(e.flags=e.flags&-4097|2,Ne=!1,mt=e)}}else{if(pa(e))throw Error(ee(418));e.flags=e.flags&-4097|2,Ne=!1,mt=e}}}function Dc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;mt=e}function Ni(e){if(e!==mt)return!1;if(!Ne)return Dc(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ha(e.type,e.memoizedProps)),t&&(t=gt)){if(pa(e))throw Ud(),Error(ee(418));for(;t;)Wd(e,t),t=mr(t.nextSibling)}if(Dc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){gt=mr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}gt=null}}else gt=mt?mr(e.stateNode.nextSibling):null;return!0}function Ud(){for(var e=gt;e;)e=mr(e.nextSibling)}function ps(){gt=mt=null,Ne=!1}function fl(e){Pt===null?Pt=[e]:Pt.push(e)}var wg=nr.ReactCurrentBatchConfig;function Rs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ee(309));var s=r.stateNode}if(!s)throw Error(ee(147,e));var a=s,g=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===g?t.ref:(t=function(x){var i=a.refs;x===null?delete i[g]:i[g]=x},t._stringRef=g,t)}if(typeof e!="string")throw Error(ee(284));if(!r._owner)throw Error(ee(290,e))}return e}function Ai(e,t){throw e=Object.prototype.toString.call(t),Error(ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Pc(e){var t=e._init;return t(e._payload)}function Vd(e){function t(l,h){if(e){var d=l.deletions;d===null?(l.deletions=[h],l.flags|=16):d.push(h)}}function r(l,h){if(!e)return null;for(;h!==null;)t(l,h),h=h.sibling;return null}function s(l,h){for(l=new Map;h!==null;)h.key!==null?l.set(h.key,h):l.set(h.index,h),h=h.sibling;return l}function a(l,h){return l=yr(l,h),l.index=0,l.sibling=null,l}function g(l,h,d){return l.index=d,e?(d=l.alternate,d!==null?(d=d.index,d<h?(l.flags|=2,h):d):(l.flags|=2,h)):(l.flags|=1048576,h)}function x(l){return e&&l.alternate===null&&(l.flags|=2),l}function i(l,h,d,v){return h===null||h.tag!==6?(h=No(d,l.mode,v),h.return=l,h):(h=a(h,d),h.return=l,h)}function c(l,h,d,v){var y=d.type;return y===Xr?_(l,h,d.props.children,v,d.key):h!==null&&(h.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===ar&&Pc(y)===h.type)?(v=a(h,d.props),v.ref=Rs(l,h,d),v.return=l,v):(v=Qi(d.type,d.key,d.props,null,l.mode,v),v.ref=Rs(l,h,d),v.return=l,v)}function f(l,h,d,v){return h===null||h.tag!==4||h.stateNode.containerInfo!==d.containerInfo||h.stateNode.implementation!==d.implementation?(h=Ao(d,l.mode,v),h.return=l,h):(h=a(h,d.children||[]),h.return=l,h)}function _(l,h,d,v,y){return h===null||h.tag!==7?(h=Pr(d,l.mode,v,y),h.return=l,h):(h=a(h,d),h.return=l,h)}function u(l,h,d){if(typeof h=="string"&&h!==""||typeof h=="number")return h=No(""+h,l.mode,d),h.return=l,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case yi:return d=Qi(h.type,h.key,h.props,null,l.mode,d),d.ref=Rs(l,null,h),d.return=l,d;case Gr:return h=Ao(h,l.mode,d),h.return=l,h;case ar:var v=h._init;return u(l,v(h._payload),d)}if(Ts(h)||Ss(h))return h=Pr(h,l.mode,d,null),h.return=l,h;Ai(l,h)}return null}function m(l,h,d,v){var y=h!==null?h.key:null;if(typeof d=="string"&&d!==""||typeof d=="number")return y!==null?null:i(l,h,""+d,v);if(typeof d=="object"&&d!==null){switch(d.$$typeof){case yi:return d.key===y?c(l,h,d,v):null;case Gr:return d.key===y?f(l,h,d,v):null;case ar:return y=d._init,m(l,h,y(d._payload),v)}if(Ts(d)||Ss(d))return y!==null?null:_(l,h,d,v,null);Ai(l,d)}return null}function S(l,h,d,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return l=l.get(d)||null,i(h,l,""+v,y);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case yi:return l=l.get(v.key===null?d:v.key)||null,c(h,l,v,y);case Gr:return l=l.get(v.key===null?d:v.key)||null,f(h,l,v,y);case ar:var C=v._init;return S(l,h,d,C(v._payload),y)}if(Ts(v)||Ss(v))return l=l.get(d)||null,_(h,l,v,y,null);Ai(h,v)}return null}function w(l,h,d,v){for(var y=null,C=null,L=h,b=h=0,k=null;L!==null&&b<d.length;b++){L.index>b?(k=L,L=null):k=L.sibling;var E=m(l,L,d[b],v);if(E===null){L===null&&(L=k);break}e&&L&&E.alternate===null&&t(l,L),h=g(E,h,b),C===null?y=E:C.sibling=E,C=E,L=k}if(b===d.length)return r(l,L),Ne&&jr(l,b),y;if(L===null){for(;b<d.length;b++)L=u(l,d[b],v),L!==null&&(h=g(L,h,b),C===null?y=L:C.sibling=L,C=L);return Ne&&jr(l,b),y}for(L=s(l,L);b<d.length;b++)k=S(L,l,b,d[b],v),k!==null&&(e&&k.alternate!==null&&L.delete(k.key===null?b:k.key),h=g(k,h,b),C===null?y=k:C.sibling=k,C=k);return e&&L.forEach(function(A){return t(l,A)}),Ne&&jr(l,b),y}function p(l,h,d,v){var y=Ss(d);if(typeof y!="function")throw Error(ee(150));if(d=y.call(d),d==null)throw Error(ee(151));for(var C=y=null,L=h,b=h=0,k=null,E=d.next();L!==null&&!E.done;b++,E=d.next()){L.index>b?(k=L,L=null):k=L.sibling;var A=m(l,L,E.value,v);if(A===null){L===null&&(L=k);break}e&&L&&A.alternate===null&&t(l,L),h=g(A,h,b),C===null?y=A:C.sibling=A,C=A,L=k}if(E.done)return r(l,L),Ne&&jr(l,b),y;if(L===null){for(;!E.done;b++,E=d.next())E=u(l,E.value,v),E!==null&&(h=g(E,h,b),C===null?y=E:C.sibling=E,C=E);return Ne&&jr(l,b),y}for(L=s(l,L);!E.done;b++,E=d.next())E=S(L,l,b,E.value,v),E!==null&&(e&&E.alternate!==null&&L.delete(E.key===null?b:E.key),h=g(E,h,b),C===null?y=E:C.sibling=E,C=E);return e&&L.forEach(function(R){return t(l,R)}),Ne&&jr(l,b),y}function n(l,h,d,v){if(typeof d=="object"&&d!==null&&d.type===Xr&&d.key===null&&(d=d.props.children),typeof d=="object"&&d!==null){switch(d.$$typeof){case yi:e:{for(var y=d.key,C=h;C!==null;){if(C.key===y){if(y=d.type,y===Xr){if(C.tag===7){r(l,C.sibling),h=a(C,d.props.children),h.return=l,l=h;break e}}else if(C.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===ar&&Pc(y)===C.type){r(l,C.sibling),h=a(C,d.props),h.ref=Rs(l,C,d),h.return=l,l=h;break e}r(l,C);break}else t(l,C);C=C.sibling}d.type===Xr?(h=Pr(d.props.children,l.mode,v,d.key),h.return=l,l=h):(v=Qi(d.type,d.key,d.props,null,l.mode,v),v.ref=Rs(l,h,d),v.return=l,l=v)}return x(l);case Gr:e:{for(C=d.key;h!==null;){if(h.key===C)if(h.tag===4&&h.stateNode.containerInfo===d.containerInfo&&h.stateNode.implementation===d.implementation){r(l,h.sibling),h=a(h,d.children||[]),h.return=l,l=h;break e}else{r(l,h);break}else t(l,h);h=h.sibling}h=Ao(d,l.mode,v),h.return=l,l=h}return x(l);case ar:return C=d._init,n(l,h,C(d._payload),v)}if(Ts(d))return w(l,h,d,v);if(Ss(d))return p(l,h,d,v);Ai(l,d)}return typeof d=="string"&&d!==""||typeof d=="number"?(d=""+d,h!==null&&h.tag===6?(r(l,h.sibling),h=a(h,d),h.return=l,l=h):(r(l,h),h=No(d,l.mode,v),h.return=l,l=h),x(l)):r(l,h)}return n}var gs=Vd(!0),qd=Vd(!1),mn=Er(null),_n=null,ss=null,pl=null;function gl(){pl=ss=_n=null}function ml(e){var t=mn.current;je(mn),e._currentValue=t}function ma(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function hs(e,t){_n=e,pl=ss=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ht=!0),e.firstContext=null)}function Rt(e){var t=e._currentValue;if(pl!==e)if(e={context:e,memoizedValue:t,next:null},ss===null){if(_n===null)throw Error(ee(308));ss=e,_n.dependencies={lanes:0,firstContext:e}}else ss=ss.next=e;return t}var Mr=null;function _l(e){Mr===null?Mr=[e]:Mr.push(e)}function Kd(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,_l(t)):(r.next=a.next,a.next=r),t.interleaved=r,sr(e,s)}function sr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var lr=!1;function vl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _r(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,xe&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,sr(e,r)}return a=s.interleaved,a===null?(t.next=t,_l(s)):(t.next=a.next,a.next=t),s.interleaved=t,sr(e,r)}function Vi(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,sl(e,r)}}function Bc(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,g=null;if(r=r.firstBaseUpdate,r!==null){do{var x={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};g===null?a=g=x:g=g.next=x,r=r.next}while(r!==null);g===null?a=g=t:g=g.next=t}else a=g=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:g,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function vn(e,t,r,s){var a=e.updateQueue;lr=!1;var g=a.firstBaseUpdate,x=a.lastBaseUpdate,i=a.shared.pending;if(i!==null){a.shared.pending=null;var c=i,f=c.next;c.next=null,x===null?g=f:x.next=f,x=c;var _=e.alternate;_!==null&&(_=_.updateQueue,i=_.lastBaseUpdate,i!==x&&(i===null?_.firstBaseUpdate=f:i.next=f,_.lastBaseUpdate=c))}if(g!==null){var u=a.baseState;x=0,_=f=c=null,i=g;do{var m=i.lane,S=i.eventTime;if((s&m)===m){_!==null&&(_=_.next={eventTime:S,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var w=e,p=i;switch(m=t,S=r,p.tag){case 1:if(w=p.payload,typeof w=="function"){u=w.call(S,u,m);break e}u=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=p.payload,m=typeof w=="function"?w.call(S,u,m):w,m==null)break e;u=Pe({},u,m);break e;case 2:lr=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[i]:m.push(i))}else S={eventTime:S,lane:m,tag:i.tag,payload:i.payload,callback:i.callback,next:null},_===null?(f=_=S,c=u):_=_.next=S,x|=m;if(i=i.next,i===null){if(i=a.shared.pending,i===null)break;m=i,i=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(_===null&&(c=u),a.baseState=c,a.firstBaseUpdate=f,a.lastBaseUpdate=_,t=a.shared.interleaved,t!==null){a=t;do x|=a.lane,a=a.next;while(a!==t)}else g===null&&(a.shared.lanes=0);Hr|=x,e.lanes=x,e.memoizedState=u}}function Oc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(ee(191,a));a.call(s)}}}var mi={},qt=Er(mi),ii=Er(mi),ni=Er(mi);function Tr(e){if(e===mi)throw Error(ee(174));return e}function xl(e,t){switch(Le(ni,t),Le(ii,e),Le(qt,mi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Yo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Yo(t,e)}je(qt),Le(qt,t)}function ms(){je(qt),je(ii),je(ni)}function Xd(e){Tr(ni.current);var t=Tr(qt.current),r=Yo(t,e.type);t!==r&&(Le(ii,e),Le(qt,r))}function yl(e){ii.current===e&&(je(qt),je(ii))}var Te=Er(0);function xn(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Co=[];function bl(){for(var e=0;e<Co.length;e++)Co[e]._workInProgressVersionPrimary=null;Co.length=0}var qi=nr.ReactCurrentDispatcher,ko=nr.ReactCurrentBatchConfig,Fr=0,De=null,$e=null,Ve=null,yn=!1,$s=!1,oi=0,Sg=0;function Je(){throw Error(ee(321))}function wl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!It(e[r],t[r]))return!1;return!0}function Sl(e,t,r,s,a,g){if(Fr=g,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qi.current=e===null||e.memoizedState===null?Lg:Rg,e=r(s,a),$s){g=0;do{if($s=!1,oi=0,25<=g)throw Error(ee(301));g+=1,Ve=$e=null,t.updateQueue=null,qi.current=jg,e=r(s,a)}while($s)}if(qi.current=bn,t=$e!==null&&$e.next!==null,Fr=0,Ve=$e=De=null,yn=!1,t)throw Error(ee(300));return e}function Cl(){var e=oi!==0;return oi=0,e}function $t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?De.memoizedState=Ve=e:Ve=Ve.next=e,Ve}function jt(){if($e===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=Ve===null?De.memoizedState:Ve.next;if(t!==null)Ve=t,$e=e;else{if(e===null)throw Error(ee(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ve===null?De.memoizedState=Ve=e:Ve=Ve.next=e}return Ve}function ai(e,t){return typeof t=="function"?t(e):t}function Eo(e){var t=jt(),r=t.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=e;var s=$e,a=s.baseQueue,g=r.pending;if(g!==null){if(a!==null){var x=a.next;a.next=g.next,g.next=x}s.baseQueue=a=g,r.pending=null}if(a!==null){g=a.next,s=s.baseState;var i=x=null,c=null,f=g;do{var _=f.lane;if((Fr&_)===_)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),s=f.hasEagerState?f.eagerState:e(s,f.action);else{var u={lane:_,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(i=c=u,x=s):c=c.next=u,De.lanes|=_,Hr|=_}f=f.next}while(f!==null&&f!==g);c===null?x=s:c.next=i,It(s,t.memoizedState)||(ht=!0),t.memoizedState=s,t.baseState=x,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do g=a.lane,De.lanes|=g,Hr|=g,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Lo(e){var t=jt(),r=t.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,g=t.memoizedState;if(a!==null){r.pending=null;var x=a=a.next;do g=e(g,x.action),x=x.next;while(x!==a);It(g,t.memoizedState)||(ht=!0),t.memoizedState=g,t.baseQueue===null&&(t.baseState=g),r.lastRenderedState=g}return[g,s]}function Yd(){}function Qd(e,t){var r=De,s=jt(),a=t(),g=!It(s.memoizedState,a);if(g&&(s.memoizedState=a,ht=!0),s=s.queue,kl(eu.bind(null,r,s,e),[e]),s.getSnapshot!==t||g||Ve!==null&&Ve.memoizedState.tag&1){if(r.flags|=2048,li(9,Zd.bind(null,r,s,a,t),void 0,null),qe===null)throw Error(ee(349));Fr&30||Jd(r,t,a)}return a}function Jd(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Zd(e,t,r,s){t.value=r,t.getSnapshot=s,tu(t)&&ru(e)}function eu(e,t,r){return r(function(){tu(t)&&ru(e)})}function tu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!It(e,r)}catch{return!0}}function ru(e){var t=sr(e,1);t!==null&&Ot(t,e,1,-1)}function Ic(e){var t=$t();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:e},t.queue=e,e=e.dispatch=Eg.bind(null,De,e),[t.memoizedState,e]}function li(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function su(){return jt().memoizedState}function Ki(e,t,r,s){var a=$t();De.flags|=e,a.memoizedState=li(1|t,r,void 0,s===void 0?null:s)}function On(e,t,r,s){var a=jt();s=s===void 0?null:s;var g=void 0;if($e!==null){var x=$e.memoizedState;if(g=x.destroy,s!==null&&wl(s,x.deps)){a.memoizedState=li(t,r,g,s);return}}De.flags|=e,a.memoizedState=li(1|t,r,g,s)}function Fc(e,t){return Ki(8390656,8,e,t)}function kl(e,t){return On(2048,8,e,t)}function iu(e,t){return On(4,2,e,t)}function nu(e,t){return On(4,4,e,t)}function ou(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function au(e,t,r){return r=r!=null?r.concat([e]):null,On(4,4,ou.bind(null,t,e),r)}function El(){}function lu(e,t){var r=jt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&wl(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function cu(e,t){var r=jt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&wl(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function hu(e,t,r){return Fr&21?(It(r,t)||(r=gd(),De.lanes|=r,Hr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=r)}function Cg(e,t){var r=Se;Se=r!==0&&4>r?r:4,e(!0);var s=ko.transition;ko.transition={};try{e(!1),t()}finally{Se=r,ko.transition=s}}function du(){return jt().memoizedState}function kg(e,t,r){var s=xr(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},uu(e))fu(t,r);else if(r=Kd(e,t,r,s),r!==null){var a=it();Ot(r,e,s,a),pu(r,t,s)}}function Eg(e,t,r){var s=xr(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(uu(e))fu(t,a);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=t.lastRenderedReducer,g!==null))try{var x=t.lastRenderedState,i=g(x,r);if(a.hasEagerState=!0,a.eagerState=i,It(i,x)){var c=t.interleaved;c===null?(a.next=a,_l(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Kd(e,t,a,s),r!==null&&(a=it(),Ot(r,e,s,a),pu(r,t,s))}}function uu(e){var t=e.alternate;return e===De||t!==null&&t===De}function fu(e,t){$s=yn=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function pu(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,sl(e,r)}}var bn={readContext:Rt,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},Lg={readContext:Rt,useCallback:function(e,t){return $t().memoizedState=[e,t===void 0?null:t],e},useContext:Rt,useEffect:Fc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ki(4194308,4,ou.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ki(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ki(4,2,e,t)},useMemo:function(e,t){var r=$t();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=$t();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=kg.bind(null,De,e),[s.memoizedState,e]},useRef:function(e){var t=$t();return e={current:e},t.memoizedState=e},useState:Ic,useDebugValue:El,useDeferredValue:function(e){return $t().memoizedState=e},useTransition:function(){var e=Ic(!1),t=e[0];return e=Cg.bind(null,e[1]),$t().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=De,a=$t();if(Ne){if(r===void 0)throw Error(ee(407));r=r()}else{if(r=t(),qe===null)throw Error(ee(349));Fr&30||Jd(s,t,r)}a.memoizedState=r;var g={value:r,getSnapshot:t};return a.queue=g,Fc(eu.bind(null,s,g,e),[e]),s.flags|=2048,li(9,Zd.bind(null,s,g,r,t),void 0,null),r},useId:function(){var e=$t(),t=qe.identifierPrefix;if(Ne){var r=Jt,s=Qt;r=(s&~(1<<32-Bt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=oi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Sg++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Rg={readContext:Rt,useCallback:lu,useContext:Rt,useEffect:kl,useImperativeHandle:au,useInsertionEffect:iu,useLayoutEffect:nu,useMemo:cu,useReducer:Eo,useRef:su,useState:function(){return Eo(ai)},useDebugValue:El,useDeferredValue:function(e){var t=jt();return hu(t,$e.memoizedState,e)},useTransition:function(){var e=Eo(ai)[0],t=jt().memoizedState;return[e,t]},useMutableSource:Yd,useSyncExternalStore:Qd,useId:du,unstable_isNewReconciler:!1},jg={readContext:Rt,useCallback:lu,useContext:Rt,useEffect:kl,useImperativeHandle:au,useInsertionEffect:iu,useLayoutEffect:nu,useMemo:cu,useReducer:Lo,useRef:su,useState:function(){return Lo(ai)},useDebugValue:El,useDeferredValue:function(e){var t=jt();return $e===null?t.memoizedState=e:hu(t,$e.memoizedState,e)},useTransition:function(){var e=Lo(ai)[0],t=jt().memoizedState;return[e,t]},useMutableSource:Yd,useSyncExternalStore:Qd,useId:du,unstable_isNewReconciler:!1};function Mt(e,t){if(e&&e.defaultProps){t=Pe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function _a(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Pe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var In={isMounted:function(e){return(e=e._reactInternals)?Vr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=it(),a=xr(e),g=Zt(s,a);g.payload=t,r!=null&&(g.callback=r),t=_r(e,g,a),t!==null&&(Ot(t,e,a,s),Vi(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=it(),a=xr(e),g=Zt(s,a);g.tag=1,g.payload=t,r!=null&&(g.callback=r),t=_r(e,g,a),t!==null&&(Ot(t,e,a,s),Vi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=it(),s=xr(e),a=Zt(r,s);a.tag=2,t!=null&&(a.callback=t),t=_r(e,a,s),t!==null&&(Ot(t,e,s,r),Vi(t,e,s))}};function Hc(e,t,r,s,a,g,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,g,x):t.prototype&&t.prototype.isPureReactComponent?!ei(r,s)||!ei(a,g):!0}function gu(e,t,r){var s=!1,a=Sr,g=t.contextType;return typeof g=="object"&&g!==null?g=Rt(g):(a=ut(t)?Or:tt.current,s=t.contextTypes,g=(s=s!=null)?fs(e,a):Sr),t=new t(r,g),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=In,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=g),t}function zc(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&In.enqueueReplaceState(t,t.state,null)}function va(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},vl(e);var g=t.contextType;typeof g=="object"&&g!==null?a.context=Rt(g):(g=ut(t)?Or:tt.current,a.context=fs(e,g)),a.state=e.memoizedState,g=t.getDerivedStateFromProps,typeof g=="function"&&(_a(e,t,g,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&In.enqueueReplaceState(a,a.state,null),vn(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function _s(e,t){try{var r="",s=t;do r+=sp(s),s=s.return;while(s);var a=r}catch(g){a=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:t,stack:a,digest:null}}function Ro(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function xa(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Ng=typeof WeakMap=="function"?WeakMap:Map;function mu(e,t,r){r=Zt(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Sn||(Sn=!0,ja=s),xa(e,t)},r}function _u(e,t,r){r=Zt(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){xa(e,t)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(r.callback=function(){xa(e,t),typeof s!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var x=t.stack;this.componentDidCatch(t.value,{componentStack:x!==null?x:""})}),r}function $c(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Ng;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=Ug.bind(null,e,t,r),t.then(e,e))}function Wc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Uc(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Zt(-1,1),t.tag=2,_r(r,t,1))),r.lanes|=1),e)}var Ag=nr.ReactCurrentOwner,ht=!1;function st(e,t,r,s){t.child=e===null?qd(t,null,r,s):gs(t,e.child,r,s)}function Vc(e,t,r,s,a){r=r.render;var g=t.ref;return hs(t,a),s=Sl(e,t,r,s,g,a),r=Cl(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ir(e,t,a)):(Ne&&r&&dl(t),t.flags|=1,st(e,t,s,a),t.child)}function qc(e,t,r,s,a){if(e===null){var g=r.type;return typeof g=="function"&&!Dl(g)&&g.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=g,vu(e,t,g,s,a)):(e=Qi(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(g=e.child,!(e.lanes&a)){var x=g.memoizedProps;if(r=r.compare,r=r!==null?r:ei,r(x,s)&&e.ref===t.ref)return ir(e,t,a)}return t.flags|=1,e=yr(g,s),e.ref=t.ref,e.return=t,t.child=e}function vu(e,t,r,s,a){if(e!==null){var g=e.memoizedProps;if(ei(g,s)&&e.ref===t.ref)if(ht=!1,t.pendingProps=s=g,(e.lanes&a)!==0)e.flags&131072&&(ht=!0);else return t.lanes=e.lanes,ir(e,t,a)}return ya(e,t,r,s,a)}function xu(e,t,r){var s=t.pendingProps,a=s.children,g=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(ns,pt),pt|=r;else{if(!(r&1073741824))return e=g!==null?g.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Le(ns,pt),pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=g!==null?g.baseLanes:r,Le(ns,pt),pt|=s}else g!==null?(s=g.baseLanes|r,t.memoizedState=null):s=r,Le(ns,pt),pt|=s;return st(e,t,a,r),t.child}function yu(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ya(e,t,r,s,a){var g=ut(r)?Or:tt.current;return g=fs(t,g),hs(t,a),r=Sl(e,t,r,s,g,a),s=Cl(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ir(e,t,a)):(Ne&&s&&dl(t),t.flags|=1,st(e,t,r,a),t.child)}function Kc(e,t,r,s,a){if(ut(r)){var g=!0;fn(t)}else g=!1;if(hs(t,a),t.stateNode===null)Gi(e,t),gu(t,r,s),va(t,r,s,a),s=!0;else if(e===null){var x=t.stateNode,i=t.memoizedProps;x.props=i;var c=x.context,f=r.contextType;typeof f=="object"&&f!==null?f=Rt(f):(f=ut(r)?Or:tt.current,f=fs(t,f));var _=r.getDerivedStateFromProps,u=typeof _=="function"||typeof x.getSnapshotBeforeUpdate=="function";u||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(i!==s||c!==f)&&zc(t,x,s,f),lr=!1;var m=t.memoizedState;x.state=m,vn(t,s,x,a),c=t.memoizedState,i!==s||m!==c||dt.current||lr?(typeof _=="function"&&(_a(t,r,_,s),c=t.memoizedState),(i=lr||Hc(t,r,i,s,m,c,f))?(u||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(t.flags|=4194308)):(typeof x.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),x.props=s,x.state=c,x.context=f,s=i):(typeof x.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{x=t.stateNode,Gd(e,t),i=t.memoizedProps,f=t.type===t.elementType?i:Mt(t.type,i),x.props=f,u=t.pendingProps,m=x.context,c=r.contextType,typeof c=="object"&&c!==null?c=Rt(c):(c=ut(r)?Or:tt.current,c=fs(t,c));var S=r.getDerivedStateFromProps;(_=typeof S=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(i!==u||m!==c)&&zc(t,x,s,c),lr=!1,m=t.memoizedState,x.state=m,vn(t,s,x,a);var w=t.memoizedState;i!==u||m!==w||dt.current||lr?(typeof S=="function"&&(_a(t,r,S,s),w=t.memoizedState),(f=lr||Hc(t,r,f,s,m,w,c)||!1)?(_||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(s,w,c),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(s,w,c)),typeof x.componentDidUpdate=="function"&&(t.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof x.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=w),x.props=s,x.state=w,x.context=c,s=f):(typeof x.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return ba(e,t,r,s,g,a)}function ba(e,t,r,s,a,g){yu(e,t);var x=(t.flags&128)!==0;if(!s&&!x)return a&&Mc(t,r,!1),ir(e,t,g);s=t.stateNode,Ag.current=t;var i=x&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&x?(t.child=gs(t,e.child,null,g),t.child=gs(t,null,i,g)):st(e,t,i,g),t.memoizedState=s.state,a&&Mc(t,r,!0),t.child}function bu(e){var t=e.stateNode;t.pendingContext?Ac(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ac(e,t.context,!1),xl(e,t.containerInfo)}function Gc(e,t,r,s,a){return ps(),fl(a),t.flags|=256,st(e,t,r,s),t.child}var wa={dehydrated:null,treeContext:null,retryLane:0};function Sa(e){return{baseLanes:e,cachePool:null,transitions:null}}function wu(e,t,r){var s=t.pendingProps,a=Te.current,g=!1,x=(t.flags&128)!==0,i;if((i=x)||(i=e!==null&&e.memoizedState===null?!1:(a&2)!==0),i?(g=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Le(Te,a&1),e===null)return ga(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(x=s.children,e=s.fallback,g?(s=t.mode,g=t.child,x={mode:"hidden",children:x},!(s&1)&&g!==null?(g.childLanes=0,g.pendingProps=x):g=zn(x,s,0,null),e=Pr(e,s,r,null),g.return=t,e.return=t,g.sibling=e,t.child=g,t.child.memoizedState=Sa(r),t.memoizedState=wa,e):Ll(t,x));if(a=e.memoizedState,a!==null&&(i=a.dehydrated,i!==null))return Mg(e,t,x,s,i,a,r);if(g){g=s.fallback,x=t.mode,a=e.child,i=a.sibling;var c={mode:"hidden",children:s.children};return!(x&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=yr(a,c),s.subtreeFlags=a.subtreeFlags&14680064),i!==null?g=yr(i,g):(g=Pr(g,x,r,null),g.flags|=2),g.return=t,s.return=t,s.sibling=g,t.child=s,s=g,g=t.child,x=e.child.memoizedState,x=x===null?Sa(r):{baseLanes:x.baseLanes|r,cachePool:null,transitions:x.transitions},g.memoizedState=x,g.childLanes=e.childLanes&~r,t.memoizedState=wa,s}return g=e.child,e=g.sibling,s=yr(g,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Ll(e,t){return t=zn({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Mi(e,t,r,s){return s!==null&&fl(s),gs(t,e.child,null,r),e=Ll(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Mg(e,t,r,s,a,g,x){if(r)return t.flags&256?(t.flags&=-257,s=Ro(Error(ee(422))),Mi(e,t,x,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(g=s.fallback,a=t.mode,s=zn({mode:"visible",children:s.children},a,0,null),g=Pr(g,a,x,null),g.flags|=2,s.return=t,g.return=t,s.sibling=g,t.child=s,t.mode&1&&gs(t,e.child,null,x),t.child.memoizedState=Sa(x),t.memoizedState=wa,g);if(!(t.mode&1))return Mi(e,t,x,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var i=s.dgst;return s=i,g=Error(ee(419)),s=Ro(g,s,void 0),Mi(e,t,x,s)}if(i=(x&e.childLanes)!==0,ht||i){if(s=qe,s!==null){switch(x&-x){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|x)?0:a,a!==0&&a!==g.retryLane&&(g.retryLane=a,sr(e,a),Ot(s,e,a,-1))}return Tl(),s=Ro(Error(ee(421))),Mi(e,t,x,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Vg.bind(null,e),a._reactRetry=t,null):(e=g.treeContext,gt=mr(a.nextSibling),mt=t,Ne=!0,Pt=null,e!==null&&(bt[wt++]=Qt,bt[wt++]=Jt,bt[wt++]=Ir,Qt=e.id,Jt=e.overflow,Ir=t),t=Ll(t,s.children),t.flags|=4096,t)}function Xc(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ma(e.return,t,r)}function jo(e,t,r,s,a){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=s,g.tail=r,g.tailMode=a)}function Su(e,t,r){var s=t.pendingProps,a=s.revealOrder,g=s.tail;if(st(e,t,s.children,r),s=Te.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xc(e,r,t);else if(e.tag===19)Xc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Le(Te,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&xn(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),jo(t,!1,a,r,g);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&xn(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}jo(t,!0,r,null,g);break;case"together":jo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ir(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Hr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ee(153));if(t.child!==null){for(e=t.child,r=yr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=yr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Tg(e,t,r){switch(t.tag){case 3:bu(t),ps();break;case 5:Xd(t);break;case 1:ut(t.type)&&fn(t);break;case 4:xl(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Le(mn,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Le(Te,Te.current&1),t.flags|=128,null):r&t.child.childLanes?wu(e,t,r):(Le(Te,Te.current&1),e=ir(e,t,r),e!==null?e.sibling:null);Le(Te,Te.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Su(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Le(Te,Te.current),s)break;return null;case 22:case 23:return t.lanes=0,xu(e,t,r)}return ir(e,t,r)}var Cu,Ca,ku,Eu;Cu=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ca=function(){};ku=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Tr(qt.current);var g=null;switch(r){case"input":a=qo(e,a),s=qo(e,s),g=[];break;case"select":a=Pe({},a,{value:void 0}),s=Pe({},s,{value:void 0}),g=[];break;case"textarea":a=Xo(e,a),s=Xo(e,s),g=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=dn)}Qo(r,s);var x;r=null;for(f in a)if(!s.hasOwnProperty(f)&&a.hasOwnProperty(f)&&a[f]!=null)if(f==="style"){var i=a[f];for(x in i)i.hasOwnProperty(x)&&(r||(r={}),r[x]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Ks.hasOwnProperty(f)?g||(g=[]):(g=g||[]).push(f,null));for(f in s){var c=s[f];if(i=a!=null?a[f]:void 0,s.hasOwnProperty(f)&&c!==i&&(c!=null||i!=null))if(f==="style")if(i){for(x in i)!i.hasOwnProperty(x)||c&&c.hasOwnProperty(x)||(r||(r={}),r[x]="");for(x in c)c.hasOwnProperty(x)&&i[x]!==c[x]&&(r||(r={}),r[x]=c[x])}else r||(g||(g=[]),g.push(f,r)),r=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(g=g||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(g=g||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Ks.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&Re("scroll",e),g||i===c||(g=[])):(g=g||[]).push(f,c))}r&&(g=g||[]).push("style",r);var f=g;(t.updateQueue=f)&&(t.flags|=4)}};Eu=function(e,t,r,s){r!==s&&(t.flags|=4)};function js(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Dg(e,t,r){var s=t.pendingProps;switch(ul(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return ut(t.type)&&un(),Ze(t),null;case 3:return s=t.stateNode,ms(),je(dt),je(tt),bl(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ni(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pt!==null&&(Ma(Pt),Pt=null))),Ca(e,t),Ze(t),null;case 5:yl(t);var a=Tr(ni.current);if(r=t.type,e!==null&&t.stateNode!=null)ku(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(ee(166));return Ze(t),null}if(e=Tr(qt.current),Ni(t)){s=t.stateNode,r=t.type;var g=t.memoizedProps;switch(s[Wt]=t,s[si]=g,e=(t.mode&1)!==0,r){case"dialog":Re("cancel",s),Re("close",s);break;case"iframe":case"object":case"embed":Re("load",s);break;case"video":case"audio":for(a=0;a<Ps.length;a++)Re(Ps[a],s);break;case"source":Re("error",s);break;case"img":case"image":case"link":Re("error",s),Re("load",s);break;case"details":Re("toggle",s);break;case"input":ic(s,g),Re("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!g.multiple},Re("invalid",s);break;case"textarea":oc(s,g),Re("invalid",s)}Qo(r,g),a=null;for(var x in g)if(g.hasOwnProperty(x)){var i=g[x];x==="children"?typeof i=="string"?s.textContent!==i&&(g.suppressHydrationWarning!==!0&&ji(s.textContent,i,e),a=["children",i]):typeof i=="number"&&s.textContent!==""+i&&(g.suppressHydrationWarning!==!0&&ji(s.textContent,i,e),a=["children",""+i]):Ks.hasOwnProperty(x)&&i!=null&&x==="onScroll"&&Re("scroll",s)}switch(r){case"input":bi(s),nc(s,g,!0);break;case"textarea":bi(s),ac(s);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(s.onclick=dn)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{x=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ed(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=x.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=x.createElement(r,{is:s.is}):(e=x.createElement(r),r==="select"&&(x=e,s.multiple?x.multiple=!0:s.size&&(x.size=s.size))):e=x.createElementNS(e,r),e[Wt]=t,e[si]=s,Cu(e,t,!1,!1),t.stateNode=e;e:{switch(x=Jo(r,s),r){case"dialog":Re("cancel",e),Re("close",e),a=s;break;case"iframe":case"object":case"embed":Re("load",e),a=s;break;case"video":case"audio":for(a=0;a<Ps.length;a++)Re(Ps[a],e);a=s;break;case"source":Re("error",e),a=s;break;case"img":case"image":case"link":Re("error",e),Re("load",e),a=s;break;case"details":Re("toggle",e),a=s;break;case"input":ic(e,s),a=qo(e,s),Re("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Pe({},s,{value:void 0}),Re("invalid",e);break;case"textarea":oc(e,s),a=Xo(e,s),Re("invalid",e);break;default:a=s}Qo(r,a),i=a;for(g in i)if(i.hasOwnProperty(g)){var c=i[g];g==="style"?sd(e,c):g==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&td(e,c)):g==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Gs(e,c):typeof c=="number"&&Gs(e,""+c):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Ks.hasOwnProperty(g)?c!=null&&g==="onScroll"&&Re("scroll",e):c!=null&&Qa(e,g,c,x))}switch(r){case"input":bi(e),nc(e,s,!1);break;case"textarea":bi(e),ac(e);break;case"option":s.value!=null&&e.setAttribute("value",""+wr(s.value));break;case"select":e.multiple=!!s.multiple,g=s.value,g!=null?os(e,!!s.multiple,g,!1):s.defaultValue!=null&&os(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=dn)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ze(t),null;case 6:if(e&&t.stateNode!=null)Eu(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(ee(166));if(r=Tr(ni.current),Tr(qt.current),Ni(t)){if(s=t.stateNode,r=t.memoizedProps,s[Wt]=t,(g=s.nodeValue!==r)&&(e=mt,e!==null))switch(e.tag){case 3:ji(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ji(s.nodeValue,r,(e.mode&1)!==0)}g&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Wt]=t,t.stateNode=s}return Ze(t),null;case 13:if(je(Te),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&gt!==null&&t.mode&1&&!(t.flags&128))Ud(),ps(),t.flags|=98560,g=!1;else if(g=Ni(t),s!==null&&s.dehydrated!==null){if(e===null){if(!g)throw Error(ee(318));if(g=t.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(ee(317));g[Wt]=t}else ps(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ze(t),g=!1}else Pt!==null&&(Ma(Pt),Pt=null),g=!0;if(!g)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Te.current&1?We===0&&(We=3):Tl())),t.updateQueue!==null&&(t.flags|=4),Ze(t),null);case 4:return ms(),Ca(e,t),e===null&&ti(t.stateNode.containerInfo),Ze(t),null;case 10:return ml(t.type._context),Ze(t),null;case 17:return ut(t.type)&&un(),Ze(t),null;case 19:if(je(Te),g=t.memoizedState,g===null)return Ze(t),null;if(s=(t.flags&128)!==0,x=g.rendering,x===null)if(s)js(g,!1);else{if(We!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(x=xn(e),x!==null){for(t.flags|=128,js(g,!1),s=x.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)g=r,e=s,g.flags&=14680066,x=g.alternate,x===null?(g.childLanes=0,g.lanes=e,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=x.childLanes,g.lanes=x.lanes,g.child=x.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=x.memoizedProps,g.memoizedState=x.memoizedState,g.updateQueue=x.updateQueue,g.type=x.type,e=x.dependencies,g.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Le(Te,Te.current&1|2),t.child}e=e.sibling}g.tail!==null&&Ie()>vs&&(t.flags|=128,s=!0,js(g,!1),t.lanes=4194304)}else{if(!s)if(e=xn(x),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),js(g,!0),g.tail===null&&g.tailMode==="hidden"&&!x.alternate&&!Ne)return Ze(t),null}else 2*Ie()-g.renderingStartTime>vs&&r!==1073741824&&(t.flags|=128,s=!0,js(g,!1),t.lanes=4194304);g.isBackwards?(x.sibling=t.child,t.child=x):(r=g.last,r!==null?r.sibling=x:t.child=x,g.last=x)}return g.tail!==null?(t=g.tail,g.rendering=t,g.tail=t.sibling,g.renderingStartTime=Ie(),t.sibling=null,r=Te.current,Le(Te,s?r&1|2:r&1),t):(Ze(t),null);case 22:case 23:return Ml(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?pt&1073741824&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),null;case 24:return null;case 25:return null}throw Error(ee(156,t.tag))}function Pg(e,t){switch(ul(t),t.tag){case 1:return ut(t.type)&&un(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ms(),je(dt),je(tt),bl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return yl(t),null;case 13:if(je(Te),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ee(340));ps()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return je(Te),null;case 4:return ms(),null;case 10:return ml(t.type._context),null;case 22:case 23:return Ml(),null;case 24:return null;default:return null}}var Ti=!1,et=!1,Bg=typeof WeakSet=="function"?WeakSet:Set,le=null;function is(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Oe(e,t,s)}else r.current=null}function ka(e,t,r){try{r()}catch(s){Oe(e,t,s)}}var Yc=!1;function Og(e,t){if(la=ln,e=Ad(),hl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,g=s.focusNode;s=s.focusOffset;try{r.nodeType,g.nodeType}catch{r=null;break e}var x=0,i=-1,c=-1,f=0,_=0,u=e,m=null;t:for(;;){for(var S;u!==r||a!==0&&u.nodeType!==3||(i=x+a),u!==g||s!==0&&u.nodeType!==3||(c=x+s),u.nodeType===3&&(x+=u.nodeValue.length),(S=u.firstChild)!==null;)m=u,u=S;for(;;){if(u===e)break t;if(m===r&&++f===a&&(i=x),m===g&&++_===s&&(c=x),(S=u.nextSibling)!==null)break;u=m,m=u.parentNode}u=S}r=i===-1||c===-1?null:{start:i,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ca={focusedElem:e,selectionRange:r},ln=!1,le=t;le!==null;)if(t=le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,le=e;else for(;le!==null;){t=le;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var p=w.memoizedProps,n=w.memoizedState,l=t.stateNode,h=l.getSnapshotBeforeUpdate(t.elementType===t.type?p:Mt(t.type,p),n);l.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var d=t.stateNode.containerInfo;d.nodeType===1?d.textContent="":d.nodeType===9&&d.documentElement&&d.removeChild(d.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(v){Oe(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,le=e;break}le=t.return}return w=Yc,Yc=!1,w}function Ws(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var g=a.destroy;a.destroy=void 0,g!==void 0&&ka(t,r,g)}a=a.next}while(a!==s)}}function Fn(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Ea(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Lu(e){var t=e.alternate;t!==null&&(e.alternate=null,Lu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wt],delete t[si],delete t[ua],delete t[xg],delete t[yg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ru(e){return e.tag===5||e.tag===3||e.tag===4}function Qc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ru(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function La(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=dn));else if(s!==4&&(e=e.child,e!==null))for(La(e,t,r),e=e.sibling;e!==null;)La(e,t,r),e=e.sibling}function Ra(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Ra(e,t,r),e=e.sibling;e!==null;)Ra(e,t,r),e=e.sibling}var Ge=null,Tt=!1;function or(e,t,r){for(r=r.child;r!==null;)ju(e,t,r),r=r.sibling}function ju(e,t,r){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(An,r)}catch{}switch(r.tag){case 5:et||is(r,t);case 6:var s=Ge,a=Tt;Ge=null,or(e,t,r),Ge=s,Tt=a,Ge!==null&&(Tt?(e=Ge,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ge.removeChild(r.stateNode));break;case 18:Ge!==null&&(Tt?(e=Ge,r=r.stateNode,e.nodeType===8?wo(e.parentNode,r):e.nodeType===1&&wo(e,r),Js(e)):wo(Ge,r.stateNode));break;case 4:s=Ge,a=Tt,Ge=r.stateNode.containerInfo,Tt=!0,or(e,t,r),Ge=s,Tt=a;break;case 0:case 11:case 14:case 15:if(!et&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var g=a,x=g.destroy;g=g.tag,x!==void 0&&(g&2||g&4)&&ka(r,t,x),a=a.next}while(a!==s)}or(e,t,r);break;case 1:if(!et&&(is(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(i){Oe(r,t,i)}or(e,t,r);break;case 21:or(e,t,r);break;case 22:r.mode&1?(et=(s=et)||r.memoizedState!==null,or(e,t,r),et=s):or(e,t,r);break;default:or(e,t,r)}}function Jc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Bg),t.forEach(function(s){var a=qg.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function At(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var g=e,x=t,i=x;e:for(;i!==null;){switch(i.tag){case 5:Ge=i.stateNode,Tt=!1;break e;case 3:Ge=i.stateNode.containerInfo,Tt=!0;break e;case 4:Ge=i.stateNode.containerInfo,Tt=!0;break e}i=i.return}if(Ge===null)throw Error(ee(160));ju(g,x,a),Ge=null,Tt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(f){Oe(a,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Nu(t,e),t=t.sibling}function Nu(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(At(t,e),zt(e),s&4){try{Ws(3,e,e.return),Fn(3,e)}catch(p){Oe(e,e.return,p)}try{Ws(5,e,e.return)}catch(p){Oe(e,e.return,p)}}break;case 1:At(t,e),zt(e),s&512&&r!==null&&is(r,r.return);break;case 5:if(At(t,e),zt(e),s&512&&r!==null&&is(r,r.return),e.flags&32){var a=e.stateNode;try{Gs(a,"")}catch(p){Oe(e,e.return,p)}}if(s&4&&(a=e.stateNode,a!=null)){var g=e.memoizedProps,x=r!==null?r.memoizedProps:g,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&g.type==="radio"&&g.name!=null&&Jh(a,g),Jo(i,x);var f=Jo(i,g);for(x=0;x<c.length;x+=2){var _=c[x],u=c[x+1];_==="style"?sd(a,u):_==="dangerouslySetInnerHTML"?td(a,u):_==="children"?Gs(a,u):Qa(a,_,u,f)}switch(i){case"input":Ko(a,g);break;case"textarea":Zh(a,g);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!g.multiple;var S=g.value;S!=null?os(a,!!g.multiple,S,!1):m!==!!g.multiple&&(g.defaultValue!=null?os(a,!!g.multiple,g.defaultValue,!0):os(a,!!g.multiple,g.multiple?[]:"",!1))}a[si]=g}catch(p){Oe(e,e.return,p)}}break;case 6:if(At(t,e),zt(e),s&4){if(e.stateNode===null)throw Error(ee(162));a=e.stateNode,g=e.memoizedProps;try{a.nodeValue=g}catch(p){Oe(e,e.return,p)}}break;case 3:if(At(t,e),zt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Js(t.containerInfo)}catch(p){Oe(e,e.return,p)}break;case 4:At(t,e),zt(e);break;case 13:At(t,e),zt(e),a=e.child,a.flags&8192&&(g=a.memoizedState!==null,a.stateNode.isHidden=g,!g||a.alternate!==null&&a.alternate.memoizedState!==null||(Nl=Ie())),s&4&&Jc(e);break;case 22:if(_=r!==null&&r.memoizedState!==null,e.mode&1?(et=(f=et)||_,At(t,e),et=f):At(t,e),zt(e),s&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!_&&e.mode&1)for(le=e,_=e.child;_!==null;){for(u=le=_;le!==null;){switch(m=le,S=m.child,m.tag){case 0:case 11:case 14:case 15:Ws(4,m,m.return);break;case 1:is(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){s=m,r=m.return;try{t=s,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(p){Oe(s,r,p)}}break;case 5:is(m,m.return);break;case 22:if(m.memoizedState!==null){eh(u);continue}}S!==null?(S.return=m,le=S):eh(u)}_=_.sibling}e:for(_=null,u=e;;){if(u.tag===5){if(_===null){_=u;try{a=u.stateNode,f?(g=a.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(i=u.stateNode,c=u.memoizedProps.style,x=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=rd("display",x))}catch(p){Oe(e,e.return,p)}}}else if(u.tag===6){if(_===null)try{u.stateNode.nodeValue=f?"":u.memoizedProps}catch(p){Oe(e,e.return,p)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;_===u&&(_=null),u=u.return}_===u&&(_=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:At(t,e),zt(e),s&4&&Jc(e);break;case 21:break;default:At(t,e),zt(e)}}function zt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Ru(r)){var s=r;break e}r=r.return}throw Error(ee(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Gs(a,""),s.flags&=-33);var g=Qc(e);Ra(e,g,a);break;case 3:case 4:var x=s.stateNode.containerInfo,i=Qc(e);La(e,i,x);break;default:throw Error(ee(161))}}catch(c){Oe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ig(e,t,r){le=e,Au(e)}function Au(e,t,r){for(var s=(e.mode&1)!==0;le!==null;){var a=le,g=a.child;if(a.tag===22&&s){var x=a.memoizedState!==null||Ti;if(!x){var i=a.alternate,c=i!==null&&i.memoizedState!==null||et;i=Ti;var f=et;if(Ti=x,(et=c)&&!f)for(le=a;le!==null;)x=le,c=x.child,x.tag===22&&x.memoizedState!==null?th(a):c!==null?(c.return=x,le=c):th(a);for(;g!==null;)le=g,Au(g),g=g.sibling;le=a,Ti=i,et=f}Zc(e)}else a.subtreeFlags&8772&&g!==null?(g.return=a,le=g):Zc(e)}}function Zc(e){for(;le!==null;){var t=le;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:et||Fn(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!et)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Mt(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var g=t.updateQueue;g!==null&&Oc(t,g,s);break;case 3:var x=t.updateQueue;if(x!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Oc(t,x,r)}break;case 5:var i=t.stateNode;if(r===null&&t.flags&4){r=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var _=f.memoizedState;if(_!==null){var u=_.dehydrated;u!==null&&Js(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}et||t.flags&512&&Ea(t)}catch(m){Oe(t,t.return,m)}}if(t===e){le=null;break}if(r=t.sibling,r!==null){r.return=t.return,le=r;break}le=t.return}}function eh(e){for(;le!==null;){var t=le;if(t===e){le=null;break}var r=t.sibling;if(r!==null){r.return=t.return,le=r;break}le=t.return}}function th(e){for(;le!==null;){var t=le;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Fn(4,t)}catch(c){Oe(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){Oe(t,a,c)}}var g=t.return;try{Ea(t)}catch(c){Oe(t,g,c)}break;case 5:var x=t.return;try{Ea(t)}catch(c){Oe(t,x,c)}}}catch(c){Oe(t,t.return,c)}if(t===e){le=null;break}var i=t.sibling;if(i!==null){i.return=t.return,le=i;break}le=t.return}}var Fg=Math.ceil,wn=nr.ReactCurrentDispatcher,Rl=nr.ReactCurrentOwner,kt=nr.ReactCurrentBatchConfig,xe=0,qe=null,Fe=null,Xe=0,pt=0,ns=Er(0),We=0,ci=null,Hr=0,Hn=0,jl=0,Us=null,ct=null,Nl=0,vs=1/0,Xt=null,Sn=!1,ja=null,vr=null,Di=!1,ur=null,Cn=0,Vs=0,Na=null,Xi=-1,Yi=0;function it(){return xe&6?Ie():Xi!==-1?Xi:Xi=Ie()}function xr(e){return e.mode&1?xe&2&&Xe!==0?Xe&-Xe:wg.transition!==null?(Yi===0&&(Yi=gd()),Yi):(e=Se,e!==0||(e=window.event,e=e===void 0?16:wd(e.type)),e):1}function Ot(e,t,r,s){if(50<Vs)throw Vs=0,Na=null,Error(ee(185));fi(e,r,s),(!(xe&2)||e!==qe)&&(e===qe&&(!(xe&2)&&(Hn|=r),We===4&&hr(e,Xe)),ft(e,s),r===1&&xe===0&&!(t.mode&1)&&(vs=Ie()+500,Bn&&Lr()))}function ft(e,t){var r=e.callbackNode;wp(e,t);var s=an(e,e===qe?Xe:0);if(s===0)r!==null&&hc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&hc(r),t===1)e.tag===0?bg(rh.bind(null,e)):zd(rh.bind(null,e)),_g(function(){!(xe&6)&&Lr()}),r=null;else{switch(md(s)){case 1:r=rl;break;case 4:r=fd;break;case 16:r=on;break;case 536870912:r=pd;break;default:r=on}r=Fu(r,Mu.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Mu(e,t){if(Xi=-1,Yi=0,xe&6)throw Error(ee(327));var r=e.callbackNode;if(ds()&&e.callbackNode!==r)return null;var s=an(e,e===qe?Xe:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=kn(e,s);else{t=s;var a=xe;xe|=2;var g=Du();(qe!==e||Xe!==t)&&(Xt=null,vs=Ie()+500,Dr(e,t));do try{$g();break}catch(i){Tu(e,i)}while(!0);gl(),wn.current=g,xe=a,Fe!==null?t=0:(qe=null,Xe=0,t=We)}if(t!==0){if(t===2&&(a=sa(e),a!==0&&(s=a,t=Aa(e,a))),t===1)throw r=ci,Dr(e,0),hr(e,s),ft(e,Ie()),r;if(t===6)hr(e,s);else{if(a=e.current.alternate,!(s&30)&&!Hg(a)&&(t=kn(e,s),t===2&&(g=sa(e),g!==0&&(s=g,t=Aa(e,g))),t===1))throw r=ci,Dr(e,0),hr(e,s),ft(e,Ie()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(ee(345));case 2:Nr(e,ct,Xt);break;case 3:if(hr(e,s),(s&130023424)===s&&(t=Nl+500-Ie(),10<t)){if(an(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){it(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=da(Nr.bind(null,e,ct,Xt),t);break}Nr(e,ct,Xt);break;case 4:if(hr(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var x=31-Bt(s);g=1<<x,x=t[x],x>a&&(a=x),s&=~g}if(s=a,s=Ie()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Fg(s/1960))-s,10<s){e.timeoutHandle=da(Nr.bind(null,e,ct,Xt),s);break}Nr(e,ct,Xt);break;case 5:Nr(e,ct,Xt);break;default:throw Error(ee(329))}}}return ft(e,Ie()),e.callbackNode===r?Mu.bind(null,e):null}function Aa(e,t){var r=Us;return e.current.memoizedState.isDehydrated&&(Dr(e,t).flags|=256),e=kn(e,t),e!==2&&(t=ct,ct=r,t!==null&&Ma(t)),e}function Ma(e){ct===null?ct=e:ct.push.apply(ct,e)}function Hg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],g=a.getSnapshot;a=a.value;try{if(!It(g(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hr(e,t){for(t&=~jl,t&=~Hn,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Bt(t),s=1<<r;e[r]=-1,t&=~s}}function rh(e){if(xe&6)throw Error(ee(327));ds();var t=an(e,0);if(!(t&1))return ft(e,Ie()),null;var r=kn(e,t);if(e.tag!==0&&r===2){var s=sa(e);s!==0&&(t=s,r=Aa(e,s))}if(r===1)throw r=ci,Dr(e,0),hr(e,t),ft(e,Ie()),r;if(r===6)throw Error(ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nr(e,ct,Xt),ft(e,Ie()),null}function Al(e,t){var r=xe;xe|=1;try{return e(t)}finally{xe=r,xe===0&&(vs=Ie()+500,Bn&&Lr())}}function zr(e){ur!==null&&ur.tag===0&&!(xe&6)&&ds();var t=xe;xe|=1;var r=kt.transition,s=Se;try{if(kt.transition=null,Se=1,e)return e()}finally{Se=s,kt.transition=r,xe=t,!(xe&6)&&Lr()}}function Ml(){pt=ns.current,je(ns)}function Dr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,mg(r)),Fe!==null)for(r=Fe.return;r!==null;){var s=r;switch(ul(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&un();break;case 3:ms(),je(dt),je(tt),bl();break;case 5:yl(s);break;case 4:ms();break;case 13:je(Te);break;case 19:je(Te);break;case 10:ml(s.type._context);break;case 22:case 23:Ml()}r=r.return}if(qe=e,Fe=e=yr(e.current,null),Xe=pt=t,We=0,ci=null,jl=Hn=Hr=0,ct=Us=null,Mr!==null){for(t=0;t<Mr.length;t++)if(r=Mr[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,g=r.pending;if(g!==null){var x=g.next;g.next=a,s.next=x}r.pending=s}Mr=null}return e}function Tu(e,t){do{var r=Fe;try{if(gl(),qi.current=bn,yn){for(var s=De.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}yn=!1}if(Fr=0,Ve=$e=De=null,$s=!1,oi=0,Rl.current=null,r===null||r.return===null){We=1,ci=t,Fe=null;break}e:{var g=e,x=r.return,i=r,c=t;if(t=Xe,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,_=i,u=_.tag;if(!(_.mode&1)&&(u===0||u===11||u===15)){var m=_.alternate;m?(_.updateQueue=m.updateQueue,_.memoizedState=m.memoizedState,_.lanes=m.lanes):(_.updateQueue=null,_.memoizedState=null)}var S=Wc(x);if(S!==null){S.flags&=-257,Uc(S,x,i,g,t),S.mode&1&&$c(g,f,t),t=S,c=f;var w=t.updateQueue;if(w===null){var p=new Set;p.add(c),t.updateQueue=p}else w.add(c);break e}else{if(!(t&1)){$c(g,f,t),Tl();break e}c=Error(ee(426))}}else if(Ne&&i.mode&1){var n=Wc(x);if(n!==null){!(n.flags&65536)&&(n.flags|=256),Uc(n,x,i,g,t),fl(_s(c,i));break e}}g=c=_s(c,i),We!==4&&(We=2),Us===null?Us=[g]:Us.push(g),g=x;do{switch(g.tag){case 3:g.flags|=65536,t&=-t,g.lanes|=t;var l=mu(g,c,t);Bc(g,l);break e;case 1:i=c;var h=g.type,d=g.stateNode;if(!(g.flags&128)&&(typeof h.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(vr===null||!vr.has(d)))){g.flags|=65536,t&=-t,g.lanes|=t;var v=_u(g,i,t);Bc(g,v);break e}}g=g.return}while(g!==null)}Bu(r)}catch(y){t=y,Fe===r&&r!==null&&(Fe=r=r.return);continue}break}while(!0)}function Du(){var e=wn.current;return wn.current=bn,e===null?bn:e}function Tl(){(We===0||We===3||We===2)&&(We=4),qe===null||!(Hr&268435455)&&!(Hn&268435455)||hr(qe,Xe)}function kn(e,t){var r=xe;xe|=2;var s=Du();(qe!==e||Xe!==t)&&(Xt=null,Dr(e,t));do try{zg();break}catch(a){Tu(e,a)}while(!0);if(gl(),xe=r,wn.current=s,Fe!==null)throw Error(ee(261));return qe=null,Xe=0,We}function zg(){for(;Fe!==null;)Pu(Fe)}function $g(){for(;Fe!==null&&!fp();)Pu(Fe)}function Pu(e){var t=Iu(e.alternate,e,pt);e.memoizedProps=e.pendingProps,t===null?Bu(e):Fe=t,Rl.current=null}function Bu(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Pg(r,t),r!==null){r.flags&=32767,Fe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{We=6,Fe=null;return}}else if(r=Dg(r,t,pt),r!==null){Fe=r;return}if(t=t.sibling,t!==null){Fe=t;return}Fe=t=e}while(t!==null);We===0&&(We=5)}function Nr(e,t,r){var s=Se,a=kt.transition;try{kt.transition=null,Se=1,Wg(e,t,r,s)}finally{kt.transition=a,Se=s}return null}function Wg(e,t,r,s){do ds();while(ur!==null);if(xe&6)throw Error(ee(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ee(177));e.callbackNode=null,e.callbackPriority=0;var g=r.lanes|r.childLanes;if(Sp(e,g),e===qe&&(Fe=qe=null,Xe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Di||(Di=!0,Fu(on,function(){return ds(),null})),g=(r.flags&15990)!==0,r.subtreeFlags&15990||g){g=kt.transition,kt.transition=null;var x=Se;Se=1;var i=xe;xe|=4,Rl.current=null,Og(e,r),Nu(r,e),cg(ca),ln=!!la,ca=la=null,e.current=r,Ig(r),pp(),xe=i,Se=x,kt.transition=g}else e.current=r;if(Di&&(Di=!1,ur=e,Cn=a),g=e.pendingLanes,g===0&&(vr=null),_p(r.stateNode),ft(e,Ie()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(Sn)throw Sn=!1,e=ja,ja=null,e;return Cn&1&&e.tag!==0&&ds(),g=e.pendingLanes,g&1?e===Na?Vs++:(Vs=0,Na=e):Vs=0,Lr(),null}function ds(){if(ur!==null){var e=md(Cn),t=kt.transition,r=Se;try{if(kt.transition=null,Se=16>e?16:e,ur===null)var s=!1;else{if(e=ur,ur=null,Cn=0,xe&6)throw Error(ee(331));var a=xe;for(xe|=4,le=e.current;le!==null;){var g=le,x=g.child;if(le.flags&16){var i=g.deletions;if(i!==null){for(var c=0;c<i.length;c++){var f=i[c];for(le=f;le!==null;){var _=le;switch(_.tag){case 0:case 11:case 15:Ws(8,_,g)}var u=_.child;if(u!==null)u.return=_,le=u;else for(;le!==null;){_=le;var m=_.sibling,S=_.return;if(Lu(_),_===f){le=null;break}if(m!==null){m.return=S,le=m;break}le=S}}}var w=g.alternate;if(w!==null){var p=w.child;if(p!==null){w.child=null;do{var n=p.sibling;p.sibling=null,p=n}while(p!==null)}}le=g}}if(g.subtreeFlags&2064&&x!==null)x.return=g,le=x;else e:for(;le!==null;){if(g=le,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Ws(9,g,g.return)}var l=g.sibling;if(l!==null){l.return=g.return,le=l;break e}le=g.return}}var h=e.current;for(le=h;le!==null;){x=le;var d=x.child;if(x.subtreeFlags&2064&&d!==null)d.return=x,le=d;else e:for(x=h;le!==null;){if(i=le,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Fn(9,i)}}catch(y){Oe(i,i.return,y)}if(i===x){le=null;break e}var v=i.sibling;if(v!==null){v.return=i.return,le=v;break e}le=i.return}}if(xe=a,Lr(),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(An,e)}catch{}s=!0}return s}finally{Se=r,kt.transition=t}}return!1}function sh(e,t,r){t=_s(r,t),t=mu(e,t,1),e=_r(e,t,1),t=it(),e!==null&&(fi(e,1,t),ft(e,t))}function Oe(e,t,r){if(e.tag===3)sh(e,e,r);else for(;t!==null;){if(t.tag===3){sh(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(vr===null||!vr.has(s))){e=_s(r,e),e=_u(t,e,1),t=_r(t,e,1),e=it(),t!==null&&(fi(t,1,e),ft(t,e));break}}t=t.return}}function Ug(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&r,qe===e&&(Xe&r)===r&&(We===4||We===3&&(Xe&130023424)===Xe&&500>Ie()-Nl?Dr(e,0):jl|=r),ft(e,t)}function Ou(e,t){t===0&&(e.mode&1?(t=Ci,Ci<<=1,!(Ci&130023424)&&(Ci=4194304)):t=1);var r=it();e=sr(e,t),e!==null&&(fi(e,t,r),ft(e,r))}function Vg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Ou(e,r)}function qg(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(ee(314))}s!==null&&s.delete(t),Ou(e,r)}var Iu;Iu=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||dt.current)ht=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ht=!1,Tg(e,t,r);ht=!!(e.flags&131072)}else ht=!1,Ne&&t.flags&1048576&&$d(t,gn,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Gi(e,t),e=t.pendingProps;var a=fs(t,tt.current);hs(t,r),a=Sl(null,t,s,e,a,r);var g=Cl();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ut(s)?(g=!0,fn(t)):g=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,vl(t),a.updater=In,t.stateNode=a,a._reactInternals=t,va(t,s,e,r),t=ba(null,t,s,!0,g,r)):(t.tag=0,Ne&&g&&dl(t),st(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Gi(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=Gg(s),e=Mt(s,e),a){case 0:t=ya(null,t,s,e,r);break e;case 1:t=Kc(null,t,s,e,r);break e;case 11:t=Vc(null,t,s,e,r);break e;case 14:t=qc(null,t,s,Mt(s.type,e),r);break e}throw Error(ee(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Mt(s,a),ya(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Mt(s,a),Kc(e,t,s,a,r);case 3:e:{if(bu(t),e===null)throw Error(ee(387));s=t.pendingProps,g=t.memoizedState,a=g.element,Gd(e,t),vn(t,s,null,r);var x=t.memoizedState;if(s=x.element,g.isDehydrated)if(g={element:s,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},t.updateQueue.baseState=g,t.memoizedState=g,t.flags&256){a=_s(Error(ee(423)),t),t=Gc(e,t,s,r,a);break e}else if(s!==a){a=_s(Error(ee(424)),t),t=Gc(e,t,s,r,a);break e}else for(gt=mr(t.stateNode.containerInfo.firstChild),mt=t,Ne=!0,Pt=null,r=qd(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ps(),s===a){t=ir(e,t,r);break e}st(e,t,s,r)}t=t.child}return t;case 5:return Xd(t),e===null&&ga(t),s=t.type,a=t.pendingProps,g=e!==null?e.memoizedProps:null,x=a.children,ha(s,a)?x=null:g!==null&&ha(s,g)&&(t.flags|=32),yu(e,t),st(e,t,x,r),t.child;case 6:return e===null&&ga(t),null;case 13:return wu(e,t,r);case 4:return xl(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=gs(t,null,s,r):st(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Mt(s,a),Vc(e,t,s,a,r);case 7:return st(e,t,t.pendingProps,r),t.child;case 8:return st(e,t,t.pendingProps.children,r),t.child;case 12:return st(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,g=t.memoizedProps,x=a.value,Le(mn,s._currentValue),s._currentValue=x,g!==null)if(It(g.value,x)){if(g.children===a.children&&!dt.current){t=ir(e,t,r);break e}}else for(g=t.child,g!==null&&(g.return=t);g!==null;){var i=g.dependencies;if(i!==null){x=g.child;for(var c=i.firstContext;c!==null;){if(c.context===s){if(g.tag===1){c=Zt(-1,r&-r),c.tag=2;var f=g.updateQueue;if(f!==null){f=f.shared;var _=f.pending;_===null?c.next=c:(c.next=_.next,_.next=c),f.pending=c}}g.lanes|=r,c=g.alternate,c!==null&&(c.lanes|=r),ma(g.return,r,t),i.lanes|=r;break}c=c.next}}else if(g.tag===10)x=g.type===t.type?null:g.child;else if(g.tag===18){if(x=g.return,x===null)throw Error(ee(341));x.lanes|=r,i=x.alternate,i!==null&&(i.lanes|=r),ma(x,r,t),x=g.sibling}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===t){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}st(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,hs(t,r),a=Rt(a),s=s(a),t.flags|=1,st(e,t,s,r),t.child;case 14:return s=t.type,a=Mt(s,t.pendingProps),a=Mt(s.type,a),qc(e,t,s,a,r);case 15:return vu(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Mt(s,a),Gi(e,t),t.tag=1,ut(s)?(e=!0,fn(t)):e=!1,hs(t,r),gu(t,s,a),va(t,s,a,r),ba(null,t,s,!0,e,r);case 19:return Su(e,t,r);case 22:return xu(e,t,r)}throw Error(ee(156,t.tag))};function Fu(e,t){return ud(e,t)}function Kg(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(e,t,r,s){return new Kg(e,t,r,s)}function Dl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gg(e){if(typeof e=="function")return Dl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Za)return 11;if(e===el)return 14}return 2}function yr(e,t){var r=e.alternate;return r===null?(r=Ct(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Qi(e,t,r,s,a,g){var x=2;if(s=e,typeof e=="function")Dl(e)&&(x=1);else if(typeof e=="string")x=5;else e:switch(e){case Xr:return Pr(r.children,a,g,t);case Ja:x=8,a|=8;break;case $o:return e=Ct(12,r,t,a|2),e.elementType=$o,e.lanes=g,e;case Wo:return e=Ct(13,r,t,a),e.elementType=Wo,e.lanes=g,e;case Uo:return e=Ct(19,r,t,a),e.elementType=Uo,e.lanes=g,e;case Xh:return zn(r,a,g,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Kh:x=10;break e;case Gh:x=9;break e;case Za:x=11;break e;case el:x=14;break e;case ar:x=16,s=null;break e}throw Error(ee(130,e==null?e:typeof e,""))}return t=Ct(x,r,t,a),t.elementType=e,t.type=s,t.lanes=g,t}function Pr(e,t,r,s){return e=Ct(7,e,s,t),e.lanes=r,e}function zn(e,t,r,s){return e=Ct(22,e,s,t),e.elementType=Xh,e.lanes=r,e.stateNode={isHidden:!1},e}function No(e,t,r){return e=Ct(6,e,null,t),e.lanes=r,e}function Ao(e,t,r){return t=Ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xg(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ho(0),this.expirationTimes=ho(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ho(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Pl(e,t,r,s,a,g,x,i,c){return e=new Xg(e,t,r,i,c),t===1?(t=1,g===!0&&(t|=8)):t=0,g=Ct(3,null,null,t),e.current=g,g.stateNode=e,g.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},vl(g),e}function Yg(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Hu(e){if(!e)return Sr;e=e._reactInternals;e:{if(Vr(e)!==e||e.tag!==1)throw Error(ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ut(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ee(171))}if(e.tag===1){var r=e.type;if(ut(r))return Hd(e,r,t)}return t}function zu(e,t,r,s,a,g,x,i,c){return e=Pl(r,s,!0,e,a,g,x,i,c),e.context=Hu(null),r=e.current,s=it(),a=xr(r),g=Zt(s,a),g.callback=t??null,_r(r,g,a),e.current.lanes=a,fi(e,a,s),ft(e,s),e}function $n(e,t,r,s){var a=t.current,g=it(),x=xr(a);return r=Hu(r),t.context===null?t.context=r:t.pendingContext=r,t=Zt(g,x),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=_r(a,t,x),e!==null&&(Ot(e,a,x,g),Vi(e,a,x)),x}function En(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ih(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Bl(e,t){ih(e,t),(e=e.alternate)&&ih(e,t)}function Qg(){return null}var $u=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ol(e){this._internalRoot=e}Wn.prototype.render=Ol.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ee(409));$n(e,t,null,null)};Wn.prototype.unmount=Ol.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zr(function(){$n(null,e,null,null)}),t[rr]=null}};function Wn(e){this._internalRoot=e}Wn.prototype.unstable_scheduleHydration=function(e){if(e){var t=xd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<cr.length&&t!==0&&t<cr[r].priority;r++);cr.splice(r,0,e),r===0&&bd(e)}};function Il(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Un(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function nh(){}function Jg(e,t,r,s,a){if(a){if(typeof s=="function"){var g=s;s=function(){var f=En(x);g.call(f)}}var x=zu(t,s,e,0,null,!1,!1,"",nh);return e._reactRootContainer=x,e[rr]=x.current,ti(e.nodeType===8?e.parentNode:e),zr(),x}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var i=s;s=function(){var f=En(c);i.call(f)}}var c=Pl(e,0,!1,null,null,!1,!1,"",nh);return e._reactRootContainer=c,e[rr]=c.current,ti(e.nodeType===8?e.parentNode:e),zr(function(){$n(t,c,r,s)}),c}function Vn(e,t,r,s,a){var g=r._reactRootContainer;if(g){var x=g;if(typeof a=="function"){var i=a;a=function(){var c=En(x);i.call(c)}}$n(t,x,e,a)}else x=Jg(r,t,e,a,s);return En(x)}_d=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ds(t.pendingLanes);r!==0&&(sl(t,r|1),ft(t,Ie()),!(xe&6)&&(vs=Ie()+500,Lr()))}break;case 13:zr(function(){var s=sr(e,1);if(s!==null){var a=it();Ot(s,e,1,a)}}),Bl(e,1)}};il=function(e){if(e.tag===13){var t=sr(e,134217728);if(t!==null){var r=it();Ot(t,e,134217728,r)}Bl(e,134217728)}};vd=function(e){if(e.tag===13){var t=xr(e),r=sr(e,t);if(r!==null){var s=it();Ot(r,e,t,s)}Bl(e,t)}};xd=function(){return Se};yd=function(e,t){var r=Se;try{return Se=e,t()}finally{Se=r}};ea=function(e,t,r){switch(t){case"input":if(Ko(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=Pn(s);if(!a)throw Error(ee(90));Qh(s),Ko(s,a)}}}break;case"textarea":Zh(e,r);break;case"select":t=r.value,t!=null&&os(e,!!r.multiple,t,!1)}};od=Al;ad=zr;var Zg={usingClientEntryPoint:!1,Events:[gi,Zr,Pn,id,nd,Al]},Ns={findFiberByHostInstance:Ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},em={bundleType:Ns.bundleType,version:Ns.version,rendererPackageName:Ns.rendererPackageName,rendererConfig:Ns.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hd(e),e===null?null:e.stateNode},findFiberByHostInstance:Ns.findFiberByHostInstance||Qg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pi.isDisabled&&Pi.supportsFiber)try{An=Pi.inject(em),Vt=Pi}catch{}}vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zg;vt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Il(t))throw Error(ee(200));return Yg(e,t,null,r)};vt.createRoot=function(e,t){if(!Il(e))throw Error(ee(299));var r=!1,s="",a=$u;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Pl(e,1,!1,null,null,r,!1,s,a),e[rr]=t.current,ti(e.nodeType===8?e.parentNode:e),new Ol(t)};vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ee(188)):(e=Object.keys(e).join(","),Error(ee(268,e)));return e=hd(t),e=e===null?null:e.stateNode,e};vt.flushSync=function(e){return zr(e)};vt.hydrate=function(e,t,r){if(!Un(t))throw Error(ee(200));return Vn(null,e,t,!0,r)};vt.hydrateRoot=function(e,t,r){if(!Il(e))throw Error(ee(405));var s=r!=null&&r.hydratedSources||null,a=!1,g="",x=$u;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onRecoverableError!==void 0&&(x=r.onRecoverableError)),t=zu(t,null,e,1,r??null,a,!1,g,x),e[rr]=t.current,ti(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Wn(t)};vt.render=function(e,t,r){if(!Un(t))throw Error(ee(200));return Vn(null,e,t,!1,r)};vt.unmountComponentAtNode=function(e){if(!Un(e))throw Error(ee(40));return e._reactRootContainer?(zr(function(){Vn(null,null,e,!1,function(){e._reactRootContainer=null,e[rr]=null})}),!0):!1};vt.unstable_batchedUpdates=Al;vt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Un(r))throw Error(ee(200));if(e==null||e._reactInternals===void 0)throw Error(ee(38));return Vn(e,t,r,!1,s)};vt.version="18.3.1-next-f1338f8080-20240426";function Wu(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wu)}catch(e){console.error(e)}}Wu(),Wh.exports=vt;var tm=Wh.exports,oh=tm;Ho.createRoot=oh.createRoot,Ho.hydrateRoot=oh.hydrateRoot;const Gt=Object.create(null);Gt.open="0";Gt.close="1";Gt.ping="2";Gt.pong="3";Gt.message="4";Gt.upgrade="5";Gt.noop="6";const Ji=Object.create(null);Object.keys(Gt).forEach(e=>{Ji[Gt[e]]=e});const Ta={type:"error",data:"parser error"},Uu=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Vu=typeof ArrayBuffer=="function",qu=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Fl=({type:e,data:t},r,s)=>Uu&&t instanceof Blob?r?s(t):ah(t,s):Vu&&(t instanceof ArrayBuffer||qu(t))?r?s(t):ah(new Blob([t]),s):s(Gt[e]+(t||"")),ah=(e,t)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];t("b"+(s||""))},r.readAsDataURL(e)};function lh(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Mo;function rm(e,t){if(Uu&&e.data instanceof Blob)return e.data.arrayBuffer().then(lh).then(t);if(Vu&&(e.data instanceof ArrayBuffer||qu(e.data)))return t(lh(e.data));Fl(e,!1,r=>{Mo||(Mo=new TextEncoder),t(Mo.encode(r))})}const ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<ch.length;e++)Bs[ch.charCodeAt(e)]=e;const sm=e=>{let t=e.length*.75,r=e.length,s,a=0,g,x,i,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const f=new ArrayBuffer(t),_=new Uint8Array(f);for(s=0;s<r;s+=4)g=Bs[e.charCodeAt(s)],x=Bs[e.charCodeAt(s+1)],i=Bs[e.charCodeAt(s+2)],c=Bs[e.charCodeAt(s+3)],_[a++]=g<<2|x>>4,_[a++]=(x&15)<<4|i>>2,_[a++]=(i&3)<<6|c&63;return f},im=typeof ArrayBuffer=="function",Hl=(e,t)=>{if(typeof e!="string")return{type:"message",data:Ku(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:nm(e.substring(1),t)}:Ji[r]?e.length>1?{type:Ji[r],data:e.substring(1)}:{type:Ji[r]}:Ta},nm=(e,t)=>{if(im){const r=sm(e);return Ku(r,t)}else return{base64:!0,data:e}},Ku=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Gu="",om=(e,t)=>{const r=e.length,s=new Array(r);let a=0;e.forEach((g,x)=>{Fl(g,!1,i=>{s[x]=i,++a===r&&t(s.join(Gu))})})},am=(e,t)=>{const r=e.split(Gu),s=[];for(let a=0;a<r.length;a++){const g=Hl(r[a],t);if(s.push(g),g.type==="error")break}return s};function lm(){return new TransformStream({transform(e,t){rm(e,r=>{const s=r.length;let a;if(s<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,s);else if(s<65536){a=new Uint8Array(3);const g=new DataView(a.buffer);g.setUint8(0,126),g.setUint16(1,s)}else{a=new Uint8Array(9);const g=new DataView(a.buffer);g.setUint8(0,127),g.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(r)})}})}let To;function Bi(e){return e.reduce((t,r)=>t+r.length,0)}function Oi(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let s=0;for(let a=0;a<t;a++)r[a]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),r}function cm(e,t){To||(To=new TextDecoder);const r=[];let s=0,a=-1,g=!1;return new TransformStream({transform(x,i){for(r.push(x);;){if(s===0){if(Bi(r)<1)break;const c=Oi(r,1);g=(c[0]&128)===128,a=c[0]&127,a<126?s=3:a===126?s=1:s=2}else if(s===1){if(Bi(r)<2)break;const c=Oi(r,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(Bi(r)<8)break;const c=Oi(r,8),f=new DataView(c.buffer,c.byteOffset,c.length),_=f.getUint32(0);if(_>Math.pow(2,21)-1){i.enqueue(Ta);break}a=_*Math.pow(2,32)+f.getUint32(4),s=3}else{if(Bi(r)<a)break;const c=Oi(r,a);i.enqueue(Hl(g?c:To.decode(c),t)),s=0}if(a===0||a>e){i.enqueue(Ta);break}}}})}const Xu=4;function He(e){if(e)return hm(e)}function hm(e){for(var t in He.prototype)e[t]=He.prototype[t];return e}He.prototype.on=He.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};He.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};He.prototype.off=He.prototype.removeListener=He.prototype.removeAllListeners=He.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,a=0;a<r.length;a++)if(s=r[a],s===t||s.fn===t){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+e],this};He.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,a=r.length;s<a;++s)r[s].apply(this,t)}return this};He.prototype.emitReserved=He.prototype.emit;He.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};He.prototype.hasListeners=function(e){return!!this.listeners(e).length};const qn=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),St=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),dm="arraybuffer";function Yu(e,...t){return t.reduce((r,s)=>(e.hasOwnProperty(s)&&(r[s]=e[s]),r),{})}const um=St.setTimeout,fm=St.clearTimeout;function Kn(e,t){t.useNativeTimers?(e.setTimeoutFn=um.bind(St),e.clearTimeoutFn=fm.bind(St)):(e.setTimeoutFn=St.setTimeout.bind(St),e.clearTimeoutFn=St.clearTimeout.bind(St))}const pm=1.33;function gm(e){return typeof e=="string"?mm(e):Math.ceil((e.byteLength||e.size)*pm)}function mm(e){let t=0,r=0;for(let s=0,a=e.length;s<a;s++)t=e.charCodeAt(s),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(s++,r+=4);return r}function Qu(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function _m(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function vm(e){let t={},r=e.split("&");for(let s=0,a=r.length;s<a;s++){let g=r[s].split("=");t[decodeURIComponent(g[0])]=decodeURIComponent(g[1])}return t}class xm extends Error{constructor(t,r,s){super(t),this.description=r,this.context=s,this.type="TransportError"}}class zl extends He{constructor(t){super(),this.writable=!1,Kn(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,s){return super.emitReserved("error",new xm(t,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Hl(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=_m(t);return r.length?"?"+r:""}}class ym extends zl{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};am(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,om(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Qu()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Ju=!1;try{Ju=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const bm=Ju;function wm(){}class Sm extends ym{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,r){const s=this.request({method:"POST",data:t});s.on("success",r),s.on("error",(a,g)=>{this.onError("xhr post error",a,g)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=t}}class Kt extends He{constructor(t,r,s){super(),this.createRequest=t,Kn(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const r=Yu(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&s.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var a;s.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Kt.requestsCount++,Kt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=wm,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Kt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Kt.requestsCount=0;Kt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",hh);else if(typeof addEventListener=="function"){const e="onpagehide"in St?"pagehide":"unload";addEventListener(e,hh,!1)}}function hh(){for(let e in Kt.requests)Kt.requests.hasOwnProperty(e)&&Kt.requests[e].abort()}const Cm=function(){const e=Zu({xdomain:!1});return e&&e.responseType!==null}();class km extends Sm{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=Cm&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Kt(Zu,this.uri(),t)}}function Zu(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||bm))return new XMLHttpRequest}catch{}if(!t)try{return new St[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const ef=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Em extends zl{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,s=ef?{}:Yu(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,s)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],a=r===t.length-1;Fl(s,this.supportsBinary,g=>{try{this.doWrite(s,g)}catch{}a&&qn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Qu()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Do=St.WebSocket||St.MozWebSocket;class Lm extends Em{createSocket(t,r,s){return ef?new Do(t,r,s):r?new Do(t,r):new Do(t)}doWrite(t,r){this.ws.send(r)}}class Rm extends zl{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=cm(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(r).getReader(),a=lm();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const g=()=>{s.read().then(({done:i,value:c})=>{i||(this.onPacket(c),g())}).catch(i=>{})};g();const x={type:"open"};this.query.sid&&(x.data=`{"sid":"${this.query.sid}"}`),this._writer.write(x).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],a=r===t.length-1;this._writer.write(s).then(()=>{a&&qn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const jm={websocket:Lm,webtransport:Rm,polling:km},Nm=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Am=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Da(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),s=e.indexOf("]");r!=-1&&s!=-1&&(e=e.substring(0,r)+e.substring(r,s).replace(/:/g,";")+e.substring(s,e.length));let a=Nm.exec(e||""),g={},x=14;for(;x--;)g[Am[x]]=a[x]||"";return r!=-1&&s!=-1&&(g.source=t,g.host=g.host.substring(1,g.host.length-1).replace(/;/g,":"),g.authority=g.authority.replace("[","").replace("]","").replace(/;/g,":"),g.ipv6uri=!0),g.pathNames=Mm(g,g.path),g.queryKey=Tm(g,g.query),g}function Mm(e,t){const r=/\/{2,9}/g,s=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function Tm(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,a,g){a&&(r[a]=g)}),r}const Pa=typeof addEventListener=="function"&&typeof removeEventListener=="function",Zi=[];Pa&&addEventListener("offline",()=>{Zi.forEach(e=>e())},!1);class br extends He{constructor(t,r){if(super(),this.binaryType=dm,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const s=Da(t);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=Da(r.host).host);Kn(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const a=s.prototype.name;this.transports.push(a),this._transportsByName[a]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=vm(this.opts.query)),Pa&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Zi.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=Xu,r.transport=t,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&br.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",br.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const a=this.writeBuffer[s].data;if(a&&(r+=gm(a)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,qn(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,s){return this._sendPacket("message",t,r,s),this}send(t,r,s){return this._sendPacket("message",t,r,s),this}_sendPacket(t,r,s,a){if(typeof r=="function"&&(a=r,r=void 0),typeof s=="function"&&(a=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const g={type:t,data:r,options:s};this.emitReserved("packetCreate",g),this.writeBuffer.push(g),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(br.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Pa&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Zi.indexOf(this._offlineEventListener);s!==-1&&Zi.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}br.protocol=Xu;class Dm extends br{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),s=!1;br.priorWebsocketSuccess=!1;const a=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",u=>{if(!s)if(u.type==="pong"&&u.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;br.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(_(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=r.name,this.emitReserved("upgradeError",m)}}))};function g(){s||(s=!0,_(),r.close(),r=null)}const x=u=>{const m=new Error("probe error: "+u);m.transport=r.name,g(),this.emitReserved("upgradeError",m)};function i(){x("transport closed")}function c(){x("socket closed")}function f(u){r&&u.name!==r.name&&g()}const _=()=>{r.removeListener("open",a),r.removeListener("error",x),r.removeListener("close",i),this.off("close",c),this.off("upgrading",f)};r.once("open",a),r.once("error",x),r.once("close",i),this.once("close",c),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&r.push(t[s]);return r}}let Pm=class extends Dm{constructor(t,r={}){const s=typeof t=="object"?t:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(a=>jm[a]).filter(a=>!!a)),super(t,s)}};function Bm(e,t="",r){let s=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),s=Da(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const g=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+g+":"+s.port+t,s.href=s.protocol+"://"+g+(r&&r.port===s.port?"":":"+s.port),s}const Om=typeof ArrayBuffer=="function",Im=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,tf=Object.prototype.toString,Fm=typeof Blob=="function"||typeof Blob<"u"&&tf.call(Blob)==="[object BlobConstructor]",Hm=typeof File=="function"||typeof File<"u"&&tf.call(File)==="[object FileConstructor]";function $l(e){return Om&&(e instanceof ArrayBuffer||Im(e))||Fm&&e instanceof Blob||Hm&&e instanceof File}function en(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,s=e.length;r<s;r++)if(en(e[r]))return!0;return!1}if($l(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return en(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&en(e[r]))return!0;return!1}function zm(e){const t=[],r=e.data,s=e;return s.data=Ba(r,t),s.attachments=t.length,{packet:s,buffers:t}}function Ba(e,t){if(!e)return e;if($l(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let s=0;s<e.length;s++)r[s]=Ba(e[s],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=Ba(e[s],t));return r}return e}function $m(e,t){return e.data=Oa(e.data,t),delete e.attachments,e}function Oa(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Oa(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Oa(e[r],t));return e}const Wm=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Um=5;var ve;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(ve||(ve={}));class Vm{constructor(t){this.replacer=t}encode(t){return(t.type===ve.EVENT||t.type===ve.ACK)&&en(t)?this.encodeAsBinary({type:t.type===ve.EVENT?ve.BINARY_EVENT:ve.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===ve.BINARY_EVENT||t.type===ve.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=zm(t),s=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(s),a}}function dh(e){return Object.prototype.toString.call(e)==="[object Object]"}class Wl extends He{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const s=r.type===ve.BINARY_EVENT;s||r.type===ve.BINARY_ACK?(r.type=s?ve.EVENT:ve.ACK,this.reconstructor=new qm(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if($l(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const s={type:Number(t.charAt(0))};if(ve[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===ve.BINARY_EVENT||s.type===ve.BINARY_ACK){const g=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const x=t.substring(g,r);if(x!=Number(x)||t.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(x)}if(t.charAt(r+1)==="/"){const g=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););s.nsp=t.substring(g,r)}else s.nsp="/";const a=t.charAt(r+1);if(a!==""&&Number(a)==a){const g=r+1;for(;++r;){const x=t.charAt(r);if(x==null||Number(x)!=x){--r;break}if(r===t.length)break}s.id=Number(t.substring(g,r+1))}if(t.charAt(++r)){const g=this.tryParse(t.substr(r));if(Wl.isPayloadValid(s.type,g))s.data=g;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case ve.CONNECT:return dh(r);case ve.DISCONNECT:return r===void 0;case ve.CONNECT_ERROR:return typeof r=="string"||dh(r);case ve.EVENT:case ve.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Wm.indexOf(r[0])===-1);case ve.ACK:case ve.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class qm{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=$m(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Km=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Wl,Encoder:Vm,get PacketType(){return ve},protocol:Um},Symbol.toStringTag,{value:"Module"}));function Dt(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const Gm=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class rf extends He{constructor(t,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Dt(t,"open",this.onopen.bind(this)),Dt(t,"packet",this.onpacket.bind(this)),Dt(t,"error",this.onerror.bind(this)),Dt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var s,a,g;if(Gm.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const x={type:ve.EVENT,data:r};if(x.options={},x.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const _=this.ids++,u=r.pop();this._registerAckCallback(_,u),x.id=_}const i=(a=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((g=this.io.engine)===null||g===void 0)&&g._hasPingExpired());return this.flags.volatile&&!i||(c?(this.notifyOutgoingListeners(x),this.packet(x)):this.sendBuffer.push(x)),this.flags={},this}_registerAckCallback(t,r){var s;const a=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(a===void 0){this.acks[t]=r;return}const g=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let i=0;i<this.sendBuffer.length;i++)this.sendBuffer[i].id===t&&this.sendBuffer.splice(i,1);r.call(this,new Error("operation has timed out"))},a),x=(...i)=>{this.io.clearTimeoutFn(g),r.apply(this,i)};x.withError=!0,this.acks[t]=x}emitWithAck(t,...r){return new Promise((s,a)=>{const g=(x,i)=>x?a(x):s(i);g.withError=!0,r.push(g),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...g)=>s!==this._queue[0]?void 0:(a!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...g)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:ve.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case ve.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ve.EVENT:case ve.BINARY_EVENT:this.onevent(t);break;case ve.ACK:case ve.BINARY_ACK:this.onack(t);break;case ve.DISCONNECT:this.ondisconnect();break;case ve.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let s=!1;return function(...a){s||(s=!0,r.packet({type:ve.ACK,id:t,data:a}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ve.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,t.data)}}}function ws(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ws.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};ws.prototype.reset=function(){this.attempts=0};ws.prototype.setMin=function(e){this.ms=e};ws.prototype.setMax=function(e){this.max=e};ws.prototype.setJitter=function(e){this.jitter=e};class Ia extends He{constructor(t,r){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Kn(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new ws({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const a=r.parser||Km;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Pm(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const a=Dt(r,"open",function(){s.onopen(),t&&t()}),g=i=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",i),t?t(i):this.maybeReconnectOnOpen()},x=Dt(r,"error",g);if(this._timeout!==!1){const i=this._timeout,c=this.setTimeoutFn(()=>{a(),g(new Error("timeout")),r.close()},i);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(x),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Dt(t,"ping",this.onping.bind(this)),Dt(t,"data",this.ondata.bind(this)),Dt(t,"error",this.onerror.bind(this)),Dt(t,"close",this.onclose.bind(this)),Dt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){qn(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new rf(this,t,r),this.nsps[t]=s),s}_destroy(t){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let s=0;s<r.length;s++)this.engine.write(r[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const As={};function tn(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=Bm(e,t.path||"/socket.io"),s=r.source,a=r.id,g=r.path,x=As[a]&&g in As[a].nsps,i=t.forceNew||t["force new connection"]||t.multiplex===!1||x;let c;return i?c=new Ia(s,t):(As[a]||(As[a]=new Ia(s,t)),c=As[a]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(tn,{Manager:Ia,Socket:rf,io:tn,connect:tn});const Xm="";function Ym(){const[e,t]=B.useState(null),[r,s]=B.useState(!1),a=B.useRef(null),g=B.useRef([]);B.useEffect(()=>{const _=tn(Xm,{transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:1e4,randomizationFactor:.5,timeout:45e3});return _.on("connect",()=>{s(!0)}),_.on("disconnect",u=>{s(!1),u==="io server disconnect"&&_.connect()}),_.on("connect_error",u=>{console.error("Socket connection error:",u.message||u),s(!1)}),_.on("reconnect_error",u=>{console.warn("Socket reconnection error:",u.message||u)}),a.current=_,t(_),()=>{g.current.forEach(({event:u,handler:m})=>{_.off(u,m)}),g.current=[],_.disconnect()}},[]);const x=B.useCallback((f,_)=>{var u;(u=a.current)!=null&&u.connected&&a.current.emit(f,_)},[]),i=B.useCallback((f,_)=>a.current?(a.current.on(f,_),g.current.push({event:f,handler:_}),()=>{var u;(u=a.current)==null||u.off(f,_),g.current=g.current.filter(m=>!(m.event===f&&m.handler===_))}):()=>{},[]),c=B.useCallback((f,_)=>{var u;(u=a.current)==null||u.off(f,_),g.current=g.current.filter(m=>!(m.event===f&&m.handler===_))},[]);return{socket:e,connected:r,emit:x,on:i,off:c}}const Qm="";function Ee(e,t={}){const r={...t.headers};return fetch(`${Qm}${e}`,{...t,headers:r})}const sf=B.createContext(null),Jm=50;let Zm=0,e0=0;const Me={SINGLE:"single",SPLIT_H:"split-h",SPLIT_V:"split-v",GRID_2X2:"grid-2x2",GRID_3X2:"grid-3x2",CUSTOM:"custom"},Ii=()=>`pane-${++e0}`;function t0({children:e}){const{socket:t,connected:r,emit:s,on:a}=Ym(),[g,x]=B.useState([]),[i,c]=B.useState([]),[f,_]=B.useState([]),[u,m]=B.useState({}),[S,w]=B.useState(null),[p,n]=B.useState(null),[l,h]=B.useState([]),[d,v]=B.useState(null),[y,C]=B.useState({}),[L,b]=B.useState(!1),[k,E]=B.useState([]),A=B.useRef({}),R=B.useRef(g),T=B.useRef(p);B.useEffect(()=>{R.current=g},[g]),B.useEffect(()=>{T.current=p},[p]);const[O,H]=B.useState(Me.SINGLE),[$,F]=B.useState([{id:Ii(),workerId:null,viewMode:"terminal"}]),[N,D]=B.useState(null),[P,I]=B.useState(null),W=B.useRef($);W.current=$;const V=B.useCallback(Q=>{const ae=++Zm;return h(pe=>{const J=[...pe,{...Q,id:ae}];return J.length>50?J.slice(-50):J}),ae},[]),Z=B.useCallback(Q=>{h(ae=>ae.filter(pe=>pe.id!==Q))},[]),te=B.useRef(!1);B.useEffect(()=>{if(r){const Q=te.current;if(te.current=!0,K(),Q&&t){L&&(b(!1),t.emit("metrics:subscribe"),b(!0));const ae=new Set,pe=T.current;pe&&(t.emit("worker:attach",{workerId:pe}),ae.add(pe));for(const J of W.current)J.workerId&&!ae.has(J.workerId)&&(t.emit("worker:output:subscribe",{workerId:J.workerId}),ae.add(J.workerId))}V({type:"success",title:Q?"Reconnected to Strategos":"Connected to Strategos",message:Q?"Connection restored":"Real-time updates enabled",duration:3e3})}else te.current&&V({type:"warning",title:"Connection Lost",message:"Attempting to reconnect...",duration:5e3})},[r,t]),B.useEffect(()=>{if(!t)return;const ae=Object.fromEntries(Object.entries({"workers:list":J=>x(J),"worker:created":J=>{x(oe=>[...oe,J]),V({type:"success",title:"Worker Spawned",message:`${J.label} is now running`,duration:4e3})},"worker:updated":J=>{x(oe=>oe.map(ue=>ue.id===J.id?J:ue))},"worker:deleted":({workerId:J})=>{const oe=R.current.find(ue=>ue.id===J);x(ue=>ue.filter(ke=>ke.id!==J)),T.current===J&&n(null),clearTimeout(A.current[J]),delete A.current[J],m(ue=>{const ke={...ue};return delete ke[J],ke}),C(ue=>{const ke={...ue};return delete ke[J],ke}),V({type:"info",title:"Worker Stopped",message:(oe==null?void 0:oe.label)||J,duration:3e3})},"worker:output":({workerId:J,output:oe})=>{clearTimeout(A.current[J]),A.current[J]=setTimeout(()=>{const ke=typeof oe=="string"&&oe.length>2097152?oe.slice(-2097152):oe;m(Ft=>({...Ft,[J]:ke}))},Jm)},"activity:list":J=>_(J),"activity:new":J=>_(oe=>[J,...oe].slice(0,100)),"metrics:update":J=>{J.system&&v(J.system),J.worker&&C(oe=>({...oe,[J.worker.workerId]:J.worker}))},error:J=>{console.error("Socket error:",J),V({type:"error",title:"Error",message:J.message||"An error occurred",duration:5e3})},"worker:crashed":({workerId:J,label:oe,reason:ue})=>{console.error(`[Worker CRASHED] ${oe} (${J}): ${ue}`),V({type:"error",title:"Worker Crashed",message:`${oe}: ${ue||"Unknown error"}`,duration:1e4})},"worker:stalled":({workerId:J,label:oe,stalledMinutes:ue})=>{console.warn(`[Worker STALLED] ${oe} (${J}): ${ue}m`),V({type:"warning",title:"Worker Stalled",message:`${oe}  no output for ${ue} min`,duration:8e3})},"worker:general:dead":({workerId:J,label:oe,message:ue})=>{console.error(`[GENERAL DEAD] ${oe} (${J}): ${ue}`),V({type:"error",title:"GENERAL Down",message:`${oe}  requires human intervention`,duration:0})},"worker:respawned":({oldWorkerId:J,newWorkerId:oe,label:ue,attempt:ke})=>{V({type:"info",title:"Worker Respawned",message:`${ue} (attempt ${ke})`,duration:6e3})},"worker:kill:blocked":({workerId:J,label:oe,reason:ue})=>{V({type:"warning",title:"Kill Blocked",message:`${oe} is protected (${ue})`,duration:6e3})},"worker:completed":({workerId:J,worker:oe})=>{V({type:"success",title:"Worker Completed",message:(oe==null?void 0:oe.label)||J,duration:4e3})},"worker:blocked":({workerId:J,label:oe})=>{V({type:"warning",title:"Worker Blocked",message:`${oe||J} is blocked`,duration:6e3})},"worker:awaiting_review":({workerId:J,label:oe})=>{V({type:"info",title:"Review Needed",message:`${oe||J} awaiting review`,duration:1e4})},"dependencies:triggered":({completedWorkerId:J,triggeredWorkerIds:oe})=>{(oe==null?void 0:oe.length)>0&&V({type:"info",title:"Dependencies Triggered",message:`${oe.length} worker(s) unblocked`,duration:4e3})},"worker:child:signaled":({parentWorkerId:J,childWorkerId:oe,status:ue})=>{ue==="done"&&V({type:"info",title:"Child Worker Done",message:`Child ${oe==null?void 0:oe.slice(0,8)} signaled to parent`,duration:3e3})},"worker:queue:error":J=>{V({type:"error",title:"Queue Error",message:`Queue error for worker: ${(J==null?void 0:J.error)||"Unknown error"}`,duration:5e3})},"workers:pending":J=>{E(Array.isArray(J)?J:[])},"worker:bulldoze:paused":({workerId:J,reason:oe,cyclesCompleted:ue})=>{const ke=R.current.find(Ft=>Ft.id===J);V({type:"warning",title:"Bulldoze Paused",message:`${(ke==null?void 0:ke.label)||J}: ${oe}`,duration:8e3})},"worker:bulldoze:cycle":({workerId:J,cycle:oe,isAudit:ue})=>{if(ue){const ke=R.current.find(Ft=>Ft.id===J);V({type:"info",title:"Bulldoze Audit",message:`${(ke==null?void 0:ke.label)||J} cycle ${oe}`,duration:3e3})}}}).map(([J,oe])=>[J,(...ue)=>{try{oe(...ue)}catch(ke){console.error(`[Socket] Handler error for "${J}":`,ke)}}])),pe=Object.entries(ae).map(([J,oe])=>a(J,oe));return()=>pe.forEach(J=>J())},[t,a,V]),B.useEffect(()=>()=>{Object.values(A.current).forEach(clearTimeout)},[]),B.useEffect(()=>{if(!p||!r)return;const Q=new AbortController,pe=setInterval(async()=>{try{const J=await Ee(`/api/workers/${p}/output`,{signal:Q.signal});if(!J.ok)return;const oe=await J.json();oe.output&&m(ue=>ue[p]===oe.output?ue:{...ue,[p]:oe.output})}catch{}},5e3);return()=>{Q.abort(),clearInterval(pe)}},[p,r]);const K=B.useCallback(async()=>{try{const Q=await Ee("/api/projects");if(!Q.ok)throw new Error(`HTTP ${Q.status}`);const ae=await Q.json();c(ae)}catch(Q){console.error("Failed to fetch projects:",Q),V({type:"error",title:"Failed to fetch projects",message:Q.message,duration:5e3})}},[V]),M=B.useCallback((Q,ae)=>(s("worker:spawn",{projectPath:Q,label:ae}),new Promise(pe=>{setTimeout(pe,100)})),[s]),z=B.useCallback(Q=>{s("worker:kill",{workerId:Q})},[s]),q=B.useCallback((Q,ae)=>{s("worker:input",{workerId:Q,input:ae})},[s]),G=B.useCallback((Q,ae)=>{s("worker:rawInput",{workerId:Q,keys:ae})},[s]),ne=B.useCallback((Q,ae,pe)=>{s("worker:resize",{workerId:Q,cols:ae,rows:pe})},[s]),se=B.useCallback((Q,ae)=>{s("worker:updateLabel",{workerId:Q,label:ae})},[s]),fe=B.useCallback((Q,ae)=>{s("worker:settings",{workerId:Q,settings:ae})},[s]),de=B.useCallback((Q,ae)=>{s("project:broadcast",{projectName:Q,input:ae})},[s]),ye=B.useCallback(async(Q,ae,pe,J)=>{const oe=`GENERAL: ${ae.slice(0,60)}`;try{return await(await Ee("/api/workers/spawn-from-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:"general",label:oe,projectPath:Q,task:{description:ae},bulldozeMode:!0,bulldozeMission:ae,bulldozeBacklog:pe||"",bulldozeStandingOrders:J||""})})).json()}catch(ue){return console.error("Failed to spawn autonomous session:",ue),V({type:"error",title:"Spawn Failed",message:ue.message,duration:5e3}),null}},[V]),re=B.useCallback(Q=>{n(ae=>(ae&&ae!==Q&&s("worker:output:unsubscribe",{workerId:ae}),Q)),s("worker:attach",{workerId:Q})},[s]),ce=B.useCallback(()=>{n(Q=>(Q&&s("worker:output:unsubscribe",{workerId:Q}),null))},[s]),Be=B.useCallback(Q=>{s("worker:output:subscribe",{workerId:Q})},[s]),Ue=B.useCallback(Q=>{s("worker:output:unsubscribe",{workerId:Q})},[s]),ge=B.useCallback(()=>{L||!t||(s("metrics:subscribe"),b(!0))},[s,L,t]),me=B.useCallback(()=>{!L||!t||(s("metrics:unsubscribe"),b(!1))},[s,L,t]),X=B.useCallback(async Q=>{try{const ae=await Ee(`/api/metrics/worker/${Q}`);if(!ae.ok){if(ae.status===404)return null;throw new Error("Failed to fetch worker metrics")}const pe=await ae.json();return C(J=>({...J,[Q]:pe})),pe}catch(ae){return console.error("Failed to fetch worker metrics:",ae),null}},[]),Y=B.useCallback(async()=>{try{const Q=await Ee("/api/metrics/system");if(!Q.ok){if(Q.status===404)return null;throw new Error("Failed to fetch system metrics")}const ae=await Q.json();return v(ae),ae}catch(Q){return console.error("Failed to fetch system metrics:",Q),null}},[]),he=B.useCallback((Q=null)=>{const ae={id:Ii(),workerId:Q,viewMode:"terminal"};return F(pe=>[...pe,ae]),D(ae.id),O===Me.SINGLE&&H(Me.SPLIT_H),ae.id},[O]),we=B.useCallback(Q=>{F(ae=>{const pe=ae.filter(J=>J.id!==Q);return pe.length===0?[{id:Ii(),workerId:null,viewMode:"terminal"}]:pe}),D(ae=>ae===Q?null:ae)},[]),be=B.useCallback((Q,ae)=>{F(pe=>{const J=pe.find(oe=>oe.id===Q);return J!=null&&J.workerId&&J.workerId!==ae&&s("worker:output:unsubscribe",{workerId:J.workerId}),pe.map(oe=>oe.id===Q?{...oe,workerId:ae}:oe)}),ae&&s("worker:attach",{workerId:ae})},[s]),rt=B.useCallback((Q,ae)=>{F(pe=>pe.map(J=>J.id===Q?{...J,viewMode:ae}:J))},[]),ze=B.useCallback(Q=>{H(Q);const pe={[Me.SINGLE]:1,[Me.SPLIT_H]:2,[Me.SPLIT_V]:2,[Me.GRID_2X2]:4,[Me.GRID_3X2]:6,[Me.CUSTOM]:$.length}[Q]||1,J=$.length;if(pe>J){const oe=new Set($.map(Ht=>Ht.workerId).filter(Boolean)),ue=g.filter(Ht=>!oe.has(Ht.id)),ke=[...$];let Ft=0;for(let Ht=J;Ht<pe;Ht++){const Rr=ue[Ft];ke.push({id:Ii(),workerId:(Rr==null?void 0:Rr.id)||null,viewMode:"terminal"}),Rr&&Ft++}F(ke)}else pe<J&&Q!==Me.CUSTOM&&F($.slice(0,pe));I(null)},[$,g]),lt=B.useCallback(Q=>{const ae=he(Q);return O===Me.SINGLE&&ze(Me.SPLIT_H),ae},[he,O,ze]),Ae=B.useCallback((Q,ae)=>{F(pe=>{const J=pe.find(ue=>ue.id===Q),oe=pe.find(ue=>ue.id===ae);return!J||!oe?pe:pe.map(ue=>ue.id===Q?{...ue,workerId:oe.workerId}:ue.id===ae?{...ue,workerId:J.workerId}:ue)})},[]),Ce=B.useMemo(()=>({connected:r,workers:g,projects:i,activity:f,outputs:u,selectedProject:S,focusedWorker:p,toasts:l,systemMetrics:d,workerMetrics:y,metricsSubscribed:L,pendingWorkers:k,layoutMode:O,panes:$,activePaneId:N,paneSizes:P,setSelectedProject:w,setFocusedWorker:n,setActivePaneId:D,setPaneSizes:I,fetchProjects:K,spawnWorker:M,killWorker:z,sendInput:q,sendRawInput:G,resizeTerminal:ne,updateWorkerLabel:se,updateWorkerSettings:fe,broadcastToProject:de,spawnAutonomousSession:ye,attachToWorker:re,detachFromWorker:ce,subscribeToWorkerOutput:Be,unsubscribeFromWorkerOutput:Ue,addToast:V,dismissToast:Z,subscribeToMetrics:ge,unsubscribeFromMetrics:me,fetchWorkerMetrics:X,fetchSystemMetrics:Y,addPane:he,removePane:we,setPaneWorker:be,setPaneViewMode:rt,changeLayoutMode:ze,openWorkerInNewPane:lt,swapPaneWorkers:Ae}),[r,g,i,f,u,S,p,l,d,y,L,k,O,$,N,P,K,M,z,q,G,ne,se,fe,de,ye,re,ce,Be,Ue,V,Z,ge,me,X,Y,he,we,be,rt,ze,lt,Ae]);return o.jsx(sf.Provider,{value:Ce,children:e})}function Qe(){const e=B.useContext(sf);if(!e)throw new Error("useOrchestrator must be used within OrchestratorProvider");return e}function r0(){const e=()=>{if(typeof window>"u")return"lg";const g=window.innerWidth;return g<640?"xs":g<768?"sm":g<1024?"md":g<1280?"lg":"xl"},[t,r]=B.useState(e),[s,a]=B.useState(typeof window<"u"?window.innerWidth:1024);return B.useEffect(()=>{let g;const x=()=>{clearTimeout(g),g=setTimeout(()=>{const i=e(),c=window.innerWidth;r(f=>f!==i?i:f),a(f=>Math.abs(c-f)>50?c:f)},100)};return window.addEventListener("resize",x),window.addEventListener("orientationchange",x),x(),()=>{clearTimeout(g),window.removeEventListener("resize",x),window.removeEventListener("orientationchange",x)}},[]),{breakpoint:t,windowWidth:s,isMobile:t==="xs"||t==="sm",isTablet:t==="md",isDesktop:t==="lg"||t==="xl",isLargeDesktop:t==="xl"}}function s0({setActiveTab:e,detachFromWorker:t,setShowActivity:r,hasFocusedWorker:s,showActivity:a}){const g=B.useRef(null),x=B.useRef(null),i=B.useCallback(()=>{g.current=null,clearTimeout(x.current),x.current=null},[]);B.useEffect(()=>{function c(f){const _=f.target.tagName;if(_==="INPUT"||_==="TEXTAREA"||_==="SELECT"||f.target.isContentEditable||f.target.closest('[role="dialog"]')||f.target.closest("dialog"))return;if((f.ctrlKey||f.metaKey)&&f.key==="k"){f.preventDefault(),uh();return}if(f.ctrlKey||f.metaKey||f.altKey)return;if(g.current==="g"){if(i(),f.key==="t"){f.preventDefault(),fh('[title="Tree View"]');return}if(f.key==="g"){f.preventDefault(),fh('[title="Grid View"]');return}}if(f.key==="g"){g.current="g",x.current=setTimeout(i,500);return}if(f.key==="Escape"){if(a){r(!1);return}if(s){t();return}return}if(f.key==="/"){f.preventDefault(),uh();return}const u={1:"workers",2:"projects",3:"ralph",4:"history"};if(u[f.key]){e(u[f.key]);return}if(f.key==="?"&&f.shiftKey){const m=document.querySelector("[data-shortcut-help]");m&&m.click();return}}return document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c),clearTimeout(x.current)}},[e,t,r,s,a,i])}function uh(){const e=document.querySelector('input[placeholder*="Search"]');e&&(e.focus(),e.select())}function fh(e){const t=document.querySelector(e);t&&t.click()}const i0=[{label:"Navigation",shortcuts:[{keys:["1"],description:"Workers tab"},{keys:["2"],description:"Projects tab"},{keys:["3"],description:"Ralph tab"},{keys:["4"],description:"History tab"}]},{label:"Views",shortcuts:[{keys:["g","t"],description:"Tree view"},{keys:["g","g"],description:"Grid view"},{keys:["Esc"],description:"Back to grid / close sidebar"}]},{label:"Search",shortcuts:[{keys:["/"],description:"Focus search"},{keys:["Ctrl","K"],description:"Focus search"}]}];/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ie=(e,t)=>{const r=B.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:g=2,absoluteStrokeWidth:x,className:i="",children:c,...f},_)=>B.createElement("svg",{ref:_,...n0,width:a,height:a,stroke:s,strokeWidth:x?Number(g)*24/Number(a):g,className:["lucide",`lucide-${o0(e)}`,i].join(" "),...f},[...t.map(([u,m])=>B.createElement(u,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=ie("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=ie("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=ie("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=ie("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=ie("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=ie("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=ie("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=ie("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=ie("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=ie("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=ie("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=ie("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=ie("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=ie("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=ie("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=ie("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=ie("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=ie("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=ie("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=ie("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=ie("Grid2x2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=ie("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=ie("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=ie("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=ie("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=ie("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=ie("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=ie("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=ie("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=ie("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=ie("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=ie("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=ie("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=ie("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=ie("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=ie("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=ie("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=ie("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=ie("Rows2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=ie("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=ie("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=ie("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=ie("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=ie("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=ie("Signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=ie("Skull",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["path",{d:"M8 20v2h8v-2",key:"ded4og"}],["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20",key:"xq9p5u"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=ie("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=ie("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=ie("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=ie("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=ie("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=ie("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=ie("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=ie("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=ie("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=ie("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=ie("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=ie("ZapOff",[["polyline",{points:"12.41 6.75 13 2 10.57 4.92",key:"122m05"}],["polyline",{points:"18.57 12.91 21 10 15.66 10",key:"16r43o"}],["polyline",{points:"8 8 3 14 12 14 11 22 16 16",key:"tmh4bc"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=ie("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function mf(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=mf(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function U(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=mf(e))&&(s&&(s+=" "),s+=t);return s}const _f=[{group:"Strategic",color:"text-yellow-400",bgColor:"bg-yellow-400/10",borderColor:"border-yellow-400/50",roles:[{prefix:"GENERAL",label:"General",icon:D0,description:"Strategic orchestrator"}]},{group:"Operational",color:"text-blue-400",bgColor:"bg-blue-400/10",borderColor:"border-blue-400/50",roles:[{prefix:"COLONEL",label:"Colonel",icon:ff,description:"Domain supervisor"}]},{group:"Tactical",color:"text-green-400",bgColor:"bg-green-400/10",borderColor:"border-green-400/50",roles:[{prefix:"RESEARCH",label:"Research",icon:eo,description:"Information gathering"},{prefix:"IMPL",label:"Implement",icon:af,description:"Implementation"},{prefix:"TEST",label:"Test",icon:lf,description:"Testing"},{prefix:"REVIEW",label:"Review",icon:p0,description:"Code review"},{prefix:"FIX",label:"Fix",icon:O0,description:"Bug fixes"}]},{group:"Other",color:"text-thea-gold",bgColor:"bg-thea-gold/10",borderColor:"border-thea-gold/50",roles:[{prefix:"",label:"Default",icon:ro,description:"Standard worker"}]}];function F0(e){for(const t of _f)for(const r of t.roles)if(r.prefix===e||e&&r.prefix&&e.startsWith(r.prefix))return{...r,groupColor:t.color,bgColor:t.bgColor,borderColor:t.borderColor};return null}function Ut(e){if(!e)return{prefix:"",displayName:e||""};const t=e.match(/^([A-Z]+):\s*(.*)$/);return t?{prefix:t[1],displayName:t[2]}:{prefix:"",displayName:e}}function Xl({onSelect:e,position:t="below",triggerRef:r,isOpen:s,onClose:a}){const g=B.useRef(null);B.useEffect(()=>{function i(c){g.current&&!g.current.contains(c.target)&&(r!=null&&r.current)&&!r.current.contains(c.target)&&(a==null||a())}if(s)return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[s,r,a]),B.useEffect(()=>{function i(c){c.key==="Escape"&&(a==null||a())}if(s)return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[s,a]);const x=i=>{e(i),a==null||a()};return s?o.jsxs("div",{ref:g,className:U("absolute z-50 min-w-[200px] max-w-[280px]","bg-black/95 border border-thea-gold/50 shadow-lg shadow-black/50","backdrop-blur-sm",t==="below"?"top-full mt-1":"bottom-full mb-1","right-0"),style:{clipPath:"polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 8px 100%, 0 calc(100% - 8px))"},onClick:i=>i.stopPropagation(),children:[o.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 border-t border-r border-thea-gold-bright opacity-70"}),o.jsx("div",{className:"py-1",children:_f.map(i=>o.jsxs("div",{children:[o.jsx("div",{className:U("px-3 py-1.5 text-[10px] font-orbitron uppercase tracking-wider",i.color,"border-b border-thea-gold-dark/20"),children:i.group}),i.roles.map(c=>{const f=c.icon;return o.jsxs("button",{onClick:()=>x(c.prefix),className:U("w-full flex items-center gap-3 px-3 py-2","hover:bg-thea-gold/10 transition-colors","text-left"),children:[o.jsx(f,{className:U("w-4 h-4 flex-shrink-0",i.color)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-rajdhani text-white",children:c.label}),o.jsx("div",{className:"text-[10px] text-thea-gold-dark truncate",children:c.description})]})]},c.prefix||"default")})]},i.group))})]}):null}function io({label:e,size:t="sm"}){const{prefix:r}=Ut(e),s=F0(r);if(!s||!r)return null;const a=s.icon,g={sm:"text-[10px] px-1.5 py-0.5 gap-1",md:"text-xs px-2 py-1 gap-1.5"};return o.jsxs("span",{className:U("inline-flex items-center font-mono uppercase tracking-wider","border",s.bgColor,s.borderColor,s.groupColor,g[t]),children:[o.jsx(a,{className:U(t==="sm"?"w-3 h-3":"w-3.5 h-3.5")}),r]})}const H0={crown:f0,brain:c0,"layout-grid":Wr,server:uf,flask:lf,folder:Yn};function z0({project:e,isSelected:t,onSelect:r,editMode:s,onDragStart:a,onDragOver:g,onDrop:x,isDragging:i}){var l,h,d;const{spawnWorker:c}=Qe(),[f,_]=B.useState(!1),[u,m]=B.useState(!1),S=B.useRef(null);(l=e.workers)!=null&&l.length;const w=((h=e.workers)==null?void 0:h.filter(v=>v.status==="running").length)||0,p=async v=>{m(!1),_(!0);try{const y=v?`${v}: ${e.name}`:`${e.name} Worker`;await c(e.path,y)}finally{setTimeout(()=>_(!1),500)}},n=e.path?e.path.split("/").pop():"";return o.jsxs("div",{"data-testid":`project-card-${e.name}`,draggable:s,onDragStart:v=>s&&a(v,e),onDragOver:v=>s&&g(v),onDrop:v=>s&&x(v,e),onClick:()=>!s&&r(e.name),className:U("group flex items-center justify-between py-2.5 px-3 ml-6 border-l border-thea-gold-dark/30","transition-all",!s&&"hover:bg-thea-gold/5 hover:border-thea-gold/50 cursor-pointer",s&&"hover:bg-thea-gold/10 cursor-grab active:cursor-grabbing",t&&!s&&"bg-thea-gold/10 border-thea-gold",i&&"opacity-50 bg-thea-gold/20"),children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s&&o.jsx(v0,{className:"w-3.5 h-3.5 text-thea-gold-dark flex-shrink-0"}),o.jsx("span",{className:U("font-rajdhani text-sm truncate",t&&!s?"text-thea-gold-bright":"text-white/80 group-hover:text-white"),children:e.name}),n&&n!==e.name&&!s&&o.jsx("span",{className:"text-[10px] text-thea-gold-dark/50 font-mono truncate hidden sm:inline",children:n}),w>0&&!s&&o.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] text-thea-gold font-mono flex-shrink-0",children:[o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-status-success animate-pulse"}),w]}),((d=e.tags)==null?void 0:d.length)>0&&!s&&o.jsx("div",{className:"hidden sm:flex gap-1 flex-shrink-0",children:e.tags.slice(0,2).map(v=>o.jsx("span",{className:"text-[9px] px-1.5 py-0.5 bg-thea-gold/10 text-thea-gold-dark border border-thea-gold-dark/30 font-mono uppercase",children:v},v))})]}),e.description&&!s&&o.jsx("p",{className:"text-[10px] text-thea-gold-dark/60 font-rajdhani truncate mt-0.5 max-w-[280px]",children:e.description})]}),!s&&o.jsxs("div",{className:"relative flex-shrink-0",children:[o.jsx("button",{ref:S,"data-testid":`spawn-worker-${e.name}`,onClick:v=>{v.stopPropagation(),f||m(!u)},disabled:f,className:U("opacity-30 group-hover:opacity-100 transition-opacity","p-1.5 hover:bg-thea-gold/20 border border-transparent hover:border-thea-gold/50","flex items-center gap-0.5",(f||u)&&"opacity-100"),children:f?o.jsx(nt,{className:"w-3.5 h-3.5 text-status-success animate-spin"}):o.jsxs(o.Fragment,{children:[o.jsx(Zn,{className:"w-3.5 h-3.5 text-thea-gold"}),o.jsx(yt,{className:U("w-2.5 h-2.5 text-thea-gold transition-transform",u&&"rotate-180")})]})}),o.jsx(Xl,{isOpen:u,onClose:()=>m(!1),onSelect:p,triggerRef:S,position:"below"})]})]})}function $0({folder:e,selectedProject:t,onSelectProject:r,editMode:s,onFolderLabelChange:a,onProjectDragStart:g,onProjectDragOver:x,onProjectDrop:i,onFolderDrop:c,draggingProject:f}){const[_,u]=B.useState(()=>e.id!=="_uncategorized"),[m,S]=B.useState(!1),[w,p]=B.useState(e.label),n=B.useRef(null),l=H0[e.icon]||Yn,h=e.projects.reduce((E,A)=>{var R;return E+(((R=A.workers)==null?void 0:R.filter(T=>T.status==="running").length)||0)},0),d=E=>{E.stopPropagation(),p(e.label),S(!0),setTimeout(()=>{var A;return(A=n.current)==null?void 0:A.select()},0)},v=()=>{w.trim()&&w!==e.label&&a(e.id,w.trim()),S(!1)},y=()=>{p(e.label),S(!1)},C=E=>{E.key==="Enter"&&v(),E.key==="Escape"&&y()},L=E=>{f&&(E.preventDefault(),E.currentTarget.classList.add("bg-thea-gold/10"))},b=E=>{E.currentTarget.classList.remove("bg-thea-gold/10")},k=E=>{E.currentTarget.classList.remove("bg-thea-gold/10"),f&&c(e.id)};return o.jsxs("div",{className:"mb-1",onDragOver:L,onDragLeave:b,onDrop:k,children:[o.jsxs("div",{onClick:()=>!m&&u(!_),className:U("w-full flex items-center gap-2 py-2.5 px-3","hover:bg-thea-gold/5 transition-all group cursor-pointer"),children:[_?o.jsx(yt,{className:"w-4 h-4 text-thea-gold-dark"}):o.jsx(_i,{className:"w-4 h-4 text-thea-gold-dark"}),o.jsx(l,{className:"w-4 h-4 flex-shrink-0",style:{color:e.color}}),m?o.jsxs("div",{className:"flex items-center gap-1 flex-1",onClick:E=>E.stopPropagation(),children:[o.jsx("input",{ref:n,type:"text",value:w,onChange:E=>p(E.target.value),onKeyDown:C,onBlur:v,className:"flex-1 bg-black/50 border border-thea-gold px-2 py-0.5 text-xs font-orbitron uppercase tracking-wider text-thea-gold-bright outline-none",autoFocus:!0}),o.jsx("button",{onClick:v,className:"p-1 hover:bg-thea-gold/20",children:o.jsx(Xn,{className:"w-3.5 h-3.5 text-status-success"})}),o.jsx("button",{onClick:y,className:"p-1 hover:bg-thea-gold/20",children:o.jsx(Ke,{className:"w-3.5 h-3.5 text-thea-maroon-light"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"font-orbitron text-xs uppercase tracking-wider text-thea-gold-bright flex-1 text-left",children:e.label}),s&&e.id!=="_uncategorized"&&o.jsx("button",{onClick:d,className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-thea-gold/20 transition-opacity",children:o.jsx(hf,{className:"w-3 h-3 text-thea-gold-dark"})})]}),o.jsx("span",{className:"text-[10px] font-mono text-thea-gold-dark",children:e.projects.length}),h>0&&o.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-status-success font-mono",children:[o.jsx(Kl,{className:"w-2.5 h-2.5 animate-pulse"}),h]})]}),_&&o.jsx("div",{className:"pb-1",children:e.projects.length===0?o.jsx("div",{className:"py-2 px-3 ml-6 border-l border-thea-gold-dark/20 text-thea-gold-dark/50 text-xs italic",children:"Drop projects here"}):e.projects.map(E=>o.jsx(z0,{project:E,isSelected:t===E.name,onSelect:r,editMode:s,onDragStart:g,onDragOver:x,onDrop:i,isDragging:(f==null?void 0:f.name)===E.name},E.name))})]})}function W0({tree:e,selectedProject:t,onSelectProject:r,editMode:s,onConfigChange:a}){const[g,x]=B.useState(null),[i,c]=B.useState(null);if(!e||e.length===0)return o.jsx("div",{className:"text-center py-8 text-thea-gold-dark/50 text-sm",children:"No projects found"});const f=(w,p)=>{a&&a({type:"renameFolder",folderId:w,newLabel:p})},_=(w,p)=>{x(p),c(p.folder),w.dataTransfer.effectAllowed="move",w.dataTransfer.setData("text/plain",p.name)},u=w=>{w.preventDefault()},m=(w,p)=>{w.preventDefault(),x(null),c(null)},S=w=>{g&&i!==w&&a&&a({type:"moveProject",projectName:g.name,fromFolder:i,toFolder:w}),x(null),c(null)};return o.jsx("div",{className:"divide-y divide-thea-gold-dark/20",onDragEnd:()=>{x(null),c(null)},children:e.map(w=>o.jsx($0,{folder:w,selectedProject:t,onSelectProject:r,editMode:s,onFolderLabelChange:f,onProjectDragStart:_,onProjectDragOver:u,onProjectDrop:m,onFolderDrop:S,draggingProject:g},w.id))})}function U0({project:e,isSelected:t,onSelect:r,folderLabel:s}){var S,w,p;const{spawnWorker:a}=Qe(),[g,x]=B.useState(!1),[i,c]=B.useState(!1),f=B.useRef(null),_=((S=e.workers)==null?void 0:S.length)||0,u=((w=e.workers)==null?void 0:w.filter(n=>n.status==="running").length)||0,m=async n=>{c(!1),x(!0);try{const l=n?`${n}: ${e.name}`:`${e.name} Worker`;await a(e.path,l)}finally{setTimeout(()=>x(!1),500)}};return o.jsxs("div",{"data-testid":`project-card-${e.name}`,onClick:()=>r(e.name),className:U("thea-card group cursor-pointer p-4",t&&"border-thea-gold shadow-gold-md",g&&"border-status-success shadow-[0_0_20px_rgba(78,201,176,0.4)]"),style:{clipPath:"polygon(0 0, calc(100% - 10px) 0, 100% 10px, 100% 100%, 10px 100%, 0 calc(100% - 10px))"},children:[o.jsx("div",{className:U("absolute top-0 right-0 w-2.5 h-2.5 border-t-2 border-r-2 transition-all",g?"border-status-success opacity-100":"border-thea-gold-bright opacity-50 group-hover:opacity-100 animate-corner-pulse")}),g&&o.jsx("div",{className:"absolute inset-0 bg-status-success/10 flex items-center justify-center z-10 backdrop-blur-[1px]",children:o.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-black/80 border border-status-success rounded-sm",children:[o.jsx(nt,{className:"w-4 h-4 text-status-success animate-spin"}),o.jsx("span",{className:"text-status-success text-xs font-mono uppercase tracking-wider",children:"Spawning Claude..."})]})}),o.jsxs("div",{className:"mb-2",children:[o.jsx("div",{className:"flex items-start justify-between",children:o.jsx("h3",{className:"font-orbitron font-bold text-thea-gold-bright uppercase tracking-wider text-sm truncate",children:e.name})}),o.jsx("p",{className:"text-[10px] text-thea-gold-dark font-mono truncate max-w-[180px]",children:e.path}),e.description&&o.jsx("p",{className:"text-[10px] text-thea-gold-dark/60 font-rajdhani truncate mt-1",children:e.description}),((p=e.tags)==null?void 0:p.length)>0&&o.jsx("div",{className:"flex gap-1 mt-1.5 flex-wrap",children:e.tags.slice(0,3).map(n=>o.jsx("span",{className:"text-[9px] px-1.5 py-0.5 bg-thea-gold/10 text-thea-gold-dark border border-thea-gold-dark/30 font-mono uppercase",children:n},n))})]}),o.jsxs("div",{className:"flex items-center justify-between mt-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:U("thea-tag flex items-center gap-1.5",u>0?"bg-thea-gold/15 text-thea-gold border-thea-gold/40":"bg-gray-900/50 text-gray-500 border-gray-700/30"),children:[o.jsx(Kl,{className:U("w-3 h-3",u>0&&"animate-pulse-gold")}),u,"/",_]}),s&&o.jsxs("span",{className:"flex items-center gap-1 text-[9px] text-thea-gold-dark/50 font-mono",children:[o.jsx(Yn,{className:"w-2.5 h-2.5"}),s]})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{ref:f,"data-testid":`spawn-worker-${e.name}`,onClick:n=>{n.stopPropagation(),g||c(!i)},disabled:g,className:U("thea-btn flex items-center gap-1 px-3 py-1.5 text-xs",g&&"opacity-50 cursor-not-allowed"),children:[g?o.jsx(nt,{className:"w-3 h-3 animate-spin"}):o.jsx(Zn,{className:"w-3 h-3"}),g?"Spawning...":"New",!g&&o.jsx(yt,{className:U("w-3 h-3 transition-transform",i&&"rotate-180")})]}),o.jsx(Xl,{isOpen:i,onClose:()=>c(!1),onSelect:m,triggerRef:f,position:"below"})]})]})]})}function vf({score:e=null,status:t=null,size:r="md",showScore:s=!0,className:a}){const g=t||xf(e),x={healthy:{icon:x0,color:"text-green-400",bgColor:"bg-green-500/20",borderColor:"border-green-500/30",glow:"shadow-[0_0_8px_rgba(74,222,128,0.4)]",label:"Healthy"},warning:{icon:Nt,color:"text-yellow-400",bgColor:"bg-yellow-500/20",borderColor:"border-yellow-500/30",glow:"shadow-[0_0_8px_rgba(250,204,21,0.4)]",label:"Warning"},critical:{icon:I0,color:"text-red-400",bgColor:"bg-red-500/20",borderColor:"border-red-500/30",glow:"shadow-[0_0_8px_rgba(248,113,113,0.4)]",label:"Critical"},unknown:{icon:Et,color:"text-thea-gold-dark",bgColor:"bg-thea-gold/10",borderColor:"border-thea-gold-dark/30",glow:"",label:"Unknown"}},i={sm:{container:"gap-1 px-1.5 py-0.5",icon:"w-3 h-3",text:"text-[10px]"},md:{container:"gap-1.5 px-2 py-1",icon:"w-3.5 h-3.5",text:"text-xs"},lg:{container:"gap-2 px-3 py-1.5",icon:"w-4 h-4",text:"text-sm"}},{icon:c,color:f,bgColor:_,borderColor:u,glow:m}=x[g]||x.unknown,S=i[r]||i.md;return o.jsxs("div",{className:U("inline-flex items-center rounded border font-mono",_,u,f,m,S.container,a),title:`Health: ${e!==null?`${e}%`:"Unknown"}`,children:[o.jsx(c,{className:U(S.icon,g==="healthy"&&"animate-pulse")}),s&&e!==null&&o.jsx("span",{className:S.text,children:e})]})}function xf(e){return e==null?"unknown":e>=80?"healthy":e>=50?"warning":"critical"}function vi({score:e,status:t,size:r="md",className:s}){const a=t||xf(e),g={healthy:"bg-green-400 shadow-[0_0_6px_rgba(74,222,128,0.6)]",warning:"bg-yellow-400 shadow-[0_0_6px_rgba(250,204,21,0.6)]",critical:"bg-red-400 shadow-[0_0_6px_rgba(248,113,113,0.6)]",unknown:"bg-thea-gold-dark/50"},x={sm:"w-1.5 h-1.5",md:"w-2 h-2",lg:"w-2.5 h-2.5"};return o.jsx("span",{className:U("inline-block rounded-full",g[a]||g.unknown,x[r]||x.md,a!=="unknown"&&"animate-pulse",s),title:`Health: ${e!==null?`${e}%`:"Unknown"}`})}function V0(e){return{healthy:100,active:90,stalled:50,warning:40,critical:20,error:10,stopped:0}[e]??null}function q0(e){if(!e)return"";const t=Date.now()-new Date(e).getTime();if(t<0)return"";const r=Math.floor(t/1e3);if(r<60)return`${r}s`;const s=Math.floor(r/60);if(s<60)return`${s}m`;const a=Math.floor(s/60),g=s%60;return a<24?`${a}h ${g}m`:`${Math.floor(a/24)}d ${a%24}h`}function yf(e){return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}const gh={worker_started:{icon:df,color:"text-status-success"},worker_stopped:{icon:to,color:"text-thea-maroon-light"},error:{icon:Nt,color:"text-status-error"}};function mh({worker:e}){const{attachToWorker:t,killWorker:r}=Qe(),s={running:"thea-badge-running",stopped:"thea-badge-stopped",error:"thea-badge-error"};return o.jsxs("div",{className:"group flex items-center gap-3 py-2.5 px-3 hover:bg-thea-gold/5 transition-colors border-b border-thea-gold-dark/10 last:border-0",children:[o.jsx(vi,{score:V0(e.health),size:"md"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[o.jsx(io,{label:e.label,size:"sm"}),o.jsx("span",{className:"font-rajdhani text-sm text-white/90 truncate",children:Ut(e.label).displayName||e.label})]}),o.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[o.jsx("span",{className:U("thea-badge text-[9px]",s[e.status]||"bg-gray-800 text-gray-400 border-gray-600"),children:e.status}),o.jsx("span",{className:"text-[10px] text-thea-gold-dark font-mono",children:q0(e.createdAt)}),e.ralphStatus==="in_progress"&&e.ralphProgress!=null&&o.jsxs("span",{className:"text-[10px] text-purple-400 font-mono",children:[e.ralphProgress,"%"]})]})]}),o.jsxs("div",{className:"flex items-center gap-1 opacity-30 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>t(e.id),className:"p-1.5 hover:bg-thea-gold/20 border border-transparent hover:border-thea-gold/50 transition-all",title:"Open terminal",children:o.jsx(Qn,{className:"w-3.5 h-3.5 text-thea-gold"})}),o.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 hover:bg-red-500/20 border border-transparent hover:border-red-500/50 transition-all",title:"Kill worker",children:o.jsx(Ke,{className:"w-3.5 h-3.5 text-thea-maroon-light"})})]})]})}function K0({checkpoint:e}){const[t,r]=B.useState(!1);return o.jsxs("div",{className:"border-b border-thea-gold-dark/10 last:border-0",children:[o.jsxs("button",{onClick:()=>r(!t),className:"w-full flex items-center gap-3 py-2 px-3 hover:bg-thea-gold/5 transition-colors text-left",children:[o.jsx(hi,{className:"w-3.5 h-3.5 text-thea-gold-dark/50 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("span",{className:"text-sm font-rajdhani text-white/70 truncate block",children:e.label||e.workerId}),o.jsxs("span",{className:"text-[10px] text-thea-gold-dark font-mono",children:[e.diedAt?yf(e.diedAt):"",e.uptime?`  ${e.uptime}`:""]})]}),o.jsx(yt,{className:U("w-3.5 h-3.5 text-thea-gold-dark transition-transform",t&&"rotate-180")})]}),t&&o.jsxs("div",{className:"px-3 pb-2 ml-6",children:[e.crashReason&&o.jsxs("p",{className:"text-[10px] text-thea-maroon-light font-mono mb-1",children:["Reason: ",e.crashReason]}),e.task&&o.jsxs("p",{className:"text-[10px] text-thea-gold-dark font-mono mb-1 truncate",children:["Task: ",e.task]}),e.lastOutput&&o.jsx("pre",{className:"text-[9px] text-thea-gold-dark/60 font-mono bg-black/30 p-2 max-h-24 overflow-auto whitespace-pre-wrap border border-thea-gold-dark/10",children:e.lastOutput.slice(-500)})]})]})}function G0({project:e,onBack:t}){var v;const{workers:r,activity:s,spawnWorker:a,addToast:g}=Qe(),[x,i]=B.useState([]),[c,f]=B.useState(!0),[_,u]=B.useState(!1),[m,S]=B.useState(!1),w=B.useRef(null),p=B.useMemo(()=>r.filter(y=>y.project===e.name),[r,e.name]),n=B.useMemo(()=>p.filter(y=>y.status==="running"),[p]),l=B.useMemo(()=>s.filter(y=>y.project===e.name).slice(0,20),[s,e.name]);B.useEffect(()=>{let y=!1;return f(!0),Ee("/api/checkpoints").then(C=>{if(!C.ok)throw new Error(`HTTP ${C.status}`);return C.json()}).then(C=>{if(y)return;const L=(Array.isArray(C)?C:[]).filter(b=>{var k;return b.project===e.name||((k=b.projectPath)==null?void 0:k.includes(e.name))});i(L)}).catch(C=>{y||console.error("Failed to fetch checkpoints:",C)}).finally(()=>{y||f(!1)}),()=>{y=!0}},[e.name]);const h=B.useCallback(async y=>{u(!1),S(!0);try{const C=y?`${y}: ${e.name}`:`${e.name} Worker`;await a(e.path,C)}finally{setTimeout(()=>S(!1),500)}},[e,a]),d=B.useMemo(()=>{let y=0;for(const b of p)b.createdAt&&(y+=Date.now()-new Date(b.createdAt).getTime());if(y<6e4)return`${Math.floor(y/1e3)}s`;if(y<36e5)return`${Math.floor(y/6e4)}m`;const C=Math.floor(y/36e5),L=Math.floor(y%36e5/6e4);return`${C}h ${L}m`},[p]);return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b border-thea-gold-dark/30 bg-black/20",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("button",{onClick:t,className:"p-1.5 hover:bg-thea-gold/10 border border-thea-gold-dark/30 hover:border-thea-gold/50 transition-all",title:"Back to projects",children:o.jsx(di,{className:"w-4 h-4 text-thea-gold"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h2",{className:"font-orbitron text-sm uppercase tracking-wider text-thea-gold-bright truncate",children:e.name}),o.jsx("p",{className:"text-[10px] font-mono text-thea-gold-dark truncate",children:e.path})]}),o.jsxs("div",{className:"relative flex-shrink-0",children:[o.jsxs("button",{ref:w,onClick:()=>!m&&u(!_),disabled:m,className:U("thea-btn flex items-center gap-1.5 px-3 py-1.5 text-xs",m&&"opacity-50 cursor-not-allowed"),children:[m?o.jsx(nt,{className:"w-3.5 h-3.5 animate-spin"}):o.jsx(Zn,{className:"w-3.5 h-3.5"}),m?"Spawning...":"Spawn Worker",!m&&o.jsx(yt,{className:U("w-3 h-3 transition-transform",_&&"rotate-180")})]}),o.jsx(Xl,{isOpen:_,onClose:()=>u(!1),onSelect:h,triggerRef:w,position:"below"})]})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.folderLabel&&o.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-thea-gold-dark font-mono",children:[o.jsx(Yn,{className:"w-3 h-3"}),e.folderLabel]}),(v=e.tags)==null?void 0:v.map(y=>o.jsx("span",{className:"text-[9px] px-1.5 py-0.5 bg-thea-gold/10 text-thea-gold-dark border border-thea-gold-dark/30 font-mono uppercase",children:y},y))]}),e.description&&o.jsx("p",{className:"text-xs text-thea-gold-dark/70 font-rajdhani mt-2",children:e.description}),o.jsxs("div",{className:"flex items-center gap-4 mt-3 pt-3 border-t border-thea-gold-dark/20",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(so,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),o.jsxs("span",{className:"text-[10px] font-mono text-thea-gold",children:[n.length,o.jsxs("span",{className:"text-thea-gold-dark",children:["/",p.length," workers"]})]})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(er,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),o.jsxs("span",{className:"text-[10px] font-mono text-thea-gold",children:[d,o.jsx("span",{className:"text-thea-gold-dark",children:" uptime"})]})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(hi,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),o.jsxs("span",{className:"text-[10px] font-mono text-thea-gold",children:[c?"...":x.length,o.jsx("span",{className:"text-thea-gold-dark",children:" checkpoints"})]})]})]})]}),o.jsxs("div",{className:"flex-1 overflow-auto",children:[o.jsxs("section",{children:[o.jsxs("div",{className:"flex items-center gap-2 px-4 py-2.5 bg-black/30 border-b border-thea-gold-dark/20",children:[o.jsx(Kl,{className:"w-3.5 h-3.5 text-status-success animate-pulse"}),o.jsx("h3",{className:"font-orbitron text-[10px] uppercase tracking-wider text-thea-gold-bright",children:"Active Workers"}),o.jsx("span",{className:"text-[10px] font-mono text-thea-gold-dark ml-auto",children:n.length})]}),n.length===0?o.jsx("div",{className:"px-4 py-6 text-center",children:o.jsx("span",{className:"text-thea-gold-dark/50 text-xs font-mono",children:"No active workers"})}):n.map(y=>o.jsx(mh,{worker:y},y.id))]}),p.filter(y=>y.status!=="running").length>0&&o.jsxs("section",{children:[o.jsxs("div",{className:"flex items-center gap-2 px-4 py-2.5 bg-black/30 border-b border-thea-gold-dark/20 border-t border-thea-gold-dark/10",children:[o.jsx(to,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),o.jsx("h3",{className:"font-orbitron text-[10px] uppercase tracking-wider text-thea-gold-dark",children:"Stopped Workers"}),o.jsx("span",{className:"text-[10px] font-mono text-thea-gold-dark ml-auto",children:p.filter(y=>y.status!=="running").length})]}),p.filter(y=>y.status!=="running").map(y=>o.jsx(mh,{worker:y},y.id))]}),o.jsxs("section",{children:[o.jsxs("div",{className:"flex items-center gap-2 px-4 py-2.5 bg-black/30 border-b border-thea-gold-dark/20 border-t border-thea-gold-dark/10",children:[o.jsx(hi,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),o.jsx("h3",{className:"font-orbitron text-[10px] uppercase tracking-wider text-thea-gold-dark",children:"Checkpoints"}),o.jsx("span",{className:"text-[10px] font-mono text-thea-gold-dark ml-auto",children:c?o.jsx(nt,{className:"w-3 h-3 animate-spin"}):x.length})]}),c?o.jsx("div",{className:"px-4 py-4 text-center",children:o.jsx(nt,{className:"w-4 h-4 text-thea-gold-dark animate-spin mx-auto"})}):x.length===0?o.jsx("div",{className:"px-4 py-4 text-center",children:o.jsx("span",{className:"text-thea-gold-dark/50 text-xs font-mono",children:"No checkpoints"})}):x.slice(0,10).map(y=>o.jsx(K0,{checkpoint:y},y.workerId||y.id))]}),o.jsxs("section",{children:[o.jsxs("div",{className:"flex items-center gap-2 px-4 py-2.5 bg-black/30 border-b border-thea-gold-dark/20 border-t border-thea-gold-dark/10",children:[o.jsx(Et,{className:"w-3.5 h-3.5 text-thea-gold animate-pulse-gold"}),o.jsx("h3",{className:"font-orbitron text-[10px] uppercase tracking-wider text-thea-gold-bright",children:"Recent Activity"}),o.jsx("span",{className:"text-[10px] font-mono text-thea-gold-dark ml-auto",children:l.length})]}),l.length===0?o.jsx("div",{className:"px-4 py-6 text-center",children:o.jsx("span",{className:"text-thea-gold-dark/50 text-xs font-mono",children:"No recent activity"})}):o.jsx("ul",{children:l.map(y=>{const C=gh[y.type]||gh.error,L=C.icon;return o.jsx("li",{className:"px-4 py-2.5 hover:bg-thea-gold/5 transition-colors border-b border-thea-gold-dark/10 last:border-0",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(L,{className:U("w-3.5 h-3.5 flex-shrink-0",C.color)}),o.jsx("p",{className:"text-sm text-white/80 truncate font-rajdhani flex-1",children:y.message}),o.jsx("span",{className:"text-[10px] text-thea-gold-deep font-mono flex-shrink-0",children:yf(y.timestamp)})]})},y.id)})})]})]})]})}function X0(){const{projects:e,selectedProject:t,setSelectedProject:r,addToast:s}=Qe(),[a,g]=B.useState("tree"),[x,i]=B.useState(!1),[c,f]=B.useState([]),[_,u]=B.useState(null),[m,S]=B.useState([]),[w,p]=B.useState([]),[n,l]=B.useState(""),[h,d]=B.useState(!1),[v,y]=B.useState(!0),[C,L]=B.useState(!1),[b,k]=B.useState(!1),[E,A]=B.useState(!1),[R,T]=B.useState(""),[O,H]=B.useState(!1),$=B.useCallback(async K=>{var M;try{const[z,q]=await Promise.allSettled([Ee("/api/projects?view=full",{signal:K}).then(ce=>ce.ok?ce.json():Promise.reject(new Error(`HTTP ${ce.status}`))),Ee("/api/projects/config",{signal:K}).then(ce=>ce.ok?ce.json():Promise.reject(new Error(`HTTP ${ce.status}`)))]);if(z.status==="rejected")throw z.reason;const G=z.value,ne=q.status==="fulfilled"?q.value:{},se=G.folders||{},fe=G.projects||[],de=[],ye=new Set;for(const[ce,Be]of Object.entries(se)){const Ue=fe.filter(ge=>ge.folder===ce);Ue.forEach(ge=>ye.add(ge.name)),de.push({type:"folder",id:ce,label:Be.label,icon:Be.icon,color:Be.color,projects:Ue,collapsed:!1})}const re=fe.filter(ce=>!ye.has(ce.name));re.length>0&&de.push({type:"folder",id:"_uncategorized",label:((M=G.settings)==null?void 0:M.uncategorizedLabel)||"Other Projects",icon:"folder",color:"#888888",projects:re,collapsed:!1}),f(de),u(ne),S(G.tags||[])}catch(z){if(z.name==="AbortError")return;console.error("Failed to fetch project tree:",z),s({type:"error",title:"Failed to load projects",message:z.message,duration:5e3})}finally{y(!1)}},[s]);B.useEffect(()=>{const K=new AbortController;return $(K.signal),()=>K.abort()},[$,e]);const F=K=>{x||r(K===t?null:K)},N=K=>{p(M=>M.includes(K)?M.filter(z=>z!==K):[...M,K])},D=B.useCallback(async K=>{if(!_)return;let M={..._};switch(K.type){case"renameFolder":M.folders[K.folderId]&&(M.folders[K.folderId]={...M.folders[K.folderId],label:K.newLabel});break;case"moveProject":K.fromFolder&&M.folders[K.fromFolder]&&(M.folders[K.fromFolder].projects=M.folders[K.fromFolder].projects.filter(z=>z!==K.projectName)),K.toFolder!=="_uncategorized"&&(M.folders[K.toFolder]||(M.folders[K.toFolder]={label:K.toFolder,icon:"folder",color:"#888888",projects:[]}),M.folders[K.toFolder].projects.includes(K.projectName)||M.folders[K.toFolder].projects.push(K.projectName));break;default:return}L(!0);try{if((await Ee("/api/projects/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)})).ok)u(M),await $(),s({type:"success",title:"Config saved",message:K.type==="renameFolder"?"Folder renamed":"Project moved",duration:2e3});else throw new Error("Failed to save")}catch(z){s({type:"error",title:"Failed to save",message:z.message,duration:3e3})}finally{L(!1)}},[_,$,s]),P=B.useCallback(async()=>{const K=R.trim();if(K){H(!0);try{const M=await Ee("/api/projects/external",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:K})}),z=await M.json();M.ok&&z.success?(s({type:"success",title:"Project added",message:K.split("/").pop(),duration:3e3}),T(""),A(!1),await $()):s({type:"error",title:"Failed to add project",message:z.error||"Unknown error",duration:5e3})}catch(M){s({type:"error",title:"Failed to add project",message:M.message,duration:5e3})}finally{H(!1)}}},[R,$,s]),I=B.useCallback(K=>{if(!n.trim())return!0;const M=n.toLowerCase(),z=(K.name||"").toLowerCase(),q=(K.path||"").toLowerCase(),G=(K.description||"").toLowerCase(),ne=(K.tags||[]).join(" ").toLowerCase(),se=(K.aliases||[]).join(" ").toLowerCase();return z.includes(M)||q.includes(M)||G.includes(M)||ne.includes(M)||se.includes(M)},[n]),W=B.useMemo(()=>{if(!c.length)return e;const K=new Map;for(const M of c)for(const z of M.projects)K.set(z.name,{...z,folderLabel:M.label,folderId:M.id});return e.map(M=>K.get(M.name)||M)},[e,c]),V=B.useMemo(()=>{let K=W;return w.length>0&&(K=K.filter(M=>w.some(z=>{var q;return(q=M.tags)==null?void 0:q.includes(z)}))),n.trim()&&(K=K.filter(I)),h&&(K=K.filter(M=>{var z;return((z=M.workers)==null?void 0:z.length)>0||M.description})),K},[W,w,n,I,h]),Z=B.useMemo(()=>w.length===0&&!n.trim()&&!h?c:c.map(K=>({...K,projects:K.projects.filter(M=>{var ne;const z=w.length===0||w.some(se=>{var fe;return(fe=M.tags)==null?void 0:fe.includes(se)}),q=I(M),G=!h||((ne=M.workers)==null?void 0:ne.length)>0||M.description;return z&&q&&G})})).filter(K=>K.projects.length>0),[c,w,n,I,h]),te=B.useMemo(()=>t&&W.find(K=>K.name===t)||null,[t,W]);return v?o.jsx("div",{className:"p-4 flex items-center justify-center",children:o.jsx("div",{className:"text-thea-gold-dark text-sm font-mono animate-pulse",children:"Loading projects..."})}):te&&!x?o.jsx(G0,{project:te,onBack:()=>r(null)}):o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b border-thea-gold-dark/30 bg-black/20",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"font-orbitron text-sm uppercase tracking-wider text-thea-gold",children:"Projects"}),o.jsxs("p",{className:"text-[10px] font-mono text-thea-gold-dark mt-0.5",children:[c.reduce((K,M)=>K+M.projects.length,0)," projects","  ",c.reduce((K,M)=>K+M.projects.reduce((z,q)=>{var G;return z+(((G=q.workers)==null?void 0:G.filter(ne=>ne.status==="running").length)||0)},0),0)," active workers"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[t&&!x&&o.jsx("button",{onClick:()=>r(null),className:"text-xs text-thea-gold-dark hover:text-thea-gold transition-colors mr-2",children:"Clear filter"}),o.jsxs("button",{onClick:()=>A(!E),className:U("flex items-center gap-1.5 px-3 py-1.5 text-xs font-rajdhani uppercase tracking-wider transition-all border",E?"bg-thea-gold/20 text-thea-gold border-thea-gold shadow-gold-sm":"text-thea-gold-dark border-thea-gold-dark/30 hover:border-thea-gold/50 hover:text-thea-gold"),title:"Add external project directory",children:[o.jsx(g0,{className:"w-3.5 h-3.5"}),o.jsx("span",{className:"hidden sm:inline",children:"Add"})]}),a==="tree"&&o.jsxs("button",{onClick:()=>i(!x),disabled:C,className:U("flex items-center gap-1.5 px-3 py-1.5 text-xs font-rajdhani uppercase tracking-wider transition-all border",x?"bg-thea-gold/20 text-thea-gold border-thea-gold shadow-gold-sm":"text-thea-gold-dark border-thea-gold-dark/30 hover:border-thea-gold/50 hover:text-thea-gold"),children:[C?o.jsx(nt,{className:"w-3.5 h-3.5 animate-spin"}):x?o.jsx(Xn,{className:"w-3.5 h-3.5"}):o.jsx(hf,{className:"w-3.5 h-3.5"}),x?"Done":"Edit"]}),o.jsxs("div",{className:"flex border border-thea-gold-dark/50",role:"tablist","aria-label":"Project view mode",children:[o.jsx("button",{role:"tab","aria-selected":a==="tree",onClick:()=>{g("tree")},className:U("p-1.5 transition-colors",a==="tree"?"bg-thea-gold/20 text-thea-gold":"text-thea-gold-dark hover:text-thea-gold"),title:"Tree view","aria-label":"Tree view",children:o.jsx(w0,{className:"w-4 h-4"})}),o.jsx("button",{role:"tab","aria-selected":a==="grid",onClick:()=>{g("grid"),i(!1)},className:U("p-1.5 transition-colors border-l border-thea-gold-dark/50",a==="grid"?"bg-thea-gold/20 text-thea-gold":"text-thea-gold-dark hover:text-thea-gold"),title:"Grid view","aria-label":"Grid view",children:o.jsx(Wr,{className:"w-4 h-4"})})]})]})]}),!x&&o.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[o.jsxs("div",{className:"relative flex-1",role:"search",children:[o.jsx(eo,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-thea-gold-dark pointer-events-none","aria-hidden":"true"}),o.jsx("input",{type:"text",value:n,onChange:K=>l(K.target.value),placeholder:"Search projects...",className:"w-full bg-black/50 border border-thea-gold-dark/30 pl-10 pr-10 py-2 text-sm text-thea-gold placeholder-thea-gold-dark/50 focus:outline-none focus:border-thea-gold/50 transition-colors font-mono","aria-label":"Search projects"}),n&&o.jsx("button",{onClick:()=>l(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-thea-gold-dark hover:text-thea-gold transition-colors","aria-label":"Clear search",children:o.jsx(Ke,{className:"w-4 h-4"})})]}),o.jsx("button",{onClick:()=>d(!h),className:U("text-[10px] px-2 py-2 font-mono uppercase tracking-wider transition-all border whitespace-nowrap",h?"bg-thea-gold/20 text-thea-gold border-thea-gold":"text-thea-gold-dark border-thea-gold-dark/30 hover:border-thea-gold/50"),children:"Hide Empty"})]}),x&&o.jsxs("div",{className:"mb-3 px-3 py-2 bg-thea-gold/10 border border-thea-gold/30 text-xs text-thea-gold",children:[o.jsx("span",{className:"font-bold",children:"Edit Mode:"})," Drag projects between folders. Click folder names to rename."]}),E&&o.jsxs("div",{className:"mb-3 px-3 py-2.5 bg-thea-gold/10 border border-thea-gold/30",children:[o.jsx("div",{className:"text-xs text-thea-gold font-bold mb-2",children:"Add External Project"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"text",value:R,onChange:K=>T(K.target.value),onKeyDown:K=>{K.key==="Enter"&&P(),K.key==="Escape"&&A(!1)},placeholder:"/absolute/path/to/project",autoFocus:!0,className:"flex-1 bg-black/50 border border-thea-gold-dark/30 px-3 py-1.5 text-sm text-thea-gold placeholder-thea-gold-dark/50 focus:outline-none focus:border-thea-gold/50 transition-colors font-mono"}),o.jsx("button",{onClick:P,disabled:O||!R.trim(),className:"px-3 py-1.5 text-xs font-rajdhani uppercase tracking-wider bg-thea-gold/20 text-thea-gold border border-thea-gold hover:bg-thea-gold/30 transition-all disabled:opacity-40 disabled:cursor-not-allowed",children:O?o.jsx(nt,{className:"w-3.5 h-3.5 animate-spin"}):"Add"}),o.jsx("button",{onClick:()=>{A(!1),T("")},className:"px-2 py-1.5 text-thea-gold-dark hover:text-thea-gold transition-colors",children:o.jsx(Ke,{className:"w-4 h-4"})})]}),o.jsx("p",{className:"text-[10px] text-thea-gold-dark mt-1.5 font-mono",children:"Absolute path to an external project directory. Press Enter to add, Esc to cancel."})]}),m.length>0&&!x&&o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx(pf,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),m.map(K=>o.jsx("button",{onClick:()=>N(K),className:U("text-[10px] px-2 py-1 font-mono uppercase tracking-wider transition-all","border",w.includes(K)?"bg-thea-gold/20 text-thea-gold border-thea-gold shadow-gold-sm":"text-thea-gold-dark border-thea-gold-dark/30 hover:border-thea-gold/50 hover:text-thea-gold"),children:K},K)),w.length>0&&o.jsxs("button",{onClick:()=>p([]),className:"text-[10px] px-2 py-1 text-thea-maroon-light hover:text-thea-maroon-light/80 transition-colors flex items-center gap-1",children:[o.jsx(Ke,{className:"w-3 h-3"}),"Clear"]})]})]}),o.jsx("div",{className:"flex-1 overflow-auto",children:a==="tree"?o.jsx(W0,{tree:Z,selectedProject:t,onSelectProject:F,editMode:x,onConfigChange:D}):o.jsx("div",{className:"p-4",children:V.length===0?o.jsx("div",{className:"text-center py-8 text-thea-gold-dark/50 text-sm",children:n?`No projects match "${n}"`:"No projects match the selected filters"}):o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:V.map(K=>o.jsx(U0,{project:K,isSelected:t===K.name,onSelect:F,folderLabel:K.folderId!=="_uncategorized"?K.folderLabel:void 0},K.name))})})})]})}var bf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={4567:function(x,i,c){var f=this&&this.__decorate||function(d,v,y,C){var L,b=arguments.length,k=b<3?v:C===null?C=Object.getOwnPropertyDescriptor(v,y):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,v,y,C);else for(var E=d.length-1;E>=0;E--)(L=d[E])&&(k=(b<3?L(k):b>3?L(v,y,k):L(v,y))||k);return b>3&&k&&Object.defineProperty(v,y,k),k},_=this&&this.__param||function(d,v){return function(y,C){v(y,C,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const u=c(9042),m=c(6114),S=c(9924),w=c(844),p=c(5596),n=c(4725),l=c(3656);let h=i.AccessibilityManager=class extends w.Disposable{constructor(d,v){super(),this._terminal=d,this._renderService=v,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let y=0;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);if(this._topBoundaryFocusListener=y=>this._handleBoundaryFocus(y,0),this._bottomBoundaryFocusListener=y=>this._handleBoundaryFocus(y,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new S.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(y=>this._handleResize(y.rows))),this.register(this._terminal.onRender(y=>this._refreshRows(y.start,y.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(y=>this._handleChar(y))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(y=>this._handleTab(y))),this.register(this._terminal.onKey(y=>this._handleKey(y.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new p.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,l.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,w.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(d){for(let v=0;v<d;v++)this._handleChar(" ")}_handleChar(d){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==d&&(this._charsToAnnounce+=d):this._charsToAnnounce+=d,d===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=u.tooMuchOutput)),m.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,m.isMac&&this._liveRegion.remove()}_handleKey(d){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(d)||this._charsToConsume.push(d)}_refreshRows(d,v){this._liveRegionDebouncer.refresh(d,v,this._terminal.rows)}_renderRows(d,v){const y=this._terminal.buffer,C=y.lines.length.toString();for(let L=d;L<=v;L++){const b=y.translateBufferLineToString(y.ydisp+L,!0),k=(y.ydisp+L+1).toString(),E=this._rowElements[L];E&&(b.length===0?E.innerText="":E.textContent=b,E.setAttribute("aria-posinset",k),E.setAttribute("aria-setsize",C))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(d,v){const y=d.target,C=this._rowElements[v===0?1:this._rowElements.length-2];if(y.getAttribute("aria-posinset")===(v===0?"1":`${this._terminal.buffer.lines.length}`)||d.relatedTarget!==C)return;let L,b;if(v===0?(L=y,b=this._rowElements.pop(),this._rowContainer.removeChild(b)):(L=this._rowElements.shift(),b=y,this._rowContainer.removeChild(L)),L.removeEventListener("focus",this._topBoundaryFocusListener),b.removeEventListener("focus",this._bottomBoundaryFocusListener),v===0){const k=this._createAccessibilityTreeNode();this._rowElements.unshift(k),this._rowContainer.insertAdjacentElement("afterbegin",k)}else{const k=this._createAccessibilityTreeNode();this._rowElements.push(k),this._rowContainer.appendChild(k)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(v===0?-1:1),this._rowElements[v===0?1:this._rowElements.length-2].focus(),d.preventDefault(),d.stopImmediatePropagation()}_handleResize(d){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let v=this._rowContainer.children.length;v<this._terminal.rows;v++)this._rowElements[v]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[v]);for(;this._rowElements.length>d;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const d=document.createElement("div");return d.setAttribute("role","listitem"),d.tabIndex=-1,this._refreshRowDimensions(d),d}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let d=0;d<this._terminal.rows;d++)this._refreshRowDimensions(this._rowElements[d])}}_refreshRowDimensions(d){d.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=h=f([_(1,n.IRenderService)],h)},3614:(x,i)=>{function c(m){return m.replace(/\r?\n/g,"\r")}function f(m,S){return S?"\x1B[200~"+m+"\x1B[201~":m}function _(m,S,w,p){m=f(m=c(m),w.decPrivateModes.bracketedPasteMode&&p.rawOptions.ignoreBracketedPasteMode!==!0),w.triggerDataEvent(m,!0),S.value=""}function u(m,S,w){const p=w.getBoundingClientRect(),n=m.clientX-p.left-10,l=m.clientY-p.top-10;S.style.width="20px",S.style.height="20px",S.style.left=`${n}px`,S.style.top=`${l}px`,S.style.zIndex="1000",S.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=c,i.bracketTextForPaste=f,i.copyHandler=function(m,S){m.clipboardData&&m.clipboardData.setData("text/plain",S.selectionText),m.preventDefault()},i.handlePasteEvent=function(m,S,w,p){m.stopPropagation(),m.clipboardData&&_(m.clipboardData.getData("text/plain"),S,w,p)},i.paste=_,i.moveTextAreaUnderMouseCursor=u,i.rightClickHandler=function(m,S,w,p,n){u(m,S,w),n&&p.rightClickSelect(m),S.value=p.selectionText,S.select()}},7239:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const f=c(1505);i.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(_,u,m){this._css.set(_,u,m)}getCss(_,u){return this._css.get(_,u)}setColor(_,u,m){this._color.set(_,u,m)}getColor(_,u){return this._color.get(_,u)}clear(){this._color.clear(),this._css.clear()}}},3656:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(c,f,_,u){c.addEventListener(f,_,u);let m=!1;return{dispose:()=>{m||(m=!0,c.removeEventListener(f,_,u))}}}},6465:function(x,i,c){var f=this&&this.__decorate||function(n,l,h,d){var v,y=arguments.length,C=y<3?l:d===null?d=Object.getOwnPropertyDescriptor(l,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,l,h,d);else for(var L=n.length-1;L>=0;L--)(v=n[L])&&(C=(y<3?v(C):y>3?v(l,h,C):v(l,h))||C);return y>3&&C&&Object.defineProperty(l,h,C),C},_=this&&this.__param||function(n,l){return function(h,d){l(h,d,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier2=void 0;const u=c(3656),m=c(8460),S=c(844),w=c(2585);let p=i.Linkifier2=class extends S.Disposable{get currentLink(){return this._currentLink}constructor(n){super(),this._bufferService=n,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new m.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new m.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,S.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,S.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(n){return this._linkProviders.push(n),{dispose:()=>{const l=this._linkProviders.indexOf(n);l!==-1&&this._linkProviders.splice(l,1)}}}attachToDom(n,l,h){this._element=n,this._mouseService=l,this._renderService=h,this.register((0,u.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,u.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(n){if(this._lastMouseEvent=n,!this._element||!this._mouseService)return;const l=this._positionFromMouseEvent(n,this._element,this._mouseService);if(!l)return;this._isMouseOut=!1;const h=n.composedPath();for(let d=0;d<h.length;d++){const v=h[d];if(v.classList.contains("xterm"))break;if(v.classList.contains("xterm-hover"))return}this._lastBufferCell&&l.x===this._lastBufferCell.x&&l.y===this._lastBufferCell.y||(this._handleHover(l),this._lastBufferCell=l)}_handleHover(n){if(this._activeLine!==n.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(n,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,n)||(this._clearCurrentLink(),this._askForLink(n,!0))}_askForLink(n,l){var h,d;this._activeProviderReplies&&l||((h=this._activeProviderReplies)===null||h===void 0||h.forEach(y=>{y==null||y.forEach(C=>{C.link.dispose&&C.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=n.y);let v=!1;for(const[y,C]of this._linkProviders.entries())l?!((d=this._activeProviderReplies)===null||d===void 0)&&d.get(y)&&(v=this._checkLinkProviderResult(y,n,v)):C.provideLinks(n.y,L=>{var b,k;if(this._isMouseOut)return;const E=L==null?void 0:L.map(A=>({link:A}));(b=this._activeProviderReplies)===null||b===void 0||b.set(y,E),v=this._checkLinkProviderResult(y,n,v),((k=this._activeProviderReplies)===null||k===void 0?void 0:k.size)===this._linkProviders.length&&this._removeIntersectingLinks(n.y,this._activeProviderReplies)})}_removeIntersectingLinks(n,l){const h=new Set;for(let d=0;d<l.size;d++){const v=l.get(d);if(v)for(let y=0;y<v.length;y++){const C=v[y],L=C.link.range.start.y<n?0:C.link.range.start.x,b=C.link.range.end.y>n?this._bufferService.cols:C.link.range.end.x;for(let k=L;k<=b;k++){if(h.has(k)){v.splice(y--,1);break}h.add(k)}}}}_checkLinkProviderResult(n,l,h){var d;if(!this._activeProviderReplies)return h;const v=this._activeProviderReplies.get(n);let y=!1;for(let C=0;C<n;C++)this._activeProviderReplies.has(C)&&!this._activeProviderReplies.get(C)||(y=!0);if(!y&&v){const C=v.find(L=>this._linkAtPosition(L.link,l));C&&(h=!0,this._handleNewLink(C))}if(this._activeProviderReplies.size===this._linkProviders.length&&!h)for(let C=0;C<this._activeProviderReplies.size;C++){const L=(d=this._activeProviderReplies.get(C))===null||d===void 0?void 0:d.find(b=>this._linkAtPosition(b.link,l));if(L){h=!0,this._handleNewLink(L);break}}return h}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(n){if(!this._element||!this._mouseService||!this._currentLink)return;const l=this._positionFromMouseEvent(n,this._element,this._mouseService);l&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,l)&&this._currentLink.link.activate(n,this._currentLink.link.text)}_clearCurrentLink(n,l){this._element&&this._currentLink&&this._lastMouseEvent&&(!n||!l||this._currentLink.link.range.start.y>=n&&this._currentLink.link.range.end.y<=l)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,S.disposeArray)(this._linkCacheDisposables))}_handleNewLink(n){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._linkAtPosition(n.link,l)&&(this._currentLink=n,this._currentLink.state={decorations:{underline:n.link.decorations===void 0||n.link.decorations.underline,pointerCursor:n.link.decorations===void 0||n.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,n.link,this._lastMouseEvent),n.link.decorations={},Object.defineProperties(n.link.decorations,{pointerCursor:{get:()=>{var h,d;return(d=(h=this._currentLink)===null||h===void 0?void 0:h.state)===null||d===void 0?void 0:d.decorations.pointerCursor},set:h=>{var d,v;!((d=this._currentLink)===null||d===void 0)&&d.state&&this._currentLink.state.decorations.pointerCursor!==h&&(this._currentLink.state.decorations.pointerCursor=h,this._currentLink.state.isHovered&&((v=this._element)===null||v===void 0||v.classList.toggle("xterm-cursor-pointer",h)))}},underline:{get:()=>{var h,d;return(d=(h=this._currentLink)===null||h===void 0?void 0:h.state)===null||d===void 0?void 0:d.decorations.underline},set:h=>{var d,v,y;!((d=this._currentLink)===null||d===void 0)&&d.state&&((y=(v=this._currentLink)===null||v===void 0?void 0:v.state)===null||y===void 0?void 0:y.decorations.underline)!==h&&(this._currentLink.state.decorations.underline=h,this._currentLink.state.isHovered&&this._fireUnderlineEvent(n.link,h))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(h=>{if(!this._currentLink)return;const d=h.start===0?0:h.start+1+this._bufferService.buffer.ydisp,v=this._bufferService.buffer.ydisp+1+h.end;if(this._currentLink.link.range.start.y>=d&&this._currentLink.link.range.end.y<=v&&(this._clearCurrentLink(d,v),this._lastMouseEvent&&this._element)){const y=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);y&&this._askForLink(y,!1)}})))}_linkHover(n,l,h){var d;!((d=this._currentLink)===null||d===void 0)&&d.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!0),this._currentLink.state.decorations.pointerCursor&&n.classList.add("xterm-cursor-pointer")),l.hover&&l.hover(h,l.text)}_fireUnderlineEvent(n,l){const h=n.range,d=this._bufferService.buffer.ydisp,v=this._createLinkUnderlineEvent(h.start.x-1,h.start.y-d-1,h.end.x,h.end.y-d-1,void 0);(l?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(v)}_linkLeave(n,l,h){var d;!((d=this._currentLink)===null||d===void 0)&&d.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!1),this._currentLink.state.decorations.pointerCursor&&n.classList.remove("xterm-cursor-pointer")),l.leave&&l.leave(h,l.text)}_linkAtPosition(n,l){const h=n.range.start.y*this._bufferService.cols+n.range.start.x,d=n.range.end.y*this._bufferService.cols+n.range.end.x,v=l.y*this._bufferService.cols+l.x;return h<=v&&v<=d}_positionFromMouseEvent(n,l,h){const d=h.getCoords(n,l,this._bufferService.cols,this._bufferService.rows);if(d)return{x:d[0],y:d[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(n,l,h,d,v){return{x1:n,y1:l,x2:h,y2:d,cols:this._bufferService.cols,fg:v}}};i.Linkifier2=p=f([_(0,w.IBufferService)],p)},9042:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(x,i,c){var f=this&&this.__decorate||function(p,n,l,h){var d,v=arguments.length,y=v<3?n:h===null?h=Object.getOwnPropertyDescriptor(n,l):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(p,n,l,h);else for(var C=p.length-1;C>=0;C--)(d=p[C])&&(y=(v<3?d(y):v>3?d(n,l,y):d(n,l))||y);return v>3&&y&&Object.defineProperty(n,l,y),y},_=this&&this.__param||function(p,n){return function(l,h){n(l,h,p)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const u=c(511),m=c(2585);let S=i.OscLinkProvider=class{constructor(p,n,l){this._bufferService=p,this._optionsService=n,this._oscLinkService=l}provideLinks(p,n){var l;const h=this._bufferService.buffer.lines.get(p-1);if(!h)return void n(void 0);const d=[],v=this._optionsService.rawOptions.linkHandler,y=new u.CellData,C=h.getTrimmedLength();let L=-1,b=-1,k=!1;for(let E=0;E<C;E++)if(b!==-1||h.hasContent(E)){if(h.loadCell(E,y),y.hasExtendedAttrs()&&y.extended.urlId){if(b===-1){b=E,L=y.extended.urlId;continue}k=y.extended.urlId!==L}else b!==-1&&(k=!0);if(k||b!==-1&&E===C-1){const A=(l=this._oscLinkService.getLinkData(L))===null||l===void 0?void 0:l.uri;if(A){const R={start:{x:b+1,y:p},end:{x:E+(k||E!==C-1?0:1),y:p}};let T=!1;if(!(v!=null&&v.allowNonHttpProtocols))try{const O=new URL(A);["http:","https:"].includes(O.protocol)||(T=!0)}catch{T=!0}T||d.push({text:A,range:R,activate:(O,H)=>v?v.activate(O,H,R):w(0,H),hover:(O,H)=>{var $;return($=v==null?void 0:v.hover)===null||$===void 0?void 0:$.call(v,O,H,R)},leave:(O,H)=>{var $;return($=v==null?void 0:v.leave)===null||$===void 0?void 0:$.call(v,O,H,R)}})}k=!1,y.hasExtendedAttrs()&&y.extended.urlId?(b=E,L=y.extended.urlId):(b=-1,L=-1)}}n(d)}};function w(p,n){if(confirm(`Do you want to navigate to ${n}?

WARNING: This link could potentially be dangerous`)){const l=window.open();if(l){try{l.opener=null}catch{}l.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=S=f([_(0,m.IBufferService),_(1,m.IOptionsService),_(2,m.IOscLinkService)],S)},6193:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(c,f){this._parentWindow=c,this._renderCallback=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(c){return this._refreshCallbacks.push(c),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(c,f,_){this._rowCount=_,c=c!==void 0?c:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const c=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const c of this._refreshCallbacks)c(0);this._refreshCallbacks=[]}}},5596:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ScreenDprMonitor=void 0;const f=c(844);class _ extends f.Disposable{constructor(m){super(),this._parentWindow=m,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,f.toDisposable)(()=>{this.clearListener()}))}setListener(m){this._listener&&this.clearListener(),this._listener=m,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var m;this._outerListener&&((m=this._resolutionMediaMatchList)===null||m===void 0||m.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}i.ScreenDprMonitor=_},3236:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const f=c(3614),_=c(3656),u=c(6465),m=c(9042),S=c(3730),w=c(1680),p=c(3107),n=c(5744),l=c(2950),h=c(1296),d=c(428),v=c(4269),y=c(5114),C=c(8934),L=c(3230),b=c(9312),k=c(4725),E=c(6731),A=c(8055),R=c(8969),T=c(8460),O=c(844),H=c(6114),$=c(8437),F=c(2584),N=c(7399),D=c(5941),P=c(9074),I=c(2585),W=c(5435),V=c(4567),Z=typeof window<"u"?window.document:null;class te extends R.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(M={}){super(M),this.browser=H,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new O.MutableDisposable),this._onCursorMove=this.register(new T.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new T.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new T.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new T.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new T.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new T.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new T.EventEmitter),this._onBlur=this.register(new T.EventEmitter),this._onA11yCharEmitter=this.register(new T.EventEmitter),this._onA11yTabEmitter=this.register(new T.EventEmitter),this._onWillOpen=this.register(new T.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(u.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(S.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(P.DecorationService),this._instantiationService.setService(I.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((z,q)=>this.refresh(z,q))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(z=>this._reportWindowsOptions(z))),this.register(this._inputHandler.onColor(z=>this._handleColorEvent(z))),this.register((0,T.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,T.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(z=>this._afterResize(z.cols,z.rows))),this.register((0,O.toDisposable)(()=>{var z,q;this._customKeyEventHandler=void 0,(q=(z=this.element)===null||z===void 0?void 0:z.parentNode)===null||q===void 0||q.removeChild(this.element)}))}_handleColorEvent(M){if(this._themeService)for(const z of M){let q,G="";switch(z.index){case 256:q="foreground",G="10";break;case 257:q="background",G="11";break;case 258:q="cursor",G="12";break;default:q="ansi",G="4;"+z.index}switch(z.type){case 0:const ne=A.color.toColorRGB(q==="ansi"?this._themeService.colors.ansi[z.index]:this._themeService.colors[q]);this.coreService.triggerDataEvent(`${F.C0.ESC}]${G};${(0,D.toRgbString)(ne)}${F.C1_ESCAPED.ST}`);break;case 1:if(q==="ansi")this._themeService.modifyColors(se=>se.ansi[z.index]=A.rgba.toColor(...z.color));else{const se=q;this._themeService.modifyColors(fe=>fe[se]=A.rgba.toColor(...z.color))}break;case 2:this._themeService.restoreColor(z.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(M){M?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(M){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(F.C0.ESC+"[I"),this.updateCursorStyle(M),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var M;return(M=this.textarea)===null||M===void 0?void 0:M.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(F.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const M=this.buffer.ybase+this.buffer.y,z=this.buffer.lines.get(M);if(!z)return;const q=Math.min(this.buffer.x,this.cols-1),G=this._renderService.dimensions.css.cell.height,ne=z.getWidth(q),se=this._renderService.dimensions.css.cell.width*ne,fe=this.buffer.y*this._renderService.dimensions.css.cell.height,de=q*this._renderService.dimensions.css.cell.width;this.textarea.style.left=de+"px",this.textarea.style.top=fe+"px",this.textarea.style.width=se+"px",this.textarea.style.height=G+"px",this.textarea.style.lineHeight=G+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,_.addDisposableDomListener)(this.element,"copy",z=>{this.hasSelection()&&(0,f.copyHandler)(z,this._selectionService)}));const M=z=>(0,f.handlePasteEvent)(z,this.textarea,this.coreService,this.optionsService);this.register((0,_.addDisposableDomListener)(this.textarea,"paste",M)),this.register((0,_.addDisposableDomListener)(this.element,"paste",M)),H.isFirefox?this.register((0,_.addDisposableDomListener)(this.element,"mousedown",z=>{z.button===2&&(0,f.rightClickHandler)(z,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,_.addDisposableDomListener)(this.element,"contextmenu",z=>{(0,f.rightClickHandler)(z,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),H.isLinux&&this.register((0,_.addDisposableDomListener)(this.element,"auxclick",z=>{z.button===1&&(0,f.moveTextAreaUnderMouseCursor)(z,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,_.addDisposableDomListener)(this.textarea,"keyup",M=>this._keyUp(M),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keydown",M=>this._keyDown(M),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keypress",M=>this._keyPress(M),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionupdate",M=>this._compositionHelper.compositionupdate(M))),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,_.addDisposableDomListener)(this.textarea,"input",M=>this._inputEvent(M),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(M){var z;if(!M)throw new Error("Terminal requires a parent element.");M.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=M.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),M.appendChild(this.element);const q=Z.createDocumentFragment();this._viewportElement=Z.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),q.appendChild(this._viewportElement),this._viewportScrollArea=Z.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=Z.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=Z.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),q.appendChild(this.screenElement),this.textarea=Z.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",m.promptLabel),H.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(y.CoreBrowserService,this.textarea,(z=this._document.defaultView)!==null&&z!==void 0?z:window),this._instantiationService.setService(k.ICoreBrowserService,this._coreBrowserService),this.register((0,_.addDisposableDomListener)(this.textarea,"focus",G=>this._handleTextAreaFocus(G))),this.register((0,_.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(d.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(k.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(E.ThemeService),this._instantiationService.setService(k.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(v.CharacterJoinerService),this._instantiationService.setService(k.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(L.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(k.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(G=>this._onRender.fire(G))),this.onResize(G=>this._renderService.resize(G.cols,G.rows)),this._compositionView=Z.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(l.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(q);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(C.MouseService),this._instantiationService.setService(k.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(w.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(G=>this.scrollLines(G.amount,G.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(b.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(k.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(G=>this.scrollLines(G.amount,G.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(G=>this._renderService.handleSelectionChanged(G.start,G.end,G.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(G=>{this.textarea.value=G,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(G=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,_.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(p.BufferDecorationRenderer,this.screenElement)),this.register((0,_.addDisposableDomListener)(this.element,"mousedown",G=>this._selectionService.handleMouseDown(G))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",G=>this._handleScreenReaderModeOptionChange(G))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",G=>{!this._overviewRulerRenderer&&G&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(h.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const M=this,z=this.element;function q(se){const fe=M._mouseService.getMouseReportCoords(se,M.screenElement);if(!fe)return!1;let de,ye;switch(se.overrideType||se.type){case"mousemove":ye=32,se.buttons===void 0?(de=3,se.button!==void 0&&(de=se.button<3?se.button:3)):de=1&se.buttons?0:4&se.buttons?1:2&se.buttons?2:3;break;case"mouseup":ye=0,de=se.button<3?se.button:3;break;case"mousedown":ye=1,de=se.button<3?se.button:3;break;case"wheel":if(M.viewport.getLinesScrolled(se)===0)return!1;ye=se.deltaY<0?0:1,de=4;break;default:return!1}return!(ye===void 0||de===void 0||de>4)&&M.coreMouseService.triggerMouseEvent({col:fe.col,row:fe.row,x:fe.x,y:fe.y,button:de,action:ye,ctrl:se.ctrlKey,alt:se.altKey,shift:se.shiftKey})}const G={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ne={mouseup:se=>(q(se),se.buttons||(this._document.removeEventListener("mouseup",G.mouseup),G.mousedrag&&this._document.removeEventListener("mousemove",G.mousedrag)),this.cancel(se)),wheel:se=>(q(se),this.cancel(se,!0)),mousedrag:se=>{se.buttons&&q(se)},mousemove:se=>{se.buttons||q(se)}};this.register(this.coreMouseService.onProtocolChange(se=>{se?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(se)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&se?G.mousemove||(z.addEventListener("mousemove",ne.mousemove),G.mousemove=ne.mousemove):(z.removeEventListener("mousemove",G.mousemove),G.mousemove=null),16&se?G.wheel||(z.addEventListener("wheel",ne.wheel,{passive:!1}),G.wheel=ne.wheel):(z.removeEventListener("wheel",G.wheel),G.wheel=null),2&se?G.mouseup||(z.addEventListener("mouseup",ne.mouseup),G.mouseup=ne.mouseup):(this._document.removeEventListener("mouseup",G.mouseup),z.removeEventListener("mouseup",G.mouseup),G.mouseup=null),4&se?G.mousedrag||(G.mousedrag=ne.mousedrag):(this._document.removeEventListener("mousemove",G.mousedrag),G.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,_.addDisposableDomListener)(z,"mousedown",se=>{if(se.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(se))return q(se),G.mouseup&&this._document.addEventListener("mouseup",G.mouseup),G.mousedrag&&this._document.addEventListener("mousemove",G.mousedrag),this.cancel(se)})),this.register((0,_.addDisposableDomListener)(z,"wheel",se=>{if(!G.wheel){if(!this.buffer.hasScrollback){const fe=this.viewport.getLinesScrolled(se);if(fe===0)return;const de=F.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(se.deltaY<0?"A":"B");let ye="";for(let re=0;re<Math.abs(fe);re++)ye+=de;return this.coreService.triggerDataEvent(ye,!0),this.cancel(se,!0)}return this.viewport.handleWheel(se)?this.cancel(se):void 0}},{passive:!1})),this.register((0,_.addDisposableDomListener)(z,"touchstart",se=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(se),this.cancel(se)},{passive:!0})),this.register((0,_.addDisposableDomListener)(z,"touchmove",se=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(se)?void 0:this.cancel(se)},{passive:!1}))}refresh(M,z){var q;(q=this._renderService)===null||q===void 0||q.refreshRows(M,z)}updateCursorStyle(M){var z;!((z=this._selectionService)===null||z===void 0)&&z.shouldColumnSelect(M)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(M,z,q=0){var G;q===1?(super.scrollLines(M,z,q),this.refresh(0,this.rows-1)):(G=this.viewport)===null||G===void 0||G.scrollLines(M)}paste(M){(0,f.paste)(M,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(M){this._customKeyEventHandler=M}registerLinkProvider(M){return this.linkifier2.registerLinkProvider(M)}registerCharacterJoiner(M){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const z=this._characterJoinerService.register(M);return this.refresh(0,this.rows-1),z}deregisterCharacterJoiner(M){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(M)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(M){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+M)}registerDecoration(M){return this._decorationService.registerDecoration(M)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(M,z,q){this._selectionService.setSelection(M,z,q)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var M;(M=this._selectionService)===null||M===void 0||M.clearSelection()}selectAll(){var M;(M=this._selectionService)===null||M===void 0||M.selectAll()}selectLines(M,z){var q;(q=this._selectionService)===null||q===void 0||q.selectLines(M,z)}_keyDown(M){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1)return!1;const z=this.browser.isMac&&this.options.macOptionIsMeta&&M.altKey;if(!z&&!this._compositionHelper.keydown(M))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;z||M.key!=="Dead"&&M.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const q=(0,N.evaluateKeyboardEvent)(M,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(M),q.type===3||q.type===2){const G=this.rows-1;return this.scrollLines(q.type===2?-G:G),this.cancel(M,!0)}return q.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,M)||(q.cancel&&this.cancel(M,!0),!q.key||!!(M.key&&!M.ctrlKey&&!M.altKey&&!M.metaKey&&M.key.length===1&&M.key.charCodeAt(0)>=65&&M.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(q.key!==F.C0.ETX&&q.key!==F.C0.CR||(this.textarea.value=""),this._onKey.fire({key:q.key,domEvent:M}),this._showCursor(),this.coreService.triggerDataEvent(q.key,!0),!this.optionsService.rawOptions.screenReaderMode||M.altKey||M.ctrlKey?this.cancel(M,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(M,z){const q=M.isMac&&!this.options.macOptionIsMeta&&z.altKey&&!z.ctrlKey&&!z.metaKey||M.isWindows&&z.altKey&&z.ctrlKey&&!z.metaKey||M.isWindows&&z.getModifierState("AltGraph");return z.type==="keypress"?q:q&&(!z.keyCode||z.keyCode>47)}_keyUp(M){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1||(function(z){return z.keyCode===16||z.keyCode===17||z.keyCode===18}(M)||this.focus(),this.updateCursorStyle(M),this._keyPressHandled=!1)}_keyPress(M){let z;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1)return!1;if(this.cancel(M),M.charCode)z=M.charCode;else if(M.which===null||M.which===void 0)z=M.keyCode;else{if(M.which===0||M.charCode===0)return!1;z=M.which}return!(!z||(M.altKey||M.ctrlKey||M.metaKey)&&!this._isThirdLevelShift(this.browser,M)||(z=String.fromCharCode(z),this._onKey.fire({key:z,domEvent:M}),this._showCursor(),this.coreService.triggerDataEvent(z,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(M){if(M.data&&M.inputType==="insertText"&&(!M.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const z=M.data;return this.coreService.triggerDataEvent(z,!0),this.cancel(M),!0}return!1}resize(M,z){M!==this.cols||z!==this.rows?super.resize(M,z):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(M,z){var q,G;(q=this._charSizeService)===null||q===void 0||q.measure(),(G=this.viewport)===null||G===void 0||G.syncScrollArea(!0)}clear(){var M;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let z=1;z<this.rows;z++)this.buffer.lines.push(this.buffer.getBlankLine($.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(M=this.viewport)===null||M===void 0||M.reset(),this.refresh(0,this.rows-1)}}reset(){var M,z;this.options.rows=this.rows,this.options.cols=this.cols;const q=this._customKeyEventHandler;this._setup(),super.reset(),(M=this._selectionService)===null||M===void 0||M.reset(),this._decorationService.reset(),(z=this.viewport)===null||z===void 0||z.reset(),this._customKeyEventHandler=q,this.refresh(0,this.rows-1)}clearTextureAtlas(){var M;(M=this._renderService)===null||M===void 0||M.clearTextureAtlas()}_reportFocus(){var M;!((M=this.element)===null||M===void 0)&&M.classList.contains("focus")?this.coreService.triggerDataEvent(F.C0.ESC+"[I"):this.coreService.triggerDataEvent(F.C0.ESC+"[O")}_reportWindowsOptions(M){if(this._renderService)switch(M){case W.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const z=this._renderService.dimensions.css.canvas.width.toFixed(0),q=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${F.C0.ESC}[4;${q};${z}t`);break;case W.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const G=this._renderService.dimensions.css.cell.width.toFixed(0),ne=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${F.C0.ESC}[6;${ne};${G}t`)}}cancel(M,z){if(this.options.cancelEvents||z)return M.preventDefault(),M.stopPropagation(),!1}}i.Terminal=te},9924:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(c,f=1e3){this._renderCallback=c,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(c,f,_){this._rowCount=_,c=c!==void 0?c:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const u=Date.now();if(u-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=u,this._innerRefresh();else if(!this._additionalRefreshRequested){const m=u-this._lastRefreshMs,S=this._debounceThresholdMS-m;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},S)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const c=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,f)}}},1680:function(x,i,c){var f=this&&this.__decorate||function(l,h,d,v){var y,C=arguments.length,L=C<3?h:v===null?v=Object.getOwnPropertyDescriptor(h,d):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,h,d,v);else for(var b=l.length-1;b>=0;b--)(y=l[b])&&(L=(C<3?y(L):C>3?y(h,d,L):y(h,d))||L);return C>3&&L&&Object.defineProperty(h,d,L),L},_=this&&this.__param||function(l,h){return function(d,v){h(d,v,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const u=c(3656),m=c(4725),S=c(8460),w=c(844),p=c(2585);let n=i.Viewport=class extends w.Disposable{constructor(l,h,d,v,y,C,L,b){super(),this._viewportElement=l,this._scrollArea=h,this._bufferService=d,this._optionsService=v,this._charSizeService=y,this._renderService=C,this._coreBrowserService=L,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(k=>this._renderDimensions=k)),this._handleThemeChange(b.colors),this.register(b.onChangeColors(k=>this._handleThemeChange(k))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(l){this._viewportElement.style.backgroundColor=l.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(l){if(l)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const h=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==h&&(this._lastRecordedBufferHeight=h,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const l=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==l&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=l),this._refreshAnimationFrame=null}syncScrollArea(l=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(l);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(l)}_handleScroll(l){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const h=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const l=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(l*(this._smoothScrollState.target-this._smoothScrollState.origin)),l<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(l,h){const d=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(h<0&&this._viewportElement.scrollTop!==0||h>0&&d<this._lastRecordedBufferHeight)||(l.cancelable&&l.preventDefault(),!1)}handleWheel(l){const h=this._getPixelsScrolled(l);return h!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+h:this._smoothScrollState.target+=h,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=h,this._bubbleScroll(l,h))}scrollLines(l){if(l!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const h=l*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+h,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!1})}_getPixelsScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let h=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_LINE?h*=this._currentRowHeight:l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(h*=this._currentRowHeight*this._bufferService.rows),h}getBufferElements(l,h){var d;let v,y="";const C=[],L=h??this._bufferService.buffer.lines.length,b=this._bufferService.buffer.lines;for(let k=l;k<L;k++){const E=b.get(k);if(!E)continue;const A=(d=b.get(k+1))===null||d===void 0?void 0:d.isWrapped;if(y+=E.translateToString(!A),!A||k===b.length-1){const R=document.createElement("div");R.textContent=y,C.push(R),y.length>0&&(v=R),y=""}}return{bufferElements:C,cursorElement:v}}getLinesScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let h=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(h/=this._currentRowHeight+0,this._wheelPartialScroll+=h,h=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(h*=this._bufferService.rows),h}_applyScrollModifier(l,h){const d=this._optionsService.rawOptions.fastScrollModifier;return d==="alt"&&h.altKey||d==="ctrl"&&h.ctrlKey||d==="shift"&&h.shiftKey?l*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:l*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(l){this._lastTouchY=l.touches[0].pageY}handleTouchMove(l){const h=this._lastTouchY-l.touches[0].pageY;return this._lastTouchY=l.touches[0].pageY,h!==0&&(this._viewportElement.scrollTop+=h,this._bubbleScroll(l,h))}};i.Viewport=n=f([_(2,p.IBufferService),_(3,p.IOptionsService),_(4,m.ICharSizeService),_(5,m.IRenderService),_(6,m.ICoreBrowserService),_(7,m.IThemeService)],n)},3107:function(x,i,c){var f=this&&this.__decorate||function(n,l,h,d){var v,y=arguments.length,C=y<3?l:d===null?d=Object.getOwnPropertyDescriptor(l,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,l,h,d);else for(var L=n.length-1;L>=0;L--)(v=n[L])&&(C=(y<3?v(C):y>3?v(l,h,C):v(l,h))||C);return y>3&&C&&Object.defineProperty(l,h,C),C},_=this&&this.__param||function(n,l){return function(h,d){l(h,d,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const u=c(3656),m=c(4725),S=c(844),w=c(2585);let p=i.BufferDecorationRenderer=class extends S.Disposable{constructor(n,l,h,d){super(),this._screenElement=n,this._bufferService=l,this._decorationService=h,this._renderService=d,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,u.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(v=>this._removeDecoration(v))),this.register((0,S.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const n of this._decorationService.decorations)this._renderDecoration(n);this._dimensionsChanged=!1}_renderDecoration(n){this._refreshStyle(n),this._dimensionsChanged&&this._refreshXPosition(n)}_createElement(n){var l,h;const d=document.createElement("div");d.classList.add("xterm-decoration"),d.classList.toggle("xterm-decoration-top-layer",((l=n==null?void 0:n.options)===null||l===void 0?void 0:l.layer)==="top"),d.style.width=`${Math.round((n.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,d.style.height=(n.options.height||1)*this._renderService.dimensions.css.cell.height+"px",d.style.top=(n.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",d.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const v=(h=n.options.x)!==null&&h!==void 0?h:0;return v&&v>this._bufferService.cols&&(d.style.display="none"),this._refreshXPosition(n,d),d}_refreshStyle(n){const l=n.marker.line-this._bufferService.buffers.active.ydisp;if(l<0||l>=this._bufferService.rows)n.element&&(n.element.style.display="none",n.onRenderEmitter.fire(n.element));else{let h=this._decorationElements.get(n);h||(h=this._createElement(n),n.element=h,this._decorationElements.set(n,h),this._container.appendChild(h),n.onDispose(()=>{this._decorationElements.delete(n),h.remove()})),h.style.top=l*this._renderService.dimensions.css.cell.height+"px",h.style.display=this._altBufferIsActive?"none":"block",n.onRenderEmitter.fire(h)}}_refreshXPosition(n,l=n.element){var h;if(!l)return;const d=(h=n.options.x)!==null&&h!==void 0?h:0;(n.options.anchor||"left")==="right"?l.style.right=d?d*this._renderService.dimensions.css.cell.width+"px":"":l.style.left=d?d*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(n){var l;(l=this._decorationElements.get(n))===null||l===void 0||l.remove(),this._decorationElements.delete(n),n.dispose()}};i.BufferDecorationRenderer=p=f([_(1,w.IBufferService),_(2,w.IDecorationService),_(3,m.IRenderService)],p)},5871:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(c){if(c.options.overviewRulerOptions){for(const f of this._zones)if(f.color===c.options.overviewRulerOptions.color&&f.position===c.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,c.marker.line))return;if(this._lineAdjacentToZone(f,c.marker.line,c.options.overviewRulerOptions.position))return void this._addLineToZone(f,c.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=c.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=c.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=c.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=c.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:c.options.overviewRulerOptions.color,position:c.options.overviewRulerOptions.position,startBufferLine:c.marker.line,endBufferLine:c.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(c){this._linePadding=c}_lineIntersectsZone(c,f){return f>=c.startBufferLine&&f<=c.endBufferLine}_lineAdjacentToZone(c,f,_){return f>=c.startBufferLine-this._linePadding[_||"full"]&&f<=c.endBufferLine+this._linePadding[_||"full"]}_addLineToZone(c,f){c.startBufferLine=Math.min(c.startBufferLine,f),c.endBufferLine=Math.max(c.endBufferLine,f)}}},5744:function(x,i,c){var f=this&&this.__decorate||function(v,y,C,L){var b,k=arguments.length,E=k<3?y:L===null?L=Object.getOwnPropertyDescriptor(y,C):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(v,y,C,L);else for(var A=v.length-1;A>=0;A--)(b=v[A])&&(E=(k<3?b(E):k>3?b(y,C,E):b(y,C))||E);return k>3&&E&&Object.defineProperty(y,C,E),E},_=this&&this.__param||function(v,y){return function(C,L){y(C,L,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const u=c(5871),m=c(3656),S=c(4725),w=c(844),p=c(2585),n={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0};let d=i.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(v,y,C,L,b,k,E){var A;super(),this._viewportElement=v,this._screenElement=y,this._bufferService=C,this._decorationService=L,this._renderService=b,this._optionsService=k,this._coreBrowseService=E,this._colorZoneStore=new u.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(A=this._viewportElement.parentElement)===null||A===void 0||A.insertBefore(this._canvas,this._viewportElement);const R=this._canvas.getContext("2d");if(!R)throw new Error("Ctx cannot be null");this._ctx=R,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)(()=>{var T;(T=this._canvas)===null||T===void 0||T.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,m.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const v=Math.floor(this._canvas.width/3),y=Math.ceil(this._canvas.width/3);l.full=this._canvas.width,l.left=v,l.center=y,l.right=v,this._refreshDrawHeightConstants(),h.full=0,h.left=0,h.center=l.left,h.right=l.left+l.center}_refreshDrawHeightConstants(){n.full=Math.round(2*this._coreBrowseService.dpr);const v=this._canvas.height/this._bufferService.buffer.lines.length,y=Math.round(Math.max(Math.min(v,12),6)*this._coreBrowseService.dpr);n.left=y,n.center=y,n.right=y}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const y of this._decorationService.decorations)this._colorZoneStore.addDecoration(y);this._ctx.lineWidth=1;const v=this._colorZoneStore.zones;for(const y of v)y.position!=="full"&&this._renderColorZone(y);for(const y of v)y.position==="full"&&this._renderColorZone(y);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(v){this._ctx.fillStyle=v.color,this._ctx.fillRect(h[v.position||"full"],Math.round((this._canvas.height-1)*(v.startBufferLine/this._bufferService.buffers.active.lines.length)-n[v.position||"full"]/2),l[v.position||"full"],Math.round((this._canvas.height-1)*((v.endBufferLine-v.startBufferLine)/this._bufferService.buffers.active.lines.length)+n[v.position||"full"]))}_queueRefresh(v,y){this._shouldUpdateDimensions=v||this._shouldUpdateDimensions,this._shouldUpdateAnchor=y||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=d=f([_(2,p.IBufferService),_(3,p.IDecorationService),_(4,S.IRenderService),_(5,p.IOptionsService),_(6,S.ICoreBrowserService)],d)},2950:function(x,i,c){var f=this&&this.__decorate||function(p,n,l,h){var d,v=arguments.length,y=v<3?n:h===null?h=Object.getOwnPropertyDescriptor(n,l):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(p,n,l,h);else for(var C=p.length-1;C>=0;C--)(d=p[C])&&(y=(v<3?d(y):v>3?d(n,l,y):d(n,l))||y);return v>3&&y&&Object.defineProperty(n,l,y),y},_=this&&this.__param||function(p,n){return function(l,h){n(l,h,p)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const u=c(4725),m=c(2585),S=c(2584);let w=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(p,n,l,h,d,v){this._textarea=p,this._compositionView=n,this._bufferService=l,this._optionsService=h,this._coreService=d,this._renderService=v,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(p){this._compositionView.textContent=p.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(p){if(this._isComposing||this._isSendingComposition){if(p.keyCode===229||p.keyCode===16||p.keyCode===17||p.keyCode===18)return!1;this._finalizeComposition(!1)}return p.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(p){if(this._compositionView.classList.remove("active"),this._isComposing=!1,p){const n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let l;this._isSendingComposition=!1,n.start+=this._dataAlreadySent.length,l=this._isComposing?this._textarea.value.substring(n.start,n.end):this._textarea.value.substring(n.start),l.length>0&&this._coreService.triggerDataEvent(l,!0)}},0)}else{this._isSendingComposition=!1;const n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}}_handleAnyTextareaChanges(){const p=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const n=this._textarea.value,l=n.replace(p,"");this._dataAlreadySent=l,n.length>p.length?this._coreService.triggerDataEvent(l,!0):n.length<p.length?this._coreService.triggerDataEvent(`${S.C0.DEL}`,!0):n.length===p.length&&n!==p&&this._coreService.triggerDataEvent(n,!0)}},0)}updateCompositionElements(p){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),l=this._renderService.dimensions.css.cell.height,h=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,d=n*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=d+"px",this._compositionView.style.top=h+"px",this._compositionView.style.height=l+"px",this._compositionView.style.lineHeight=l+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const v=this._compositionView.getBoundingClientRect();this._textarea.style.left=d+"px",this._textarea.style.top=h+"px",this._textarea.style.width=Math.max(v.width,1)+"px",this._textarea.style.height=Math.max(v.height,1)+"px",this._textarea.style.lineHeight=v.height+"px"}p||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=w=f([_(2,m.IBufferService),_(3,m.IOptionsService),_(4,m.ICoreService),_(5,u.IRenderService)],w)},9806:(x,i)=>{function c(f,_,u){const m=u.getBoundingClientRect(),S=f.getComputedStyle(u),w=parseInt(S.getPropertyValue("padding-left")),p=parseInt(S.getPropertyValue("padding-top"));return[_.clientX-m.left-w,_.clientY-m.top-p]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=c,i.getCoords=function(f,_,u,m,S,w,p,n,l){if(!w)return;const h=c(f,_,u);return h?(h[0]=Math.ceil((h[0]+(l?p/2:0))/p),h[1]=Math.ceil(h[1]/n),h[0]=Math.min(Math.max(h[0],1),m+(l?1:0)),h[1]=Math.min(Math.max(h[1],1),S),h):void 0}},9504:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const f=c(2584);function _(n,l,h,d){const v=n-u(n,h),y=l-u(l,h),C=Math.abs(v-y)-function(L,b,k){let E=0;const A=L-u(L,k),R=b-u(b,k);for(let T=0;T<Math.abs(A-R);T++){const O=m(L,b)==="A"?-1:1,H=k.buffer.lines.get(A+O*T);H!=null&&H.isWrapped&&E++}return E}(n,l,h);return p(C,w(m(n,l),d))}function u(n,l){let h=0,d=l.buffer.lines.get(n),v=d==null?void 0:d.isWrapped;for(;v&&n>=0&&n<l.rows;)h++,d=l.buffer.lines.get(--n),v=d==null?void 0:d.isWrapped;return h}function m(n,l){return n>l?"A":"B"}function S(n,l,h,d,v,y){let C=n,L=l,b="";for(;C!==h||L!==d;)C+=v?1:-1,v&&C>y.cols-1?(b+=y.buffer.translateBufferLineToString(L,!1,n,C),C=0,n=0,L++):!v&&C<0&&(b+=y.buffer.translateBufferLineToString(L,!1,0,n+1),C=y.cols-1,n=C,L--);return b+y.buffer.translateBufferLineToString(L,!1,n,C)}function w(n,l){const h=l?"O":"[";return f.C0.ESC+h+n}function p(n,l){n=Math.floor(n);let h="";for(let d=0;d<n;d++)h+=l;return h}i.moveToCellSequence=function(n,l,h,d){const v=h.buffer.x,y=h.buffer.y;if(!h.buffer.hasScrollback)return function(b,k,E,A,R,T){return _(k,A,R,T).length===0?"":p(S(b,k,b,k-u(k,R),!1,R).length,w("D",T))}(v,y,0,l,h,d)+_(y,l,h,d)+function(b,k,E,A,R,T){let O;O=_(k,A,R,T).length>0?A-u(A,R):k;const H=A,$=function(F,N,D,P,I,W){let V;return V=_(D,P,I,W).length>0?P-u(P,I):N,F<D&&V<=P||F>=D&&V<P?"C":"D"}(b,k,E,A,R,T);return p(S(b,O,E,H,$==="C",R).length,w($,T))}(v,y,n,l,h,d);let C;if(y===l)return C=v>n?"D":"C",p(Math.abs(v-n),w(C,d));C=y>l?"D":"C";const L=Math.abs(y-l);return p(function(b,k){return k.cols-b}(y>l?n:v,h)+(L-1)*h.cols+1+((y>l?v:n)-1),w(C,d))}},1296:function(x,i,c){var f=this&&this.__decorate||function(R,T,O,H){var $,F=arguments.length,N=F<3?T:H===null?H=Object.getOwnPropertyDescriptor(T,O):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(R,T,O,H);else for(var D=R.length-1;D>=0;D--)($=R[D])&&(N=(F<3?$(N):F>3?$(T,O,N):$(T,O))||N);return F>3&&N&&Object.defineProperty(T,O,N),N},_=this&&this.__param||function(R,T){return function(O,H){T(O,H,R)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const u=c(3787),m=c(2550),S=c(2223),w=c(6171),p=c(4725),n=c(8055),l=c(8460),h=c(844),d=c(2585),v="xterm-dom-renderer-owner-",y="xterm-rows",C="xterm-fg-",L="xterm-bg-",b="xterm-focus",k="xterm-selection";let E=1,A=i.DomRenderer=class extends h.Disposable{constructor(R,T,O,H,$,F,N,D,P,I){super(),this._element=R,this._screenElement=T,this._viewportElement=O,this._linkifier2=H,this._charSizeService=F,this._optionsService=N,this._bufferService=D,this._coreBrowserService=P,this._themeService=I,this._terminalClass=E++,this._rowElements=[],this.onRequestRedraw=this.register(new l.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(y),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(k),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,w.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(W=>this._injectCss(W))),this._injectCss(this._themeService.colors),this._rowFactory=$.createInstance(u.DomRendererRowFactory,document),this._element.classList.add(v+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(W=>this._handleLinkHover(W))),this.register(this._linkifier2.onHideLinkUnderline(W=>this._handleLinkLeave(W))),this.register((0,h.toDisposable)(()=>{this._element.classList.remove(v+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new m.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const R=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*R,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*R),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/R),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/R),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const O of this._rowElements)O.style.width=`${this.dimensions.css.canvas.width}px`,O.style.height=`${this.dimensions.css.cell.height}px`,O.style.lineHeight=`${this.dimensions.css.cell.height}px`,O.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const T=`${this._terminalSelector} .${y} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=T,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(R){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let T=`${this._terminalSelector} .${y} { color: ${R.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;T+=`${this._terminalSelector} .${y} .xterm-dim { color: ${n.color.multiplyOpacity(R.foreground,.5).css};}`,T+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,T+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",T+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${R.cursor.css};  color: ${R.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${R.cursor.css}; }}`,T+=`${this._terminalSelector} .${y}.${b} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${y}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-block { background-color: ${R.cursor.css}; color: ${R.cursorAccent.css};}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${R.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${R.cursor.css} inset;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${R.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,T+=`${this._terminalSelector} .${k} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${k} div { position: absolute; background-color: ${R.selectionBackgroundOpaque.css};}${this._terminalSelector} .${k} div { position: absolute; background-color: ${R.selectionInactiveBackgroundOpaque.css};}`;for(const[O,H]of R.ansi.entries())T+=`${this._terminalSelector} .${C}${O} { color: ${H.css}; }${this._terminalSelector} .${C}${O}.xterm-dim { color: ${n.color.multiplyOpacity(H,.5).css}; }${this._terminalSelector} .${L}${O} { background-color: ${H.css}; }`;T+=`${this._terminalSelector} .${C}${S.INVERTED_DEFAULT_COLOR} { color: ${n.color.opaque(R.background).css}; }${this._terminalSelector} .${C}${S.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${n.color.multiplyOpacity(n.color.opaque(R.background),.5).css}; }${this._terminalSelector} .${L}${S.INVERTED_DEFAULT_COLOR} { background-color: ${R.foreground.css}; }`,this._themeStyleElement.textContent=T}_setDefaultSpacing(){const R=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${R}px`,this._rowFactory.defaultSpacing=R}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(R,T){for(let O=this._rowElements.length;O<=T;O++){const H=document.createElement("div");this._rowContainer.appendChild(H),this._rowElements.push(H)}for(;this._rowElements.length>T;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(R,T){this._refreshRowElements(R,T),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(b)}handleFocus(){this._rowContainer.classList.add(b),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(R,T,O){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(R,T,O),this.renderRows(0,this._bufferService.rows-1),!R||!T)return;const H=R[1]-this._bufferService.buffer.ydisp,$=T[1]-this._bufferService.buffer.ydisp,F=Math.max(H,0),N=Math.min($,this._bufferService.rows-1);if(F>=this._bufferService.rows||N<0)return;const D=document.createDocumentFragment();if(O){const P=R[0]>T[0];D.appendChild(this._createSelectionElement(F,P?T[0]:R[0],P?R[0]:T[0],N-F+1))}else{const P=H===F?R[0]:0,I=F===$?T[0]:this._bufferService.cols;D.appendChild(this._createSelectionElement(F,P,I));const W=N-F-1;if(D.appendChild(this._createSelectionElement(F+1,0,this._bufferService.cols,W)),F!==N){const V=$===N?T[0]:this._bufferService.cols;D.appendChild(this._createSelectionElement(N,0,V))}}this._selectionContainer.appendChild(D)}_createSelectionElement(R,T,O,H=1){const $=document.createElement("div");return $.style.height=H*this.dimensions.css.cell.height+"px",$.style.top=R*this.dimensions.css.cell.height+"px",$.style.left=T*this.dimensions.css.cell.width+"px",$.style.width=this.dimensions.css.cell.width*(O-T)+"px",$}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const R of this._rowElements)R.replaceChildren()}renderRows(R,T){const O=this._bufferService.buffer,H=O.ybase+O.y,$=Math.min(O.x,this._bufferService.cols-1),F=this._optionsService.rawOptions.cursorBlink,N=this._optionsService.rawOptions.cursorStyle,D=this._optionsService.rawOptions.cursorInactiveStyle;for(let P=R;P<=T;P++){const I=P+O.ydisp,W=this._rowElements[P],V=O.lines.get(I);if(!W||!V)break;W.replaceChildren(...this._rowFactory.createRow(V,I,I===H,N,D,$,F,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${v}${this._terminalClass}`}_handleLinkHover(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!0)}_handleLinkLeave(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!1)}_setCellUnderline(R,T,O,H,$,F){O<0&&(R=0),H<0&&(T=0);const N=this._bufferService.rows-1;O=Math.max(Math.min(O,N),0),H=Math.max(Math.min(H,N),0),$=Math.min($,this._bufferService.cols);const D=this._bufferService.buffer,P=D.ybase+D.y,I=Math.min(D.x,$-1),W=this._optionsService.rawOptions.cursorBlink,V=this._optionsService.rawOptions.cursorStyle,Z=this._optionsService.rawOptions.cursorInactiveStyle;for(let te=O;te<=H;++te){const K=te+D.ydisp,M=this._rowElements[te],z=D.lines.get(K);if(!M||!z)break;M.replaceChildren(...this._rowFactory.createRow(z,K,K===P,V,Z,I,W,this.dimensions.css.cell.width,this._widthCache,F?te===O?R:0:-1,F?(te===H?T:$)-1:-1))}}};i.DomRenderer=A=f([_(4,d.IInstantiationService),_(5,p.ICharSizeService),_(6,d.IOptionsService),_(7,d.IBufferService),_(8,p.ICoreBrowserService),_(9,p.IThemeService)],A)},3787:function(x,i,c){var f=this&&this.__decorate||function(C,L,b,k){var E,A=arguments.length,R=A<3?L:k===null?k=Object.getOwnPropertyDescriptor(L,b):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(C,L,b,k);else for(var T=C.length-1;T>=0;T--)(E=C[T])&&(R=(A<3?E(R):A>3?E(L,b,R):E(L,b))||R);return A>3&&R&&Object.defineProperty(L,b,R),R},_=this&&this.__param||function(C,L){return function(b,k){L(b,k,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const u=c(2223),m=c(643),S=c(511),w=c(2585),p=c(8055),n=c(4725),l=c(4269),h=c(6171),d=c(3734);let v=i.DomRendererRowFactory=class{constructor(C,L,b,k,E,A,R){this._document=C,this._characterJoinerService=L,this._optionsService=b,this._coreBrowserService=k,this._coreService=E,this._decorationService=A,this._themeService=R,this._workCell=new S.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(C,L,b){this._selectionStart=C,this._selectionEnd=L,this._columnSelectMode=b}createRow(C,L,b,k,E,A,R,T,O,H,$){const F=[],N=this._characterJoinerService.getJoinedCharacters(L),D=this._themeService.colors;let P,I=C.getNoBgTrimmedLength();b&&I<A+1&&(I=A+1);let W=0,V="",Z=0,te=0,K=0,M=!1,z=0,q=!1,G=0;const ne=[],se=H!==-1&&$!==-1;for(let fe=0;fe<I;fe++){C.loadCell(fe,this._workCell);let de=this._workCell.getWidth();if(de===0)continue;let ye=!1,re=fe,ce=this._workCell;if(N.length>0&&fe===N[0][0]){ye=!0;const Q=N.shift();ce=new l.JoinedCellData(this._workCell,C.translateToString(!0,Q[0],Q[1]),Q[1]-Q[0]),re=Q[1]-1,de=ce.getWidth()}const Be=this._isCellInSelection(fe,L),Ue=b&&fe===A,ge=se&&fe>=H&&fe<=$;let me=!1;this._decorationService.forEachDecorationAtCell(fe,L,void 0,Q=>{me=!0});let X=ce.getChars()||m.WHITESPACE_CELL_CHAR;if(X===" "&&(ce.isUnderline()||ce.isOverline())&&(X=""),G=de*T-O.get(X,ce.isBold(),ce.isItalic()),P){if(W&&(Be&&q||!Be&&!q&&ce.bg===Z)&&(Be&&q&&D.selectionForeground||ce.fg===te)&&ce.extended.ext===K&&ge===M&&G===z&&!Ue&&!ye&&!me){V+=X,W++;continue}W&&(P.textContent=V),P=this._document.createElement("span"),W=0,V=""}else P=this._document.createElement("span");if(Z=ce.bg,te=ce.fg,K=ce.extended.ext,M=ge,z=G,q=Be,ye&&A>=fe&&A<=re&&(A=fe),!this._coreService.isCursorHidden&&Ue){if(ne.push("xterm-cursor"),this._coreBrowserService.isFocused)R&&ne.push("xterm-cursor-blink"),ne.push(k==="bar"?"xterm-cursor-bar":k==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(E)switch(E){case"outline":ne.push("xterm-cursor-outline");break;case"block":ne.push("xterm-cursor-block");break;case"bar":ne.push("xterm-cursor-bar");break;case"underline":ne.push("xterm-cursor-underline")}}if(ce.isBold()&&ne.push("xterm-bold"),ce.isItalic()&&ne.push("xterm-italic"),ce.isDim()&&ne.push("xterm-dim"),V=ce.isInvisible()?m.WHITESPACE_CELL_CHAR:ce.getChars()||m.WHITESPACE_CELL_CHAR,ce.isUnderline()&&(ne.push(`xterm-underline-${ce.extended.underlineStyle}`),V===" "&&(V=""),!ce.isUnderlineColorDefault()))if(ce.isUnderlineColorRGB())P.style.textDecorationColor=`rgb(${d.AttributeData.toColorRGB(ce.getUnderlineColor()).join(",")})`;else{let Q=ce.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ce.isBold()&&Q<8&&(Q+=8),P.style.textDecorationColor=D.ansi[Q].css}ce.isOverline()&&(ne.push("xterm-overline"),V===" "&&(V="")),ce.isStrikethrough()&&ne.push("xterm-strikethrough"),ge&&(P.style.textDecoration="underline");let Y=ce.getFgColor(),he=ce.getFgColorMode(),we=ce.getBgColor(),be=ce.getBgColorMode();const rt=!!ce.isInverse();if(rt){const Q=Y;Y=we,we=Q;const ae=he;he=be,be=ae}let ze,lt,Ae,Ce=!1;switch(this._decorationService.forEachDecorationAtCell(fe,L,void 0,Q=>{Q.options.layer!=="top"&&Ce||(Q.backgroundColorRGB&&(be=50331648,we=Q.backgroundColorRGB.rgba>>8&16777215,ze=Q.backgroundColorRGB),Q.foregroundColorRGB&&(he=50331648,Y=Q.foregroundColorRGB.rgba>>8&16777215,lt=Q.foregroundColorRGB),Ce=Q.options.layer==="top")}),!Ce&&Be&&(ze=this._coreBrowserService.isFocused?D.selectionBackgroundOpaque:D.selectionInactiveBackgroundOpaque,we=ze.rgba>>8&16777215,be=50331648,Ce=!0,D.selectionForeground&&(he=50331648,Y=D.selectionForeground.rgba>>8&16777215,lt=D.selectionForeground)),Ce&&ne.push("xterm-decoration-top"),be){case 16777216:case 33554432:Ae=D.ansi[we],ne.push(`xterm-bg-${we}`);break;case 50331648:Ae=p.rgba.toColor(we>>16,we>>8&255,255&we),this._addStyle(P,`background-color:#${y((we>>>0).toString(16),"0",6)}`);break;default:rt?(Ae=D.foreground,ne.push(`xterm-bg-${u.INVERTED_DEFAULT_COLOR}`)):Ae=D.background}switch(ze||ce.isDim()&&(ze=p.color.multiplyOpacity(Ae,.5)),he){case 16777216:case 33554432:ce.isBold()&&Y<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Y+=8),this._applyMinimumContrast(P,Ae,D.ansi[Y],ce,ze,void 0)||ne.push(`xterm-fg-${Y}`);break;case 50331648:const Q=p.rgba.toColor(Y>>16&255,Y>>8&255,255&Y);this._applyMinimumContrast(P,Ae,Q,ce,ze,lt)||this._addStyle(P,`color:#${y(Y.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(P,Ae,D.foreground,ce,ze,void 0)||rt&&ne.push(`xterm-fg-${u.INVERTED_DEFAULT_COLOR}`)}ne.length&&(P.className=ne.join(" "),ne.length=0),Ue||ye||me?P.textContent=V:W++,G!==this.defaultSpacing&&(P.style.letterSpacing=`${G}px`),F.push(P),fe=re}return P&&W&&(P.textContent=V),F}_applyMinimumContrast(C,L,b,k,E,A){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,h.excludeFromContrastRatioDemands)(k.getCode()))return!1;const R=this._getContrastCache(k);let T;if(E||A||(T=R.getColor(L.rgba,b.rgba)),T===void 0){const O=this._optionsService.rawOptions.minimumContrastRatio/(k.isDim()?2:1);T=p.color.ensureContrastRatio(E||L,A||b,O),R.setColor((E||L).rgba,(A||b).rgba,T??null)}return!!T&&(this._addStyle(C,`color:${T.css}`),!0)}_getContrastCache(C){return C.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(C,L){C.setAttribute("style",`${C.getAttribute("style")||""}${L};`)}_isCellInSelection(C,L){const b=this._selectionStart,k=this._selectionEnd;return!(!b||!k)&&(this._columnSelectMode?b[0]<=k[0]?C>=b[0]&&L>=b[1]&&C<k[0]&&L<=k[1]:C<b[0]&&L>=b[1]&&C>=k[0]&&L<=k[1]:L>b[1]&&L<k[1]||b[1]===k[1]&&L===b[1]&&C>=b[0]&&C<k[0]||b[1]<k[1]&&L===k[1]&&C<k[0]||b[1]<k[1]&&L===b[1]&&C>=b[0])}};function y(C,L,b){for(;C.length<b;)C=L+C;return C}i.DomRendererRowFactory=v=f([_(1,n.ICharacterJoinerService),_(2,w.IOptionsService),_(3,n.ICoreBrowserService),_(4,w.ICoreService),_(5,w.IDecorationService),_(6,n.IThemeService)],v)},2550:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(c){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=c.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const f=c.createElement("span"),_=c.createElement("span");_.style.fontWeight="bold";const u=c.createElement("span");u.style.fontStyle="italic";const m=c.createElement("span");m.style.fontWeight="bold",m.style.fontStyle="italic",this._measureElements=[f,_,u,m],this._container.appendChild(f),this._container.appendChild(_),this._container.appendChild(u),this._container.appendChild(m),c.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(c,f,_,u){c===this._font&&f===this._fontSize&&_===this._weight&&u===this._weightBold||(this._font=c,this._fontSize=f,this._weight=_,this._weightBold=u,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${_}`,this._measureElements[1].style.fontWeight=`${u}`,this._measureElements[2].style.fontWeight=`${_}`,this._measureElements[3].style.fontWeight=`${u}`,this.clear())}get(c,f,_){let u=0;if(!f&&!_&&c.length===1&&(u=c.charCodeAt(0))<256)return this._flat[u]!==-9999?this._flat[u]:this._flat[u]=this._measure(c,0);let m=c;f&&(m+="B"),_&&(m+="I");let S=this._holey.get(m);if(S===void 0){let w=0;f&&(w|=1),_&&(w|=2),S=this._measure(c,w),this._holey.set(m,S)}return S}_measure(c,f){const _=this._measureElements[f];return _.textContent=c.repeat(32),_.offsetWidth/32}}},2223:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=c(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(x,i)=>{function c(f){return 57508<=f&&f<=57558}Object.defineProperty(i,"__esModule",{value:!0}),i.createRenderDimensions=i.excludeFromContrastRatioDemands=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(f){if(!f)throw new Error("value must not be falsy");return f},i.isPowerlineGlyph=c,i.isRestrictedPowerlineGlyph=function(f){return 57520<=f&&f<=57527},i.excludeFromContrastRatioDemands=function(f){return c(f)||function(_){return 9472<=_&&_<=9631}(f)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(c){this._bufferService=c,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?c%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)-1]:[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[c,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[Math.max(c,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const c=this.selectionStart,f=this.selectionEnd;return!(!c||!f)&&(c[1]>f[1]||c[1]===f[1]&&c[0]>f[0])}handleTrim(c){return this.selectionStart&&(this.selectionStart[1]-=c),this.selectionEnd&&(this.selectionEnd[1]-=c),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(x,i,c){var f=this&&this.__decorate||function(n,l,h,d){var v,y=arguments.length,C=y<3?l:d===null?d=Object.getOwnPropertyDescriptor(l,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,l,h,d);else for(var L=n.length-1;L>=0;L--)(v=n[L])&&(C=(y<3?v(C):y>3?v(l,h,C):v(l,h))||C);return y>3&&C&&Object.defineProperty(l,h,C),C},_=this&&this.__param||function(n,l){return function(h,d){l(h,d,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const u=c(2585),m=c(8460),S=c(844);let w=i.CharSizeService=class extends S.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(n,l,h){super(),this._optionsService=h,this.width=0,this.height=0,this._onCharSizeChange=this.register(new m.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new p(n,l,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const n=this._measureStrategy.measure();n.width===this.width&&n.height===this.height||(this.width=n.width,this.height=n.height,this._onCharSizeChange.fire())}};i.CharSizeService=w=f([_(2,u.IOptionsService)],w);class p{constructor(l,h,d){this._document=l,this._parentElement=h,this._optionsService=d,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const l={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return l.width!==0&&l.height!==0&&(this._result.width=l.width/32,this._result.height=Math.ceil(l.height)),this._result}}},4269:function(x,i,c){var f=this&&this.__decorate||function(l,h,d,v){var y,C=arguments.length,L=C<3?h:v===null?v=Object.getOwnPropertyDescriptor(h,d):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,h,d,v);else for(var b=l.length-1;b>=0;b--)(y=l[b])&&(L=(C<3?y(L):C>3?y(h,d,L):y(h,d))||L);return C>3&&L&&Object.defineProperty(h,d,L),L},_=this&&this.__param||function(l,h){return function(d,v){h(d,v,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const u=c(3734),m=c(643),S=c(511),w=c(2585);class p extends u.AttributeData{constructor(h,d,v){super(),this.content=0,this.combinedData="",this.fg=h.fg,this.bg=h.bg,this.combinedData=d,this._width=v}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(h){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=p;let n=i.CharacterJoinerService=class wf{constructor(h){this._bufferService=h,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new S.CellData}register(h){const d={id:this._nextCharacterJoinerId++,handler:h};return this._characterJoiners.push(d),d.id}deregister(h){for(let d=0;d<this._characterJoiners.length;d++)if(this._characterJoiners[d].id===h)return this._characterJoiners.splice(d,1),!0;return!1}getJoinedCharacters(h){if(this._characterJoiners.length===0)return[];const d=this._bufferService.buffer.lines.get(h);if(!d||d.length===0)return[];const v=[],y=d.translateToString(!0);let C=0,L=0,b=0,k=d.getFg(0),E=d.getBg(0);for(let A=0;A<d.getTrimmedLength();A++)if(d.loadCell(A,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==k||this._workCell.bg!==E){if(A-C>1){const R=this._getJoinedRanges(y,b,L,d,C);for(let T=0;T<R.length;T++)v.push(R[T])}C=A,b=L,k=this._workCell.fg,E=this._workCell.bg}L+=this._workCell.getChars().length||m.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-C>1){const A=this._getJoinedRanges(y,b,L,d,C);for(let R=0;R<A.length;R++)v.push(A[R])}return v}_getJoinedRanges(h,d,v,y,C){const L=h.substring(d,v);let b=[];try{b=this._characterJoiners[0].handler(L)}catch(k){console.error(k)}for(let k=1;k<this._characterJoiners.length;k++)try{const E=this._characterJoiners[k].handler(L);for(let A=0;A<E.length;A++)wf._mergeRanges(b,E[A])}catch(E){console.error(E)}return this._stringRangesToCellRanges(b,y,C),b}_stringRangesToCellRanges(h,d,v){let y=0,C=!1,L=0,b=h[y];if(b){for(let k=v;k<this._bufferService.cols;k++){const E=d.getWidth(k),A=d.getString(k).length||m.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!C&&b[0]<=L&&(b[0]=k,C=!0),b[1]<=L){if(b[1]=k,b=h[++y],!b)break;b[0]<=L?(b[0]=k,C=!0):C=!1}L+=A}}b&&(b[1]=this._bufferService.cols)}}static _mergeRanges(h,d){let v=!1;for(let y=0;y<h.length;y++){const C=h[y];if(v){if(d[1]<=C[0])return h[y-1][1]=d[1],h;if(d[1]<=C[1])return h[y-1][1]=Math.max(d[1],C[1]),h.splice(y,1),h;h.splice(y,1),y--}else{if(d[1]<=C[0])return h.splice(y,0,d),h;if(d[1]<=C[1])return C[0]=Math.min(d[0],C[0]),h;d[0]<C[1]&&(C[0]=Math.min(d[0],C[0]),v=!0)}}return v?h[h.length-1][1]=d[1]:h.push(d),h}};i.CharacterJoinerService=n=f([_(0,w.IBufferService)],n)},5114:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0,i.CoreBrowserService=class{constructor(c,f){this._textarea=c,this.window=f,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(x,i,c){var f=this&&this.__decorate||function(w,p,n,l){var h,d=arguments.length,v=d<3?p:l===null?l=Object.getOwnPropertyDescriptor(p,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(w,p,n,l);else for(var y=w.length-1;y>=0;y--)(h=w[y])&&(v=(d<3?h(v):d>3?h(p,n,v):h(p,n))||v);return d>3&&v&&Object.defineProperty(p,n,v),v},_=this&&this.__param||function(w,p){return function(n,l){p(n,l,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const u=c(4725),m=c(9806);let S=i.MouseService=class{constructor(w,p){this._renderService=w,this._charSizeService=p}getCoords(w,p,n,l,h){return(0,m.getCoords)(window,w,p,n,l,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,h)}getMouseReportCoords(w,p){const n=(0,m.getCoordsRelativeToElement)(window,w,p);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};i.MouseService=S=f([_(0,u.IRenderService),_(1,u.ICharSizeService)],S)},3230:function(x,i,c){var f=this&&this.__decorate||function(v,y,C,L){var b,k=arguments.length,E=k<3?y:L===null?L=Object.getOwnPropertyDescriptor(y,C):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(v,y,C,L);else for(var A=v.length-1;A>=0;A--)(b=v[A])&&(E=(k<3?b(E):k>3?b(y,C,E):b(y,C))||E);return k>3&&E&&Object.defineProperty(y,C,E),E},_=this&&this.__param||function(v,y){return function(C,L){y(C,L,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const u=c(3656),m=c(6193),S=c(5596),w=c(4725),p=c(8460),n=c(844),l=c(7226),h=c(2585);let d=i.RenderService=class extends n.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(v,y,C,L,b,k,E,A){if(super(),this._rowCount=v,this._charSizeService=L,this._renderer=this.register(new n.MutableDisposable),this._pausedResizeTask=new l.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new p.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new p.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new p.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new p.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new m.RenderDebouncer(E.window,(R,T)=>this._renderRows(R,T)),this.register(this._renderDebouncer),this._screenDprMonitor=new S.ScreenDprMonitor(E.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(k.onResize(()=>this._fullRefresh())),this.register(k.buffers.onBufferActivate(()=>{var R;return(R=this._renderer.value)===null||R===void 0?void 0:R.clear()})),this.register(C.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(b.onDecorationRegistered(()=>this._fullRefresh())),this.register(b.onDecorationRemoved(()=>this._fullRefresh())),this.register(C.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()})),this.register(C.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(k.buffer.y,k.buffer.y,!0))),this.register((0,u.addDisposableDomListener)(E.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(A.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in E.window){const R=new E.window.IntersectionObserver(T=>this._handleIntersectionChange(T[T.length-1]),{threshold:0});R.observe(y),this.register({dispose:()=>R.disconnect()})}}_handleIntersectionChange(v){this._isPaused=v.isIntersecting===void 0?v.intersectionRatio===0:!v.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(v,y,C=!1){this._isPaused?this._needsFullRefresh=!0:(C||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(v,y,this._rowCount))}_renderRows(v,y){this._renderer.value&&(v=Math.min(v,this._rowCount-1),y=Math.min(y,this._rowCount-1),this._renderer.value.renderRows(v,y),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:v,end:y}),this._onRender.fire({start:v,end:y}),this._isNextRenderRedrawOnly=!0)}resize(v,y){this._rowCount=y,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(v){this._renderer.value=v,this._renderer.value.onRequestRedraw(y=>this.refreshRows(y.start,y.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(v){return this._renderDebouncer.addRefreshCallback(v)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var v,y;this._renderer.value&&((y=(v=this._renderer.value).clearTextureAtlas)===null||y===void 0||y.call(v),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(v,y){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(v,y)):this._renderer.value.handleResize(v,y),this._fullRefresh())}handleCharSizeChanged(){var v;(v=this._renderer.value)===null||v===void 0||v.handleCharSizeChanged()}handleBlur(){var v;(v=this._renderer.value)===null||v===void 0||v.handleBlur()}handleFocus(){var v;(v=this._renderer.value)===null||v===void 0||v.handleFocus()}handleSelectionChanged(v,y,C){var L;this._selectionState.start=v,this._selectionState.end=y,this._selectionState.columnSelectMode=C,(L=this._renderer.value)===null||L===void 0||L.handleSelectionChanged(v,y,C)}handleCursorMove(){var v;(v=this._renderer.value)===null||v===void 0||v.handleCursorMove()}clear(){var v;(v=this._renderer.value)===null||v===void 0||v.clear()}};i.RenderService=d=f([_(2,h.IOptionsService),_(3,w.ICharSizeService),_(4,h.IDecorationService),_(5,h.IBufferService),_(6,w.ICoreBrowserService),_(7,w.IThemeService)],d)},9312:function(x,i,c){var f=this&&this.__decorate||function(b,k,E,A){var R,T=arguments.length,O=T<3?k:A===null?A=Object.getOwnPropertyDescriptor(k,E):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(b,k,E,A);else for(var H=b.length-1;H>=0;H--)(R=b[H])&&(O=(T<3?R(O):T>3?R(k,E,O):R(k,E))||O);return T>3&&O&&Object.defineProperty(k,E,O),O},_=this&&this.__param||function(b,k){return function(E,A){k(E,A,b)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const u=c(9806),m=c(9504),S=c(456),w=c(4725),p=c(8460),n=c(844),l=c(6114),h=c(4841),d=c(511),v=c(2585),y="",C=new RegExp(y,"g");let L=i.SelectionService=class extends n.Disposable{constructor(b,k,E,A,R,T,O,H,$){super(),this._element=b,this._screenElement=k,this._linkifier=E,this._bufferService=A,this._coreService=R,this._mouseService=T,this._optionsService=O,this._renderService=H,this._coreBrowserService=$,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new d.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new p.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new p.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new p.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new p.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=F=>this._handleMouseMove(F),this._mouseUpListener=F=>this._handleMouseUp(F),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(F=>this._handleTrim(F)),this.register(this._bufferService.buffers.onBufferActivate(F=>this._handleBufferActivate(F))),this.enable(),this._model=new S.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,n.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const b=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!(!b||!k||b[0]===k[0]&&b[1]===k[1])}get selectionText(){const b=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;if(!b||!k)return"";const E=this._bufferService.buffer,A=[];if(this._activeSelectionMode===3){if(b[0]===k[0])return"";const R=b[0]<k[0]?b[0]:k[0],T=b[0]<k[0]?k[0]:b[0];for(let O=b[1];O<=k[1];O++){const H=E.translateBufferLineToString(O,!0,R,T);A.push(H)}}else{const R=b[1]===k[1]?k[0]:void 0;A.push(E.translateBufferLineToString(b[1],!0,b[0],R));for(let T=b[1]+1;T<=k[1]-1;T++){const O=E.lines.get(T),H=E.translateBufferLineToString(T,!0);O!=null&&O.isWrapped?A[A.length-1]+=H:A.push(H)}if(b[1]!==k[1]){const T=E.lines.get(k[1]),O=E.translateBufferLineToString(k[1],!0,0,k[0]);T&&T.isWrapped?A[A.length-1]+=O:A.push(O)}}return A.map(R=>R.replace(C," ")).join(l.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(b){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),l.isLinux&&b&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(b){const k=this._getMouseBufferCoords(b),E=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!!(E&&A&&k)&&this._areCoordsInSelection(k,E,A)}isCellInSelection(b,k){const E=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!(!E||!A)&&this._areCoordsInSelection([b,k],E,A)}_areCoordsInSelection(b,k,E){return b[1]>k[1]&&b[1]<E[1]||k[1]===E[1]&&b[1]===k[1]&&b[0]>=k[0]&&b[0]<E[0]||k[1]<E[1]&&b[1]===E[1]&&b[0]<E[0]||k[1]<E[1]&&b[1]===k[1]&&b[0]>=k[0]}_selectWordAtCursor(b,k){var E,A;const R=(A=(E=this._linkifier.currentLink)===null||E===void 0?void 0:E.link)===null||A===void 0?void 0:A.range;if(R)return this._model.selectionStart=[R.start.x-1,R.start.y-1],this._model.selectionStartLength=(0,h.getRangeLength)(R,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const T=this._getMouseBufferCoords(b);return!!T&&(this._selectWordAt(T,k),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(b,k){this._model.clearSelection(),b=Math.max(b,0),k=Math.min(k,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,b],this._model.selectionEnd=[this._bufferService.cols,k],this.refresh(),this._onSelectionChange.fire()}_handleTrim(b){this._model.handleTrim(b)&&this.refresh()}_getMouseBufferCoords(b){const k=this._mouseService.getCoords(b,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(k)return k[0]--,k[1]--,k[1]+=this._bufferService.buffer.ydisp,k}_getMouseEventScrollAmount(b){let k=(0,u.getCoordsRelativeToElement)(this._coreBrowserService.window,b,this._screenElement)[1];const E=this._renderService.dimensions.css.canvas.height;return k>=0&&k<=E?0:(k>E&&(k-=E),k=Math.min(Math.max(k,-50),50),k/=50,k/Math.abs(k)+Math.round(14*k))}shouldForceSelection(b){return l.isMac?b.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:b.shiftKey}handleMouseDown(b){if(this._mouseDownTimeStamp=b.timeStamp,(b.button!==2||!this.hasSelection)&&b.button===0){if(!this._enabled){if(!this.shouldForceSelection(b))return;b.stopPropagation()}b.preventDefault(),this._dragScrollAmount=0,this._enabled&&b.shiftKey?this._handleIncrementalClick(b):b.detail===1?this._handleSingleClick(b):b.detail===2?this._handleDoubleClick(b):b.detail===3&&this._handleTripleClick(b),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(b){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(b))}_handleSingleClick(b){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(b)?3:0,this._model.selectionStart=this._getMouseBufferCoords(b),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const k=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);k&&k.length!==this._model.selectionStart[0]&&k.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(b){this._selectWordAtCursor(b,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(b){const k=this._getMouseBufferCoords(b);k&&(this._activeSelectionMode=2,this._selectLineAt(k[1]))}shouldColumnSelect(b){return b.altKey&&!(l.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(b){if(b.stopImmediatePropagation(),!this._model.selectionStart)return;const k=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(b),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(b),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const E=this._bufferService.buffer;if(this._model.selectionEnd[1]<E.lines.length){const A=E.lines.get(this._model.selectionEnd[1]);A&&A.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}k&&k[0]===this._model.selectionEnd[0]&&k[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const b=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(b.ydisp+this._bufferService.rows,b.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=b.ydisp),this.refresh()}}_handleMouseUp(b){const k=b.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&k<500&&b.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const E=this._mouseService.getCoords(b,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(E&&E[0]!==void 0&&E[1]!==void 0){const A=(0,m.moveToCellSequence)(E[0]-1,E[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(A,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const b=this._model.finalSelectionStart,k=this._model.finalSelectionEnd,E=!(!b||!k||b[0]===k[0]&&b[1]===k[1]);E?b&&k&&(this._oldSelectionStart&&this._oldSelectionEnd&&b[0]===this._oldSelectionStart[0]&&b[1]===this._oldSelectionStart[1]&&k[0]===this._oldSelectionEnd[0]&&k[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(b,k,E)):this._oldHasSelection&&this._fireOnSelectionChange(b,k,E)}_fireOnSelectionChange(b,k,E){this._oldSelectionStart=b,this._oldSelectionEnd=k,this._oldHasSelection=E,this._onSelectionChange.fire()}_handleBufferActivate(b){this.clearSelection(),this._trimListener.dispose(),this._trimListener=b.activeBuffer.lines.onTrim(k=>this._handleTrim(k))}_convertViewportColToCharacterIndex(b,k){let E=k;for(let A=0;k>=A;A++){const R=b.loadCell(A,this._workCell).getChars().length;this._workCell.getWidth()===0?E--:R>1&&k!==A&&(E+=R-1)}return E}setSelection(b,k,E){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[b,k],this._model.selectionStartLength=E,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(b){this._isClickInSelection(b)||(this._selectWordAtCursor(b,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(b,k,E=!0,A=!0){if(b[0]>=this._bufferService.cols)return;const R=this._bufferService.buffer,T=R.lines.get(b[1]);if(!T)return;const O=R.translateBufferLineToString(b[1],!1);let H=this._convertViewportColToCharacterIndex(T,b[0]),$=H;const F=b[0]-H;let N=0,D=0,P=0,I=0;if(O.charAt(H)===" "){for(;H>0&&O.charAt(H-1)===" ";)H--;for(;$<O.length&&O.charAt($+1)===" ";)$++}else{let Z=b[0],te=b[0];T.getWidth(Z)===0&&(N++,Z--),T.getWidth(te)===2&&(D++,te++);const K=T.getString(te).length;for(K>1&&(I+=K-1,$+=K-1);Z>0&&H>0&&!this._isCharWordSeparator(T.loadCell(Z-1,this._workCell));){T.loadCell(Z-1,this._workCell);const M=this._workCell.getChars().length;this._workCell.getWidth()===0?(N++,Z--):M>1&&(P+=M-1,H-=M-1),H--,Z--}for(;te<T.length&&$+1<O.length&&!this._isCharWordSeparator(T.loadCell(te+1,this._workCell));){T.loadCell(te+1,this._workCell);const M=this._workCell.getChars().length;this._workCell.getWidth()===2?(D++,te++):M>1&&(I+=M-1,$+=M-1),$++,te++}}$++;let W=H+F-N+P,V=Math.min(this._bufferService.cols,$-H+N+D-P-I);if(k||O.slice(H,$).trim()!==""){if(E&&W===0&&T.getCodePoint(0)!==32){const Z=R.lines.get(b[1]-1);if(Z&&T.isWrapped&&Z.getCodePoint(this._bufferService.cols-1)!==32){const te=this._getWordAt([this._bufferService.cols-1,b[1]-1],!1,!0,!1);if(te){const K=this._bufferService.cols-te.start;W-=K,V+=K}}}if(A&&W+V===this._bufferService.cols&&T.getCodePoint(this._bufferService.cols-1)!==32){const Z=R.lines.get(b[1]+1);if(Z!=null&&Z.isWrapped&&Z.getCodePoint(0)!==32){const te=this._getWordAt([0,b[1]+1],!1,!1,!0);te&&(V+=te.length)}}return{start:W,length:V}}}_selectWordAt(b,k){const E=this._getWordAt(b,k);if(E){for(;E.start<0;)E.start+=this._bufferService.cols,b[1]--;this._model.selectionStart=[E.start,b[1]],this._model.selectionStartLength=E.length}}_selectToWordAt(b){const k=this._getWordAt(b,!0);if(k){let E=b[1];for(;k.start<0;)k.start+=this._bufferService.cols,E--;if(!this._model.areSelectionValuesReversed())for(;k.start+k.length>this._bufferService.cols;)k.length-=this._bufferService.cols,E++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?k.start:k.start+k.length,E]}}_isCharWordSeparator(b){return b.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(b.getChars())>=0}_selectLineAt(b){const k=this._bufferService.buffer.getWrappedRangeForLine(b),E={start:{x:0,y:k.first},end:{x:this._bufferService.cols-1,y:k.last}};this._model.selectionStart=[0,k.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,h.getRangeLength)(E,this._bufferService.cols)}};i.SelectionService=L=f([_(3,v.IBufferService),_(4,v.ICoreService),_(5,w.IMouseService),_(6,v.IOptionsService),_(7,w.IRenderService),_(8,w.ICoreBrowserService)],L)},4725:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const f=c(8343);i.ICharSizeService=(0,f.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),i.IMouseService=(0,f.createDecorator)("MouseService"),i.IRenderService=(0,f.createDecorator)("RenderService"),i.ISelectionService=(0,f.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,f.createDecorator)("ThemeService")},6731:function(x,i,c){var f=this&&this.__decorate||function(L,b,k,E){var A,R=arguments.length,T=R<3?b:E===null?E=Object.getOwnPropertyDescriptor(b,k):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(L,b,k,E);else for(var O=L.length-1;O>=0;O--)(A=L[O])&&(T=(R<3?A(T):R>3?A(b,k,T):A(b,k))||T);return R>3&&T&&Object.defineProperty(b,k,T),T},_=this&&this.__param||function(L,b){return function(k,E){b(k,E,L)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const u=c(7239),m=c(8055),S=c(8460),w=c(844),p=c(2585),n=m.css.toColor("#ffffff"),l=m.css.toColor("#000000"),h=m.css.toColor("#ffffff"),d=m.css.toColor("#000000"),v={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const L=[m.css.toColor("#2e3436"),m.css.toColor("#cc0000"),m.css.toColor("#4e9a06"),m.css.toColor("#c4a000"),m.css.toColor("#3465a4"),m.css.toColor("#75507b"),m.css.toColor("#06989a"),m.css.toColor("#d3d7cf"),m.css.toColor("#555753"),m.css.toColor("#ef2929"),m.css.toColor("#8ae234"),m.css.toColor("#fce94f"),m.css.toColor("#729fcf"),m.css.toColor("#ad7fa8"),m.css.toColor("#34e2e2"),m.css.toColor("#eeeeec")],b=[0,95,135,175,215,255];for(let k=0;k<216;k++){const E=b[k/36%6|0],A=b[k/6%6|0],R=b[k%6];L.push({css:m.channels.toCss(E,A,R),rgba:m.channels.toRgba(E,A,R)})}for(let k=0;k<24;k++){const E=8+10*k;L.push({css:m.channels.toCss(E,E,E),rgba:m.channels.toRgba(E,E,E)})}return L})());let y=i.ThemeService=class extends w.Disposable{get colors(){return this._colors}constructor(L){super(),this._optionsService=L,this._contrastCache=new u.ColorContrastCache,this._halfContrastCache=new u.ColorContrastCache,this._onChangeColors=this.register(new S.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:n,background:l,cursor:h,cursorAccent:d,selectionForeground:void 0,selectionBackgroundTransparent:v,selectionBackgroundOpaque:m.color.blend(l,v),selectionInactiveBackgroundTransparent:v,selectionInactiveBackgroundOpaque:m.color.blend(l,v),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(L={}){const b=this._colors;if(b.foreground=C(L.foreground,n),b.background=C(L.background,l),b.cursor=C(L.cursor,h),b.cursorAccent=C(L.cursorAccent,d),b.selectionBackgroundTransparent=C(L.selectionBackground,v),b.selectionBackgroundOpaque=m.color.blend(b.background,b.selectionBackgroundTransparent),b.selectionInactiveBackgroundTransparent=C(L.selectionInactiveBackground,b.selectionBackgroundTransparent),b.selectionInactiveBackgroundOpaque=m.color.blend(b.background,b.selectionInactiveBackgroundTransparent),b.selectionForeground=L.selectionForeground?C(L.selectionForeground,m.NULL_COLOR):void 0,b.selectionForeground===m.NULL_COLOR&&(b.selectionForeground=void 0),m.color.isOpaque(b.selectionBackgroundTransparent)&&(b.selectionBackgroundTransparent=m.color.opacity(b.selectionBackgroundTransparent,.3)),m.color.isOpaque(b.selectionInactiveBackgroundTransparent)&&(b.selectionInactiveBackgroundTransparent=m.color.opacity(b.selectionInactiveBackgroundTransparent,.3)),b.ansi=i.DEFAULT_ANSI_COLORS.slice(),b.ansi[0]=C(L.black,i.DEFAULT_ANSI_COLORS[0]),b.ansi[1]=C(L.red,i.DEFAULT_ANSI_COLORS[1]),b.ansi[2]=C(L.green,i.DEFAULT_ANSI_COLORS[2]),b.ansi[3]=C(L.yellow,i.DEFAULT_ANSI_COLORS[3]),b.ansi[4]=C(L.blue,i.DEFAULT_ANSI_COLORS[4]),b.ansi[5]=C(L.magenta,i.DEFAULT_ANSI_COLORS[5]),b.ansi[6]=C(L.cyan,i.DEFAULT_ANSI_COLORS[6]),b.ansi[7]=C(L.white,i.DEFAULT_ANSI_COLORS[7]),b.ansi[8]=C(L.brightBlack,i.DEFAULT_ANSI_COLORS[8]),b.ansi[9]=C(L.brightRed,i.DEFAULT_ANSI_COLORS[9]),b.ansi[10]=C(L.brightGreen,i.DEFAULT_ANSI_COLORS[10]),b.ansi[11]=C(L.brightYellow,i.DEFAULT_ANSI_COLORS[11]),b.ansi[12]=C(L.brightBlue,i.DEFAULT_ANSI_COLORS[12]),b.ansi[13]=C(L.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),b.ansi[14]=C(L.brightCyan,i.DEFAULT_ANSI_COLORS[14]),b.ansi[15]=C(L.brightWhite,i.DEFAULT_ANSI_COLORS[15]),L.extendedAnsi){const k=Math.min(b.ansi.length-16,L.extendedAnsi.length);for(let E=0;E<k;E++)b.ansi[E+16]=C(L.extendedAnsi[E],i.DEFAULT_ANSI_COLORS[E+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(L){this._restoreColor(L),this._onChangeColors.fire(this.colors)}_restoreColor(L){if(L!==void 0)switch(L){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[L]=this._restoreColors.ansi[L]}else for(let b=0;b<this._restoreColors.ansi.length;++b)this._colors.ansi[b]=this._restoreColors.ansi[b]}modifyColors(L){L(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function C(L,b){if(L!==void 0)try{return m.css.toColor(L)}catch{}return b}i.ThemeService=y=f([_(0,p.IOptionsService)],y)},6349:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const f=c(8460),_=c(844);class u extends _.Disposable{constructor(S){super(),this._maxLength=S,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(S){if(this._maxLength===S)return;const w=new Array(S);for(let p=0;p<Math.min(S,this.length);p++)w[p]=this._array[this._getCyclicIndex(p)];this._array=w,this._maxLength=S,this._startIndex=0}get length(){return this._length}set length(S){if(S>this._length)for(let w=this._length;w<S;w++)this._array[w]=void 0;this._length=S}get(S){return this._array[this._getCyclicIndex(S)]}set(S,w){this._array[this._getCyclicIndex(S)]=w}push(S){this._array[this._getCyclicIndex(this._length)]=S,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(S,w,...p){if(w){for(let n=S;n<this._length-w;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+w)];this._length-=w,this.onDeleteEmitter.fire({index:S,amount:w})}for(let n=this._length-1;n>=S;n--)this._array[this._getCyclicIndex(n+p.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<p.length;n++)this._array[this._getCyclicIndex(S+n)]=p[n];if(p.length&&this.onInsertEmitter.fire({index:S,amount:p.length}),this._length+p.length>this._maxLength){const n=this._length+p.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=p.length}trimStart(S){S>this._length&&(S=this._length),this._startIndex+=S,this._length-=S,this.onTrimEmitter.fire(S)}shiftElements(S,w,p){if(!(w<=0)){if(S<0||S>=this._length)throw new Error("start argument out of range");if(S+p<0)throw new Error("Cannot shift elements in list beyond index 0");if(p>0){for(let l=w-1;l>=0;l--)this.set(S+l+p,this.get(S+l));const n=S+w+p-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<w;n++)this.set(S+n+p,this.get(S+n))}}_getCyclicIndex(S){return(this._startIndex+S)%this._maxLength}}i.CircularList=u},1439:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function c(f,_=5){if(typeof f!="object")return f;const u=Array.isArray(f)?[]:{};for(const m in f)u[m]=_<=1?f[m]:f[m]&&c(f[m],_-1);return u}},8055:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;const f=c(6114);let _=0,u=0,m=0,S=0;var w,p,n,l,h;function d(y){const C=y.toString(16);return C.length<2?"0"+C:C}function v(y,C){return y<C?(C+.05)/(y+.05):(y+.05)/(C+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(y){y.toCss=function(C,L,b,k){return k!==void 0?`#${d(C)}${d(L)}${d(b)}${d(k)}`:`#${d(C)}${d(L)}${d(b)}`},y.toRgba=function(C,L,b,k=255){return(C<<24|L<<16|b<<8|k)>>>0}}(w||(i.channels=w={})),function(y){function C(L,b){return S=Math.round(255*b),[_,u,m]=h.toChannels(L.rgba),{css:w.toCss(_,u,m,S),rgba:w.toRgba(_,u,m,S)}}y.blend=function(L,b){if(S=(255&b.rgba)/255,S===1)return{css:b.css,rgba:b.rgba};const k=b.rgba>>24&255,E=b.rgba>>16&255,A=b.rgba>>8&255,R=L.rgba>>24&255,T=L.rgba>>16&255,O=L.rgba>>8&255;return _=R+Math.round((k-R)*S),u=T+Math.round((E-T)*S),m=O+Math.round((A-O)*S),{css:w.toCss(_,u,m),rgba:w.toRgba(_,u,m)}},y.isOpaque=function(L){return(255&L.rgba)==255},y.ensureContrastRatio=function(L,b,k){const E=h.ensureContrastRatio(L.rgba,b.rgba,k);if(E)return h.toColor(E>>24&255,E>>16&255,E>>8&255)},y.opaque=function(L){const b=(255|L.rgba)>>>0;return[_,u,m]=h.toChannels(b),{css:w.toCss(_,u,m),rgba:b}},y.opacity=C,y.multiplyOpacity=function(L,b){return S=255&L.rgba,C(L,S*b/255)},y.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(p||(i.color=p={})),function(y){let C,L;if(!f.isNode){const b=document.createElement("canvas");b.width=1,b.height=1;const k=b.getContext("2d",{willReadFrequently:!0});k&&(C=k,C.globalCompositeOperation="copy",L=C.createLinearGradient(0,0,1,1))}y.toColor=function(b){if(b.match(/#[\da-f]{3,8}/i))switch(b.length){case 4:return _=parseInt(b.slice(1,2).repeat(2),16),u=parseInt(b.slice(2,3).repeat(2),16),m=parseInt(b.slice(3,4).repeat(2),16),h.toColor(_,u,m);case 5:return _=parseInt(b.slice(1,2).repeat(2),16),u=parseInt(b.slice(2,3).repeat(2),16),m=parseInt(b.slice(3,4).repeat(2),16),S=parseInt(b.slice(4,5).repeat(2),16),h.toColor(_,u,m,S);case 7:return{css:b,rgba:(parseInt(b.slice(1),16)<<8|255)>>>0};case 9:return{css:b,rgba:parseInt(b.slice(1),16)>>>0}}const k=b.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return _=parseInt(k[1]),u=parseInt(k[2]),m=parseInt(k[3]),S=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),h.toColor(_,u,m,S);if(!C||!L)throw new Error("css.toColor: Unsupported css format");if(C.fillStyle=L,C.fillStyle=b,typeof C.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(C.fillRect(0,0,1,1),[_,u,m,S]=C.getImageData(0,0,1,1).data,S!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:w.toRgba(_,u,m,S),css:b}}}(n||(i.css=n={})),function(y){function C(L,b,k){const E=L/255,A=b/255,R=k/255;return .2126*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.7152*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))+.0722*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))}y.relativeLuminance=function(L){return C(L>>16&255,L>>8&255,255&L)},y.relativeLuminance2=C}(l||(i.rgb=l={})),function(y){function C(b,k,E){const A=b>>24&255,R=b>>16&255,T=b>>8&255;let O=k>>24&255,H=k>>16&255,$=k>>8&255,F=v(l.relativeLuminance2(O,H,$),l.relativeLuminance2(A,R,T));for(;F<E&&(O>0||H>0||$>0);)O-=Math.max(0,Math.ceil(.1*O)),H-=Math.max(0,Math.ceil(.1*H)),$-=Math.max(0,Math.ceil(.1*$)),F=v(l.relativeLuminance2(O,H,$),l.relativeLuminance2(A,R,T));return(O<<24|H<<16|$<<8|255)>>>0}function L(b,k,E){const A=b>>24&255,R=b>>16&255,T=b>>8&255;let O=k>>24&255,H=k>>16&255,$=k>>8&255,F=v(l.relativeLuminance2(O,H,$),l.relativeLuminance2(A,R,T));for(;F<E&&(O<255||H<255||$<255);)O=Math.min(255,O+Math.ceil(.1*(255-O))),H=Math.min(255,H+Math.ceil(.1*(255-H))),$=Math.min(255,$+Math.ceil(.1*(255-$))),F=v(l.relativeLuminance2(O,H,$),l.relativeLuminance2(A,R,T));return(O<<24|H<<16|$<<8|255)>>>0}y.ensureContrastRatio=function(b,k,E){const A=l.relativeLuminance(b>>8),R=l.relativeLuminance(k>>8);if(v(A,R)<E){if(R<A){const H=C(b,k,E),$=v(A,l.relativeLuminance(H>>8));if($<E){const F=L(b,k,E);return $>v(A,l.relativeLuminance(F>>8))?H:F}return H}const T=L(b,k,E),O=v(A,l.relativeLuminance(T>>8));if(O<E){const H=C(b,k,E);return O>v(A,l.relativeLuminance(H>>8))?T:H}return T}},y.reduceLuminance=C,y.increaseLuminance=L,y.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]},y.toColor=function(b,k,E,A){return{css:w.toCss(b,k,E,A),rgba:w.toRgba(b,k,E,A)}}}(h||(i.rgba=h={})),i.toPaddedHex=d,i.contrastRatio=v},8969:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const f=c(844),_=c(2585),u=c(4348),m=c(7866),S=c(744),w=c(7302),p=c(6975),n=c(8460),l=c(1753),h=c(1480),d=c(7994),v=c(9282),y=c(5435),C=c(5981),L=c(2660);let b=!1;class k extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new n.EventEmitter),this._onScroll.event(A=>{var R;(R=this._onScrollApi)===null||R===void 0||R.fire(A.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(A){for(const R in A)this.optionsService.options[R]=A[R]}constructor(A){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new n.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new n.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new n.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new n.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new n.EventEmitter),this._instantiationService=new u.InstantiationService,this.optionsService=this.register(new w.OptionsService(A)),this._instantiationService.setService(_.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(S.BufferService)),this._instantiationService.setService(_.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(m.LogService)),this._instantiationService.setService(_.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(p.CoreService)),this._instantiationService.setService(_.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(l.CoreMouseService)),this._instantiationService.setService(_.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(h.UnicodeService)),this._instantiationService.setService(_.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(d.CharsetService),this._instantiationService.setService(_.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(L.OscLinkService),this._instantiationService.setService(_.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new y.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,n.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,n.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,n.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,n.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new C.WriteBuffer((R,T)=>this._inputHandler.parse(R,T))),this.register((0,n.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(A,R){this._writeBuffer.write(A,R)}writeSync(A,R){this._logService.logLevel<=_.LogLevelEnum.WARN&&!b&&(this._logService.warn("writeSync is unreliable and will be removed soon."),b=!0),this._writeBuffer.writeSync(A,R)}resize(A,R){isNaN(A)||isNaN(R)||(A=Math.max(A,S.MINIMUM_COLS),R=Math.max(R,S.MINIMUM_ROWS),this._bufferService.resize(A,R))}scroll(A,R=!1){this._bufferService.scroll(A,R)}scrollLines(A,R,T){this._bufferService.scrollLines(A,R,T)}scrollPages(A){this.scrollLines(A*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(A){const R=A-this._bufferService.buffer.ydisp;R!==0&&this.scrollLines(R)}registerEscHandler(A,R){return this._inputHandler.registerEscHandler(A,R)}registerDcsHandler(A,R){return this._inputHandler.registerDcsHandler(A,R)}registerCsiHandler(A,R){return this._inputHandler.registerCsiHandler(A,R)}registerOscHandler(A,R){return this._inputHandler.registerOscHandler(A,R)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let A=!1;const R=this.optionsService.rawOptions.windowsPty;R&&R.buildNumber!==void 0&&R.buildNumber!==void 0?A=R.backend==="conpty"&&R.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(A=!0),A?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const A=[];A.push(this.onLineFeed(v.updateWindowsModeWrappedState.bind(null,this._bufferService))),A.push(this.registerCsiHandler({final:"H"},()=>((0,v.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)(()=>{for(const R of A)R.dispose()})}}}i.CoreTerminal=k},8460:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=c=>(this._listeners.push(c),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===c)return void this._listeners.splice(f,1)}}})),this._event}fire(c,f){const _=[];for(let u=0;u<this._listeners.length;u++)_.push(this._listeners[u]);for(let u=0;u<_.length;u++)_[u].call(void 0,c,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(c,f){return c(_=>f.fire(_))}},5435:function(x,i,c){var f=this&&this.__decorate||function(F,N,D,P){var I,W=arguments.length,V=W<3?N:P===null?P=Object.getOwnPropertyDescriptor(N,D):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(F,N,D,P);else for(var Z=F.length-1;Z>=0;Z--)(I=F[Z])&&(V=(W<3?I(V):W>3?I(N,D,V):I(N,D))||V);return W>3&&V&&Object.defineProperty(N,D,V),V},_=this&&this.__param||function(F,N){return function(D,P){N(D,P,F)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const u=c(2584),m=c(7116),S=c(2015),w=c(844),p=c(482),n=c(8437),l=c(8460),h=c(643),d=c(511),v=c(3734),y=c(2585),C=c(6242),L=c(6351),b=c(5941),k={"(":0,")":1,"*":2,"+":3,"-":1,".":2},E=131072;function A(F,N){if(F>24)return N.setWinLines||!1;switch(F){case 1:return!!N.restoreWin;case 2:return!!N.minimizeWin;case 3:return!!N.setWinPosition;case 4:return!!N.setWinSizePixels;case 5:return!!N.raiseWin;case 6:return!!N.lowerWin;case 7:return!!N.refreshWin;case 8:return!!N.setWinSizeChars;case 9:return!!N.maximizeWin;case 10:return!!N.fullscreenWin;case 11:return!!N.getWinState;case 13:return!!N.getWinPosition;case 14:return!!N.getWinSizePixels;case 15:return!!N.getScreenSizePixels;case 16:return!!N.getCellSizePixels;case 18:return!!N.getWinSizeChars;case 19:return!!N.getScreenSizeChars;case 20:return!!N.getIconTitle;case 21:return!!N.getWinTitle;case 22:return!!N.pushTitle;case 23:return!!N.popTitle;case 24:return!!N.setWinLines}return!1}var R;(function(F){F[F.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",F[F.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(R||(i.WindowsOptionsReportType=R={}));let T=0;class O extends w.Disposable{getAttrData(){return this._curAttrData}constructor(N,D,P,I,W,V,Z,te,K=new S.EscapeSequenceParser){super(),this._bufferService=N,this._charsetService=D,this._coreService=P,this._logService=I,this._optionsService=W,this._oscLinkService=V,this._coreMouseService=Z,this._unicodeService=te,this._parser=K,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new p.StringToUtf32,this._utf8Decoder=new p.Utf8ToUtf32,this._workCell=new d.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new l.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new l.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new l.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new l.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new l.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new l.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new l.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new l.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new l.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new l.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new l.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new H(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(M=>this._activeBuffer=M.activeBuffer)),this._parser.setCsiHandlerFallback((M,z)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(M),params:z.toArray()})}),this._parser.setEscHandlerFallback(M=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(M)})}),this._parser.setExecuteHandlerFallback(M=>{this._logService.debug("Unknown EXECUTE code: ",{code:M})}),this._parser.setOscHandlerFallback((M,z,q)=>{this._logService.debug("Unknown OSC code: ",{identifier:M,action:z,data:q})}),this._parser.setDcsHandlerFallback((M,z,q)=>{z==="HOOK"&&(q=q.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(M),action:z,payload:q})}),this._parser.setPrintHandler((M,z,q)=>this.print(M,z,q)),this._parser.registerCsiHandler({final:"@"},M=>this.insertChars(M)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},M=>this.scrollLeft(M)),this._parser.registerCsiHandler({final:"A"},M=>this.cursorUp(M)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},M=>this.scrollRight(M)),this._parser.registerCsiHandler({final:"B"},M=>this.cursorDown(M)),this._parser.registerCsiHandler({final:"C"},M=>this.cursorForward(M)),this._parser.registerCsiHandler({final:"D"},M=>this.cursorBackward(M)),this._parser.registerCsiHandler({final:"E"},M=>this.cursorNextLine(M)),this._parser.registerCsiHandler({final:"F"},M=>this.cursorPrecedingLine(M)),this._parser.registerCsiHandler({final:"G"},M=>this.cursorCharAbsolute(M)),this._parser.registerCsiHandler({final:"H"},M=>this.cursorPosition(M)),this._parser.registerCsiHandler({final:"I"},M=>this.cursorForwardTab(M)),this._parser.registerCsiHandler({final:"J"},M=>this.eraseInDisplay(M,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},M=>this.eraseInDisplay(M,!0)),this._parser.registerCsiHandler({final:"K"},M=>this.eraseInLine(M,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},M=>this.eraseInLine(M,!0)),this._parser.registerCsiHandler({final:"L"},M=>this.insertLines(M)),this._parser.registerCsiHandler({final:"M"},M=>this.deleteLines(M)),this._parser.registerCsiHandler({final:"P"},M=>this.deleteChars(M)),this._parser.registerCsiHandler({final:"S"},M=>this.scrollUp(M)),this._parser.registerCsiHandler({final:"T"},M=>this.scrollDown(M)),this._parser.registerCsiHandler({final:"X"},M=>this.eraseChars(M)),this._parser.registerCsiHandler({final:"Z"},M=>this.cursorBackwardTab(M)),this._parser.registerCsiHandler({final:"`"},M=>this.charPosAbsolute(M)),this._parser.registerCsiHandler({final:"a"},M=>this.hPositionRelative(M)),this._parser.registerCsiHandler({final:"b"},M=>this.repeatPrecedingCharacter(M)),this._parser.registerCsiHandler({final:"c"},M=>this.sendDeviceAttributesPrimary(M)),this._parser.registerCsiHandler({prefix:">",final:"c"},M=>this.sendDeviceAttributesSecondary(M)),this._parser.registerCsiHandler({final:"d"},M=>this.linePosAbsolute(M)),this._parser.registerCsiHandler({final:"e"},M=>this.vPositionRelative(M)),this._parser.registerCsiHandler({final:"f"},M=>this.hVPosition(M)),this._parser.registerCsiHandler({final:"g"},M=>this.tabClear(M)),this._parser.registerCsiHandler({final:"h"},M=>this.setMode(M)),this._parser.registerCsiHandler({prefix:"?",final:"h"},M=>this.setModePrivate(M)),this._parser.registerCsiHandler({final:"l"},M=>this.resetMode(M)),this._parser.registerCsiHandler({prefix:"?",final:"l"},M=>this.resetModePrivate(M)),this._parser.registerCsiHandler({final:"m"},M=>this.charAttributes(M)),this._parser.registerCsiHandler({final:"n"},M=>this.deviceStatus(M)),this._parser.registerCsiHandler({prefix:"?",final:"n"},M=>this.deviceStatusPrivate(M)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},M=>this.softReset(M)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},M=>this.setCursorStyle(M)),this._parser.registerCsiHandler({final:"r"},M=>this.setScrollRegion(M)),this._parser.registerCsiHandler({final:"s"},M=>this.saveCursor(M)),this._parser.registerCsiHandler({final:"t"},M=>this.windowOptions(M)),this._parser.registerCsiHandler({final:"u"},M=>this.restoreCursor(M)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},M=>this.insertColumns(M)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},M=>this.deleteColumns(M)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},M=>this.selectProtected(M)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},M=>this.requestMode(M,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},M=>this.requestMode(M,!1)),this._parser.setExecuteHandler(u.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(u.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(u.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(u.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(u.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(u.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(u.C1.IND,()=>this.index()),this._parser.setExecuteHandler(u.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(u.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new C.OscHandler(M=>(this.setTitle(M),this.setIconName(M),!0))),this._parser.registerOscHandler(1,new C.OscHandler(M=>this.setIconName(M))),this._parser.registerOscHandler(2,new C.OscHandler(M=>this.setTitle(M))),this._parser.registerOscHandler(4,new C.OscHandler(M=>this.setOrReportIndexedColor(M))),this._parser.registerOscHandler(8,new C.OscHandler(M=>this.setHyperlink(M))),this._parser.registerOscHandler(10,new C.OscHandler(M=>this.setOrReportFgColor(M))),this._parser.registerOscHandler(11,new C.OscHandler(M=>this.setOrReportBgColor(M))),this._parser.registerOscHandler(12,new C.OscHandler(M=>this.setOrReportCursorColor(M))),this._parser.registerOscHandler(104,new C.OscHandler(M=>this.restoreIndexedColor(M))),this._parser.registerOscHandler(110,new C.OscHandler(M=>this.restoreFgColor(M))),this._parser.registerOscHandler(111,new C.OscHandler(M=>this.restoreBgColor(M))),this._parser.registerOscHandler(112,new C.OscHandler(M=>this.restoreCursorColor(M))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const M in m.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:M},()=>this.selectCharset("("+M)),this._parser.registerEscHandler({intermediates:")",final:M},()=>this.selectCharset(")"+M)),this._parser.registerEscHandler({intermediates:"*",final:M},()=>this.selectCharset("*"+M)),this._parser.registerEscHandler({intermediates:"+",final:M},()=>this.selectCharset("+"+M)),this._parser.registerEscHandler({intermediates:"-",final:M},()=>this.selectCharset("-"+M)),this._parser.registerEscHandler({intermediates:".",final:M},()=>this.selectCharset("."+M)),this._parser.registerEscHandler({intermediates:"/",final:M},()=>this.selectCharset("/"+M));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(M=>(this._logService.error("Parsing error: ",M),M)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new L.DcsHandler((M,z)=>this.requestStatusString(M,z)))}_preserveStack(N,D,P,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=N,this._parseStack.cursorStartY=D,this._parseStack.decodedLength=P,this._parseStack.position=I}_logSlowResolvingAsync(N){this._logService.logLevel<=y.LogLevelEnum.WARN&&Promise.race([N,new Promise((D,P)=>setTimeout(()=>P("#SLOW_TIMEOUT"),5e3))]).catch(D=>{if(D!=="#SLOW_TIMEOUT")throw D;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(N,D){let P,I=this._activeBuffer.x,W=this._activeBuffer.y,V=0;const Z=this._parseStack.paused;if(Z){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,D))return this._logSlowResolvingAsync(P),P;I=this._parseStack.cursorStartX,W=this._parseStack.cursorStartY,this._parseStack.paused=!1,N.length>E&&(V=this._parseStack.position+E)}if(this._logService.logLevel<=y.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof N=="string"?` "${N}"`:` "${Array.prototype.map.call(N,te=>String.fromCharCode(te)).join("")}"`),typeof N=="string"?N.split("").map(te=>te.charCodeAt(0)):N),this._parseBuffer.length<N.length&&this._parseBuffer.length<E&&(this._parseBuffer=new Uint32Array(Math.min(N.length,E))),Z||this._dirtyRowTracker.clearRange(),N.length>E)for(let te=V;te<N.length;te+=E){const K=te+E<N.length?te+E:N.length,M=typeof N=="string"?this._stringDecoder.decode(N.substring(te,K),this._parseBuffer):this._utf8Decoder.decode(N.subarray(te,K),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,M))return this._preserveStack(I,W,M,te),this._logSlowResolvingAsync(P),P}else if(!Z){const te=typeof N=="string"?this._stringDecoder.decode(N,this._parseBuffer):this._utf8Decoder.decode(N,this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,te))return this._preserveStack(I,W,te,0),this._logSlowResolvingAsync(P),P}this._activeBuffer.x===I&&this._activeBuffer.y===W||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(N,D,P){let I,W;const V=this._charsetService.charset,Z=this._optionsService.rawOptions.screenReaderMode,te=this._bufferService.cols,K=this._coreService.decPrivateModes.wraparound,M=this._coreService.modes.insertMode,z=this._curAttrData;let q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&P-D>0&&q.getWidth(this._activeBuffer.x-1)===2&&q.setCellFromCodePoint(this._activeBuffer.x-1,0,1,z.fg,z.bg,z.extended);for(let G=D;G<P;++G){if(I=N[G],W=this._unicodeService.wcwidth(I),I<127&&V){const ne=V[String.fromCharCode(I)];ne&&(I=ne.charCodeAt(0))}if(Z&&this._onA11yChar.fire((0,p.stringFromCodePoint)(I)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),W||!this._activeBuffer.x){if(this._activeBuffer.x+W-1>=te){if(K){for(;this._activeBuffer.x<te;)q.setCellFromCodePoint(this._activeBuffer.x++,0,1,z.fg,z.bg,z.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=te-1,W===2)continue}if(M&&(q.insertCells(this._activeBuffer.x,W,this._activeBuffer.getNullCell(z),z),q.getWidth(te-1)===2&&q.setCellFromCodePoint(te-1,h.NULL_CELL_CODE,h.NULL_CELL_WIDTH,z.fg,z.bg,z.extended)),q.setCellFromCodePoint(this._activeBuffer.x++,I,W,z.fg,z.bg,z.extended),W>0)for(;--W;)q.setCellFromCodePoint(this._activeBuffer.x++,0,0,z.fg,z.bg,z.extended)}else q.getWidth(this._activeBuffer.x-1)?q.addCodepointToCell(this._activeBuffer.x-1,I):q.addCodepointToCell(this._activeBuffer.x-2,I)}P-D>0&&(q.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<te&&P-D>0&&q.getWidth(this._activeBuffer.x)===0&&!q.hasContent(this._activeBuffer.x)&&q.setCellFromCodePoint(this._activeBuffer.x,0,1,z.fg,z.bg,z.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(N,D){return N.final!=="t"||N.prefix||N.intermediates?this._parser.registerCsiHandler(N,D):this._parser.registerCsiHandler(N,P=>!A(P.params[0],this._optionsService.rawOptions.windowOptions)||D(P))}registerDcsHandler(N,D){return this._parser.registerDcsHandler(N,new L.DcsHandler(D))}registerEscHandler(N,D){return this._parser.registerEscHandler(N,D)}registerOscHandler(N,D){return this._parser.registerOscHandler(N,new C.OscHandler(D))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var N;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||N===void 0)&&N.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);D.hasWidth(this._activeBuffer.x)&&!D.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const N=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-N),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(N=this._bufferService.cols-1){this._activeBuffer.x=Math.min(N,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(N,D){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=N,this._activeBuffer.y=this._activeBuffer.scrollTop+D):(this._activeBuffer.x=N,this._activeBuffer.y=D),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(N,D){this._restrictCursor(),this._setCursor(this._activeBuffer.x+N,this._activeBuffer.y+D)}cursorUp(N){const D=this._activeBuffer.y-this._activeBuffer.scrollTop;return D>=0?this._moveCursor(0,-Math.min(D,N.params[0]||1)):this._moveCursor(0,-(N.params[0]||1)),!0}cursorDown(N){const D=this._activeBuffer.scrollBottom-this._activeBuffer.y;return D>=0?this._moveCursor(0,Math.min(D,N.params[0]||1)):this._moveCursor(0,N.params[0]||1),!0}cursorForward(N){return this._moveCursor(N.params[0]||1,0),!0}cursorBackward(N){return this._moveCursor(-(N.params[0]||1),0),!0}cursorNextLine(N){return this.cursorDown(N),this._activeBuffer.x=0,!0}cursorPrecedingLine(N){return this.cursorUp(N),this._activeBuffer.x=0,!0}cursorCharAbsolute(N){return this._setCursor((N.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(N){return this._setCursor(N.length>=2?(N.params[1]||1)-1:0,(N.params[0]||1)-1),!0}charPosAbsolute(N){return this._setCursor((N.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(N){return this._moveCursor(N.params[0]||1,0),!0}linePosAbsolute(N){return this._setCursor(this._activeBuffer.x,(N.params[0]||1)-1),!0}vPositionRelative(N){return this._moveCursor(0,N.params[0]||1),!0}hVPosition(N){return this.cursorPosition(N),!0}tabClear(N){const D=N.params[0];return D===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:D===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(N){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let D=N.params[0]||1;for(;D--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(N){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let D=N.params[0]||1;for(;D--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(N){const D=N.params[0];return D===1&&(this._curAttrData.bg|=536870912),D!==2&&D!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(N,D,P,I=!1,W=!1){const V=this._activeBuffer.lines.get(this._activeBuffer.ybase+N);V.replaceCells(D,P,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),W),I&&(V.isWrapped=!1)}_resetBufferLine(N,D=!1){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+N);P&&(P.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),D),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+N),P.isWrapped=!1)}eraseInDisplay(N,D=!1){let P;switch(this._restrictCursor(this._bufferService.cols),N.params[0]){case 0:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,D);P<this._bufferService.rows;P++)this._resetBufferLine(P,D);this._dirtyRowTracker.markDirty(P);break;case 1:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P,0,this._activeBuffer.x+1,!0,D),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(P+1).isWrapped=!1);P--;)this._resetBufferLine(P,D);this._dirtyRowTracker.markDirty(0);break;case 2:for(P=this._bufferService.rows,this._dirtyRowTracker.markDirty(P-1);P--;)this._resetBufferLine(P,D);this._dirtyRowTracker.markDirty(0);break;case 3:const I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0}eraseInLine(N,D=!1){switch(this._restrictCursor(this._bufferService.cols),N.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,D);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,D);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,D)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(N){this._restrictCursor();let D=N.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,W=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;for(;D--;)this._activeBuffer.lines.splice(W-1,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(N){this._restrictCursor();let D=N.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y;let I;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;D--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(N){this._restrictCursor();const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.insertCells(this._activeBuffer.x,N.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(N){this._restrictCursor();const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.deleteCells(this._activeBuffer.x,N.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(N){let D=N.params[0]||1;for(;D--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(N){let D=N.params[0]||1;for(;D--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=N.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);I.deleteCells(0,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=N.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);I.insertCells(0,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=N.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);I.insertCells(this._activeBuffer.x,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=N.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);I.deleteCells(this._activeBuffer.x,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(N){this._restrictCursor();const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(N.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(N){if(!this._parser.precedingCodepoint)return!0;const D=N.params[0]||1,P=new Uint32Array(D);for(let I=0;I<D;++I)P[I]=this._parser.precedingCodepoint;return this.print(P,0,P.length),!0}sendDeviceAttributesPrimary(N){return N.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(u.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(u.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(N){return N.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(u.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(u.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(N.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(u.C0.ESC+"[>83;40003;0c")),!0}_is(N){return(this._optionsService.rawOptions.termName+"").indexOf(N)===0}setMode(N){for(let D=0;D<N.length;D++)switch(N.params[D]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(N){for(let D=0;D<N.length;D++)switch(N.params[D]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),this._charsetService.setgCharset(1,m.DEFAULT_CHARSET),this._charsetService.setgCharset(2,m.DEFAULT_CHARSET),this._charsetService.setgCharset(3,m.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(N){for(let D=0;D<N.length;D++)switch(N.params[D]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(N){for(let D=0;D<N.length;D++)switch(N.params[D]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),N.params[D]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(N,D){const P=this._coreService.decPrivateModes,{activeProtocol:I,activeEncoding:W}=this._coreMouseService,V=this._coreService,{buffers:Z,cols:te}=this._bufferService,{active:K,alt:M}=Z,z=this._optionsService.rawOptions,q=fe=>fe?1:2,G=N.params[0];return ne=G,se=D?G===2?4:G===4?q(V.modes.insertMode):G===12?3:G===20?q(z.convertEol):0:G===1?q(P.applicationCursorKeys):G===3?z.windowOptions.setWinLines?te===80?2:te===132?1:0:0:G===6?q(P.origin):G===7?q(P.wraparound):G===8?3:G===9?q(I==="X10"):G===12?q(z.cursorBlink):G===25?q(!V.isCursorHidden):G===45?q(P.reverseWraparound):G===66?q(P.applicationKeypad):G===67?4:G===1e3?q(I==="VT200"):G===1002?q(I==="DRAG"):G===1003?q(I==="ANY"):G===1004?q(P.sendFocus):G===1005?4:G===1006?q(W==="SGR"):G===1015?4:G===1016?q(W==="SGR_PIXELS"):G===1048?1:G===47||G===1047||G===1049?q(K===M):G===2004?q(P.bracketedPasteMode):0,V.triggerDataEvent(`${u.C0.ESC}[${D?"":"?"}${ne};${se}$y`),!0;var ne,se}_updateAttrColor(N,D,P,I,W){return D===2?(N|=50331648,N&=-16777216,N|=v.AttributeData.fromColorRGB([P,I,W])):D===5&&(N&=-50331904,N|=33554432|255&P),N}_extractColor(N,D,P){const I=[0,0,-1,0,0,0];let W=0,V=0;do{if(I[V+W]=N.params[D+V],N.hasSubParams(D+V)){const Z=N.getSubParams(D+V);let te=0;do I[1]===5&&(W=1),I[V+te+1+W]=Z[te];while(++te<Z.length&&te+V+1+W<I.length);break}if(I[1]===5&&V+W>=2||I[1]===2&&V+W>=5)break;I[1]&&(W=1)}while(++V+D<N.length&&V+W<I.length);for(let Z=2;Z<I.length;++Z)I[Z]===-1&&(I[Z]=0);switch(I[0]){case 38:P.fg=this._updateAttrColor(P.fg,I[1],I[3],I[4],I[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,I[1],I[3],I[4],I[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,I[1],I[3],I[4],I[5])}return V}_processUnderline(N,D){D.extended=D.extended.clone(),(!~N||N>5)&&(N=1),D.extended.underlineStyle=N,D.fg|=268435456,N===0&&(D.fg&=-268435457),D.updateExtended()}_processSGR0(N){N.fg=n.DEFAULT_ATTR_DATA.fg,N.bg=n.DEFAULT_ATTR_DATA.bg,N.extended=N.extended.clone(),N.extended.underlineStyle=0,N.extended.underlineColor&=-67108864,N.updateExtended()}charAttributes(N){if(N.length===1&&N.params[0]===0)return this._processSGR0(this._curAttrData),!0;const D=N.length;let P;const I=this._curAttrData;for(let W=0;W<D;W++)P=N.params[W],P>=30&&P<=37?(I.fg&=-50331904,I.fg|=16777216|P-30):P>=40&&P<=47?(I.bg&=-50331904,I.bg|=16777216|P-40):P>=90&&P<=97?(I.fg&=-50331904,I.fg|=16777224|P-90):P>=100&&P<=107?(I.bg&=-50331904,I.bg|=16777224|P-100):P===0?this._processSGR0(I):P===1?I.fg|=134217728:P===3?I.bg|=67108864:P===4?(I.fg|=268435456,this._processUnderline(N.hasSubParams(W)?N.getSubParams(W)[0]:1,I)):P===5?I.fg|=536870912:P===7?I.fg|=67108864:P===8?I.fg|=1073741824:P===9?I.fg|=2147483648:P===2?I.bg|=134217728:P===21?this._processUnderline(2,I):P===22?(I.fg&=-134217729,I.bg&=-134217729):P===23?I.bg&=-67108865:P===24?(I.fg&=-268435457,this._processUnderline(0,I)):P===25?I.fg&=-536870913:P===27?I.fg&=-67108865:P===28?I.fg&=-1073741825:P===29?I.fg&=2147483647:P===39?(I.fg&=-67108864,I.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):P===49?(I.bg&=-67108864,I.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):P===38||P===48||P===58?W+=this._extractColor(N,W,I):P===53?I.bg|=1073741824:P===55?I.bg&=-1073741825:P===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):P===100?(I.fg&=-67108864,I.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",P);return!0}deviceStatus(N){switch(N.params[0]){case 5:this._coreService.triggerDataEvent(`${u.C0.ESC}[0n`);break;case 6:const D=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[${D};${P}R`)}return!0}deviceStatusPrivate(N){if(N.params[0]===6){const D=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[?${D};${P}R`)}return!0}softReset(N){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(N){const D=N.params[0]||1;switch(D){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const P=D%2==1;return this._optionsService.options.cursorBlink=P,!0}setScrollRegion(N){const D=N.params[0]||1;let P;return(N.length<2||(P=N.params[1])>this._bufferService.rows||P===0)&&(P=this._bufferService.rows),P>D&&(this._activeBuffer.scrollTop=D-1,this._activeBuffer.scrollBottom=P-1,this._setCursor(0,0)),!0}windowOptions(N){if(!A(N.params[0],this._optionsService.rawOptions.windowOptions))return!0;const D=N.length>1?N.params[1]:0;switch(N.params[0]){case 14:D!==2&&this._onRequestWindowsOptionsReport.fire(R.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(R.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${u.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:D!==0&&D!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),D!==0&&D!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:D!==0&&D!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),D!==0&&D!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(N){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(N){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(N){return this._windowTitle=N,this._onTitleChange.fire(N),!0}setIconName(N){return this._iconName=N,!0}setOrReportIndexedColor(N){const D=[],P=N.split(";");for(;P.length>1;){const I=P.shift(),W=P.shift();if(/^\d+$/.exec(I)){const V=parseInt(I);if($(V))if(W==="?")D.push({type:0,index:V});else{const Z=(0,b.parseColor)(W);Z&&D.push({type:1,index:V,color:Z})}}}return D.length&&this._onColor.fire(D),!0}setHyperlink(N){const D=N.split(";");return!(D.length<2)&&(D[1]?this._createHyperlink(D[0],D[1]):!D[0]&&this._finishHyperlink())}_createHyperlink(N,D){this._getCurrentLinkId()&&this._finishHyperlink();const P=N.split(":");let I;const W=P.findIndex(V=>V.startsWith("id="));return W!==-1&&(I=P[W].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:I,uri:D}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(N,D){const P=N.split(";");for(let I=0;I<P.length&&!(D>=this._specialColors.length);++I,++D)if(P[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[D]}]);else{const W=(0,b.parseColor)(P[I]);W&&this._onColor.fire([{type:1,index:this._specialColors[D],color:W}])}return!0}setOrReportFgColor(N){return this._setOrReportSpecialColor(N,0)}setOrReportBgColor(N){return this._setOrReportSpecialColor(N,1)}setOrReportCursorColor(N){return this._setOrReportSpecialColor(N,2)}restoreIndexedColor(N){if(!N)return this._onColor.fire([{type:2}]),!0;const D=[],P=N.split(";");for(let I=0;I<P.length;++I)if(/^\d+$/.exec(P[I])){const W=parseInt(P[I]);$(W)&&D.push({type:2,index:W})}return D.length&&this._onColor.fire(D),!0}restoreFgColor(N){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(N){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(N){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),!0}selectCharset(N){return N.length!==2?(this.selectDefaultCharset(),!0):(N[0]==="/"||this._charsetService.setgCharset(k[N[0]],m.CHARSETS[N[1]]||m.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const N=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,N,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(N){return this._charsetService.setgLevel(N),!0}screenAlignmentPattern(){const N=new d.CellData;N.content=4194373,N.fg=this._curAttrData.fg,N.bg=this._curAttrData.bg,this._setCursor(0,0);for(let D=0;D<this._bufferService.rows;++D){const P=this._activeBuffer.ybase+this._activeBuffer.y+D,I=this._activeBuffer.lines.get(P);I&&(I.fill(N),I.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(N,D){const P=this._bufferService.buffer,I=this._optionsService.rawOptions;return(W=>(this._coreService.triggerDataEvent(`${u.C0.ESC}${W}${u.C0.ESC}\\`),!0))(N==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:N==='"p'?'P1$r61;1"p':N==="r"?`P1$r${P.scrollTop+1};${P.scrollBottom+1}r`:N==="m"?"P1$r0m":N===" q"?`P1$r${{block:2,underline:4,bar:6}[I.cursorStyle]-(I.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(N,D){this._dirtyRowTracker.markRangeDirty(N,D)}}i.InputHandler=O;let H=class{constructor(F){this._bufferService=F,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(F){F<this.start?this.start=F:F>this.end&&(this.end=F)}markRangeDirty(F,N){F>N&&(T=F,F=N,N=T),F<this.start&&(this.start=F),N>this.end&&(this.end=N)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function $(F){return 0<=F&&F<256}H=f([_(0,y.IBufferService)],H)},844:(x,i)=>{function c(f){for(const _ of f)_.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const _=this._disposables.indexOf(f);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){var _;this._isDisposed||f===this._value||((_=this._value)===null||_===void 0||_.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){var f;this._isDisposed=!0,(f=this._value)===null||f===void 0||f.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=c,i.getDisposeArrayDisposable=function(f){return{dispose:()=>c(f)}}},1505:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class c{constructor(){this._data={}}set(_,u,m){this._data[_]||(this._data[_]={}),this._data[_][u]=m}get(_,u){return this._data[_]?this._data[_][u]:void 0}clear(){this._data={}}}i.TwoKeyMap=c,i.FourKeyMap=class{constructor(){this._data=new c}set(f,_,u,m,S){this._data.get(f,_)||this._data.set(f,_,new c),this._data.get(f,_).set(u,m,S)}get(f,_,u,m){var S;return(S=this._data.get(f,_))===null||S===void 0?void 0:S.get(u,m)}clear(){this._data.clear()}}},6114:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof navigator>"u";const c=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=c.includes("Firefox"),i.isLegacyEdge=c.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(c),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=c.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(c)},6106:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let c=0;i.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(c=this._search(this._getKey(f)),this._array.splice(c,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const _=this._getKey(f);if(_===void 0||(c=this._search(_),c===-1)||this._getKey(this._array[c])!==_)return!1;do if(this._array[c]===f)return this._array.splice(c,1),!0;while(++c<this._array.length&&this._getKey(this._array[c])===_);return!1}*getKeyIterator(f){if(this._array.length!==0&&(c=this._search(f),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===f))do yield this._array[c];while(++c<this._array.length&&this._getKey(this._array[c])===f)}forEachByKey(f,_){if(this._array.length!==0&&(c=this._search(f),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===f))do _(this._array[c]);while(++c<this._array.length&&this._getKey(this._array[c])===f)}values(){return[...this._array].values()}_search(f){let _=0,u=this._array.length-1;for(;u>=_;){let m=_+u>>1;const S=this._getKey(this._array[m]);if(S>f)u=m-1;else{if(!(S<f)){for(;m>0&&this._getKey(this._array[m-1])===f;)m--;return m}_=m+1}}return _}}},7226:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=c(6114);class _{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let w=0,p=0,n=S.timeRemaining(),l=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),p=Math.max(w,p),l=S.timeRemaining(),1.5*p>l)return n-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-w))}ms`),void this._start();n=l}this.clear()}}class u extends _{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const w=Date.now()+S;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}i.PriorityTaskQueue=u,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(m){return requestIdleCallback(m)}_cancelCallback(m){cancelIdleCallback(m)}}:u,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(m){this._queue.clear(),this._queue.enqueue(m)}flush(){this._queue.flush()}}},9282:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const f=c(643);i.updateWindowsModeWrappedState=function(_){const u=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),m=u==null?void 0:u.get(_.cols-1),S=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);S&&m&&(S.isWrapped=m[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&m[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class c{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){const u=new c;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}i.AttributeData=c;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}constructor(u=0,m=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=m}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},9092:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const f=c(6349),_=c(7226),u=c(3734),m=c(8437),S=c(4634),w=c(511),p=c(643),n=c(4863),l=c(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(h,d,v){this._hasScrollback=h,this._optionsService=d,this._bufferService=v,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=m.DEFAULT_ATTR_DATA.clone(),this.savedCharset=l.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,p.WHITESPACE_CELL_CHAR,p.WHITESPACE_CELL_WIDTH,p.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new _.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(h){return h?(this._nullCell.fg=h.fg,this._nullCell.bg=h.bg,this._nullCell.extended=h.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new u.ExtendedAttrs),this._nullCell}getWhitespaceCell(h){return h?(this._whitespaceCell.fg=h.fg,this._whitespaceCell.bg=h.bg,this._whitespaceCell.extended=h.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new u.ExtendedAttrs),this._whitespaceCell}getBlankLine(h,d){return new m.BufferLine(this._bufferService.cols,this.getNullCell(h),d)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const h=this.ybase+this.y-this.ydisp;return h>=0&&h<this._rows}_getCorrectBufferLength(h){if(!this._hasScrollback)return h;const d=h+this._optionsService.rawOptions.scrollback;return d>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:d}fillViewportRows(h){if(this.lines.length===0){h===void 0&&(h=m.DEFAULT_ATTR_DATA);let d=this._rows;for(;d--;)this.lines.push(this.getBlankLine(h))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(h,d){const v=this.getNullCell(m.DEFAULT_ATTR_DATA);let y=0;const C=this._getCorrectBufferLength(d);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<h)for(let b=0;b<this.lines.length;b++)y+=+this.lines.get(b).resize(h,v);let L=0;if(this._rows<d)for(let b=this._rows;b<d;b++)this.lines.length<d+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new m.BufferLine(h,v)):this.ybase>0&&this.lines.length<=this.ybase+this.y+L+1?(this.ybase--,L++,this.ydisp>0&&this.ydisp--):this.lines.push(new m.BufferLine(h,v)));else for(let b=this._rows;b>d;b--)this.lines.length>d+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){const b=this.lines.length-C;b>0&&(this.lines.trimStart(b),this.ybase=Math.max(this.ybase-b,0),this.ydisp=Math.max(this.ydisp-b,0),this.savedY=Math.max(this.savedY-b,0)),this.lines.maxLength=C}this.x=Math.min(this.x,h-1),this.y=Math.min(this.y,d-1),L&&(this.y+=L),this.savedX=Math.min(this.savedX,h-1),this.scrollTop=0}if(this.scrollBottom=d-1,this._isReflowEnabled&&(this._reflow(h,d),this._cols>h))for(let L=0;L<this.lines.length;L++)y+=+this.lines.get(L).resize(h,v);this._cols=h,this._rows=d,this._memoryCleanupQueue.clear(),y>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let h=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,h=!1);let d=0;for(;this._memoryCleanupPosition<this.lines.length;)if(d+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),d>100)return!0;return h}get _isReflowEnabled(){const h=this._optionsService.rawOptions.windowsPty;return h&&h.buildNumber?this._hasScrollback&&h.backend==="conpty"&&h.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(h,d){this._cols!==h&&(h>this._cols?this._reflowLarger(h,d):this._reflowSmaller(h,d))}_reflowLarger(h,d){const v=(0,S.reflowLargerGetLinesToRemove)(this.lines,this._cols,h,this.ybase+this.y,this.getNullCell(m.DEFAULT_ATTR_DATA));if(v.length>0){const y=(0,S.reflowLargerCreateNewLayout)(this.lines,v);(0,S.reflowLargerApplyNewLayout)(this.lines,y.layout),this._reflowLargerAdjustViewport(h,d,y.countRemoved)}}_reflowLargerAdjustViewport(h,d,v){const y=this.getNullCell(m.DEFAULT_ATTR_DATA);let C=v;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<d&&this.lines.push(new m.BufferLine(h,y))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-v,0)}_reflowSmaller(h,d){const v=this.getNullCell(m.DEFAULT_ATTR_DATA),y=[];let C=0;for(let L=this.lines.length-1;L>=0;L--){let b=this.lines.get(L);if(!b||!b.isWrapped&&b.getTrimmedLength()<=h)continue;const k=[b];for(;b.isWrapped&&L>0;)b=this.lines.get(--L),k.unshift(b);const E=this.ybase+this.y;if(E>=L&&E<L+k.length)continue;const A=k[k.length-1].getTrimmedLength(),R=(0,S.reflowSmallerGetNewLineLengths)(k,this._cols,h),T=R.length-k.length;let O;O=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+T):Math.max(0,this.lines.length-this.lines.maxLength+T);const H=[];for(let I=0;I<T;I++){const W=this.getBlankLine(m.DEFAULT_ATTR_DATA,!0);H.push(W)}H.length>0&&(y.push({start:L+k.length+C,newLines:H}),C+=H.length),k.push(...H);let $=R.length-1,F=R[$];F===0&&($--,F=R[$]);let N=k.length-T-1,D=A;for(;N>=0;){const I=Math.min(D,F);if(k[$]===void 0)break;if(k[$].copyCellsFrom(k[N],D-I,F-I,I,!0),F-=I,F===0&&($--,F=R[$]),D-=I,D===0){N--;const W=Math.max(N,0);D=(0,S.getWrappedLineTrimmedLength)(k,W,this._cols)}}for(let I=0;I<k.length;I++)R[I]<h&&k[I].setCell(R[I],v);let P=T-O;for(;P-- >0;)this.ybase===0?this.y<d-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-d&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+T,this.ybase+d-1)}if(y.length>0){const L=[],b=[];for(let $=0;$<this.lines.length;$++)b.push(this.lines.get($));const k=this.lines.length;let E=k-1,A=0,R=y[A];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let T=0;for(let $=Math.min(this.lines.maxLength-1,k+C-1);$>=0;$--)if(R&&R.start>E+T){for(let F=R.newLines.length-1;F>=0;F--)this.lines.set($--,R.newLines[F]);$++,L.push({index:E+1,amount:R.newLines.length}),T+=R.newLines.length,R=y[++A]}else this.lines.set($,b[E--]);let O=0;for(let $=L.length-1;$>=0;$--)L[$].index+=O,this.lines.onInsertEmitter.fire(L[$]),O+=L[$].amount;const H=Math.max(0,k+C-this.lines.maxLength);H>0&&this.lines.onTrimEmitter.fire(H)}}translateBufferLineToString(h,d,v=0,y){const C=this.lines.get(h);return C?C.translateToString(d,v,y):""}getWrappedRangeForLine(h){let d=h,v=h;for(;d>0&&this.lines.get(d).isWrapped;)d--;for(;v+1<this.lines.length&&this.lines.get(v+1).isWrapped;)v++;return{first:d,last:v}}setupTabStops(h){for(h!=null?this.tabs[h]||(h=this.prevStop(h)):(this.tabs={},h=0);h<this._cols;h+=this._optionsService.rawOptions.tabStopWidth)this.tabs[h]=!0}prevStop(h){for(h==null&&(h=this.x);!this.tabs[--h]&&h>0;);return h>=this._cols?this._cols-1:h<0?0:h}nextStop(h){for(h==null&&(h=this.x);!this.tabs[++h]&&h<this._cols;);return h>=this._cols?this._cols-1:h<0?0:h}clearMarkers(h){this._isClearing=!0;for(let d=0;d<this.markers.length;d++)this.markers[d].line===h&&(this.markers[d].dispose(),this.markers.splice(d--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].dispose(),this.markers.splice(h--,1);this._isClearing=!1}addMarker(h){const d=new n.Marker(h);return this.markers.push(d),d.register(this.lines.onTrim(v=>{d.line-=v,d.line<0&&d.dispose()})),d.register(this.lines.onInsert(v=>{d.line>=v.index&&(d.line+=v.amount)})),d.register(this.lines.onDelete(v=>{d.line>=v.index&&d.line<v.index+v.amount&&d.dispose(),d.line>v.index&&(d.line-=v.amount)})),d.register(d.onDispose(()=>this._removeMarker(d))),d}_removeMarker(h){this._isClearing||this.markers.splice(this.markers.indexOf(h),1)}}},8437:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const f=c(3734),_=c(511),u=c(643),m=c(482);i.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let S=0;class w{constructor(n,l,h=!1){this.isWrapped=h,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);const d=l||_.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]);for(let v=0;v<n;++v)this.setCell(v,d);this.length=n}get(n){const l=this._data[3*n+0],h=2097151&l;return[this._data[3*n+1],2097152&l?this._combined[n]:h?(0,m.stringFromCodePoint)(h):"",l>>22,2097152&l?this._combined[n].charCodeAt(this._combined[n].length-1):h]}set(n,l){this._data[3*n+1]=l[u.CHAR_DATA_ATTR_INDEX],l[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=l[1],this._data[3*n+0]=2097152|n|l[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=l[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|l[u.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(n){return this._data[3*n+0]>>22}hasWidth(n){return 12582912&this._data[3*n+0]}getFg(n){return this._data[3*n+1]}getBg(n){return this._data[3*n+2]}hasContent(n){return 4194303&this._data[3*n+0]}getCodePoint(n){const l=this._data[3*n+0];return 2097152&l?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&l}isCombined(n){return 2097152&this._data[3*n+0]}getString(n){const l=this._data[3*n+0];return 2097152&l?this._combined[n]:2097151&l?(0,m.stringFromCodePoint)(2097151&l):""}isProtected(n){return 536870912&this._data[3*n+2]}loadCell(n,l){return S=3*n,l.content=this._data[S+0],l.fg=this._data[S+1],l.bg=this._data[S+2],2097152&l.content&&(l.combinedData=this._combined[n]),268435456&l.bg&&(l.extended=this._extendedAttrs[n]),l}setCell(n,l){2097152&l.content&&(this._combined[n]=l.combinedData),268435456&l.bg&&(this._extendedAttrs[n]=l.extended),this._data[3*n+0]=l.content,this._data[3*n+1]=l.fg,this._data[3*n+2]=l.bg}setCellFromCodePoint(n,l,h,d,v,y){268435456&v&&(this._extendedAttrs[n]=y),this._data[3*n+0]=l|h<<22,this._data[3*n+1]=d,this._data[3*n+2]=v}addCodepointToCell(n,l){let h=this._data[3*n+0];2097152&h?this._combined[n]+=(0,m.stringFromCodePoint)(l):(2097151&h?(this._combined[n]=(0,m.stringFromCodePoint)(2097151&h)+(0,m.stringFromCodePoint)(l),h&=-2097152,h|=2097152):h=l|4194304,this._data[3*n+0]=h)}insertCells(n,l,h,d){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new f.ExtendedAttrs),l<this.length-n){const v=new _.CellData;for(let y=this.length-n-l-1;y>=0;--y)this.setCell(n+l+y,this.loadCell(n+y,v));for(let y=0;y<l;++y)this.setCell(n+y,h)}else for(let v=n;v<this.length;++v)this.setCell(v,h);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new f.ExtendedAttrs)}deleteCells(n,l,h,d){if(n%=this.length,l<this.length-n){const v=new _.CellData;for(let y=0;y<this.length-n-l;++y)this.setCell(n+y,this.loadCell(n+l+y,v));for(let y=this.length-l;y<this.length;++y)this.setCell(y,h)}else for(let v=n;v<this.length;++v)this.setCell(v,h);n&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new f.ExtendedAttrs),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodePoint(n,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new f.ExtendedAttrs)}replaceCells(n,l,h,d,v=!1){if(v)for(n&&this.getWidth(n-1)===2&&!this.isProtected(n-1)&&this.setCellFromCodePoint(n-1,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new f.ExtendedAttrs),l<this.length&&this.getWidth(l-1)===2&&!this.isProtected(l)&&this.setCellFromCodePoint(l,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new f.ExtendedAttrs);n<l&&n<this.length;)this.isProtected(n)||this.setCell(n,h),n++;else for(n&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new f.ExtendedAttrs),l<this.length&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new f.ExtendedAttrs);n<l&&n<this.length;)this.setCell(n++,h)}resize(n,l){if(n===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const h=3*n;if(n>this.length){if(this._data.buffer.byteLength>=4*h)this._data=new Uint32Array(this._data.buffer,0,h);else{const d=new Uint32Array(h);d.set(this._data),this._data=d}for(let d=this.length;d<n;++d)this.setCell(d,l)}else{this._data=this._data.subarray(0,h);const d=Object.keys(this._combined);for(let y=0;y<d.length;y++){const C=parseInt(d[y],10);C>=n&&delete this._combined[C]}const v=Object.keys(this._extendedAttrs);for(let y=0;y<v.length;y++){const C=parseInt(v[y],10);C>=n&&delete this._extendedAttrs[C]}}return this.length=n,4*h*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const n=new Uint32Array(this._data.length);return n.set(this._data),this._data=n,1}return 0}fill(n,l=!1){if(l)for(let h=0;h<this.length;++h)this.isProtected(h)||this.setCell(h,n);else{this._combined={},this._extendedAttrs={};for(let h=0;h<this.length;++h)this.setCell(h,n)}}copyFrom(n){this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={};for(const l in n._combined)this._combined[l]=n._combined[l];this._extendedAttrs={};for(const l in n._extendedAttrs)this._extendedAttrs[l]=n._extendedAttrs[l];this.isWrapped=n.isWrapped}clone(){const n=new w(0);n._data=new Uint32Array(this._data),n.length=this.length;for(const l in this._combined)n._combined[l]=this._combined[l];for(const l in this._extendedAttrs)n._extendedAttrs[l]=this._extendedAttrs[l];return n.isWrapped=this.isWrapped,n}getTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0}getNoBgTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0]||50331648&this._data[3*n+2])return n+(this._data[3*n+0]>>22);return 0}copyCellsFrom(n,l,h,d,v){const y=n._data;if(v)for(let L=d-1;L>=0;L--){for(let b=0;b<3;b++)this._data[3*(h+L)+b]=y[3*(l+L)+b];268435456&y[3*(l+L)+2]&&(this._extendedAttrs[h+L]=n._extendedAttrs[l+L])}else for(let L=0;L<d;L++){for(let b=0;b<3;b++)this._data[3*(h+L)+b]=y[3*(l+L)+b];268435456&y[3*(l+L)+2]&&(this._extendedAttrs[h+L]=n._extendedAttrs[l+L])}const C=Object.keys(n._combined);for(let L=0;L<C.length;L++){const b=parseInt(C[L],10);b>=l&&(this._combined[b-l+h]=n._combined[b])}}translateToString(n=!1,l=0,h=this.length){n&&(h=Math.min(h,this.getTrimmedLength()));let d="";for(;l<h;){const v=this._data[3*l+0],y=2097151&v;d+=2097152&v?this._combined[l]:y?(0,m.stringFromCodePoint)(y):u.WHITESPACE_CELL_CHAR,l+=v>>22||1}return d}}i.BufferLine=w},4841:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(c,f){if(c.start.y>c.end.y)throw new Error(`Buffer range end (${c.end.x}, ${c.end.y}) cannot be before start (${c.start.x}, ${c.start.y})`);return f*(c.end.y-c.start.y)+(c.end.x-c.start.x+1)}},4634:(x,i)=>{function c(f,_,u){if(_===f.length-1)return f[_].getTrimmedLength();const m=!f[_].hasContent(u-1)&&f[_].getWidth(u-1)===1,S=f[_+1].getWidth(0)===2;return m&&S?u-1:u}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(f,_,u,m,S){const w=[];for(let p=0;p<f.length-1;p++){let n=p,l=f.get(++n);if(!l.isWrapped)continue;const h=[f.get(p)];for(;n<f.length&&l.isWrapped;)h.push(l),l=f.get(++n);if(m>=p&&m<n){p+=h.length-1;continue}let d=0,v=c(h,d,_),y=1,C=0;for(;y<h.length;){const b=c(h,y,_),k=b-C,E=u-v,A=Math.min(k,E);h[d].copyCellsFrom(h[y],C,v,A,!1),v+=A,v===u&&(d++,v=0),C+=A,C===b&&(y++,C=0),v===0&&d!==0&&h[d-1].getWidth(u-1)===2&&(h[d].copyCellsFrom(h[d-1],u-1,v++,1,!1),h[d-1].setCell(u-1,S))}h[d].replaceCells(v,u,S);let L=0;for(let b=h.length-1;b>0&&(b>d||h[b].getTrimmedLength()===0);b--)L++;L>0&&(w.push(p+h.length-L),w.push(L)),p+=h.length-1}return w},i.reflowLargerCreateNewLayout=function(f,_){const u=[];let m=0,S=_[m],w=0;for(let p=0;p<f.length;p++)if(S===p){const n=_[++m];f.onDeleteEmitter.fire({index:p-w,amount:n}),p+=n-1,w+=n,S=_[++m]}else u.push(p);return{layout:u,countRemoved:w}},i.reflowLargerApplyNewLayout=function(f,_){const u=[];for(let m=0;m<_.length;m++)u.push(f.get(_[m]));for(let m=0;m<u.length;m++)f.set(m,u[m]);f.length=_.length},i.reflowSmallerGetNewLineLengths=function(f,_,u){const m=[],S=f.map((l,h)=>c(f,h,_)).reduce((l,h)=>l+h);let w=0,p=0,n=0;for(;n<S;){if(S-n<u){m.push(S-n);break}w+=u;const l=c(f,p,_);w>l&&(w-=l,p++);const h=f[p].getWidth(w-1)===2;h&&w--;const d=h?u-1:u;m.push(d),n+=d}return m},i.getWrappedLineTrimmedLength=c},5295:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const f=c(8460),_=c(844),u=c(9092);class m extends _.Disposable{constructor(w,p){super(),this._optionsService=w,this._bufferService=p,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new u.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new u.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(w){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(w),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(w,p){this._normal.resize(w,p),this._alt.resize(w,p),this.setupTabStops(w)}setupTabStops(w){this._normal.setupTabStops(w),this._alt.setupTabStops(w)}}i.BufferSet=m},511:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=c(482),_=c(643),u=c(3734);class m extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const p=new m;return p.setFromCharData(w),p}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let p=!1;if(w[_.CHAR_DATA_CHAR_INDEX].length>2)p=!0;else if(w[_.CHAR_DATA_CHAR_INDEX].length===2){const n=w[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const l=w[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=l&&l<=57343?this.content=1024*(n-55296)+l-56320+65536|w[_.CHAR_DATA_WIDTH_INDEX]<<22:p=!0}else p=!0}else this.content=w[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[_.CHAR_DATA_WIDTH_INDEX]<<22;p&&(this.combinedData=w[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=m},643:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const f=c(8460),_=c(844);class u{get id(){return this._id}constructor(S){this.line=S,this.isDisposed=!1,this._disposables=[],this._id=u._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,_.disposeArray)(this._disposables),this._disposables.length=0)}register(S){return this._disposables.push(S),S}}i.Marker=u,u._nextId=1},7116:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},i.CHARSETS.A={"#":""},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},i.CHARSETS.C=i.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.E=i.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},i.CHARSETS.H=i.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(x,i)=>{var c,f,_;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL=""}(c||(i.C0=c={})),function(u){u.PAD="",u.HOP="",u.BPH="",u.NBH="",u.IND="",u.NEL="",u.SSA="",u.ESA="",u.HTS="",u.HTJ="",u.VTS="",u.PLD="",u.PLU="",u.RI="",u.SS2="",u.SS3="",u.DCS="",u.PU1="",u.PU2="",u.STS="",u.CCH="",u.MW="",u.SPA="",u.EPA="",u.SOS="",u.SGCI="",u.SCI="",u.CSI="",u.ST="",u.OSC="",u.PM="",u.APC=""}(f||(i.C1=f={})),function(u){u.ST=`${c.ESC}\\`}(_||(i.C1_ESCAPED=_={}))},7399:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const f=c(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(u,m,S,w){const p={type:0,cancel:!1,key:void 0},n=(u.shiftKey?1:0)|(u.altKey?2:0)|(u.ctrlKey?4:0)|(u.metaKey?8:0);switch(u.keyCode){case 0:u.key==="UIKeyInputUpArrow"?p.key=m?f.C0.ESC+"OA":f.C0.ESC+"[A":u.key==="UIKeyInputLeftArrow"?p.key=m?f.C0.ESC+"OD":f.C0.ESC+"[D":u.key==="UIKeyInputRightArrow"?p.key=m?f.C0.ESC+"OC":f.C0.ESC+"[C":u.key==="UIKeyInputDownArrow"&&(p.key=m?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:if(u.altKey){p.key=f.C0.ESC+f.C0.DEL;break}p.key=f.C0.DEL;break;case 9:if(u.shiftKey){p.key=f.C0.ESC+"[Z";break}p.key=f.C0.HT,p.cancel=!0;break;case 13:p.key=u.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,p.cancel=!0;break;case 27:p.key=f.C0.ESC,u.altKey&&(p.key=f.C0.ESC+f.C0.ESC),p.cancel=!0;break;case 37:if(u.metaKey)break;n?(p.key=f.C0.ESC+"[1;"+(n+1)+"D",p.key===f.C0.ESC+"[1;3D"&&(p.key=f.C0.ESC+(S?"b":"[1;5D"))):p.key=m?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(u.metaKey)break;n?(p.key=f.C0.ESC+"[1;"+(n+1)+"C",p.key===f.C0.ESC+"[1;3C"&&(p.key=f.C0.ESC+(S?"f":"[1;5C"))):p.key=m?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(u.metaKey)break;n?(p.key=f.C0.ESC+"[1;"+(n+1)+"A",S||p.key!==f.C0.ESC+"[1;3A"||(p.key=f.C0.ESC+"[1;5A")):p.key=m?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(u.metaKey)break;n?(p.key=f.C0.ESC+"[1;"+(n+1)+"B",S||p.key!==f.C0.ESC+"[1;3B"||(p.key=f.C0.ESC+"[1;5B")):p.key=m?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:u.shiftKey||u.ctrlKey||(p.key=f.C0.ESC+"[2~");break;case 46:p.key=n?f.C0.ESC+"[3;"+(n+1)+"~":f.C0.ESC+"[3~";break;case 36:p.key=n?f.C0.ESC+"[1;"+(n+1)+"H":m?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:p.key=n?f.C0.ESC+"[1;"+(n+1)+"F":m?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:u.shiftKey?p.type=2:u.ctrlKey?p.key=f.C0.ESC+"[5;"+(n+1)+"~":p.key=f.C0.ESC+"[5~";break;case 34:u.shiftKey?p.type=3:u.ctrlKey?p.key=f.C0.ESC+"[6;"+(n+1)+"~":p.key=f.C0.ESC+"[6~";break;case 112:p.key=n?f.C0.ESC+"[1;"+(n+1)+"P":f.C0.ESC+"OP";break;case 113:p.key=n?f.C0.ESC+"[1;"+(n+1)+"Q":f.C0.ESC+"OQ";break;case 114:p.key=n?f.C0.ESC+"[1;"+(n+1)+"R":f.C0.ESC+"OR";break;case 115:p.key=n?f.C0.ESC+"[1;"+(n+1)+"S":f.C0.ESC+"OS";break;case 116:p.key=n?f.C0.ESC+"[15;"+(n+1)+"~":f.C0.ESC+"[15~";break;case 117:p.key=n?f.C0.ESC+"[17;"+(n+1)+"~":f.C0.ESC+"[17~";break;case 118:p.key=n?f.C0.ESC+"[18;"+(n+1)+"~":f.C0.ESC+"[18~";break;case 119:p.key=n?f.C0.ESC+"[19;"+(n+1)+"~":f.C0.ESC+"[19~";break;case 120:p.key=n?f.C0.ESC+"[20;"+(n+1)+"~":f.C0.ESC+"[20~";break;case 121:p.key=n?f.C0.ESC+"[21;"+(n+1)+"~":f.C0.ESC+"[21~";break;case 122:p.key=n?f.C0.ESC+"[23;"+(n+1)+"~":f.C0.ESC+"[23~";break;case 123:p.key=n?f.C0.ESC+"[24;"+(n+1)+"~":f.C0.ESC+"[24~";break;default:if(!u.ctrlKey||u.shiftKey||u.altKey||u.metaKey)if(S&&!w||!u.altKey||u.metaKey)!S||u.altKey||u.ctrlKey||u.shiftKey||!u.metaKey?u.key&&!u.ctrlKey&&!u.altKey&&!u.metaKey&&u.keyCode>=48&&u.key.length===1?p.key=u.key:u.key&&u.ctrlKey&&(u.key==="_"&&(p.key=f.C0.US),u.key==="@"&&(p.key=f.C0.NUL)):u.keyCode===65&&(p.type=1);else{const l=_[u.keyCode],h=l==null?void 0:l[u.shiftKey?1:0];if(h)p.key=f.C0.ESC+h;else if(u.keyCode>=65&&u.keyCode<=90){const d=u.ctrlKey?u.keyCode-64:u.keyCode+32;let v=String.fromCharCode(d);u.shiftKey&&(v=v.toUpperCase()),p.key=f.C0.ESC+v}else if(u.keyCode===32)p.key=f.C0.ESC+(u.ctrlKey?f.C0.NUL:" ");else if(u.key==="Dead"&&u.code.startsWith("Key")){let d=u.code.slice(3,4);u.shiftKey||(d=d.toLowerCase()),p.key=f.C0.ESC+d,p.cancel=!0}}else u.keyCode>=65&&u.keyCode<=90?p.key=String.fromCharCode(u.keyCode-64):u.keyCode===32?p.key=f.C0.NUL:u.keyCode>=51&&u.keyCode<=55?p.key=String.fromCharCode(u.keyCode-51+27):u.keyCode===56?p.key=f.C0.DEL:u.keyCode===219?p.key=f.C0.ESC:u.keyCode===220?p.key=f.C0.FS:u.keyCode===221&&(p.key=f.C0.GS)}return p}},482:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(c){return c>65535?(c-=65536,String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):String.fromCharCode(c)},i.utf32ToString=function(c,f=0,_=c.length){let u="";for(let m=f;m<_;++m){let S=c[m];S>65535?(S-=65536,u+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):u+=String.fromCharCode(S)}return u},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(c,f){const _=c.length;if(!_)return 0;let u=0,m=0;if(this._interim){const S=c.charCodeAt(m++);56320<=S&&S<=57343?f[u++]=1024*(this._interim-55296)+S-56320+65536:(f[u++]=this._interim,f[u++]=S),this._interim=0}for(let S=m;S<_;++S){const w=c.charCodeAt(S);if(55296<=w&&w<=56319){if(++S>=_)return this._interim=w,u;const p=c.charCodeAt(S);56320<=p&&p<=57343?f[u++]=1024*(w-55296)+p-56320+65536:(f[u++]=w,f[u++]=p)}else w!==65279&&(f[u++]=w)}return u}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(c,f){const _=c.length;if(!_)return 0;let u,m,S,w,p=0,n=0,l=0;if(this.interim[0]){let v=!1,y=this.interim[0];y&=(224&y)==192?31:(240&y)==224?15:7;let C,L=0;for(;(C=63&this.interim[++L])&&L<4;)y<<=6,y|=C;const b=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,k=b-L;for(;l<k;){if(l>=_)return 0;if(C=c[l++],(192&C)!=128){l--,v=!0;break}this.interim[L++]=C,y<<=6,y|=63&C}v||(b===2?y<128?l--:f[p++]=y:b===3?y<2048||y>=55296&&y<=57343||y===65279||(f[p++]=y):y<65536||y>1114111||(f[p++]=y)),this.interim.fill(0)}const h=_-4;let d=l;for(;d<_;){for(;!(!(d<h)||128&(u=c[d])||128&(m=c[d+1])||128&(S=c[d+2])||128&(w=c[d+3]));)f[p++]=u,f[p++]=m,f[p++]=S,f[p++]=w,d+=4;if(u=c[d++],u<128)f[p++]=u;else if((224&u)==192){if(d>=_)return this.interim[0]=u,p;if(m=c[d++],(192&m)!=128){d--;continue}if(n=(31&u)<<6|63&m,n<128){d--;continue}f[p++]=n}else if((240&u)==224){if(d>=_)return this.interim[0]=u,p;if(m=c[d++],(192&m)!=128){d--;continue}if(d>=_)return this.interim[0]=u,this.interim[1]=m,p;if(S=c[d++],(192&S)!=128){d--;continue}if(n=(15&u)<<12|(63&m)<<6|63&S,n<2048||n>=55296&&n<=57343||n===65279)continue;f[p++]=n}else if((248&u)==240){if(d>=_)return this.interim[0]=u,p;if(m=c[d++],(192&m)!=128){d--;continue}if(d>=_)return this.interim[0]=u,this.interim[1]=m,p;if(S=c[d++],(192&S)!=128){d--;continue}if(d>=_)return this.interim[0]=u,this.interim[1]=m,this.interim[2]=S,p;if(w=c[d++],(192&w)!=128){d--;continue}if(n=(7&u)<<18|(63&m)<<12|(63&S)<<6|63&w,n<65536||n>1114111)continue;f[p++]=n}}return p}}},225:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const c=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],f=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let _;i.UnicodeV6=class{constructor(){if(this.version="6",!_){_=new Uint8Array(65536),_.fill(1),_[0]=0,_.fill(0,1,32),_.fill(0,127,160),_.fill(2,4352,4448),_[9001]=2,_[9002]=2,_.fill(2,11904,42192),_[12351]=1,_.fill(2,44032,55204),_.fill(2,63744,64256),_.fill(2,65040,65050),_.fill(2,65072,65136),_.fill(2,65280,65377),_.fill(2,65504,65511);for(let u=0;u<c.length;++u)_.fill(0,c[u][0],c[u][1]+1)}}wcwidth(u){return u<32?0:u<127?1:u<65536?_[u]:function(m,S){let w,p=0,n=S.length-1;if(m<S[0][0]||m>S[n][1])return!1;for(;n>=p;)if(w=p+n>>1,m>S[w][1])p=w+1;else{if(!(m<S[w][0]))return!0;n=w-1}return!1}(u,f)?0:u>=131072&&u<=196605||u>=196608&&u<=262141?2:1}}},5981:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const f=c(8460),_=c(844);class u extends _.Disposable{constructor(S){super(),this._action=S,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(S,w){if(w!==void 0&&this._syncCalls>w)return void(this._syncCalls=0);if(this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let p;for(this._isSyncWriting=!0;p=this._writeBuffer.shift();){this._action(p);const n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(S,w){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(w),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(w)}_innerWrite(S=0,w=!0){const p=S||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const n=this._writeBuffer[this._bufferOffset],l=this._action(n,w);if(l){const d=v=>Date.now()-p>=12?setTimeout(()=>this._innerWrite(0,v)):this._innerWrite(p,v);return void l.catch(v=>(queueMicrotask(()=>{throw v}),Promise.resolve(!1))).then(d)}const h=this._callbacks[this._bufferOffset];if(h&&h(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-p>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=u},5941:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const c=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function _(u,m){const S=u.toString(16),w=S.length<2?"0"+S:S;switch(m){case 4:return S[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}i.parseColor=function(u){if(!u)return;let m=u.toLowerCase();if(m.indexOf("rgb:")===0){m=m.slice(4);const S=c.exec(m);if(S){const w=S[1]?15:S[4]?255:S[7]?4095:65535;return[Math.round(parseInt(S[1]||S[4]||S[7]||S[10],16)/w*255),Math.round(parseInt(S[2]||S[5]||S[8]||S[11],16)/w*255),Math.round(parseInt(S[3]||S[6]||S[9]||S[12],16)/w*255)]}}else if(m.indexOf("#")===0&&(m=m.slice(1),f.exec(m)&&[3,6,9,12].includes(m.length))){const S=m.length/3,w=[0,0,0];for(let p=0;p<3;++p){const n=parseInt(m.slice(S*p,S*p+S),16);w[p]=S===1?n<<4:S===2?n:S===3?n>>4:n>>8}return w}},i.toRgbString=function(u,m=16){const[S,w,p]=u;return`rgb:${_(S,m)}/${_(w,m)}/${_(p,m)}`}},5770:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const f=c(482),_=c(8742),u=c(5770),m=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=m,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=m}registerHandler(w,p){this._handlers[w]===void 0&&(this._handlers[w]=[]);const n=this._handlers[w];return n.push(p),{dispose:()=>{const l=n.indexOf(p);l!==-1&&n.splice(l,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}reset(){if(this._active.length)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].unhook(!1);this._stack.paused=!1,this._active=m,this._ident=0}hook(w,p){if(this.reset(),this._ident=w,this._active=this._handlers[w]||m,this._active.length)for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(p);else this._handlerFb(this._ident,"HOOK",p)}put(w,p,n){if(this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].put(w,p,n);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(w,p,n))}unhook(w,p=!0){if(this._active.length){let n=!1,l=this._active.length-1,h=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,n=p,h=this._stack.fallThrough,this._stack.paused=!1),!h&&n===!1){for(;l>=0&&(n=this._active[l].unhook(w),n!==!0);l--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,n;l--}for(;l>=0;l--)if(n=this._active[l].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,n}else this._handlerFb(this._ident,"UNHOOK",w);this._active=m,this._ident=0}};const S=new _.Params;S.addParam(0),i.DcsHandler=class{constructor(w){this._handler=w,this._data="",this._params=S,this._hitLimit=!1}hook(w){this._params=w.length>1||w.params[0]?w.clone():S,this._data="",this._hitLimit=!1}put(w,p,n){this._hitLimit||(this._data+=(0,f.utf32ToString)(w,p,n),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(w){let p=!1;if(this._hitLimit)p=!1;else if(w&&(p=this._handler(this._data,this._params),p instanceof Promise))return p.then(n=>(this._params=S,this._data="",this._hitLimit=!1,n));return this._params=S,this._data="",this._hitLimit=!1,p}}},2015:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const f=c(844),_=c(8742),u=c(6242),m=c(6351);class S{constructor(l){this.table=new Uint8Array(l)}setDefault(l,h){this.table.fill(l<<4|h)}add(l,h,d,v){this.table[h<<8|l]=d<<4|v}addMany(l,h,d,v){for(let y=0;y<l.length;y++)this.table[h<<8|l[y]]=d<<4|v}}i.TransitionTable=S;const w=160;i.VT500_TRANSITION_TABLE=function(){const n=new S(4095),l=Array.apply(null,Array(256)).map((L,b)=>b),h=(L,b)=>l.slice(L,b),d=h(32,127),v=h(0,24);v.push(25),v.push.apply(v,h(28,32));const y=h(0,14);let C;for(C in n.setDefault(1,0),n.addMany(d,0,2,0),y)n.addMany([24,26,153,154],C,3,0),n.addMany(h(128,144),C,3,0),n.addMany(h(144,152),C,3,0),n.add(156,C,0,0),n.add(27,C,11,1),n.add(157,C,4,8),n.addMany([152,158,159],C,0,7),n.add(155,C,11,3),n.add(144,C,11,9);return n.addMany(v,0,3,0),n.addMany(v,1,3,1),n.add(127,1,0,1),n.addMany(v,8,0,8),n.addMany(v,3,3,3),n.add(127,3,0,3),n.addMany(v,4,3,4),n.add(127,4,0,4),n.addMany(v,6,3,6),n.addMany(v,5,3,5),n.add(127,5,0,5),n.addMany(v,2,3,2),n.add(127,2,0,2),n.add(93,1,4,8),n.addMany(d,8,5,8),n.add(127,8,5,8),n.addMany([156,27,24,26,7],8,6,0),n.addMany(h(28,32),8,0,8),n.addMany([88,94,95],1,0,7),n.addMany(d,7,0,7),n.addMany(v,7,0,7),n.add(156,7,0,0),n.add(127,7,0,7),n.add(91,1,11,3),n.addMany(h(64,127),3,7,0),n.addMany(h(48,60),3,8,4),n.addMany([60,61,62,63],3,9,4),n.addMany(h(48,60),4,8,4),n.addMany(h(64,127),4,7,0),n.addMany([60,61,62,63],4,0,6),n.addMany(h(32,64),6,0,6),n.add(127,6,0,6),n.addMany(h(64,127),6,0,0),n.addMany(h(32,48),3,9,5),n.addMany(h(32,48),5,9,5),n.addMany(h(48,64),5,0,6),n.addMany(h(64,127),5,7,0),n.addMany(h(32,48),4,9,5),n.addMany(h(32,48),1,9,2),n.addMany(h(32,48),2,9,2),n.addMany(h(48,127),2,10,0),n.addMany(h(48,80),1,10,0),n.addMany(h(81,88),1,10,0),n.addMany([89,90,92],1,10,0),n.addMany(h(96,127),1,10,0),n.add(80,1,11,9),n.addMany(v,9,0,9),n.add(127,9,0,9),n.addMany(h(28,32),9,0,9),n.addMany(h(32,48),9,9,12),n.addMany(h(48,60),9,8,10),n.addMany([60,61,62,63],9,9,10),n.addMany(v,11,0,11),n.addMany(h(32,128),11,0,11),n.addMany(h(28,32),11,0,11),n.addMany(v,10,0,10),n.add(127,10,0,10),n.addMany(h(28,32),10,0,10),n.addMany(h(48,60),10,8,10),n.addMany([60,61,62,63],10,0,11),n.addMany(h(32,48),10,9,12),n.addMany(v,12,0,12),n.add(127,12,0,12),n.addMany(h(28,32),12,0,12),n.addMany(h(32,48),12,9,12),n.addMany(h(48,64),12,0,11),n.addMany(h(64,127),12,12,13),n.addMany(h(64,127),10,12,13),n.addMany(h(64,127),9,12,13),n.addMany(v,13,13,13),n.addMany(d,13,13,13),n.add(127,13,0,13),n.addMany([27,156,24,26],13,14,0),n.add(w,0,2,0),n.add(w,8,5,8),n.add(w,6,0,6),n.add(w,11,0,11),n.add(w,13,13,13),n}();class p extends f.Disposable{constructor(l=i.VT500_TRANSITION_TABLE){super(),this._transitions=l,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new _.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(h,d,v)=>{},this._executeHandlerFb=h=>{},this._csiHandlerFb=(h,d)=>{},this._escHandlerFb=h=>{},this._errorHandlerFb=h=>h,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new u.OscParser),this._dcsParser=this.register(new m.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(l,h=[64,126]){let d=0;if(l.prefix){if(l.prefix.length>1)throw new Error("only one byte as prefix supported");if(d=l.prefix.charCodeAt(0),d&&60>d||d>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(l.intermediates){if(l.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let y=0;y<l.intermediates.length;++y){const C=l.intermediates.charCodeAt(y);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");d<<=8,d|=C}}if(l.final.length!==1)throw new Error("final must be a single byte");const v=l.final.charCodeAt(0);if(h[0]>v||v>h[1])throw new Error(`final must be in range ${h[0]} .. ${h[1]}`);return d<<=8,d|=v,d}identToString(l){const h=[];for(;l;)h.push(String.fromCharCode(255&l)),l>>=8;return h.reverse().join("")}setPrintHandler(l){this._printHandler=l}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(l,h){const d=this._identifier(l,[48,126]);this._escHandlers[d]===void 0&&(this._escHandlers[d]=[]);const v=this._escHandlers[d];return v.push(h),{dispose:()=>{const y=v.indexOf(h);y!==-1&&v.splice(y,1)}}}clearEscHandler(l){this._escHandlers[this._identifier(l,[48,126])]&&delete this._escHandlers[this._identifier(l,[48,126])]}setEscHandlerFallback(l){this._escHandlerFb=l}setExecuteHandler(l,h){this._executeHandlers[l.charCodeAt(0)]=h}clearExecuteHandler(l){this._executeHandlers[l.charCodeAt(0)]&&delete this._executeHandlers[l.charCodeAt(0)]}setExecuteHandlerFallback(l){this._executeHandlerFb=l}registerCsiHandler(l,h){const d=this._identifier(l);this._csiHandlers[d]===void 0&&(this._csiHandlers[d]=[]);const v=this._csiHandlers[d];return v.push(h),{dispose:()=>{const y=v.indexOf(h);y!==-1&&v.splice(y,1)}}}clearCsiHandler(l){this._csiHandlers[this._identifier(l)]&&delete this._csiHandlers[this._identifier(l)]}setCsiHandlerFallback(l){this._csiHandlerFb=l}registerDcsHandler(l,h){return this._dcsParser.registerHandler(this._identifier(l),h)}clearDcsHandler(l){this._dcsParser.clearHandler(this._identifier(l))}setDcsHandlerFallback(l){this._dcsParser.setHandlerFallback(l)}registerOscHandler(l,h){return this._oscParser.registerHandler(l,h)}clearOscHandler(l){this._oscParser.clearHandler(l)}setOscHandlerFallback(l){this._oscParser.setHandlerFallback(l)}setErrorHandler(l){this._errorHandler=l}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(l,h,d,v,y){this._parseStack.state=l,this._parseStack.handlers=h,this._parseStack.handlerPos=d,this._parseStack.transition=v,this._parseStack.chunkPos=y}parse(l,h,d){let v,y=0,C=0,L=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,L=this._parseStack.chunkPos+1;else{if(d===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const b=this._parseStack.handlers;let k=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(d===!1&&k>-1){for(;k>=0&&(v=b[k](this._params),v!==!0);k--)if(v instanceof Promise)return this._parseStack.handlerPos=k,v}this._parseStack.handlers=[];break;case 4:if(d===!1&&k>-1){for(;k>=0&&(v=b[k](),v!==!0);k--)if(v instanceof Promise)return this._parseStack.handlerPos=k,v}this._parseStack.handlers=[];break;case 6:if(y=l[this._parseStack.chunkPos],v=this._dcsParser.unhook(y!==24&&y!==26,d),v)return v;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(y=l[this._parseStack.chunkPos],v=this._oscParser.end(y!==24&&y!==26,d),v)return v;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,L=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let b=L;b<h;++b){switch(y=l[b],C=this._transitions.table[this.currentState<<8|(y<160?y:w)],C>>4){case 2:for(let T=b+1;;++T){if(T>=h||(y=l[T])<32||y>126&&y<w){this._printHandler(l,b,T),b=T-1;break}if(++T>=h||(y=l[T])<32||y>126&&y<w){this._printHandler(l,b,T),b=T-1;break}if(++T>=h||(y=l[T])<32||y>126&&y<w){this._printHandler(l,b,T),b=T-1;break}if(++T>=h||(y=l[T])<32||y>126&&y<w){this._printHandler(l,b,T),b=T-1;break}}break;case 3:this._executeHandlers[y]?this._executeHandlers[y]():this._executeHandlerFb(y),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:b,code:y,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const k=this._csiHandlers[this._collect<<8|y];let E=k?k.length-1:-1;for(;E>=0&&(v=k[E](this._params),v!==!0);E--)if(v instanceof Promise)return this._preserveStack(3,k,E,C,b),v;E<0&&this._csiHandlerFb(this._collect<<8|y,this._params),this.precedingCodepoint=0;break;case 8:do switch(y){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(y-48)}while(++b<h&&(y=l[b])>47&&y<60);b--;break;case 9:this._collect<<=8,this._collect|=y;break;case 10:const A=this._escHandlers[this._collect<<8|y];let R=A?A.length-1:-1;for(;R>=0&&(v=A[R](),v!==!0);R--)if(v instanceof Promise)return this._preserveStack(4,A,R,C,b),v;R<0&&this._escHandlerFb(this._collect<<8|y),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|y,this._params);break;case 13:for(let T=b+1;;++T)if(T>=h||(y=l[T])===24||y===26||y===27||y>127&&y<w){this._dcsParser.put(l,b,T),b=T-1;break}break;case 14:if(v=this._dcsParser.unhook(y!==24&&y!==26),v)return this._preserveStack(6,[],0,C,b),v;y===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let T=b+1;;T++)if(T>=h||(y=l[T])<32||y>127&&y<w){this._oscParser.put(l,b,T),b=T-1;break}break;case 6:if(v=this._oscParser.end(y!==24&&y!==26),v)return this._preserveStack(5,[],0,C,b),v;y===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&C}}}i.EscapeSequenceParser=p},6242:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const f=c(5770),_=c(482),u=[];i.OscParser=class{constructor(){this._state=0,this._active=u,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(m,S){this._handlers[m]===void 0&&(this._handlers[m]=[]);const w=this._handlers[m];return w.push(S),{dispose:()=>{const p=w.indexOf(S);p!==-1&&w.splice(p,1)}}}clearHandler(m){this._handlers[m]&&delete this._handlers[m]}setHandlerFallback(m){this._handlerFb=m}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=u}reset(){if(this._state===2)for(let m=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;m>=0;--m)this._active[m].end(!1);this._stack.paused=!1,this._active=u,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||u,this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].start();else this._handlerFb(this._id,"START")}_put(m,S,w){if(this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].put(m,S,w);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(m,S,w))}start(){this.reset(),this._state=1}put(m,S,w){if(this._state!==3){if(this._state===1)for(;S<w;){const p=m[S++];if(p===59){this._state=2,this._start();break}if(p<48||57<p)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+p-48}this._state===2&&w-S>0&&this._put(m,S,w)}}end(m,S=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let w=!1,p=this._active.length-1,n=!1;if(this._stack.paused&&(p=this._stack.loopPosition-1,w=S,n=this._stack.fallThrough,this._stack.paused=!1),!n&&w===!1){for(;p>=0&&(w=this._active[p].end(m),w!==!0);p--)if(w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!1,w;p--}for(;p>=0;p--)if(w=this._active[p].end(!1),w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!0,w}else this._handlerFb(this._id,"END",m);this._active=u,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(m){this._handler=m,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(m,S,w){this._hitLimit||(this._data+=(0,_.utf32ToString)(m,S,w),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(m){let S=!1;if(this._hitLimit)S=!1;else if(m&&(S=this._handler(this._data),S instanceof Promise))return S.then(w=>(this._data="",this._hitLimit=!1,w));return this._data="",this._hitLimit=!1,S}}},8742:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const c=2147483647;class f{static fromArray(u){const m=new f;if(!u.length)return m;for(let S=Array.isArray(u[0])?1:0;S<u.length;++S){const w=u[S];if(Array.isArray(w))for(let p=0;p<w.length;++p)m.addSubParam(w[p]);else m.addParam(w)}return m}constructor(u=32,m=32){if(this.maxLength=u,this.maxSubParamsLength=m,m>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(u),this.length=0,this._subParams=new Int32Array(m),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(u),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const u=new f(this.maxLength,this.maxSubParamsLength);return u.params.set(this.params),u.length=this.length,u._subParams.set(this._subParams),u._subParamsLength=this._subParamsLength,u._subParamsIdx.set(this._subParamsIdx),u._rejectDigits=this._rejectDigits,u._rejectSubDigits=this._rejectSubDigits,u._digitIsSub=this._digitIsSub,u}toArray(){const u=[];for(let m=0;m<this.length;++m){u.push(this.params[m]);const S=this._subParamsIdx[m]>>8,w=255&this._subParamsIdx[m];w-S>0&&u.push(Array.prototype.slice.call(this._subParams,S,w))}return u}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(u){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=u>c?c:u}}addSubParam(u){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=u>c?c:u,this._subParamsIdx[this.length-1]++}}hasSubParams(u){return(255&this._subParamsIdx[u])-(this._subParamsIdx[u]>>8)>0}getSubParams(u){const m=this._subParamsIdx[u]>>8,S=255&this._subParamsIdx[u];return S-m>0?this._subParams.subarray(m,S):null}getSubParamsAll(){const u={};for(let m=0;m<this.length;++m){const S=this._subParamsIdx[m]>>8,w=255&this._subParamsIdx[m];w-S>0&&(u[m]=this._subParams.slice(S,w))}return u}addDigit(u){let m;if(this._rejectDigits||!(m=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const S=this._digitIsSub?this._subParams:this.params,w=S[m-1];S[m-1]=~w?Math.min(10*w+u,c):u}}i.Params=f},5741:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let c=this._addons.length-1;c>=0;c--)this._addons[c].instance.dispose()}loadAddon(c,f){const _={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(_),f.dispose=()=>this._wrappedAddonDispose(_),f.activate(c)}_wrappedAddonDispose(c){if(c.isDisposed)return;let f=-1;for(let _=0;_<this._addons.length;_++)if(this._addons[_]===c){f=_;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");c.isDisposed=!0,c.dispose.apply(c.instance),this._addons.splice(f,1)}}},8771:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const f=c(3785),_=c(511);i.BufferApiView=class{constructor(u,m){this._buffer=u,this.type=m}init(u){return this._buffer=u,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(u){const m=this._buffer.lines.get(u);if(m)return new f.BufferLineApiView(m)}getNullCell(){return new _.CellData}}},3785:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const f=c(511);i.BufferLineApiView=class{constructor(_){this._line=_}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(_,u){if(!(_<0||_>=this._line.length))return u?(this._line.loadCell(_,u),u):this._line.loadCell(_,new f.CellData)}translateToString(_,u,m){return this._line.translateToString(_,u,m)}}},8285:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const f=c(8771),_=c(8460),u=c(844);class m extends u.Disposable{constructor(w){super(),this._core=w,this._onBufferChange=this.register(new _.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=m},7975:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(c){this._core=c}registerCsiHandler(c,f){return this._core.registerCsiHandler(c,_=>f(_.toArray()))}addCsiHandler(c,f){return this.registerCsiHandler(c,f)}registerDcsHandler(c,f){return this._core.registerDcsHandler(c,(_,u)=>f(_,u.toArray()))}addDcsHandler(c,f){return this.registerDcsHandler(c,f)}registerEscHandler(c,f){return this._core.registerEscHandler(c,f)}addEscHandler(c,f){return this.registerEscHandler(c,f)}registerOscHandler(c,f){return this._core.registerOscHandler(c,f)}addOscHandler(c,f){return this.registerOscHandler(c,f)}}},7090:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(c){this._core=c}register(c){this._core.unicodeService.register(c)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(c){this._core.unicodeService.activeVersion=c}}},744:function(x,i,c){var f=this&&this.__decorate||function(n,l,h,d){var v,y=arguments.length,C=y<3?l:d===null?d=Object.getOwnPropertyDescriptor(l,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,l,h,d);else for(var L=n.length-1;L>=0;L--)(v=n[L])&&(C=(y<3?v(C):y>3?v(l,h,C):v(l,h))||C);return y>3&&C&&Object.defineProperty(l,h,C),C},_=this&&this.__param||function(n,l){return function(h,d){l(h,d,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const u=c(8460),m=c(844),S=c(5295),w=c(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let p=i.BufferService=class extends m.Disposable{get buffer(){return this.buffers.active}constructor(n){super(),this.isUserScrolling=!1,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(n.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(n.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new S.BufferSet(n,this))}resize(n,l){this.cols=n,this.rows=l,this.buffers.resize(n,l),this._onResize.fire({cols:n,rows:l})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(n,l=!1){const h=this.buffer;let d;d=this._cachedBlankLine,d&&d.length===this.cols&&d.getFg(0)===n.fg&&d.getBg(0)===n.bg||(d=h.getBlankLine(n,l),this._cachedBlankLine=d),d.isWrapped=l;const v=h.ybase+h.scrollTop,y=h.ybase+h.scrollBottom;if(h.scrollTop===0){const C=h.lines.isFull;y===h.lines.length-1?C?h.lines.recycle().copyFrom(d):h.lines.push(d.clone()):h.lines.splice(y+1,0,d.clone()),C?this.isUserScrolling&&(h.ydisp=Math.max(h.ydisp-1,0)):(h.ybase++,this.isUserScrolling||h.ydisp++)}else{const C=y-v+1;h.lines.shiftElements(v+1,C-1,-1),h.lines.set(y,d.clone())}this.isUserScrolling||(h.ydisp=h.ybase),this._onScroll.fire(h.ydisp)}scrollLines(n,l,h){const d=this.buffer;if(n<0){if(d.ydisp===0)return;this.isUserScrolling=!0}else n+d.ydisp>=d.ybase&&(this.isUserScrolling=!1);const v=d.ydisp;d.ydisp=Math.max(Math.min(d.ydisp+n,d.ybase),0),v!==d.ydisp&&(l||this._onScroll.fire(d.ydisp))}};i.BufferService=p=f([_(0,w.IOptionsService)],p)},7994:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(c){this.glevel=c,this.charset=this._charsets[c]}setgCharset(c,f){this._charsets[c]=f,this.glevel===c&&(this.charset=f)}}},1753:function(x,i,c){var f=this&&this.__decorate||function(d,v,y,C){var L,b=arguments.length,k=b<3?v:C===null?C=Object.getOwnPropertyDescriptor(v,y):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,v,y,C);else for(var E=d.length-1;E>=0;E--)(L=d[E])&&(k=(b<3?L(k):b>3?L(v,y,k):L(v,y))||k);return b>3&&k&&Object.defineProperty(v,y,k),k},_=this&&this.__param||function(d,v){return function(y,C){v(y,C,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const u=c(2585),m=c(8460),S=c(844),w={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:d=>d.button!==4&&d.action===1&&(d.ctrl=!1,d.alt=!1,d.shift=!1,!0)},VT200:{events:19,restrict:d=>d.action!==32},DRAG:{events:23,restrict:d=>d.action!==32||d.button!==3},ANY:{events:31,restrict:d=>!0}};function p(d,v){let y=(d.ctrl?16:0)|(d.shift?4:0)|(d.alt?8:0);return d.button===4?(y|=64,y|=d.action):(y|=3&d.button,4&d.button&&(y|=64),8&d.button&&(y|=128),d.action===32?y|=32:d.action!==0||v||(y|=3)),y}const n=String.fromCharCode,l={DEFAULT:d=>{const v=[p(d,!1)+32,d.col+32,d.row+32];return v[0]>255||v[1]>255||v[2]>255?"":`\x1B[M${n(v[0])}${n(v[1])}${n(v[2])}`},SGR:d=>{const v=d.action===0&&d.button!==4?"m":"M";return`\x1B[<${p(d,!0)};${d.col};${d.row}${v}`},SGR_PIXELS:d=>{const v=d.action===0&&d.button!==4?"m":"M";return`\x1B[<${p(d,!0)};${d.x};${d.y}${v}`}};let h=i.CoreMouseService=class extends S.Disposable{constructor(d,v){super(),this._bufferService=d,this._coreService=v,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new m.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const y of Object.keys(w))this.addProtocol(y,w[y]);for(const y of Object.keys(l))this.addEncoding(y,l[y]);this.reset()}addProtocol(d,v){this._protocols[d]=v}addEncoding(d,v){this._encodings[d]=v}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(d){if(!this._protocols[d])throw new Error(`unknown protocol "${d}"`);this._activeProtocol=d,this._onProtocolChange.fire(this._protocols[d].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(d){if(!this._encodings[d])throw new Error(`unknown encoding "${d}"`);this._activeEncoding=d}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(d){if(d.col<0||d.col>=this._bufferService.cols||d.row<0||d.row>=this._bufferService.rows||d.button===4&&d.action===32||d.button===3&&d.action!==32||d.button!==4&&(d.action===2||d.action===3)||(d.col++,d.row++,d.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,d,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(d))return!1;const v=this._encodings[this._activeEncoding](d);return v&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(v):this._coreService.triggerDataEvent(v,!0)),this._lastEvent=d,!0}explainEvents(d){return{down:!!(1&d),up:!!(2&d),drag:!!(4&d),move:!!(8&d),wheel:!!(16&d)}}_equalEvents(d,v,y){if(y){if(d.x!==v.x||d.y!==v.y)return!1}else if(d.col!==v.col||d.row!==v.row)return!1;return d.button===v.button&&d.action===v.action&&d.ctrl===v.ctrl&&d.alt===v.alt&&d.shift===v.shift}};i.CoreMouseService=h=f([_(0,u.IBufferService),_(1,u.ICoreService)],h)},6975:function(x,i,c){var f=this&&this.__decorate||function(h,d,v,y){var C,L=arguments.length,b=L<3?d:y===null?y=Object.getOwnPropertyDescriptor(d,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(h,d,v,y);else for(var k=h.length-1;k>=0;k--)(C=h[k])&&(b=(L<3?C(b):L>3?C(d,v,b):C(d,v))||b);return L>3&&b&&Object.defineProperty(d,v,b),b},_=this&&this.__param||function(h,d){return function(v,y){d(v,y,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const u=c(1439),m=c(8460),S=c(844),w=c(2585),p=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let l=i.CoreService=class extends S.Disposable{constructor(h,d,v){super(),this._bufferService=h,this._logService=d,this._optionsService=v,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new m.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new m.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new m.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new m.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,u.clone)(p),this.decPrivateModes=(0,u.clone)(n)}reset(){this.modes=(0,u.clone)(p),this.decPrivateModes=(0,u.clone)(n)}triggerDataEvent(h,d=!1){if(this._optionsService.rawOptions.disableStdin)return;const v=this._bufferService.buffer;d&&this._optionsService.rawOptions.scrollOnUserInput&&v.ybase!==v.ydisp&&this._onRequestScrollToBottom.fire(),d&&this._onUserInput.fire(),this._logService.debug(`sending data "${h}"`,()=>h.split("").map(y=>y.charCodeAt(0))),this._onData.fire(h)}triggerBinaryEvent(h){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${h}"`,()=>h.split("").map(d=>d.charCodeAt(0))),this._onBinary.fire(h))}};i.CoreService=l=f([_(0,w.IBufferService),_(1,w.ILogService),_(2,w.IOptionsService)],l)},9074:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const f=c(8055),_=c(8460),u=c(844),m=c(6106);let S=0,w=0;class p extends u.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new m.SortedList(h=>h==null?void 0:h.marker.line),this._onDecorationRegistered=this.register(new _.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new _.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,u.toDisposable)(()=>this.reset()))}registerDecoration(h){if(h.marker.isDisposed)return;const d=new n(h);if(d){const v=d.marker.onDispose(()=>d.dispose());d.onDispose(()=>{d&&(this._decorations.delete(d)&&this._onDecorationRemoved.fire(d),v.dispose())}),this._decorations.insert(d),this._onDecorationRegistered.fire(d)}return d}reset(){for(const h of this._decorations.values())h.dispose();this._decorations.clear()}*getDecorationsAtCell(h,d,v){var y,C,L;let b=0,k=0;for(const E of this._decorations.getKeyIterator(d))b=(y=E.options.x)!==null&&y!==void 0?y:0,k=b+((C=E.options.width)!==null&&C!==void 0?C:1),h>=b&&h<k&&(!v||((L=E.options.layer)!==null&&L!==void 0?L:"bottom")===v)&&(yield E)}forEachDecorationAtCell(h,d,v,y){this._decorations.forEachByKey(d,C=>{var L,b,k;S=(L=C.options.x)!==null&&L!==void 0?L:0,w=S+((b=C.options.width)!==null&&b!==void 0?b:1),h>=S&&h<w&&(!v||((k=C.options.layer)!==null&&k!==void 0?k:"bottom")===v)&&y(C)})}}i.DecorationService=p;class n extends u.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(h){super(),this.options=h,this.onRenderEmitter=this.register(new _.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new _.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=h.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const f=c(2585),_=c(8343);class u{constructor(...S){this._entries=new Map;for(const[w,p]of S)this.set(w,p)}set(S,w){const p=this._entries.get(S);return this._entries.set(S,w),p}forEach(S){for(const[w,p]of this._entries.entries())S(w,p)}has(S){return this._entries.has(S)}get(S){return this._entries.get(S)}}i.ServiceCollection=u,i.InstantiationService=class{constructor(){this._services=new u,this._services.set(f.IInstantiationService,this)}setService(m,S){this._services.set(m,S)}getService(m){return this._services.get(m)}createInstance(m,...S){const w=(0,_.getServiceDependencies)(m).sort((l,h)=>l.index-h.index),p=[];for(const l of w){const h=this._services.get(l.id);if(!h)throw new Error(`[createInstance] ${m.name} depends on UNKNOWN service ${l.id}.`);p.push(h)}const n=w.length>0?w[0].index:S.length;if(S.length!==n)throw new Error(`[createInstance] First service dependency of ${m.name} at position ${n+1} conflicts with ${S.length} static arguments`);return new m(...S,...p)}}},7866:function(x,i,c){var f=this&&this.__decorate||function(n,l,h,d){var v,y=arguments.length,C=y<3?l:d===null?d=Object.getOwnPropertyDescriptor(l,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,l,h,d);else for(var L=n.length-1;L>=0;L--)(v=n[L])&&(C=(y<3?v(C):y>3?v(l,h,C):v(l,h))||C);return y>3&&C&&Object.defineProperty(l,h,C),C},_=this&&this.__param||function(n,l){return function(h,d){l(h,d,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const u=c(844),m=c(2585),S={trace:m.LogLevelEnum.TRACE,debug:m.LogLevelEnum.DEBUG,info:m.LogLevelEnum.INFO,warn:m.LogLevelEnum.WARN,error:m.LogLevelEnum.ERROR,off:m.LogLevelEnum.OFF};let w,p=i.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=m.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),w=this}_updateLogLevel(){this._logLevel=S[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let l=0;l<n.length;l++)typeof n[l]=="function"&&(n[l]=n[l]())}_log(n,l,h){this._evalLazyOptionalParams(h),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+l,...h)}trace(n,...l){var h,d;this._logLevel<=m.LogLevelEnum.TRACE&&this._log((d=(h=this._optionsService.options.logger)===null||h===void 0?void 0:h.trace.bind(this._optionsService.options.logger))!==null&&d!==void 0?d:console.log,n,l)}debug(n,...l){var h,d;this._logLevel<=m.LogLevelEnum.DEBUG&&this._log((d=(h=this._optionsService.options.logger)===null||h===void 0?void 0:h.debug.bind(this._optionsService.options.logger))!==null&&d!==void 0?d:console.log,n,l)}info(n,...l){var h,d;this._logLevel<=m.LogLevelEnum.INFO&&this._log((d=(h=this._optionsService.options.logger)===null||h===void 0?void 0:h.info.bind(this._optionsService.options.logger))!==null&&d!==void 0?d:console.info,n,l)}warn(n,...l){var h,d;this._logLevel<=m.LogLevelEnum.WARN&&this._log((d=(h=this._optionsService.options.logger)===null||h===void 0?void 0:h.warn.bind(this._optionsService.options.logger))!==null&&d!==void 0?d:console.warn,n,l)}error(n,...l){var h,d;this._logLevel<=m.LogLevelEnum.ERROR&&this._log((d=(h=this._optionsService.options.logger)===null||h===void 0?void 0:h.error.bind(this._optionsService.options.logger))!==null&&d!==void 0?d:console.error,n,l)}};i.LogService=p=f([_(0,m.IOptionsService)],p),i.setTraceLogger=function(n){w=n},i.traceCall=function(n,l,h){if(typeof h.value!="function")throw new Error("not supported");const d=h.value;h.value=function(...v){if(w.logLevel!==m.LogLevelEnum.TRACE)return d.apply(this,v);w.trace(`GlyphRenderer#${d.name}(${v.map(C=>JSON.stringify(C)).join(", ")})`);const y=d.apply(this,v);return w.trace(`GlyphRenderer#${d.name} return`,y),y}}},7302:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const f=c(8460),_=c(844),u=c(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:u.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const m=["normal","bold","100","200","300","400","500","600","700","800","900"];class S extends _.Disposable{constructor(p){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const n=Object.assign({},i.DEFAULT_OPTIONS);for(const l in p)if(l in n)try{const h=p[l];n[l]=this._sanitizeAndValidateOption(l,h)}catch(h){console.error(h)}this.rawOptions=n,this.options=Object.assign({},n),this._setupOptions()}onSpecificOptionChange(p,n){return this.onOptionChange(l=>{l===p&&n(this.rawOptions[p])})}onMultipleOptionChange(p,n){return this.onOptionChange(l=>{p.indexOf(l)!==-1&&n()})}_setupOptions(){const p=l=>{if(!(l in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);return this.rawOptions[l]},n=(l,h)=>{if(!(l in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);h=this._sanitizeAndValidateOption(l,h),this.rawOptions[l]!==h&&(this.rawOptions[l]=h,this._onOptionChange.fire(l))};for(const l in this.rawOptions){const h={get:p.bind(this,l),set:n.bind(this,l)};Object.defineProperty(this.options,l,h)}}_sanitizeAndValidateOption(p,n){switch(p){case"cursorStyle":if(n||(n=i.DEFAULT_OPTIONS[p]),!function(l){return l==="block"||l==="underline"||l==="bar"}(n))throw new Error(`"${n}" is not a valid value for ${p}`);break;case"wordSeparator":n||(n=i.DEFAULT_OPTIONS[p]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=m.includes(n)?n:i.DEFAULT_OPTIONS[p];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(`${p} cannot be less than 1, value: ${n}`);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(`${p} cannot be less than 0, value: ${n}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(`${p} cannot be less than or equal to 0, value: ${n}`);break;case"rows":case"cols":if(!n&&n!==0)throw new Error(`${p} must be numeric, value: ${n}`);break;case"windowsPty":n=n??{}}return n}}i.OptionsService=S},2660:function(x,i,c){var f=this&&this.__decorate||function(S,w,p,n){var l,h=arguments.length,d=h<3?w:n===null?n=Object.getOwnPropertyDescriptor(w,p):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(S,w,p,n);else for(var v=S.length-1;v>=0;v--)(l=S[v])&&(d=(h<3?l(d):h>3?l(w,p,d):l(w,p))||d);return h>3&&d&&Object.defineProperty(w,p,d),d},_=this&&this.__param||function(S,w){return function(p,n){w(p,n,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const u=c(2585);let m=i.OscLinkService=class{constructor(S){this._bufferService=S,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(S){const w=this._bufferService.buffer;if(S.id===void 0){const v=w.addMarker(w.ybase+w.y),y={data:S,id:this._nextId++,lines:[v]};return v.onDispose(()=>this._removeMarkerFromLink(y,v)),this._dataByLinkId.set(y.id,y),y.id}const p=S,n=this._getEntryIdKey(p),l=this._entriesWithId.get(n);if(l)return this.addLineToLink(l.id,w.ybase+w.y),l.id;const h=w.addMarker(w.ybase+w.y),d={id:this._nextId++,key:this._getEntryIdKey(p),data:p,lines:[h]};return h.onDispose(()=>this._removeMarkerFromLink(d,h)),this._entriesWithId.set(d.key,d),this._dataByLinkId.set(d.id,d),d.id}addLineToLink(S,w){const p=this._dataByLinkId.get(S);if(p&&p.lines.every(n=>n.line!==w)){const n=this._bufferService.buffer.addMarker(w);p.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(p,n))}}getLinkData(S){var w;return(w=this._dataByLinkId.get(S))===null||w===void 0?void 0:w.data}_getEntryIdKey(S){return`${S.id};;${S.uri}`}_removeMarkerFromLink(S,w){const p=S.lines.indexOf(w);p!==-1&&(S.lines.splice(p,1),S.lines.length===0&&(S.data.id!==void 0&&this._entriesWithId.delete(S.key),this._dataByLinkId.delete(S.id)))}};i.OscLinkService=m=f([_(0,u.IBufferService)],m)},8343:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const c="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[f]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const u=function(m,S,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(p,n,l){n[c]===n?n[f].push({id:p,index:l}):(n[f]=[{id:p,index:l}],n[c]=n)})(u,m,w)};return u.toString=()=>_,i.serviceRegistry.set(_,u),u}},2585:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=c(8343);var _;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const f=c(8460),_=c(225);i.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const u=new _.UnicodeV6;this.register(u),this._active=u.version,this._activeProvider=u}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(u){if(!this._providers[u])throw new Error(`unknown Unicode version "${u}"`);this._active=u,this._activeProvider=this._providers[u],this._onChange.fire(u)}register(u){this._providers[u.version]=u}wcwidth(u){return this._activeProvider.wcwidth(u)}getStringCellWidth(u){let m=0;const S=u.length;for(let w=0;w<S;++w){let p=u.charCodeAt(w);if(55296<=p&&p<=56319){if(++w>=S)return m+this.wcwidth(p);const n=u.charCodeAt(w);56320<=n&&n<=57343?p=1024*(p-55296)+n-56320+65536:m+=this.wcwidth(n)}m+=this.wcwidth(p)}return m}}}},s={};function a(x){var i=s[x];if(i!==void 0)return i.exports;var c=s[x]={exports:{}};return r[x].call(c.exports,c,c.exports,a),c.exports}var g={};return(()=>{var x=g;Object.defineProperty(x,"__esModule",{value:!0}),x.Terminal=void 0;const i=a(9042),c=a(3236),f=a(844),_=a(5741),u=a(8285),m=a(7975),S=a(7090),w=["cols","rows"];class p extends f.Disposable{constructor(l){super(),this._core=this.register(new c.Terminal(l)),this._addonManager=this.register(new _.AddonManager),this._publicOptions=Object.assign({},this._core.options);const h=v=>this._core.options[v],d=(v,y)=>{this._checkReadonlyOptions(v),this._core.options[v]=y};for(const v in this._core.options){const y={get:h.bind(this,v),set:d.bind(this,v)};Object.defineProperty(this._publicOptions,v,y)}}_checkReadonlyOptions(l){if(w.includes(l))throw new Error(`Option "${l}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new m.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new S.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new u.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const l=this._core.coreService.decPrivateModes;let h="none";switch(this._core.coreMouseService.activeProtocol){case"X10":h="x10";break;case"VT200":h="vt200";break;case"DRAG":h="drag";break;case"ANY":h="any"}return{applicationCursorKeysMode:l.applicationCursorKeys,applicationKeypadMode:l.applicationKeypad,bracketedPasteMode:l.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:h,originMode:l.origin,reverseWraparoundMode:l.reverseWraparound,sendFocusMode:l.sendFocus,wraparoundMode:l.wraparound}}get options(){return this._publicOptions}set options(l){for(const h in l)this._publicOptions[h]=l[h]}blur(){this._core.blur()}focus(){this._core.focus()}resize(l,h){this._verifyIntegers(l,h),this._core.resize(l,h)}open(l){this._core.open(l)}attachCustomKeyEventHandler(l){this._core.attachCustomKeyEventHandler(l)}registerLinkProvider(l){return this._core.registerLinkProvider(l)}registerCharacterJoiner(l){return this._checkProposedApi(),this._core.registerCharacterJoiner(l)}deregisterCharacterJoiner(l){this._checkProposedApi(),this._core.deregisterCharacterJoiner(l)}registerMarker(l=0){return this._verifyIntegers(l),this._core.registerMarker(l)}registerDecoration(l){var h,d,v;return this._checkProposedApi(),this._verifyPositiveIntegers((h=l.x)!==null&&h!==void 0?h:0,(d=l.width)!==null&&d!==void 0?d:0,(v=l.height)!==null&&v!==void 0?v:0),this._core.registerDecoration(l)}hasSelection(){return this._core.hasSelection()}select(l,h,d){this._verifyIntegers(l,h,d),this._core.select(l,h,d)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(l,h){this._verifyIntegers(l,h),this._core.selectLines(l,h)}dispose(){super.dispose()}scrollLines(l){this._verifyIntegers(l),this._core.scrollLines(l)}scrollPages(l){this._verifyIntegers(l),this._core.scrollPages(l)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(l){this._verifyIntegers(l),this._core.scrollToLine(l)}clear(){this._core.clear()}write(l,h){this._core.write(l,h)}writeln(l,h){this._core.write(l),this._core.write(`\r
`,h)}paste(l){this._core.paste(l)}refresh(l,h){this._verifyIntegers(l,h),this._core.refresh(l,h)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(l){this._addonManager.loadAddon(this,l)}static get strings(){return i}_verifyIntegers(...l){for(const h of l)if(h===1/0||isNaN(h)||h%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...l){for(const h of l)if(h&&(h===1/0||isNaN(h)||h%1!=0||h<0))throw new Error("This API only accepts positive integers")}}x.Terminal=p})(),g})())})(bf);var Y0=bf.exports,Sf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{activate(a){this._terminal=a}dispose(){}fit(){const a=this.proposeDimensions();if(!a||!this._terminal||isNaN(a.cols)||isNaN(a.rows))return;const g=this._terminal._core;this._terminal.rows===a.rows&&this._terminal.cols===a.cols||(g._renderService.clear(),this._terminal.resize(a.cols,a.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const a=this._terminal._core,g=a._renderService.dimensions;if(g.css.cell.width===0||g.css.cell.height===0)return;const x=this._terminal.options.scrollback===0?0:a.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),c=parseInt(i.getPropertyValue("height")),f=Math.max(0,parseInt(i.getPropertyValue("width"))),_=window.getComputedStyle(this._terminal.element),u=c-(parseInt(_.getPropertyValue("padding-top"))+parseInt(_.getPropertyValue("padding-bottom"))),m=f-(parseInt(_.getPropertyValue("padding-right"))+parseInt(_.getPropertyValue("padding-left")))-x;return{cols:Math.max(2,Math.floor(m/g.css.cell.width)),rows:Math.max(1,Math.floor(u/g.css.cell.height))}}}})(),r})())})(Sf);var Q0=Sf.exports,Cf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={965:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlyphRenderer=void 0;const f=c(374),_=c(509),u=c(855),m=c(859),S=c(381),w=11,p=w*Float32Array.BYTES_PER_ELEMENT;let n,l=0,h=0,d=0;class v extends m.Disposable{constructor(C,L,b,k){super(),this._terminal=C,this._gl=L,this._dimensions=b,this._optionsService=k,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const E=this._gl;_.TextureAtlas.maxAtlasPages===void 0&&(_.TextureAtlas.maxAtlasPages=Math.min(32,(0,f.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS))),_.TextureAtlas.maxTextureSize=(0,f.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_SIZE))),this._program=(0,f.throwIfFalsy)((0,S.createProgram)(E,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function($){let F="";for(let N=1;N<$;N++)F+=` else if (v_texpage == ${N}) { outColor = texture(u_texture[${N}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${$}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${F}
}`}(_.TextureAtlas.maxAtlasPages))),this.register((0,m.toDisposable)(()=>E.deleteProgram(this._program))),this._projectionLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=E.createVertexArray(),E.bindVertexArray(this._vertexArrayObject);const A=new Float32Array([0,0,1,0,0,1,1,1]),R=E.createBuffer();this.register((0,m.toDisposable)(()=>E.deleteBuffer(R))),E.bindBuffer(E.ARRAY_BUFFER,R),E.bufferData(E.ARRAY_BUFFER,A,E.STATIC_DRAW),E.enableVertexAttribArray(0),E.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const T=new Uint8Array([0,1,2,3]),O=E.createBuffer();this.register((0,m.toDisposable)(()=>E.deleteBuffer(O))),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,O),E.bufferData(E.ELEMENT_ARRAY_BUFFER,T,E.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(E.createBuffer()),this.register((0,m.toDisposable)(()=>E.deleteBuffer(this._attributesBuffer))),E.bindBuffer(E.ARRAY_BUFFER,this._attributesBuffer),E.enableVertexAttribArray(2),E.vertexAttribPointer(2,2,E.FLOAT,!1,p,0),E.vertexAttribDivisor(2,1),E.enableVertexAttribArray(3),E.vertexAttribPointer(3,2,E.FLOAT,!1,p,2*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(3,1),E.enableVertexAttribArray(4),E.vertexAttribPointer(4,1,E.FLOAT,!1,p,4*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(4,1),E.enableVertexAttribArray(5),E.vertexAttribPointer(5,2,E.FLOAT,!1,p,5*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(5,1),E.enableVertexAttribArray(6),E.vertexAttribPointer(6,2,E.FLOAT,!1,p,7*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(6,1),E.enableVertexAttribArray(1),E.vertexAttribPointer(1,2,E.FLOAT,!1,p,9*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(1,1),E.useProgram(this._program);const H=new Int32Array(_.TextureAtlas.maxAtlasPages);for(let $=0;$<_.TextureAtlas.maxAtlasPages;$++)H[$]=$;E.uniform1iv(this._textureLocation,H),E.uniformMatrix4fv(this._projectionLocation,!1,S.PROJECTION_MATRIX),this._atlasTextures=[];for(let $=0;$<_.TextureAtlas.maxAtlasPages;$++){const F=new S.GLTexture((0,f.throwIfFalsy)(E.createTexture()));this.register((0,m.toDisposable)(()=>E.deleteTexture(F.texture))),E.activeTexture(E.TEXTURE0+$),E.bindTexture(E.TEXTURE_2D,F.texture),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[$]=F}E.enable(E.BLEND),E.blendFunc(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(C,L,b,k,E,A,R,T,O){this._updateCell(this._vertices.attributes,C,L,b,k,E,A,R,T,O)}_updateCell(C,L,b,k,E,A,R,T,O,H){l=(b*this._terminal.cols+L)*w,k!==u.NULL_CELL_CODE&&k!==void 0?this._atlas&&(n=T&&T.length>1?this._atlas.getRasterizedGlyphCombinedChar(T,E,A,R,!1):this._atlas.getRasterizedGlyph(k,E,A,R,!1),h=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),E!==H&&n.offset.x>h?(d=n.offset.x-h,C[l]=-(n.offset.x-d)+this._dimensions.device.char.left,C[l+1]=-n.offset.y+this._dimensions.device.char.top,C[l+2]=(n.size.x-d)/this._dimensions.device.canvas.width,C[l+3]=n.size.y/this._dimensions.device.canvas.height,C[l+4]=n.texturePage,C[l+5]=n.texturePositionClipSpace.x+d/this._atlas.pages[n.texturePage].canvas.width,C[l+6]=n.texturePositionClipSpace.y,C[l+7]=n.sizeClipSpace.x-d/this._atlas.pages[n.texturePage].canvas.width,C[l+8]=n.sizeClipSpace.y):(C[l]=-n.offset.x+this._dimensions.device.char.left,C[l+1]=-n.offset.y+this._dimensions.device.char.top,C[l+2]=n.size.x/this._dimensions.device.canvas.width,C[l+3]=n.size.y/this._dimensions.device.canvas.height,C[l+4]=n.texturePage,C[l+5]=n.texturePositionClipSpace.x,C[l+6]=n.texturePositionClipSpace.y,C[l+7]=n.sizeClipSpace.x,C[l+8]=n.sizeClipSpace.y),this._optionsService.rawOptions.rescaleOverlappingGlyphs&&(0,f.allowRescaling)(k,O,n.size.x,this._dimensions.device.cell.width)&&(C[l+2]=(this._dimensions.device.cell.width-1)/this._dimensions.device.canvas.width)):C.fill(0,l,l+w-1-2)}clear(){const C=this._terminal,L=C.cols*C.rows*w;this._vertices.count!==L?this._vertices.attributes=new Float32Array(L):this._vertices.attributes.fill(0);let b=0;for(;b<this._vertices.attributesBuffers.length;b++)this._vertices.count!==L?this._vertices.attributesBuffers[b]=new Float32Array(L):this._vertices.attributesBuffers[b].fill(0);this._vertices.count=L,b=0;for(let k=0;k<C.rows;k++)for(let E=0;E<C.cols;E++)this._vertices.attributes[b+9]=E/C.cols,this._vertices.attributes[b+10]=k/C.rows,b+=w}handleResize(){const C=this._gl;C.useProgram(this._program),C.viewport(0,0,C.canvas.width,C.canvas.height),C.uniform2f(this._resolutionLocation,C.canvas.width,C.canvas.height),this.clear()}render(C){if(!this._atlas)return;const L=this._gl;L.useProgram(this._program),L.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const b=this._vertices.attributesBuffers[this._activeBuffer];let k=0;for(let E=0;E<C.lineLengths.length;E++){const A=E*this._terminal.cols*w,R=this._vertices.attributes.subarray(A,A+C.lineLengths[E]*w);b.set(R,k),k+=R.length}L.bindBuffer(L.ARRAY_BUFFER,this._attributesBuffer),L.bufferData(L.ARRAY_BUFFER,b.subarray(0,k),L.STREAM_DRAW);for(let E=0;E<this._atlas.pages.length;E++)this._atlas.pages[E].version!==this._atlasTextures[E].version&&this._bindAtlasPageTexture(L,this._atlas,E);L.drawElementsInstanced(L.TRIANGLE_STRIP,4,L.UNSIGNED_BYTE,0,k/w)}setAtlas(C){this._atlas=C;for(const L of this._atlasTextures)L.version=-1}_bindAtlasPageTexture(C,L,b){C.activeTexture(C.TEXTURE0+b),C.bindTexture(C.TEXTURE_2D,this._atlasTextures[b].texture),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,L.pages[b].canvas),C.generateMipmap(C.TEXTURE_2D),this._atlasTextures[b].version=L.pages[b].version}setDimensions(C){this._dimensions=C}}i.GlyphRenderer=v},742:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RectangleRenderer=void 0;const f=c(374),_=c(859),u=c(310),m=c(381),S=8*Float32Array.BYTES_PER_ELEMENT;class w{constructor(){this.attributes=new Float32Array(160),this.count=0}}let p=0,n=0,l=0,h=0,d=0,v=0,y=0;class C extends _.Disposable{constructor(b,k,E,A){super(),this._terminal=b,this._gl=k,this._dimensions=E,this._themeService=A,this._vertices=new w,this._verticesCursor=new w;const R=this._gl;this._program=(0,f.throwIfFalsy)((0,m.createProgram)(R,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,_.toDisposable)(()=>R.deleteProgram(this._program))),this._projectionLocation=(0,f.throwIfFalsy)(R.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=R.createVertexArray(),R.bindVertexArray(this._vertexArrayObject);const T=new Float32Array([0,0,1,0,0,1,1,1]),O=R.createBuffer();this.register((0,_.toDisposable)(()=>R.deleteBuffer(O))),R.bindBuffer(R.ARRAY_BUFFER,O),R.bufferData(R.ARRAY_BUFFER,T,R.STATIC_DRAW),R.enableVertexAttribArray(3),R.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const H=new Uint8Array([0,1,2,3]),$=R.createBuffer();this.register((0,_.toDisposable)(()=>R.deleteBuffer($))),R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,$),R.bufferData(R.ELEMENT_ARRAY_BUFFER,H,R.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(R.createBuffer()),this.register((0,_.toDisposable)(()=>R.deleteBuffer(this._attributesBuffer))),R.bindBuffer(R.ARRAY_BUFFER,this._attributesBuffer),R.enableVertexAttribArray(0),R.vertexAttribPointer(0,2,R.FLOAT,!1,S,0),R.vertexAttribDivisor(0,1),R.enableVertexAttribArray(1),R.vertexAttribPointer(1,2,R.FLOAT,!1,S,2*Float32Array.BYTES_PER_ELEMENT),R.vertexAttribDivisor(1,1),R.enableVertexAttribArray(2),R.vertexAttribPointer(2,4,R.FLOAT,!1,S,4*Float32Array.BYTES_PER_ELEMENT),R.vertexAttribDivisor(2,1),this._updateCachedColors(A.colors),this.register(this._themeService.onChangeColors(F=>{this._updateCachedColors(F),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(b){const k=this._gl;k.useProgram(this._program),k.bindVertexArray(this._vertexArrayObject),k.uniformMatrix4fv(this._projectionLocation,!1,m.PROJECTION_MATRIX),k.bindBuffer(k.ARRAY_BUFFER,this._attributesBuffer),k.bufferData(k.ARRAY_BUFFER,b.attributes,k.DYNAMIC_DRAW),k.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,k.UNSIGNED_BYTE,0,b.count)}handleResize(){this._updateViewportRectangle()}setDimensions(b){this._dimensions=b}_updateCachedColors(b){this._bgFloat=this._colorToFloat32Array(b.background),this._cursorFloat=this._colorToFloat32Array(b.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(b){const k=this._terminal,E=this._vertices;let A,R,T,O,H,$,F,N,D,P,I,W=1;for(A=0;A<k.rows;A++){for(T=-1,O=0,H=0,$=!1,R=0;R<k.cols;R++)F=(A*k.cols+R)*u.RENDER_MODEL_INDICIES_PER_CELL,N=b.cells[F+u.RENDER_MODEL_BG_OFFSET],D=b.cells[F+u.RENDER_MODEL_FG_OFFSET],P=!!(67108864&D),(N!==O||D!==H&&($||P))&&((O!==0||$&&H!==0)&&(I=8*W++,this._updateRectangle(E,I,H,O,T,R,A)),T=R,O=N,H=D,$=P);(O!==0||$&&H!==0)&&(I=8*W++,this._updateRectangle(E,I,H,O,T,k.cols,A))}E.count=W}updateCursor(b){const k=this._verticesCursor,E=b.cursor;if(!E||E.style==="block")return void(k.count=0);let A,R=0;E.style!=="bar"&&E.style!=="outline"||(A=8*R++,this._addRectangleFloat(k.attributes,A,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.style==="bar"?E.dpr*E.cursorWidth:E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),E.style!=="underline"&&E.style!=="outline"||(A=8*R++,this._addRectangleFloat(k.attributes,A,E.x*this._dimensions.device.cell.width,(E.y+1)*this._dimensions.device.cell.height-E.dpr,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat)),E.style==="outline"&&(A=8*R++,this._addRectangleFloat(k.attributes,A,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat),A=8*R++,this._addRectangleFloat(k.attributes,A,(E.x+E.width)*this._dimensions.device.cell.width-E.dpr,E.y*this._dimensions.device.cell.height,E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),k.count=R}_updateRectangle(b,k,E,A,R,T,O){if(67108864&E)switch(50331648&E){case 16777216:case 33554432:p=this._themeService.colors.ansi[255&E].rgba;break;case 50331648:p=(16777215&E)<<8;break;default:p=this._themeService.colors.foreground.rgba}else switch(50331648&A){case 16777216:case 33554432:p=this._themeService.colors.ansi[255&A].rgba;break;case 50331648:p=(16777215&A)<<8;break;default:p=this._themeService.colors.background.rgba}b.attributes.length<k+4&&(b.attributes=(0,m.expandFloat32Array)(b.attributes,this._terminal.rows*this._terminal.cols*8)),n=R*this._dimensions.device.cell.width,l=O*this._dimensions.device.cell.height,h=(p>>24&255)/255,d=(p>>16&255)/255,v=(p>>8&255)/255,y=1,this._addRectangle(b.attributes,k,n,l,(T-R)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,h,d,v,y)}_addRectangle(b,k,E,A,R,T,O,H,$,F){b[k]=E/this._dimensions.device.canvas.width,b[k+1]=A/this._dimensions.device.canvas.height,b[k+2]=R/this._dimensions.device.canvas.width,b[k+3]=T/this._dimensions.device.canvas.height,b[k+4]=O,b[k+5]=H,b[k+6]=$,b[k+7]=F}_addRectangleFloat(b,k,E,A,R,T,O){b[k]=E/this._dimensions.device.canvas.width,b[k+1]=A/this._dimensions.device.canvas.height,b[k+2]=R/this._dimensions.device.canvas.width,b[k+3]=T/this._dimensions.device.canvas.height,b[k+4]=O[0],b[k+5]=O[1],b[k+6]=O[2],b[k+7]=O[3]}_colorToFloat32Array(b){return new Float32Array([(b.rgba>>24&255)/255,(b.rgba>>16&255)/255,(b.rgba>>8&255)/255,(255&b.rgba)/255])}}i.RectangleRenderer=C},310:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderModel=i.COMBINED_CHAR_BIT_MASK=i.RENDER_MODEL_EXT_OFFSET=i.RENDER_MODEL_FG_OFFSET=i.RENDER_MODEL_BG_OFFSET=i.RENDER_MODEL_INDICIES_PER_CELL=void 0;const f=c(296);i.RENDER_MODEL_INDICIES_PER_CELL=4,i.RENDER_MODEL_BG_OFFSET=1,i.RENDER_MODEL_FG_OFFSET=2,i.RENDER_MODEL_EXT_OFFSET=3,i.COMBINED_CHAR_BIT_MASK=2147483648,i.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,f.createSelectionRenderModel)()}resize(_,u){const m=_*u*i.RENDER_MODEL_INDICIES_PER_CELL;m!==this.cells.length&&(this.cells=new Uint32Array(m),this.lineLengths=new Uint32Array(u))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.JoinedCellData=i.WebglRenderer=void 0;const f=c(820),_=c(274),u=c(627),m=c(457),S=c(56),w=c(374),p=c(345),n=c(859),l=c(147),h=c(782),d=c(855),v=c(965),y=c(742),C=c(310),L=c(733);class b extends n.Disposable{constructor(R,T,O,H,$,F,N,D,P){super(),this._terminal=R,this._characterJoinerService=T,this._charSizeService=O,this._coreBrowserService=H,this._coreService=$,this._decorationService=F,this._optionsService=N,this._themeService=D,this._cursorBlinkStateManager=new n.MutableDisposable,this._charAtlasDisposable=this.register(new n.MutableDisposable),this._observerDisposable=this.register(new n.MutableDisposable),this._model=new C.RenderModel,this._workCell=new h.CellData,this._workCell2=new h.CellData,this._rectangleRenderer=this.register(new n.MutableDisposable),this._glyphRenderer=this.register(new n.MutableDisposable),this._onChangeTextureAtlas=this.register(new p.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new p.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new p.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new p.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new p.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new _.CellColorResolver(this._terminal,this._optionsService,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new L.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier,this._coreBrowserService,N,this._themeService)],this.dimensions=(0,w.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(N.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=this._coreBrowserService.mainDocument.createElement("canvas");const I={antialias:!1,depth:!1,preserveDrawingBuffer:P};if(this._gl=this._canvas.getContext("webgl2",I),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextlost",W=>{console.log("webglcontextlost event received"),W.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(W)},3e3)})),this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextrestored",W=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,u.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this._observerDisposable.value=(0,S.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(W,V)=>this._setCanvasDevicePixelDimensions(W,V)),this.register(this._coreBrowserService.onWindowChange(W=>{this._observerDisposable.value=(0,S.observeDevicePixelDimensions)(this._canvas,W,(V,Z)=>this._setCanvasDevicePixelDimensions(V,Z))})),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,n.toDisposable)(()=>{var W;for(const V of this._renderLayers)V.dispose();(W=this._canvas.parentElement)==null||W.removeChild(this._canvas),(0,u.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var R;return(R=this._charAtlas)==null?void 0:R.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(R,T){var O,H,$,F;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const N of this._renderLayers)N.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(O=this._rectangleRenderer.value)==null||O.setDimensions(this.dimensions),(H=this._rectangleRenderer.value)==null||H.handleResize(),($=this._glyphRenderer.value)==null||$.setDimensions(this.dimensions),(F=this._glyphRenderer.value)==null||F.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var R;for(const T of this._renderLayers)T.handleBlur(this._terminal);(R=this._cursorBlinkStateManager.value)==null||R.pause(),this._requestRedrawViewport()}handleFocus(){var R;for(const T of this._renderLayers)T.handleFocus(this._terminal);(R=this._cursorBlinkStateManager.value)==null||R.resume(),this._requestRedrawViewport()}handleSelectionChanged(R,T,O){for(const H of this._renderLayers)H.handleSelectionChanged(this._terminal,R,T,O);this._model.selection.update(this._core,R,T,O),this._requestRedrawViewport()}handleCursorMove(){var R;for(const T of this._renderLayers)T.handleCursorMove(this._terminal);(R=this._cursorBlinkStateManager.value)==null||R.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new y.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new v.GlyphRenderer(this._terminal,this._gl,this.dimensions,this._optionsService),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var T;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const R=(0,u.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==R&&(this._onChangeTextureAtlas.fire(R.pages[0].canvas),this._charAtlasDisposable.value=(0,n.getDisposeArrayDisposable)([(0,p.forwardEvent)(R.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,p.forwardEvent)(R.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=R,this._charAtlas.warmUp(),(T=this._glyphRenderer.value)==null||T.setAtlas(this._charAtlas)}_clearModel(R){var T;this._model.clear(),R&&((T=this._glyphRenderer.value)==null||T.clear())}clearTextureAtlas(){var R;(R=this._charAtlas)==null||R.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var R;this._clearModel(!0);for(const T of this._renderLayers)T.reset(this._terminal);(R=this._cursorBlinkStateManager.value)==null||R.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(R){return-1}deregisterCharacterJoiner(R){return!1}renderRows(R,T){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const O of this._renderLayers)O.handleGridChanged(this._terminal,R,T);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(R,T),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new m.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(R,T){const O=this._core;let H,$,F,N,D,P,I,W,V,Z,te,K,M,z,q=this._workCell;R=E(R,O.rows-1,0),T=E(T,O.rows-1,0);const G=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,ne=G-O.buffer.ydisp,se=Math.min(this._terminal.buffer.active.cursorX,O.cols-1);let fe=-1;const de=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let ye=!1;for($=R;$<=T;$++)for(F=$+O.buffer.ydisp,N=O.buffer.lines.get(F),this._model.lineLengths[$]=0,D=this._characterJoinerService.getJoinedCharacters(F),M=0;M<O.cols;M++)if(H=this._cellColorResolver.result.bg,N.loadCell(M,q),M===0&&(H=this._cellColorResolver.result.bg),P=!1,I=M,D.length>0&&M===D[0][0]&&(P=!0,W=D.shift(),q=new k(q,N.translateToString(!0,W[0],W[1]),W[1]-W[0]),I=W[1]-1),V=q.getChars(),Z=q.getCode(),K=($*O.cols+M)*C.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(q,M,F,this.dimensions.device.cell.width),de&&F===G&&(M===se&&(this._model.cursor={x:se,y:ne,width:q.getWidth(),style:this._coreBrowserService.isFocused?O.options.cursorStyle||"block":O.options.cursorInactiveStyle,cursorWidth:O.options.cursorWidth,dpr:this._devicePixelRatio},fe=se+q.getWidth()-1),M>=se&&M<=fe&&(this._coreBrowserService.isFocused&&(O.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&O.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),Z!==d.NULL_CELL_CODE&&(this._model.lineLengths[$]=M+1),(this._model.cells[K]!==Z||this._model.cells[K+C.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[K+C.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[K+C.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(ye=!0,V.length>1&&(Z|=C.COMBINED_CHAR_BIT_MASK),this._model.cells[K]=Z,this._model.cells[K+C.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[K+C.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[K+C.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,te=q.getWidth(),this._glyphRenderer.value.updateCell(M,$,Z,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,V,te,H),P))for(q=this._workCell,M++;M<I;M++)z=($*O.cols+M)*C.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(M,$,d.NULL_CELL_CODE,0,0,0,d.NULL_CELL_CHAR,0,0),this._model.cells[z]=d.NULL_CELL_CODE,this._model.cells[z+C.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[z+C.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[z+C.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;ye&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(R,T){this._canvas.width===R&&this._canvas.height===T||(this._canvas.width=R,this._canvas.height=T,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){const R=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:R,end:R})}}i.WebglRenderer=b;class k extends l.AttributeData{constructor(R,T,O){super(),this.content=0,this.combinedData="",this.fg=R.fg,this.bg=R.bg,this.combinedData=T,this._width=O}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(R){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function E(A,R,T=0){return Math.max(Math.min(A,R),T)}i.JoinedCellData=k},381:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GLTexture=i.expandFloat32Array=i.createShader=i.createProgram=i.PROJECTION_MATRIX=void 0;const f=c(374);function _(u,m,S){const w=(0,f.throwIfFalsy)(u.createShader(m));if(u.shaderSource(w,S),u.compileShader(w),u.getShaderParameter(w,u.COMPILE_STATUS))return w;console.error(u.getShaderInfoLog(w)),u.deleteShader(w)}i.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),i.createProgram=function(u,m,S){const w=(0,f.throwIfFalsy)(u.createProgram());if(u.attachShader(w,(0,f.throwIfFalsy)(_(u,u.VERTEX_SHADER,m))),u.attachShader(w,(0,f.throwIfFalsy)(_(u,u.FRAGMENT_SHADER,S))),u.linkProgram(w),u.getProgramParameter(w,u.LINK_STATUS))return w;console.error(u.getProgramInfoLog(w)),u.deleteProgram(w)},i.createShader=_,i.expandFloat32Array=function(u,m){const S=Math.min(2*u.length,m),w=new Float32Array(S);for(let p=0;p<u.length;p++)w[p]=u[p];return w},i.GLTexture=class{constructor(u){this.texture=u,this.version=-1}}},592:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseRenderLayer=void 0;const f=c(627),_=c(237),u=c(374),m=c(859);class S extends m.Disposable{constructor(p,n,l,h,d,v,y,C){super(),this._container=n,this._alpha=d,this._coreBrowserService=v,this._optionsService=y,this._themeService=C,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add(`xterm-${l}-layer`),this._canvas.style.zIndex=h.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(L=>{this._refreshCharAtlas(p,L),this.reset(p)})),this.register((0,m.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,u.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(p){}handleFocus(p){}handleCursorMove(p){}handleGridChanged(p,n,l){}handleSelectionChanged(p,n,l,h=!1){}_setTransparency(p,n){if(n===this._alpha)return;const l=this._canvas;this._alpha=n,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,l),this._refreshCharAtlas(p,this._themeService.colors),this.handleGridChanged(p,0,p.rows-1)}_refreshCharAtlas(p,n){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,f.acquireTextureAtlas)(p,this._optionsService.rawOptions,n,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(p,n){this._deviceCellWidth=n.device.cell.width,this._deviceCellHeight=n.device.cell.height,this._deviceCharWidth=n.device.char.width,this._deviceCharHeight=n.device.char.height,this._deviceCharLeft=n.device.char.left,this._deviceCharTop=n.device.char.top,this._canvas.width=n.device.canvas.width,this._canvas.height=n.device.canvas.height,this._canvas.style.width=`${n.css.canvas.width}px`,this._canvas.style.height=`${n.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(p,this._themeService.colors)}_fillBottomLineAtCells(p,n,l=1){this._ctx.fillRect(p*this._deviceCellWidth,(n+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,l*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(p,n,l,h){this._alpha?this._ctx.clearRect(p*this._deviceCellWidth,n*this._deviceCellHeight,l*this._deviceCellWidth,h*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(p*this._deviceCellWidth,n*this._deviceCellHeight,l*this._deviceCellWidth,h*this._deviceCellHeight))}_fillCharTrueColor(p,n,l,h){this._ctx.font=this._getFont(p,!1,!1),this._ctx.textBaseline=_.TEXT_BASELINE,this._clipCell(l,h,n.getWidth()),this._ctx.fillText(n.getChars(),l*this._deviceCellWidth+this._deviceCharLeft,h*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(p,n,l){this._ctx.beginPath(),this._ctx.rect(p*this._deviceCellWidth,n*this._deviceCellHeight,l*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(p,n,l){return`${l?"italic":""} ${n?p.options.fontWeightBold:p.options.fontWeight} ${p.options.fontSize*this._coreBrowserService.dpr}px ${p.options.fontFamily}`}}i.BaseRenderLayer=S},733:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkRenderLayer=void 0;const f=c(197),_=c(237),u=c(592);class m extends u.BaseRenderLayer{constructor(w,p,n,l,h,d,v){super(n,w,"link",p,!0,h,d,v),this.register(l.onShowLinkUnderline(y=>this._handleShowLinkUnderline(y))),this.register(l.onHideLinkUnderline(y=>this._handleHideLinkUnderline(y)))}resize(w,p){super.resize(w,p),this._state=void 0}reset(w){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const w=this._state.y2-this._state.y1-1;w>0&&this._clearCells(0,this._state.y1+1,this._state.cols,w),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(w){if(w.fg===_.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:w.fg!==void 0&&(0,f.is256Color)(w.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[w.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,w.y1===w.y2)this._fillBottomLineAtCells(w.x1,w.y1,w.x2-w.x1);else{this._fillBottomLineAtCells(w.x1,w.y1,w.cols-w.x1);for(let p=w.y1+1;p<w.y2;p++)this._fillBottomLineAtCells(0,p,w.cols);this._fillBottomLineAtCells(0,w.y2,w.x2)}this._state=w}_handleHideLinkUnderline(w){this._clearCurrentLink()}}i.LinkRenderLayer=m},820:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(c,f,_,u){c.addEventListener(f,_,u);let m=!1;return{dispose:()=>{m||(m=!0,c.removeEventListener(f,_,u))}}}},274:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellColorResolver=void 0;const f=c(855),_=c(160),u=c(374);let m,S=0,w=0,p=!1,n=!1,l=!1,h=0;i.CellColorResolver=class{constructor(d,v,y,C,L,b){this._terminal=d,this._optionService=v,this._selectionRenderModel=y,this._decorationService=C,this._coreBrowserService=L,this._themeService=b,this.result={fg:0,bg:0,ext:0}}resolve(d,v,y,C){if(this.result.bg=d.bg,this.result.fg=d.fg,this.result.ext=268435456&d.bg?d.extended.ext:0,w=0,S=0,n=!1,p=!1,l=!1,m=this._themeService.colors,h=0,d.getCode()!==f.NULL_CELL_CODE&&d.extended.underlineStyle===4){const L=Math.max(1,Math.floor(this._optionService.rawOptions.fontSize*this._coreBrowserService.dpr/15));h=v*C%(2*Math.round(L))}if(this._decorationService.forEachDecorationAtCell(v,y,"bottom",L=>{L.backgroundColorRGB&&(w=L.backgroundColorRGB.rgba>>8&16777215,n=!0),L.foregroundColorRGB&&(S=L.foregroundColorRGB.rgba>>8&16777215,p=!0)}),l=this._selectionRenderModel.isCellSelected(this._terminal,v,y),l){if(67108864&this.result.fg||50331648&this.result.bg){if(67108864&this.result.fg)switch(50331648&this.result.fg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:w=(16777215&this.result.fg)<<8|255;break;default:w=this._themeService.colors.foreground.rgba}else switch(50331648&this.result.bg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:w=(16777215&this.result.bg)<<8|255}w=_.rgba.blend(w,4294967040&(this._coreBrowserService.isFocused?m.selectionBackgroundOpaque:m.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}else w=(this._coreBrowserService.isFocused?m.selectionBackgroundOpaque:m.selectionInactiveBackgroundOpaque).rgba>>8&16777215;if(n=!0,m.selectionForeground&&(S=m.selectionForeground.rgba>>8&16777215,p=!0),(0,u.treatGlyphAsBackgroundColor)(d.getCode())){if(67108864&this.result.fg&&!(50331648&this.result.bg))S=(this._coreBrowserService.isFocused?m.selectionBackgroundOpaque:m.selectionInactiveBackgroundOpaque).rgba>>8&16777215;else{if(67108864&this.result.fg)switch(50331648&this.result.bg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:S=(16777215&this.result.bg)<<8|255}else switch(50331648&this.result.fg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:S=(16777215&this.result.fg)<<8|255;break;default:S=this._themeService.colors.foreground.rgba}S=_.rgba.blend(S,4294967040&(this._coreBrowserService.isFocused?m.selectionBackgroundOpaque:m.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}p=!0}}this._decorationService.forEachDecorationAtCell(v,y,"top",L=>{L.backgroundColorRGB&&(w=L.backgroundColorRGB.rgba>>8&16777215,n=!0),L.foregroundColorRGB&&(S=L.foregroundColorRGB.rgba>>8&16777215,p=!0)}),n&&(w=l?-16777216&d.bg&-134217729|w|50331648:-16777216&d.bg|w|50331648),p&&(S=-16777216&d.fg&-67108865|S|50331648),67108864&this.result.fg&&(n&&!p&&(S=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&m.background.rgba>>8|50331648,p=!0),!n&&p&&(w=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&m.foreground.rgba>>8|50331648,n=!0)),m=void 0,this.result.bg=n?w:this.result.bg,this.result.fg=p?S:this.result.fg,this.result.ext&=536870911,this.result.ext|=h<<29&3758096384}}},627:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeTerminalFromCache=i.acquireTextureAtlas=void 0;const f=c(509),_=c(197),u=[];i.acquireTextureAtlas=function(m,S,w,p,n,l,h,d){const v=(0,_.generateConfig)(p,n,l,h,S,w,d);for(let L=0;L<u.length;L++){const b=u[L],k=b.ownedBy.indexOf(m);if(k>=0){if((0,_.configEquals)(b.config,v))return b.atlas;b.ownedBy.length===1?(b.atlas.dispose(),u.splice(L,1)):b.ownedBy.splice(k,1);break}}for(let L=0;L<u.length;L++){const b=u[L];if((0,_.configEquals)(b.config,v))return b.ownedBy.push(m),b.atlas}const y=m._core,C={atlas:new f.TextureAtlas(document,v,y.unicodeService),config:v,ownedBy:[m]};return u.push(C),C.atlas},i.removeTerminalFromCache=function(m){for(let S=0;S<u.length;S++){const w=u[S].ownedBy.indexOf(m);if(w!==-1){u[S].ownedBy.length===1?(u[S].atlas.dispose(),u.splice(S,1)):u[S].ownedBy.splice(w,1);break}}}},197:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;const f=c(160);i.generateConfig=function(_,u,m,S,w,p,n){const l={foreground:p.foreground,background:p.background,cursor:f.NULL_COLOR,cursorAccent:f.NULL_COLOR,selectionForeground:f.NULL_COLOR,selectionBackgroundTransparent:f.NULL_COLOR,selectionBackgroundOpaque:f.NULL_COLOR,selectionInactiveBackgroundTransparent:f.NULL_COLOR,selectionInactiveBackgroundOpaque:f.NULL_COLOR,ansi:p.ansi.slice(),contrastCache:p.contrastCache,halfContrastCache:p.halfContrastCache};return{customGlyphs:w.customGlyphs,devicePixelRatio:n,letterSpacing:w.letterSpacing,lineHeight:w.lineHeight,deviceCellWidth:_,deviceCellHeight:u,deviceCharWidth:m,deviceCharHeight:S,fontFamily:w.fontFamily,fontSize:w.fontSize,fontWeight:w.fontWeight,fontWeightBold:w.fontWeightBold,allowTransparency:w.allowTransparency,drawBoldTextInBrightColors:w.drawBoldTextInBrightColors,minimumContrastRatio:w.minimumContrastRatio,colors:l}},i.configEquals=function(_,u){for(let m=0;m<_.colors.ansi.length;m++)if(_.colors.ansi[m].rgba!==u.colors.ansi[m].rgba)return!1;return _.devicePixelRatio===u.devicePixelRatio&&_.customGlyphs===u.customGlyphs&&_.lineHeight===u.lineHeight&&_.letterSpacing===u.letterSpacing&&_.fontFamily===u.fontFamily&&_.fontSize===u.fontSize&&_.fontWeight===u.fontWeight&&_.fontWeightBold===u.fontWeightBold&&_.allowTransparency===u.allowTransparency&&_.deviceCharWidth===u.deviceCharWidth&&_.deviceCharHeight===u.deviceCharHeight&&_.drawBoldTextInBrightColors===u.drawBoldTextInBrightColors&&_.minimumContrastRatio===u.minimumContrastRatio&&_.colors.foreground.rgba===u.colors.foreground.rgba&&_.colors.background.rgba===u.colors.background.rgba},i.is256Color=function(_){return(50331648&_)==16777216||(50331648&_)==33554432}},237:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=c(399);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},457:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorBlinkStateManager=void 0,i.CursorBlinkStateManager=class{constructor(c,f){this._renderCallback=c,this._coreBrowserService=f,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(c=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,f>0)return void this._restartInterval(f)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(f)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},c)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tryDrawCustomChar=i.powerlineDefinitions=i.boxDrawingDefinitions=i.blockElementDefinitions=void 0;const f=c(374);i.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const _={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};i.boxDrawingDefinitions={"":{1:"M0,.5 L1,.5"},"":{3:"M0,.5 L1,.5"},"":{1:"M.5,0 L.5,1"},"":{3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5"},"":{3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M0,.5 L.5,.5 L.5,1"},"":{3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L1,.5"},"":{3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L0,.5"},"":{3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{1:"M.5,.5 L0,.5"},"":{3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0"},"":{3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5"},"":{3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1"},"":{3:"M.5,.5 L.5,1"},"":{1:(p,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(p,n)=>`M${.5-p},0 L${.5-p},1 M${.5+p},0 L${.5+p},1`},"":{1:(p,n)=>`M.5,1 L.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(p,n)=>`M${.5-p},1 L${.5-p},.5 L1,.5 M${.5+p},.5 L${.5+p},1`},"":{1:(p,n)=>`M1,${.5-n} L${.5-p},${.5-n} L${.5-p},1 M1,${.5+n} L${.5+p},${.5+n} L${.5+p},1`},"":{1:(p,n)=>`M0,${.5-n} L.5,${.5-n} L.5,1 M0,${.5+n} L.5,${.5+n}`},"":{1:(p,n)=>`M${.5+p},1 L${.5+p},.5 L0,.5 M${.5-p},.5 L${.5-p},1`},"":{1:(p,n)=>`M0,${.5+n} L${.5-p},${.5+n} L${.5-p},1 M0,${.5-n} L${.5+p},${.5-n} L${.5+p},1`},"":{1:(p,n)=>`M.5,0 L.5,${.5+n} L1,${.5+n} M.5,${.5-n} L1,${.5-n}`},"":{1:(p,n)=>`M1,.5 L${.5-p},.5 L${.5-p},0 M${.5+p},.5 L${.5+p},0`},"":{1:(p,n)=>`M1,${.5-n} L${.5+p},${.5-n} L${.5+p},0 M1,${.5+n} L${.5-p},${.5+n} L${.5-p},0`},"":{1:(p,n)=>`M0,${.5+n} L.5,${.5+n} L.5,0 M0,${.5-n} L.5,${.5-n}`},"":{1:(p,n)=>`M0,.5 L${.5+p},.5 L${.5+p},0 M${.5-p},.5 L${.5-p},0`},"":{1:(p,n)=>`M0,${.5-n} L${.5-p},${.5-n} L${.5-p},0 M0,${.5+n} L${.5+p},${.5+n} L${.5+p},0`},"":{1:(p,n)=>`M.5,0 L.5,1 M.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(p,n)=>`M${.5-p},0 L${.5-p},1 M${.5+p},0 L${.5+p},1 M${.5+p},.5 L1,.5`},"":{1:(p,n)=>`M${.5-p},0 L${.5-p},1 M1,${.5+n} L${.5+p},${.5+n} L${.5+p},1 M1,${.5-n} L${.5+p},${.5-n} L${.5+p},0`},"":{1:(p,n)=>`M.5,0 L.5,1 M0,${.5-n} L.5,${.5-n} M0,${.5+n} L.5,${.5+n}`},"":{1:(p,n)=>`M0,.5 L${.5-p},.5 M${.5-p},0 L${.5-p},1 M${.5+p},0 L${.5+p},1`},"":{1:(p,n)=>`M${.5+p},0 L${.5+p},1 M0,${.5+n} L${.5-p},${.5+n} L${.5-p},1 M0,${.5-n} L${.5-p},${.5-n} L${.5-p},0`},"":{1:(p,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n} M.5,${.5+n} L.5,1`},"":{1:(p,n)=>`M0,.5 L1,.5 M${.5-p},.5 L${.5-p},1 M${.5+p},.5 L${.5+p},1`},"":{1:(p,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L${.5-p},${.5+n} L${.5-p},1 M1,${.5+n} L${.5+p},${.5+n} L${.5+p},1`},"":{1:(p,n)=>`M.5,0 L.5,${.5-n} M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(p,n)=>`M0,.5 L1,.5 M${.5-p},.5 L${.5-p},0 M${.5+p},.5 L${.5+p},0`},"":{1:(p,n)=>`M0,${.5+n} L1,${.5+n} M0,${.5-n} L${.5-p},${.5-n} L${.5-p},0 M1,${.5-n} L${.5+p},${.5-n} L${.5+p},0`},"":{1:(p,n)=>`M.5,0 L.5,1 M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(p,n)=>`M0,.5 L1,.5 M${.5-p},0 L${.5-p},1 M${.5+p},0 L${.5+p},1`},"":{1:(p,n)=>`M0,${.5+n} L${.5-p},${.5+n} L${.5-p},1 M1,${.5+n} L${.5+p},${.5+n} L${.5+p},1 M0,${.5-n} L${.5-p},${.5-n} L${.5-p},0 M1,${.5-n} L${.5+p},${.5-n} L${.5+p},0`},"":{1:"M1,0 L0,1"},"":{1:"M0,0 L1,1"},"":{1:"M1,0 L0,1 M0,0 L1,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{1:(p,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,1,.5`},"":{1:(p,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,0,.5`},"":{1:(p,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,0,.5`},"":{1:(p,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,1,.5`}},i.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.tryDrawCustomChar=function(p,n,l,h,d,v,y,C){const L=i.blockElementDefinitions[n];if(L)return function(A,R,T,O,H,$){for(let F=0;F<R.length;F++){const N=R[F],D=H/8,P=$/8;A.fillRect(T+N.x*D,O+N.y*P,N.w*D,N.h*P)}}(p,L,l,h,d,v),!0;const b=_[n];if(b)return function(A,R,T,O,H,$){let F=u.get(R);F||(F=new Map,u.set(R,F));const N=A.fillStyle;if(typeof N!="string")throw new Error(`Unexpected fillStyle type "${N}"`);let D=F.get(N);if(!D){const P=R[0].length,I=R.length,W=A.canvas.ownerDocument.createElement("canvas");W.width=P,W.height=I;const V=(0,f.throwIfFalsy)(W.getContext("2d")),Z=new ImageData(P,I);let te,K,M,z;if(N.startsWith("#"))te=parseInt(N.slice(1,3),16),K=parseInt(N.slice(3,5),16),M=parseInt(N.slice(5,7),16),z=N.length>7&&parseInt(N.slice(7,9),16)||1;else{if(!N.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${N}" when drawing pattern glyph`);[te,K,M,z]=N.substring(5,N.length-1).split(",").map(q=>parseFloat(q))}for(let q=0;q<I;q++)for(let G=0;G<P;G++)Z.data[4*(q*P+G)]=te,Z.data[4*(q*P+G)+1]=K,Z.data[4*(q*P+G)+2]=M,Z.data[4*(q*P+G)+3]=R[q][G]*(255*z);V.putImageData(Z,0,0),D=(0,f.throwIfFalsy)(A.createPattern(W,null)),F.set(N,D)}A.fillStyle=D,A.fillRect(T,O,H,$)}(p,b,l,h,d,v),!0;const k=i.boxDrawingDefinitions[n];if(k)return function(A,R,T,O,H,$,F){A.strokeStyle=A.fillStyle;for(const[N,D]of Object.entries(R)){let P;A.beginPath(),A.lineWidth=F*Number.parseInt(N),P=typeof D=="function"?D(.15,.15/$*H):D;for(const I of P.split(" ")){const W=I[0],V=S[W];if(!V){console.error(`Could not find drawing instructions for "${W}"`);continue}const Z=I.substring(1).split(",");Z[0]&&Z[1]&&V(A,w(Z,H,$,T,O,!0,F))}A.stroke(),A.closePath()}}(p,k,l,h,d,v,C),!0;const E=i.powerlineDefinitions[n];return!!E&&(function(A,R,T,O,H,$,F,N){const D=new Path2D;D.rect(T,O,H,$),A.clip(D),A.beginPath();const P=F/12;A.lineWidth=N*P;for(const I of R.d.split(" ")){const W=I[0],V=S[W];if(!V){console.error(`Could not find drawing instructions for "${W}"`);continue}const Z=I.substring(1).split(",");Z[0]&&Z[1]&&V(A,w(Z,H,$,T,O,!1,N,(R.leftPadding??0)*(P/2),(R.rightPadding??0)*(P/2)))}R.type===1?(A.strokeStyle=A.fillStyle,A.stroke()):A.fill(),A.closePath()}(p,E,l,h,d,v,y,C),!0)};const u=new Map;function m(p,n,l=0){return Math.max(Math.min(p,n),l)}const S={C:(p,n)=>p.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]),L:(p,n)=>p.lineTo(n[0],n[1]),M:(p,n)=>p.moveTo(n[0],n[1])};function w(p,n,l,h,d,v,y,C=0,L=0){const b=p.map(k=>parseFloat(k)||parseInt(k));if(b.length<2)throw new Error("Too few arguments for instruction");for(let k=0;k<b.length;k+=2)b[k]*=n-C*y-L*y,v&&b[k]!==0&&(b[k]=m(Math.round(b[k]+.5)-.5,n,0)),b[k]+=h+C*y;for(let k=1;k<b.length;k+=2)b[k]*=l,v&&b[k]!==0&&(b[k]=m(Math.round(b[k]+.5)-.5,l,0)),b[k]+=d;return b}},56:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.observeDevicePixelDimensions=void 0;const f=c(859);i.observeDevicePixelDimensions=function(_,u,m){let S=new u.ResizeObserver(w=>{const p=w.find(h=>h.target===_);if(!p)return;if(!("devicePixelContentBoxSize"in p))return S==null||S.disconnect(),void(S=void 0);const n=p.devicePixelContentBoxSize[0].inlineSize,l=p.devicePixelContentBoxSize[0].blockSize;n>0&&l>0&&m(n,l)});try{S.observe(_,{box:["device-pixel-content-box"]})}catch{S.disconnect(),S=void 0}return(0,f.toDisposable)(()=>S==null?void 0:S.disconnect())}},374:(x,i)=>{function c(_){return 57508<=_&&_<=57558}function f(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=c,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=f,i.allowRescaling=function(_,u,m,S){return u===1&&m>Math.ceil(1.5*S)&&_!==void 0&&_>255&&!f(_)&&!c(_)&&!function(w){return 57344<=w&&w<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return c(_)||function(u){return 9472<=u&&u<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,u,m=0){return(_-(2*Math.round(u)-m))%(2*Math.round(u))}},296:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class c{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,u,m,S=!1){if(this.selectionStart=u,this.selectionEnd=m,!u||!m||u[0]===m[0]&&u[1]===m[1])return void this.clear();const w=_.buffers.active.ydisp,p=u[1]-w,n=m[1]-w,l=Math.max(p,0),h=Math.min(n,_.rows-1);l>=_.rows||h<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=S,this.viewportStartRow=p,this.viewportEndRow=n,this.viewportCappedStartRow=l,this.viewportCappedEndRow=h,this.startCol=u[0],this.endCol=m[0])}isCellSelected(_,u,m){return!!this.hasSelection&&(m-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?u>=this.startCol&&m>=this.viewportCappedStartRow&&u<this.endCol&&m<=this.viewportCappedEndRow:u<this.startCol&&m>=this.viewportCappedStartRow&&u>=this.endCol&&m<=this.viewportCappedEndRow:m>this.viewportStartRow&&m<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&m===this.viewportStartRow&&u>=this.startCol&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&m===this.viewportEndRow&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&m===this.viewportStartRow&&u>=this.startCol)}}i.createSelectionRenderModel=function(){return new c}},509:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextureAtlas=void 0;const f=c(237),_=c(860),u=c(374),m=c(160),S=c(345),w=c(485),p=c(385),n=c(147),l=c(855),h={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let d;class v{get pages(){return this._pages}constructor(k,E,A){this._document=k,this._config=E,this._unicodeService=A,this._didWarmUp=!1,this._cacheMap=new w.FourKeyMap,this._cacheMapCombined=new w.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new n.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new S.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new S.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=L(k,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,u.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const k of this.pages)k.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const k=new p.IdleTaskQueue;for(let E=33;E<126;E++)k.enqueue(()=>{if(!this._cacheMap.get(E,l.DEFAULT_COLOR,l.DEFAULT_COLOR,l.DEFAULT_EXT)){const A=this._drawToCache(E,l.DEFAULT_COLOR,l.DEFAULT_COLOR,l.DEFAULT_EXT);this._cacheMap.set(E,l.DEFAULT_COLOR,l.DEFAULT_COLOR,l.DEFAULT_EXT,A)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const k of this._pages)k.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(v.maxAtlasPages&&this._pages.length>=Math.max(4,v.maxAtlasPages)){const E=this._pages.filter(F=>2*F.canvas.width<=(v.maxTextureSize||4096)).sort((F,N)=>N.canvas.width!==F.canvas.width?N.canvas.width-F.canvas.width:N.percentageUsed-F.percentageUsed);let A=-1,R=0;for(let F=0;F<E.length;F++)if(E[F].canvas.width!==R)A=F,R=E[F].canvas.width;else if(F-A==3)break;const T=E.slice(A,A+4),O=T.map(F=>F.glyphs[0].texturePage).sort((F,N)=>F>N?1:-1),H=this.pages.length-T.length,$=this._mergePages(T,H);$.version++;for(let F=O.length-1;F>=0;F--)this._deletePage(O[F]);this.pages.push($),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire($.canvas)}const k=new y(this._document,this._textureSize);return this._pages.push(k),this._activePages.push(k),this._onAddTextureAtlasCanvas.fire(k.canvas),k}_mergePages(k,E){const A=2*k[0].canvas.width,R=new y(this._document,A,k);for(const[T,O]of k.entries()){const H=T*O.canvas.width%A,$=Math.floor(T/2)*O.canvas.height;R.ctx.drawImage(O.canvas,H,$);for(const N of O.glyphs)N.texturePage=E,N.sizeClipSpace.x=N.size.x/A,N.sizeClipSpace.y=N.size.y/A,N.texturePosition.x+=H,N.texturePosition.y+=$,N.texturePositionClipSpace.x=N.texturePosition.x/A,N.texturePositionClipSpace.y=N.texturePosition.y/A;this._onRemoveTextureAtlasCanvas.fire(O.canvas);const F=this._activePages.indexOf(O);F!==-1&&this._activePages.splice(F,1)}return R}_deletePage(k){this._pages.splice(k,1);for(let E=k;E<this._pages.length;E++){const A=this._pages[E];for(const R of A.glyphs)R.texturePage--;A.version++}}getRasterizedGlyphCombinedChar(k,E,A,R,T){return this._getFromCacheMap(this._cacheMapCombined,k,E,A,R,T)}getRasterizedGlyph(k,E,A,R,T){return this._getFromCacheMap(this._cacheMap,k,E,A,R,T)}_getFromCacheMap(k,E,A,R,T,O=!1){return d=k.get(E,A,R,T),d||(d=this._drawToCache(E,A,R,T,O),k.set(E,A,R,T,d)),d}_getColorFromAnsiIndex(k){if(k>=this._config.colors.ansi.length)throw new Error("No color found for idx "+k);return this._config.colors.ansi[k]}_getBackgroundColor(k,E,A,R){if(this._config.allowTransparency)return m.NULL_COLOR;let T;switch(k){case 16777216:case 33554432:T=this._getColorFromAnsiIndex(E);break;case 50331648:const O=n.AttributeData.toColorRGB(E);T=m.channels.toColor(O[0],O[1],O[2]);break;default:T=A?m.color.opaque(this._config.colors.foreground):this._config.colors.background}return T}_getForegroundColor(k,E,A,R,T,O,H,$,F,N){const D=this._getMinimumContrastColor(k,E,A,R,T,O,H,F,$,N);if(D)return D;let P;switch(T){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&F&&O<8&&(O+=8),P=this._getColorFromAnsiIndex(O);break;case 50331648:const I=n.AttributeData.toColorRGB(O);P=m.channels.toColor(I[0],I[1],I[2]);break;default:P=H?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(P=m.color.opaque(P)),$&&(P=m.color.multiplyOpacity(P,f.DIM_OPACITY)),P}_resolveBackgroundRgba(k,E,A){switch(k){case 16777216:case 33554432:return this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return A?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(k,E,A,R){switch(k){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&R&&E<8&&(E+=8),this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return A?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(k,E,A,R,T,O,H,$,F,N){if(this._config.minimumContrastRatio===1||N)return;const D=this._getContrastCache(F),P=D.getColor(k,R);if(P!==void 0)return P||void 0;const I=this._resolveBackgroundRgba(E,A,H),W=this._resolveForegroundRgba(T,O,H,$),V=m.rgba.ensureContrastRatio(I,W,this._config.minimumContrastRatio/(F?2:1));if(!V)return void D.setColor(k,R,null);const Z=m.channels.toColor(V>>24&255,V>>16&255,V>>8&255);return D.setColor(k,R,Z),Z}_getContrastCache(k){return k?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(k,E,A,R,T=!1){const O=typeof k=="number"?String.fromCharCode(k):k,H=Math.min(this._config.deviceCellWidth*Math.max(O.length,2)+4,this._textureSize);this._tmpCanvas.width<H&&(this._tmpCanvas.width=H);const $=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<$&&(this._tmpCanvas.height=$),this._tmpCtx.save(),this._workAttributeData.fg=A,this._workAttributeData.bg=E,this._workAttributeData.extended.ext=R,this._workAttributeData.isInvisible())return h;const F=!!this._workAttributeData.isBold(),N=!!this._workAttributeData.isInverse(),D=!!this._workAttributeData.isDim(),P=!!this._workAttributeData.isItalic(),I=!!this._workAttributeData.isUnderline(),W=!!this._workAttributeData.isStrikethrough(),V=!!this._workAttributeData.isOverline();let Z=this._workAttributeData.getFgColor(),te=this._workAttributeData.getFgColorMode(),K=this._workAttributeData.getBgColor(),M=this._workAttributeData.getBgColorMode();if(N){const Y=Z;Z=K,K=Y;const he=te;te=M,M=he}const z=this._getBackgroundColor(M,K,N,D);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=z.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const q=F?this._config.fontWeightBold:this._config.fontWeight,G=P?"italic":"";this._tmpCtx.font=`${G} ${q} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=f.TEXT_BASELINE;const ne=O.length===1&&(0,u.isPowerlineGlyph)(O.charCodeAt(0)),se=O.length===1&&(0,u.isRestrictedPowerlineGlyph)(O.charCodeAt(0)),fe=this._getForegroundColor(E,M,K,A,te,Z,N,D,F,(0,u.treatGlyphAsBackgroundColor)(O.charCodeAt(0)));this._tmpCtx.fillStyle=fe.css;const de=se?0:4;let ye=!1;this._config.customGlyphs!==!1&&(ye=(0,_.tryDrawCustomChar)(this._tmpCtx,O,de,de,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let re,ce=!ne;if(re=typeof k=="number"?this._unicodeService.wcwidth(k):this._unicodeService.getStringCellWidth(k),I){this._tmpCtx.save();const Y=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),he=Y%2==1?.5:0;if(this._tmpCtx.lineWidth=Y,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())ce=!1,this._tmpCtx.strokeStyle=`rgb(${n.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{ce=!1;let Ae=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&Ae<8&&(Ae+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(Ae).css}this._tmpCtx.beginPath();const we=de,be=Math.ceil(de+this._config.deviceCharHeight)-he-(T?2*Y:0),rt=be+Y,ze=be+2*Y;let lt=this._workAttributeData.getUnderlineVariantOffset();for(let Ae=0;Ae<re;Ae++){this._tmpCtx.save();const Ce=we+Ae*this._config.deviceCellWidth,Q=we+(Ae+1)*this._config.deviceCellWidth,ae=Ce+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Ce,be),this._tmpCtx.lineTo(Q,be),this._tmpCtx.moveTo(Ce,ze),this._tmpCtx.lineTo(Q,ze);break;case 3:const pe=Y<=1?ze:Math.ceil(de+this._config.deviceCharHeight-Y/2)-he,J=Y<=1?be:Math.ceil(de+this._config.deviceCharHeight+Y/2)-he,oe=new Path2D;oe.rect(Ce,be,this._config.deviceCellWidth,ze-be),this._tmpCtx.clip(oe),this._tmpCtx.moveTo(Ce-this._config.deviceCellWidth/2,rt),this._tmpCtx.bezierCurveTo(Ce-this._config.deviceCellWidth/2,J,Ce,J,Ce,rt),this._tmpCtx.bezierCurveTo(Ce,pe,ae,pe,ae,rt),this._tmpCtx.bezierCurveTo(ae,J,Q,J,Q,rt),this._tmpCtx.bezierCurveTo(Q,pe,Q+this._config.deviceCellWidth/2,pe,Q+this._config.deviceCellWidth/2,rt);break;case 4:const ue=lt===0?0:lt>=Y?2*Y-lt:Y-lt;lt>=Y||ue===0?(this._tmpCtx.setLineDash([Math.round(Y),Math.round(Y)]),this._tmpCtx.moveTo(Ce+ue,be),this._tmpCtx.lineTo(Q,be)):(this._tmpCtx.setLineDash([Math.round(Y),Math.round(Y)]),this._tmpCtx.moveTo(Ce,be),this._tmpCtx.lineTo(Ce+ue,be),this._tmpCtx.moveTo(Ce+ue+Y,be),this._tmpCtx.lineTo(Q,be)),lt=(0,u.computeNextVariantOffset)(Q-Ce,Y,lt);break;case 5:const ke=.6,Ft=.3,Ht=Q-Ce,Rr=Math.floor(ke*Ht),Ql=Math.floor(Ft*Ht),Rf=Ht-Rr-Ql;this._tmpCtx.setLineDash([Rr,Ql,Rf]),this._tmpCtx.moveTo(Ce,be),this._tmpCtx.lineTo(Q,be);break;default:this._tmpCtx.moveTo(Ce,be),this._tmpCtx.lineTo(Q,be)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!ye&&this._config.fontSize>=12&&!this._config.allowTransparency&&O!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const Ae=this._tmpCtx.measureText(O);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in Ae&&Ae.actualBoundingBoxDescent>0){this._tmpCtx.save();const Ce=new Path2D;Ce.rect(we,be-Math.ceil(Y/2),this._config.deviceCellWidth*re,ze-be+Math.ceil(Y/2)),this._tmpCtx.clip(Ce),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=z.css,this._tmpCtx.strokeText(O,de,de+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(V){const Y=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),he=Y%2==1?.5:0;this._tmpCtx.lineWidth=Y,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(de,de+he),this._tmpCtx.lineTo(de+this._config.deviceCharWidth*re,de+he),this._tmpCtx.stroke()}if(ye||this._tmpCtx.fillText(O,de,de+this._config.deviceCharHeight),O==="_"&&!this._config.allowTransparency){let Y=C(this._tmpCtx.getImageData(de,de,this._config.deviceCellWidth,this._config.deviceCellHeight),z,fe,ce);if(Y)for(let he=1;he<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=z.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(O,de,de+this._config.deviceCharHeight-he),Y=C(this._tmpCtx.getImageData(de,de,this._config.deviceCellWidth,this._config.deviceCellHeight),z,fe,ce),Y);he++);}if(W){const Y=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),he=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=Y,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(de,de+Math.floor(this._config.deviceCharHeight/2)-he),this._tmpCtx.lineTo(de+this._config.deviceCharWidth*re,de+Math.floor(this._config.deviceCharHeight/2)-he),this._tmpCtx.stroke()}this._tmpCtx.restore();const Be=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let Ue;if(Ue=this._config.allowTransparency?function(Y){for(let he=0;he<Y.data.length;he+=4)if(Y.data[he+3]>0)return!1;return!0}(Be):C(Be,z,fe,ce),Ue)return h;const ge=this._findGlyphBoundingBox(Be,this._workBoundingBox,H,se,ye,de);let me,X;for(;;){if(this._activePages.length===0){const Y=this._createNewPage();me=Y,X=Y.currentRow,X.height=ge.size.y;break}me=this._activePages[this._activePages.length-1],X=me.currentRow;for(const Y of this._activePages)ge.size.y<=Y.currentRow.height&&(me=Y,X=Y.currentRow);for(let Y=this._activePages.length-1;Y>=0;Y--)for(const he of this._activePages[Y].fixedRows)he.height<=X.height&&ge.size.y<=he.height&&(me=this._activePages[Y],X=he);if(X.y+ge.size.y>=me.canvas.height||X.height>ge.size.y+2){let Y=!1;if(me.currentRow.y+me.currentRow.height+ge.size.y>=me.canvas.height){let he;for(const we of this._activePages)if(we.currentRow.y+we.currentRow.height+ge.size.y<we.canvas.height){he=we;break}if(he)me=he;else if(v.maxAtlasPages&&this._pages.length>=v.maxAtlasPages&&X.y+ge.size.y<=me.canvas.height&&X.height>=ge.size.y&&X.x+ge.size.x<=me.canvas.width)Y=!0;else{const we=this._createNewPage();me=we,X=we.currentRow,X.height=ge.size.y,Y=!0}}Y||(me.currentRow.height>0&&me.fixedRows.push(me.currentRow),X={x:0,y:me.currentRow.y+me.currentRow.height,height:ge.size.y},me.fixedRows.push(X),me.currentRow={x:0,y:X.y+X.height,height:0})}if(X.x+ge.size.x<=me.canvas.width)break;X===me.currentRow?(X.x=0,X.y+=X.height,X.height=0):me.fixedRows.splice(me.fixedRows.indexOf(X),1)}return ge.texturePage=this._pages.indexOf(me),ge.texturePosition.x=X.x,ge.texturePosition.y=X.y,ge.texturePositionClipSpace.x=X.x/me.canvas.width,ge.texturePositionClipSpace.y=X.y/me.canvas.height,ge.sizeClipSpace.x/=me.canvas.width,ge.sizeClipSpace.y/=me.canvas.height,X.height=Math.max(X.height,ge.size.y),X.x+=ge.size.x,me.ctx.putImageData(Be,ge.texturePosition.x-this._workBoundingBox.left,ge.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,ge.size.x,ge.size.y),me.addGlyph(ge),me.version++,ge}_findGlyphBoundingBox(k,E,A,R,T,O){E.top=0;const H=R?this._config.deviceCellHeight:this._tmpCanvas.height,$=R?this._config.deviceCellWidth:A;let F=!1;for(let N=0;N<H;N++){for(let D=0;D<$;D++){const P=N*this._tmpCanvas.width*4+4*D+3;if(k.data[P]!==0){E.top=N,F=!0;break}}if(F)break}E.left=0,F=!1;for(let N=0;N<O+$;N++){for(let D=0;D<H;D++){const P=D*this._tmpCanvas.width*4+4*N+3;if(k.data[P]!==0){E.left=N,F=!0;break}}if(F)break}E.right=$,F=!1;for(let N=O+$-1;N>=O;N--){for(let D=0;D<H;D++){const P=D*this._tmpCanvas.width*4+4*N+3;if(k.data[P]!==0){E.right=N,F=!0;break}}if(F)break}E.bottom=H,F=!1;for(let N=H-1;N>=0;N--){for(let D=0;D<$;D++){const P=N*this._tmpCanvas.width*4+4*D+3;if(k.data[P]!==0){E.bottom=N,F=!0;break}}if(F)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:E.right-E.left+1,y:E.bottom-E.top+1},sizeClipSpace:{x:E.right-E.left+1,y:E.bottom-E.top+1},offset:{x:-E.left+O+(R||T?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-E.top+O+(R||T?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}i.TextureAtlas=v;class y{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(k){this._glyphs.push(k),this._usedPixels+=k.size.x*k.size.y}constructor(k,E,A){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],A)for(const R of A)this._glyphs.push(...R.glyphs),this._usedPixels+=R._usedPixels;this.canvas=L(k,E,E),this.ctx=(0,u.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function C(b,k,E,A){const R=k.rgba>>>24,T=k.rgba>>>16&255,O=k.rgba>>>8&255,H=E.rgba>>>24,$=E.rgba>>>16&255,F=E.rgba>>>8&255,N=Math.floor((Math.abs(R-H)+Math.abs(T-$)+Math.abs(O-F))/12);let D=!0;for(let P=0;P<b.data.length;P+=4)b.data[P]===R&&b.data[P+1]===T&&b.data[P+2]===O||A&&Math.abs(b.data[P]-R)+Math.abs(b.data[P+1]-T)+Math.abs(b.data[P+2]-O)<N?b.data[P+3]=0:D=!1;return D}function L(b,k,E){const A=b.createElement("canvas");return A.width=k,A.height=E,A}},160:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let c=0,f=0,_=0,u=0;var m,S,w,p,n;function l(d){const v=d.toString(16);return v.length<2?"0"+v:v}function h(d,v){return d<v?(v+.05)/(d+.05):(d+.05)/(v+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(d){d.toCss=function(v,y,C,L){return L!==void 0?`#${l(v)}${l(y)}${l(C)}${l(L)}`:`#${l(v)}${l(y)}${l(C)}`},d.toRgba=function(v,y,C,L=255){return(v<<24|y<<16|C<<8|L)>>>0},d.toColor=function(v,y,C,L){return{css:d.toCss(v,y,C,L),rgba:d.toRgba(v,y,C,L)}}}(m||(i.channels=m={})),function(d){function v(y,C){return u=Math.round(255*C),[c,f,_]=n.toChannels(y.rgba),{css:m.toCss(c,f,_,u),rgba:m.toRgba(c,f,_,u)}}d.blend=function(y,C){if(u=(255&C.rgba)/255,u===1)return{css:C.css,rgba:C.rgba};const L=C.rgba>>24&255,b=C.rgba>>16&255,k=C.rgba>>8&255,E=y.rgba>>24&255,A=y.rgba>>16&255,R=y.rgba>>8&255;return c=E+Math.round((L-E)*u),f=A+Math.round((b-A)*u),_=R+Math.round((k-R)*u),{css:m.toCss(c,f,_),rgba:m.toRgba(c,f,_)}},d.isOpaque=function(y){return(255&y.rgba)==255},d.ensureContrastRatio=function(y,C,L){const b=n.ensureContrastRatio(y.rgba,C.rgba,L);if(b)return m.toColor(b>>24&255,b>>16&255,b>>8&255)},d.opaque=function(y){const C=(255|y.rgba)>>>0;return[c,f,_]=n.toChannels(C),{css:m.toCss(c,f,_),rgba:C}},d.opacity=v,d.multiplyOpacity=function(y,C){return u=255&y.rgba,v(y,u*C/255)},d.toColorRGB=function(y){return[y.rgba>>24&255,y.rgba>>16&255,y.rgba>>8&255]}}(S||(i.color=S={})),function(d){let v,y;try{const C=document.createElement("canvas");C.width=1,C.height=1;const L=C.getContext("2d",{willReadFrequently:!0});L&&(v=L,v.globalCompositeOperation="copy",y=v.createLinearGradient(0,0,1,1))}catch{}d.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return c=parseInt(C.slice(1,2).repeat(2),16),f=parseInt(C.slice(2,3).repeat(2),16),_=parseInt(C.slice(3,4).repeat(2),16),m.toColor(c,f,_);case 5:return c=parseInt(C.slice(1,2).repeat(2),16),f=parseInt(C.slice(2,3).repeat(2),16),_=parseInt(C.slice(3,4).repeat(2),16),u=parseInt(C.slice(4,5).repeat(2),16),m.toColor(c,f,_,u);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}const L=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(L)return c=parseInt(L[1]),f=parseInt(L[2]),_=parseInt(L[3]),u=Math.round(255*(L[5]===void 0?1:parseFloat(L[5]))),m.toColor(c,f,_,u);if(!v||!y)throw new Error("css.toColor: Unsupported css format");if(v.fillStyle=y,v.fillStyle=C,typeof v.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(v.fillRect(0,0,1,1),[c,f,_,u]=v.getImageData(0,0,1,1).data,u!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:m.toRgba(c,f,_,u),css:C}}}(w||(i.css=w={})),function(d){function v(y,C,L){const b=y/255,k=C/255,E=L/255;return .2126*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.7152*(k<=.03928?k/12.92:Math.pow((k+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}d.relativeLuminance=function(y){return v(y>>16&255,y>>8&255,255&y)},d.relativeLuminance2=v}(p||(i.rgb=p={})),function(d){function v(C,L,b){const k=C>>24&255,E=C>>16&255,A=C>>8&255;let R=L>>24&255,T=L>>16&255,O=L>>8&255,H=h(p.relativeLuminance2(R,T,O),p.relativeLuminance2(k,E,A));for(;H<b&&(R>0||T>0||O>0);)R-=Math.max(0,Math.ceil(.1*R)),T-=Math.max(0,Math.ceil(.1*T)),O-=Math.max(0,Math.ceil(.1*O)),H=h(p.relativeLuminance2(R,T,O),p.relativeLuminance2(k,E,A));return(R<<24|T<<16|O<<8|255)>>>0}function y(C,L,b){const k=C>>24&255,E=C>>16&255,A=C>>8&255;let R=L>>24&255,T=L>>16&255,O=L>>8&255,H=h(p.relativeLuminance2(R,T,O),p.relativeLuminance2(k,E,A));for(;H<b&&(R<255||T<255||O<255);)R=Math.min(255,R+Math.ceil(.1*(255-R))),T=Math.min(255,T+Math.ceil(.1*(255-T))),O=Math.min(255,O+Math.ceil(.1*(255-O))),H=h(p.relativeLuminance2(R,T,O),p.relativeLuminance2(k,E,A));return(R<<24|T<<16|O<<8|255)>>>0}d.blend=function(C,L){if(u=(255&L)/255,u===1)return L;const b=L>>24&255,k=L>>16&255,E=L>>8&255,A=C>>24&255,R=C>>16&255,T=C>>8&255;return c=A+Math.round((b-A)*u),f=R+Math.round((k-R)*u),_=T+Math.round((E-T)*u),m.toRgba(c,f,_)},d.ensureContrastRatio=function(C,L,b){const k=p.relativeLuminance(C>>8),E=p.relativeLuminance(L>>8);if(h(k,E)<b){if(E<k){const T=v(C,L,b),O=h(k,p.relativeLuminance(T>>8));if(O<b){const H=y(C,L,b);return O>h(k,p.relativeLuminance(H>>8))?T:H}return T}const A=y(C,L,b),R=h(k,p.relativeLuminance(A>>8));if(R<b){const T=v(C,L,b);return R>h(k,p.relativeLuminance(T>>8))?A:T}return A}},d.reduceLuminance=v,d.increaseLuminance=y,d.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]}}(n||(i.rgba=n={})),i.toPaddedHex=l,i.contrastRatio=h},345:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=c=>(this._listeners.push(c),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===c)return void this._listeners.splice(f,1)}}})),this._event}fire(c,f){const _=[];for(let u=0;u<this._listeners.length;u++)_.push(this._listeners[u]);for(let u=0;u<_.length;u++)_[u].call(void 0,c,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(c,f){return c(_=>f.fire(_))},i.runAndSubscribe=function(c,f){return f(void 0),c(_=>f(_))}},859:(x,i)=>{function c(f){for(const _ of f)_.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const _=this._disposables.indexOf(f);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){var _;this._isDisposed||f===this._value||((_=this._value)==null||_.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){var f;this._isDisposed=!0,(f=this._value)==null||f.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=c,i.getDisposeArrayDisposable=function(f){return{dispose:()=>c(f)}}},485:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class c{constructor(){this._data={}}set(_,u,m){this._data[_]||(this._data[_]={}),this._data[_][u]=m}get(_,u){return this._data[_]?this._data[_][u]:void 0}clear(){this._data={}}}i.TwoKeyMap=c,i.FourKeyMap=class{constructor(){this._data=new c}set(f,_,u,m,S){this._data.get(f,_)||this._data.set(f,_,new c),this._data.get(f,_).set(u,m,S)}get(f,_,u,m){var S;return(S=this._data.get(f,_))==null?void 0:S.get(u,m)}clear(){this._data.clear()}}},399:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const c=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=c.includes("Firefox"),i.isLegacyEdge=c.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(c),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=c.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(c)},385:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=c(399);class _{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let w=0,p=0,n=S.timeRemaining(),l=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),p=Math.max(w,p),l=S.timeRemaining(),1.5*p>l)return n-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-w))}ms`),void this._start();n=l}this.clear()}}class u extends _{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const w=Date.now()+S;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}i.PriorityTaskQueue=u,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(m){return requestIdleCallback(m)}_cancelCallback(m){cancelIdleCallback(m)}}:u,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(m){this._queue.clear(),this._queue.enqueue(m)}flush(){this._queue.flush()}}},147:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class c{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){const u=new c;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=c;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}get underlineVariantOffset(){const u=(3758096384&this._ext)>>29;return u<0?4294967288^u:u}set underlineVariantOffset(u){this._ext&=536870911,this._ext|=u<<29&3758096384}constructor(u=0,m=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=m}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},782:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=c(133),_=c(855),u=c(147);class m extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const p=new m;return p.setFromCharData(w),p}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let p=!1;if(w[_.CHAR_DATA_CHAR_INDEX].length>2)p=!0;else if(w[_.CHAR_DATA_CHAR_INDEX].length===2){const n=w[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const l=w[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=l&&l<=57343?this.content=1024*(n-55296)+l-56320+65536|w[_.CHAR_DATA_WIDTH_INDEX]<<22:p=!0}else p=!0}else this.content=w[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[_.CHAR_DATA_WIDTH_INDEX]<<22;p&&(this.combinedData=w[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=m},855:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},133:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(c){return c>65535?(c-=65536,String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):String.fromCharCode(c)},i.utf32ToString=function(c,f=0,_=c.length){let u="";for(let m=f;m<_;++m){let S=c[m];S>65535?(S-=65536,u+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):u+=String.fromCharCode(S)}return u},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(c,f){const _=c.length;if(!_)return 0;let u=0,m=0;if(this._interim){const S=c.charCodeAt(m++);56320<=S&&S<=57343?f[u++]=1024*(this._interim-55296)+S-56320+65536:(f[u++]=this._interim,f[u++]=S),this._interim=0}for(let S=m;S<_;++S){const w=c.charCodeAt(S);if(55296<=w&&w<=56319){if(++S>=_)return this._interim=w,u;const p=c.charCodeAt(S);56320<=p&&p<=57343?f[u++]=1024*(w-55296)+p-56320+65536:(f[u++]=w,f[u++]=p)}else w!==65279&&(f[u++]=w)}return u}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(c,f){const _=c.length;if(!_)return 0;let u,m,S,w,p=0,n=0,l=0;if(this.interim[0]){let v=!1,y=this.interim[0];y&=(224&y)==192?31:(240&y)==224?15:7;let C,L=0;for(;(C=63&this.interim[++L])&&L<4;)y<<=6,y|=C;const b=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,k=b-L;for(;l<k;){if(l>=_)return 0;if(C=c[l++],(192&C)!=128){l--,v=!0;break}this.interim[L++]=C,y<<=6,y|=63&C}v||(b===2?y<128?l--:f[p++]=y:b===3?y<2048||y>=55296&&y<=57343||y===65279||(f[p++]=y):y<65536||y>1114111||(f[p++]=y)),this.interim.fill(0)}const h=_-4;let d=l;for(;d<_;){for(;!(!(d<h)||128&(u=c[d])||128&(m=c[d+1])||128&(S=c[d+2])||128&(w=c[d+3]));)f[p++]=u,f[p++]=m,f[p++]=S,f[p++]=w,d+=4;if(u=c[d++],u<128)f[p++]=u;else if((224&u)==192){if(d>=_)return this.interim[0]=u,p;if(m=c[d++],(192&m)!=128){d--;continue}if(n=(31&u)<<6|63&m,n<128){d--;continue}f[p++]=n}else if((240&u)==224){if(d>=_)return this.interim[0]=u,p;if(m=c[d++],(192&m)!=128){d--;continue}if(d>=_)return this.interim[0]=u,this.interim[1]=m,p;if(S=c[d++],(192&S)!=128){d--;continue}if(n=(15&u)<<12|(63&m)<<6|63&S,n<2048||n>=55296&&n<=57343||n===65279)continue;f[p++]=n}else if((248&u)==240){if(d>=_)return this.interim[0]=u,p;if(m=c[d++],(192&m)!=128){d--;continue}if(d>=_)return this.interim[0]=u,this.interim[1]=m,p;if(S=c[d++],(192&S)!=128){d--;continue}if(d>=_)return this.interim[0]=u,this.interim[1]=m,this.interim[2]=S,p;if(w=c[d++],(192&w)!=128){d--;continue}if(n=(7&u)<<18|(63&m)<<12|(63&S)<<6|63&w,n<65536||n>1114111)continue;f[p++]=n}}return p}}},776:function(x,i,c){var f=this&&this.__decorate||function(n,l,h,d){var v,y=arguments.length,C=y<3?l:d===null?d=Object.getOwnPropertyDescriptor(l,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,l,h,d);else for(var L=n.length-1;L>=0;L--)(v=n[L])&&(C=(y<3?v(C):y>3?v(l,h,C):v(l,h))||C);return y>3&&C&&Object.defineProperty(l,h,C),C},_=this&&this.__param||function(n,l){return function(h,d){l(h,d,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const u=c(859),m=c(97),S={trace:m.LogLevelEnum.TRACE,debug:m.LogLevelEnum.DEBUG,info:m.LogLevelEnum.INFO,warn:m.LogLevelEnum.WARN,error:m.LogLevelEnum.ERROR,off:m.LogLevelEnum.OFF};let w,p=i.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=m.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),w=this}_updateLogLevel(){this._logLevel=S[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let l=0;l<n.length;l++)typeof n[l]=="function"&&(n[l]=n[l]())}_log(n,l,h){this._evalLazyOptionalParams(h),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+l,...h)}trace(n,...l){var h;this._logLevel<=m.LogLevelEnum.TRACE&&this._log(((h=this._optionsService.options.logger)==null?void 0:h.trace.bind(this._optionsService.options.logger))??console.log,n,l)}debug(n,...l){var h;this._logLevel<=m.LogLevelEnum.DEBUG&&this._log(((h=this._optionsService.options.logger)==null?void 0:h.debug.bind(this._optionsService.options.logger))??console.log,n,l)}info(n,...l){var h;this._logLevel<=m.LogLevelEnum.INFO&&this._log(((h=this._optionsService.options.logger)==null?void 0:h.info.bind(this._optionsService.options.logger))??console.info,n,l)}warn(n,...l){var h;this._logLevel<=m.LogLevelEnum.WARN&&this._log(((h=this._optionsService.options.logger)==null?void 0:h.warn.bind(this._optionsService.options.logger))??console.warn,n,l)}error(n,...l){var h;this._logLevel<=m.LogLevelEnum.ERROR&&this._log(((h=this._optionsService.options.logger)==null?void 0:h.error.bind(this._optionsService.options.logger))??console.error,n,l)}};i.LogService=p=f([_(0,m.IOptionsService)],p),i.setTraceLogger=function(n){w=n},i.traceCall=function(n,l,h){if(typeof h.value!="function")throw new Error("not supported");const d=h.value;h.value=function(...v){if(w.logLevel!==m.LogLevelEnum.TRACE)return d.apply(this,v);w.trace(`GlyphRenderer#${d.name}(${v.map(C=>JSON.stringify(C)).join(", ")})`);const y=d.apply(this,v);return w.trace(`GlyphRenderer#${d.name} return`,y),y}}},726:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const c="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[f]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const u=function(m,S,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(p,n,l){n[c]===n?n[f].push({id:p,index:l}):(n[f]=[{id:p,index:l}],n[c]=n)})(u,m,w)};return u.toString=()=>_,i.serviceRegistry.set(_,u),u}},97:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=c(726);var _;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")}},s={};function a(x){var i=s[x];if(i!==void 0)return i.exports;var c=s[x]={exports:{}};return r[x].call(c.exports,c,c.exports,a),c.exports}var g={};return(()=>{var x=g;Object.defineProperty(x,"__esModule",{value:!0}),x.WebglAddon=void 0;const i=a(345),c=a(859),f=a(399),_=a(666),u=a(776);class m extends c.Disposable{constructor(w){if(f.isSafari&&(0,f.getSafariVersion)()<16){const p={antialias:!1,depth:!1,preserveDrawingBuffer:!0};if(!document.createElement("canvas").getContext("webgl2",p))throw new Error("Webgl2 is only supported on Safari 16 and above")}super(),this._preserveDrawingBuffer=w,this._onChangeTextureAtlas=this.register(new i.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new i.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new i.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new i.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(w){const p=w._core;if(!w.element)return void this.register(p.onWillOpen(()=>this.activate(w)));this._terminal=w;const n=p.coreService,l=p.optionsService,h=p,d=h._renderService,v=h._characterJoinerService,y=h._charSizeService,C=h._coreBrowserService,L=h._decorationService,b=h._logService,k=h._themeService;(0,u.setTraceLogger)(b),this._renderer=this.register(new _.WebglRenderer(w,v,y,C,n,L,l,k,this._preserveDrawingBuffer)),this.register((0,i.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,i.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,i.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,i.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),d.setRenderer(this._renderer),this.register((0,c.toDisposable)(()=>{const E=this._terminal._core._renderService;E.setRenderer(this._terminal._core._createRenderer()),E.handleResize(w.cols,w.rows)}))}get textureAtlas(){var w;return(w=this._renderer)==null?void 0:w.textureAtlas}clearTextureAtlas(){var w;(w=this._renderer)==null||w.clearTextureAtlas()}}x.WebglAddon=m})(),g})())})(Cf);var J0=Cf.exports;function Z0(e){return e&&e.replace(/\\u001b/g,"\x1B")}const kf=B.memo(function({workerId:t,output:r,onInput:s,onRawInput:a,onResize:g,className:x=""}){const i=B.useRef(null),c=B.useRef(null),f=B.useRef(null),_=B.useRef(0),u=B.useRef({cols:0,rows:0}),m=B.useRef(null),[S,w]=B.useState(!1),p=B.useRef(a),n=B.useRef(s),l=B.useRef(g);return B.useEffect(()=>{p.current=a,n.current=s,l.current=g}),B.useEffect(()=>{if(!i.current)return;_.current=0,w(!1);const h=i.current,d=13,v=new Y0.Terminal({theme:{background:"#0a0a0a",foreground:"#DAA520",cursor:"#FFD700",cursorAccent:"#000000",selection:"rgba(218, 165, 32, 0.3)",black:"#0a0a0a",red:"#8B0000",green:"#DAA520",yellow:"#FFD700",blue:"#4169E1",magenta:"#660000",cyan:"#20B2AA",white:"#FFFFFF",brightBlack:"#333333",brightRed:"#DC143C",brightGreen:"#FFD700",brightYellow:"#FFEC8B",brightBlue:"#6495ED",brightMagenta:"#8B0000",brightCyan:"#40E0D0",brightWhite:"#FFFFFF"},fontFamily:'"Share Tech Mono", "Courier New", monospace',fontSize:d,lineHeight:1.2,cursorBlink:!0,cursorStyle:"block",scrollback:1e3,convertEol:!0}),y=new Q0.FitAddon;v.loadAddon(y),c.current=v,f.current=y,v.open(h);try{const A=new J0.WebglAddon;A.onContextLoss(()=>{A.dispose()}),v.loadAddon(A)}catch(A){console.warn("WebGL addon failed, using DOM renderer:",A.message)}const C=()=>{const A=c.current;if(!A)return;const{cols:R,rows:T}=A,O=u.current;(R!==O.cols||T!==O.rows)&&(u.current={cols:R,rows:T},l.current&&l.current(R,T))};let L=setTimeout(()=>{L=null;try{y.fit(),C()}catch(A){console.warn("Fit error:",A)}w(!0)},100),b;const k=()=>{clearTimeout(b),b=setTimeout(()=>{try{f.current&&i.current&&(f.current.fit(),C())}catch{}},150)},E=new ResizeObserver(k);if(E.observe(h),p.current)v.onKey(({key:A,domEvent:R})=>{var H;const T=R;let O=null;switch(T.keyCode){case 38:O="\x1B[A";break;case 40:O="\x1B[B";break;case 39:O="\x1B[C";break;case 37:O="\x1B[D";break;case 13:O="\r";break;case 27:O="\x1B";break;case 9:O="	";break;case 8:O="";break;default:A&&(O=A)}O&&(T.preventDefault(),(H=p.current)==null||H.call(p,O))}),v.onData(A=>{var R;A.length>1&&((R=p.current)==null||R.call(p,A))});else if(n.current){let A="";v.onKey(({key:R,domEvent:T})=>{var H;const O=T;O.keyCode===13?(v.write(`\r
`),A.trim()&&((H=n.current)==null||H.call(n,A)),A=""):O.keyCode===8?A.length>0&&(A=A.slice(0,-1),v.write("\b \b")):!O.ctrlKey&&!O.altKey&&!O.metaKey&&R.length===1&&(A+=R,v.write(R))})}return()=>{L&&clearTimeout(L),clearTimeout(b),m.current&&clearTimeout(m.current),E.disconnect(),v.dispose(),c.current=null,f.current=null}},[t]),B.useEffect(()=>{const h=c.current,d=i.current;if(!h||!S||!d||!r)return;const v=Z0(r),y=v.length+":"+v.slice(-200);if(y===_.current)return;_.current=y;let C=v.replace(/\x1b\[\d*[ABCD]/g,"").replace(/\x1b\[\d+;\d+[Hf]/g,"").replace(/\x1b\[\d+G/g,"").replace(/\x1b\[[su]/g,"").replace(/\x1b\[[12]J/g,"").replace(/\x1b\[[012]?K/g,"");const L=500,b=C.split(`
`);b.length>L&&(C=b.slice(-L).join(`
`)),m.current&&clearTimeout(m.current);const k=C;m.current=setTimeout(()=>{m.current=null;const E=c.current;if(!E)return;const A=E.buffer.active,R=A.baseY===0||A.viewportY>=A.baseY;E.reset(),E.write(k,()=>{R&&E.scrollToBottom()})},100)},[r,S,t]),o.jsx("div",{ref:i,className:`bg-thea-nearBlack rounded border border-thea-gold-dark/30 overflow-hidden ${x}`,style:{opacity:S?1:.5,transition:"opacity 0.2s",maxWidth:"100%",contain:"strict"}})});function jn({isOpen:e,onClose:t,onConfirm:r,workerLabel:s,showProjectPicker:a=!1,projects:g=[],onProjectChange:x,selectedProject:i}){const[c,f]=B.useState(""),[_,u]=B.useState(""),[m,S]=B.useState(""),[w,p]=B.useState(!1),n=B.useRef(null);if(B.useEffect(()=>{if(e&&n.current){const h=setTimeout(()=>{var d;return(d=n.current)==null?void 0:d.focus()},50);return()=>clearTimeout(h)}},[e]),B.useEffect(()=>{if(!e)return;const h=d=>{d.key==="Escape"&&t()};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[e,t]),B.useEffect(()=>{e&&(f(""),u(""),S(""),p(!1))},[e]),!e)return null;const l=()=>{c.trim()&&r({mission:c.trim(),backlog:_.trim(),standingOrders:m.trim()})};return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:h=>{h.target===h.currentTarget&&t()},role:"dialog","aria-modal":"true","aria-labelledby":"bulldoze-modal-title",children:o.jsxs("div",{className:"w-full max-w-lg mx-4 bg-[#0a0a0a] border border-thea-gold/40 shadow-lg shadow-black/60",style:{clipPath:"polygon(0 0, calc(100% - 16px) 0, 100% 16px, 100% 100%, 16px 100%, 0 calc(100% - 16px))"},children:[o.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-thea-gold-bright opacity-60"}),o.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-thea-gold-dark/30",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Lt,{className:"w-5 h-5 text-amber-400"}),o.jsx("h2",{id:"bulldoze-modal-title",className:"font-rajdhani font-bold text-lg text-thea-gold-bright uppercase tracking-wider",children:a?"New Autonomous Session":"Configure Bulldoze Mode"})]}),o.jsx("button",{onClick:t,className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors","aria-label":"Close dialog",children:o.jsx(Ke,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"px-5 py-4 space-y-4 max-h-[70vh] overflow-y-auto",children:[!a&&s&&o.jsxs("div",{className:"text-xs font-mono text-thea-gold-dark/70 truncate",children:["Target: ",o.jsx("span",{className:"text-thea-gold",children:s})]}),a&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-rajdhani text-thea-gold mb-1.5 uppercase tracking-wider",children:"Project"}),o.jsxs("select",{value:i||"",onChange:h=>x==null?void 0:x(h.target.value),className:"w-full bg-black border border-thea-gold-dark/30 text-white px-3 py-2 text-sm font-mono focus:outline-none focus:border-thea-gold/60 transition-colors",children:[o.jsx("option",{value:"",children:"Select a project..."}),g.map(h=>o.jsx("option",{value:h.path||h.name,children:h.name},h.path||h.name))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-rajdhani text-thea-gold mb-1.5 uppercase tracking-wider",children:["Mission ",o.jsx("span",{className:"text-red-400",children:"*"})]}),o.jsx("textarea",{ref:n,value:c,onChange:h=>f(h.target.value),placeholder:"What should this general focus on?",rows:3,className:"w-full bg-black border border-thea-gold-dark/30 text-white px-3 py-2 text-sm font-mono placeholder-thea-gold-dark/40 resize-none focus:outline-none focus:border-thea-gold/60 transition-colors","aria-required":"true"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-rajdhani text-thea-gold mb-1.5 uppercase tracking-wider",children:"Backlog"}),o.jsx("textarea",{value:_,onChange:h=>u(h.target.value),placeholder:"Specific tasks, one per line",rows:3,className:"w-full bg-black border border-thea-gold-dark/30 text-white px-3 py-2 text-sm font-mono placeholder-thea-gold-dark/40 resize-none focus:outline-none focus:border-thea-gold/60 transition-colors"})]}),o.jsxs("div",{children:[o.jsxs("button",{onClick:()=>p(!w),className:"flex items-center gap-2 text-sm font-rajdhani text-thea-gold-dark hover:text-thea-gold transition-colors uppercase tracking-wider","aria-expanded":w,children:[w?o.jsx(of,{className:"w-4 h-4"}):o.jsx(yt,{className:"w-4 h-4"}),"Standing Orders"]}),w&&o.jsx("textarea",{value:m,onChange:h=>S(h.target.value),placeholder:"Persistent rules that survive compaction",rows:3,className:"w-full mt-2 bg-black border border-thea-gold-dark/30 text-white px-3 py-2 text-sm font-mono placeholder-thea-gold-dark/40 resize-none focus:outline-none focus:border-thea-gold/60 transition-colors"})]})]}),o.jsxs("div",{className:"flex items-center justify-end gap-3 px-5 py-4 border-t border-thea-gold-dark/30",children:[o.jsx("button",{onClick:t,className:"thea-btn px-4 py-2 text-sm font-rajdhani",children:"Cancel"}),o.jsxs("button",{onClick:l,disabled:!c.trim()||a&&!i,className:U("flex items-center gap-2 px-4 py-2 text-sm font-rajdhani font-bold uppercase tracking-wider transition-all border",c.trim()&&(!a||i)?"bg-amber-500/20 border-amber-500 text-amber-300 hover:bg-amber-500/30 shadow-[0_0_8px_rgba(245,158,11,0.3)]":"bg-gray-800/50 border-gray-600 text-gray-500 cursor-not-allowed"),children:[o.jsx(Lt,{className:"w-4 h-4"}),a?"Launch Session":"Enable Bulldoze"]})]})]})})}function e_(e){return{healthy:100,active:90,stalled:50,warning:40,critical:20,error:10,stopped:0}[e]??null}function t_(e){return e.replace(/\x1b\[[0-9;]*[a-zA-Z]/g,"").replace(/\x1b\([AB]/g,"").replace(/\x1b\][^\x07]*\x07/g,"").replace(/[\x00-\x09\x0b-\x1f]/g,"").replace(/\xa0/g," ")}function r_(e){if(!e||e<0)return null;const t=Math.floor(e/1e3);if(t<60)return`${t}s`;const r=Math.floor(t/60);if(r<60)return`${r}m`;const s=Math.floor(r/60);return s<24?`${s}h ${r%60}m`:`${Math.floor(s/24)}d ${s%24}h`}const s_=B.memo(function({worker:t,onOpenInMultiTerminal:r}){var L;const{outputs:s,workers:a,killWorker:g,updateWorkerLabel:x,attachToWorker:i,updateWorkerSettings:c}=Qe(),[f,_]=B.useState(!1),[u,m]=B.useState(t.label),[S,w]=B.useState(null),[,p]=B.useState(0);B.useEffect(()=>{if(t.status!=="running")return;const b=setInterval(()=>p(k=>k+1),3e4);return()=>clearInterval(b)},[t.status]);const n=t.createdAt?r_(Date.now()-new Date(t.createdAt).getTime()):null,l=B.useMemo(()=>{if(!t.parentWorkerId)return null;const b=a.find(k=>k.id===t.parentWorkerId);return b?b.label:t.parentWorkerId.slice(0,8)},[t.parentWorkerId,a]),h=((L=t.childWorkerIds)==null?void 0:L.length)||0,d=s[t.id]||"",v=B.useMemo(()=>t_(d).split(`
`).filter(k=>k.trim()).slice(-8).join(`
`),[d]),y=()=>{u.trim()&&u!==t.label&&x(t.id,u.trim()),_(!1)},C={running:"thea-badge-running",stopped:"thea-badge-stopped",error:"thea-badge-error"}[t.status]||"bg-gray-800 text-gray-400 border-gray-600";return o.jsxs("div",{"data-testid":`worker-card-${t.id}`,role:"article","aria-label":`Worker: ${t.label}`,className:"thea-card group relative p-4",style:{clipPath:"polygon(0 0, calc(100% - 12px) 0, 100% 12px, 100% 100%, 12px 100%, 0 calc(100% - 12px))"},children:[o.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 border-t-2 border-r-2 border-thea-gold-bright opacity-50 group-hover:opacity-100 transition-opacity animate-corner-pulse"}),o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[f?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"text",value:u,onChange:b=>m(b.target.value),onKeyDown:b=>b.key==="Enter"&&y(),className:"bg-black/50 border border-thea-gold/50 px-2 py-1 text-sm text-thea-gold font-rajdhani rounded-none flex-1",autoFocus:!0,"aria-label":"Worker label"}),o.jsx("button",{onClick:y,className:"text-thea-gold hover:text-thea-gold-bright","aria-label":"Save label",children:o.jsx(Xn,{className:"w-4 h-4"})})]}):o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[o.jsx(io,{label:t.label,size:"sm"}),o.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright truncate",children:Ut(t.label).displayName||t.label}),o.jsx("button",{onClick:()=>_(!0),className:"opacity-0 group-hover:opacity-100 text-thea-gold/50 hover:text-thea-gold transition-opacity flex-shrink-0","aria-label":"Edit worker label",children:o.jsx(k0,{className:"w-3 h-3"})})]}),o.jsx("p",{className:"text-xs text-thea-gold-dark font-mono",children:t.project})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(vi,{score:e_(t.health),size:"md"}),t.backend==="gemini"&&o.jsx("span",{className:"thea-badge bg-blue-500/20 text-blue-300 border-blue-500/30 text-[9px]",children:"Gemini"}),o.jsx("span",{className:U("thea-badge",C),children:t.status}),t.waitingAtPrompt&&o.jsx("span",{className:"thea-badge bg-yellow-500/20 text-yellow-400 border-yellow-500/30 animate-pulse text-[9px]",children:"prompt"})]})]}),o.jsx("div",{className:"bg-black/50 border border-thea-gold-dark/20 p-2 h-32 overflow-hidden mb-3 font-mono text-[10px] text-thea-gold-dark/80 leading-tight whitespace-pre-wrap",children:v||"No output yet..."}),t.ralphStatus&&o.jsxs("div",{className:"mb-3 space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Et,{className:"w-3 h-3 text-purple-400 flex-shrink-0"}),o.jsx("span",{className:U("text-[10px] font-mono uppercase tracking-wider",{"text-yellow-400":t.ralphStatus==="in_progress","text-green-400":t.ralphStatus==="done","text-red-400":t.ralphStatus==="blocked","text-gray-400":t.ralphStatus==="pending"}),children:t.ralphStatus==="in_progress"?"working":t.ralphStatus}),t.ralphProgress!=null&&o.jsxs("span",{className:"text-[10px] font-mono text-thea-gold-dark ml-auto",children:[t.ralphProgress,"%"]})]}),t.ralphProgress!=null&&o.jsx("div",{className:"w-full h-1 bg-black/50 border border-thea-gold-dark/20 overflow-hidden",role:"progressbar","aria-valuenow":t.ralphProgress,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Task progress",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-thea-gold-bright transition-all duration-500",style:{width:`${Math.min(100,Math.max(0,t.ralphProgress))}%`}})}),t.ralphCurrentStep&&o.jsx("p",{className:"text-[10px] text-thea-gold-dark/70 font-mono truncate",title:t.ralphCurrentStep,children:t.ralphCurrentStep})]}),Ut(t.label).prefix==="GENERAL"&&o.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>{t.bulldozeMode&&t.bulldozePaused?c(t.id,{bulldozePaused:!1}):t.bulldozeMode?c(t.id,{bulldozeMode:!1}):w(t)},className:U("thea-btn flex items-center gap-1.5 text-[10px] py-1 px-2",{"!border-amber-500 !text-amber-300 !bg-amber-500/20 shadow-[0_0_8px_rgba(245,158,11,0.3)]":t.bulldozeMode&&!t.bulldozePaused,"!border-yellow-500/40 !text-yellow-400/80 !bg-yellow-500/10":t.bulldozeMode&&t.bulldozePaused}),title:t.bulldozeMode?t.bulldozePaused?`Paused: ${t.bulldozePauseReason||"unknown"}  click to resume`:"Bulldoze active  click to disable":"Enable bulldoze mode",children:[t.bulldozeMode&&t.bulldozePaused?o.jsx(ql,{className:"w-3 h-3"}):o.jsx(Lt,{className:U("w-3 h-3",{"animate-pulse":t.bulldozeMode&&!t.bulldozePaused})}),t.bulldozeMode&&t.bulldozePaused?"Resume":"Bulldoze"]}),t.bulldozeMode&&t.bulldozeCyclesCompleted>0&&o.jsxs("span",{className:"text-[10px] font-mono text-thea-gold-dark/70",children:[t.bulldozeCyclesCompleted," cycles"]}),t.bulldozeMode&&t.bulldozePaused&&o.jsx("span",{className:"text-[9px] font-mono text-yellow-400/50 truncate",children:t.bulldozePauseReason})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{"data-testid":`open-worker-${t.id}`,onClick:()=>i(t.id),className:"thea-btn flex-1 flex items-center justify-center gap-2 py-2","aria-label":`Open worker ${Ut(t.label).displayName||t.label}`,children:[o.jsx(Qn,{className:"w-4 h-4"}),"Open"]}),r&&o.jsx("button",{onClick:r,className:"thea-btn p-2",title:"Open in Multi-Terminal View","aria-label":"Open in multi-terminal view",children:o.jsx(Wr,{className:"w-4 h-4"})}),o.jsx("button",{"data-testid":`kill-worker-${t.id}`,onClick:()=>g(t.id),className:"thea-btn thea-btn-danger p-2","aria-label":`Kill worker ${Ut(t.label).displayName||t.label}`,children:o.jsx(Ke,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"mt-2 space-y-0.5",children:[o.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-mono text-thea-gold-dark/50",children:[o.jsxs("span",{children:["ID: ",t.id]}),n&&o.jsxs("span",{className:"flex items-center gap-0.5 ml-auto",children:[o.jsx(er,{className:"w-3 h-3"}),n]})]}),(l||h>0)&&o.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-mono text-thea-gold-dark/40",children:[l&&o.jsxs("span",{className:"truncate max-w-[60%]",title:`Parent: ${l}`,children:[" ",l]}),h>0&&o.jsxs("span",{className:"ml-auto",children:[h," ",h===1?"child":"children"]})]})]}),S&&o.jsx(jn,{isOpen:!!S,onClose:()=>w(null),onConfirm:({mission:b,backlog:k,standingOrders:E})=>{c(S.id,{bulldozeMode:!0,bulldozeMission:b,bulldozeBacklog:k,bulldozeStandingOrders:E}),w(null)},workerLabel:S.label})]})});function Yl(){const[e,t]=B.useState(!1),[r,s]=B.useState(!1),[a,g]=B.useState(""),[x,i]=B.useState(!1),[c,f]=B.useState(!1),_=B.useRef(null),u=B.useRef(null);B.useEffect(()=>{const l=window.SpeechRecognition||window.webkitSpeechRecognition;if(l){i(!0);const h=new l;h.continuous=!0,h.interimResults=!0,h.lang="en-US",h.onresult=d=>{const y=Array.from(d.results).map(C=>C[0].transcript).join("");g(y)},h.onerror=d=>{console.error("Speech recognition error:",d.error),t(!1)},h.onend=()=>{t(!1)},_.current=h}return"speechSynthesis"in window&&f(!0),()=>{_.current&&_.current.stop(),window.speechSynthesis&&window.speechSynthesis.cancel()}},[]);const m=B.useCallback(()=>{if(!(!_.current||e)){g("");try{_.current.start(),t(!0)}catch(l){console.error("Failed to start speech recognition:",l)}}},[e]),S=B.useCallback(()=>{_.current&&(_.current.stop(),t(!1))},[]),w=B.useCallback((l,h={})=>!c||!l?Promise.resolve():new Promise(d=>{window.speechSynthesis.cancel();const v=new SpeechSynthesisUtterance(l);v.rate=h.rate||1,v.pitch=h.pitch||1,v.volume=h.volume||1;const y=window.speechSynthesis.getVoices(),C=y.find(L=>L.name.includes("Google")||L.name.includes("Microsoft")||L.name.includes("Natural")||L.lang.startsWith("en"))||y.find(L=>L.lang.startsWith("en"))||y[0];C&&(v.voice=C),v.onstart=()=>s(!0),v.onend=()=>{s(!1),d()},v.onerror=()=>{s(!1),d()},u.current=v,window.speechSynthesis.speak(v)}),[c]),p=B.useCallback(()=>{window.speechSynthesis&&(window.speechSynthesis.cancel(),s(!1))},[]),n=B.useCallback(()=>{g("")},[]);return{isListening:e,transcript:a,sttSupported:x,startListening:m,stopListening:S,clearTranscript:n,isSpeaking:r,ttsSupported:c,speak:w,stopSpeaking:p}}const i_=({status:e})=>{const t={idle:o.jsx(er,{className:"w-4 h-4 text-gray-400"}),thinking:o.jsx(nt,{className:"w-4 h-4 text-thea-gold animate-spin"}),coding:o.jsx(af,{className:"w-4 h-4 text-green-400"}),running_command:o.jsx(ro,{className:"w-4 h-4 text-blue-400"}),waiting_input:o.jsx(er,{className:"w-4 h-4 text-yellow-400 animate-pulse"}),error:o.jsx(Cr,{className:"w-4 h-4 text-red-400"}),completed:o.jsx(Gn,{className:"w-4 h-4 text-green-400"}),active:o.jsx(nt,{className:"w-4 h-4 text-thea-gold animate-spin"}),unknown:o.jsx(er,{className:"w-4 h-4 text-gray-400"})};return t[e]||t.unknown},_h={idle:"bg-gray-800 text-gray-400 border-gray-600",thinking:"bg-thea-gold/20 text-thea-gold border-thea-gold/50",coding:"bg-green-900/50 text-green-400 border-green-600/50",running_command:"bg-blue-900/50 text-blue-400 border-blue-600/50",waiting_input:"bg-yellow-900/50 text-yellow-400 border-yellow-600/50",error:"bg-red-900/50 text-red-400 border-red-600/50",completed:"bg-green-900/50 text-green-400 border-green-600/50",active:"bg-thea-gold/20 text-thea-gold border-thea-gold/50",unknown:"bg-gray-800 text-gray-400 border-gray-600"};function Ef({workerId:e,className:t="",autoSpeak:r=!1,onSummaryChange:s}){const[a,g]=B.useState(null),[x,i]=B.useState(!1),[c,f]=B.useState(null),[_,u]=B.useState(null),[m,S]=B.useState(r),w=B.useRef(""),{speak:p,stopSpeaking:n,isSpeaking:l,ttsSupported:h}=Yl(),d=B.useCallback(async(k=!1,E)=>{i(!0),f(null);try{const A=`/api/workers/${e}/summary${k?"?refresh=true":""}`,R=await Ee(A,{signal:E});if(!R.ok)throw new Error(`Failed to fetch summary: ${R.status}`);const T=await R.json();g(T),u(new Date)}catch(A){if(A.name==="AbortError")return;f(A.message);try{const R=await Ee(`/api/workers/${e}/quick-status`,{signal:E});if(R.ok){const T=await R.json();g({status:T.status,summary:`Quick status: ${T.lastLine||"No output"}`,task:null,lastAction:null,pendingItems:[],hasError:T.status==="error"})}}catch{}}finally{i(!1)}},[e]),v=B.useCallback(k=>{var A;if(!k)return"";const E=[];return k.status==="waiting_input"?E.push("Waiting for input."):k.status==="error"&&E.push("Error detected."),k.task&&E.push(`Current task: ${k.task}`),k.summary&&E.push(k.summary),k.lastAction&&E.push(`Last action: ${k.lastAction}`),((A=k.pendingItems)==null?void 0:A.length)>0&&E.push(`${k.pendingItems.length} pending items.`),E.join(" ")},[]),y=B.useCallback(()=>{const k=v(a);k&&p(k,{rate:1.1})},[a,p,v]);B.useEffect(()=>{if(!m||!a||!h)return;const k=v(a);k&&k!==w.current&&(w.current=k,p(k,{rate:1.1}),s&&s(a))},[a,m,h,p,v,s]),B.useEffect(()=>{const k=new AbortController;d(!1,k.signal);const E=setInterval(()=>{d(!1,k.signal)},1e4);return()=>{k.abort(),clearInterval(E),window.speechSynthesis&&window.speechSynthesis.cancel()}},[d]);const C=()=>{d(!0)},L=()=>{l&&n(),S(!m)};if(!a&&x)return o.jsxs("div",{className:U("flex items-center justify-center py-8",t),children:[o.jsx(nt,{className:"w-6 h-6 text-thea-gold animate-spin"}),o.jsx("span",{className:"ml-2 text-thea-gold-dark",children:"Generating summary..."})]});if(c&&!a)return o.jsxs("div",{className:U("p-4 bg-red-900/20 border border-red-600/30 rounded",t),children:[o.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[o.jsx(Cr,{className:"w-5 h-5"}),o.jsx("span",{children:"Failed to load summary"})]}),o.jsx("p",{className:"text-sm text-red-400/70 mt-1",children:c}),o.jsx("button",{onClick:C,className:"mt-2 text-sm text-thea-gold hover:text-thea-gold-bright",children:"Try again"})]});const b=(a==null?void 0:a.status)||"unknown";return o.jsxs("div",{className:U("flex flex-col",t),children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(i_,{status:b}),o.jsx("span",{className:U("px-2 py-0.5 text-xs font-mono rounded border",_h[b]||_h.unknown),children:b.replace("_"," ").toUpperCase()})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[h&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:y,disabled:l,className:U("p-1.5 rounded hover:bg-thea-gold/10 transition-colors",l&&"text-thea-gold animate-pulse"),title:l?"Speaking...":"Speak summary",children:o.jsx(Rn,{className:"w-4 h-4 text-thea-gold-dark"})}),o.jsx("button",{onClick:L,className:U("p-1.5 rounded transition-colors",m?"bg-thea-gold/20 text-thea-gold":"hover:bg-thea-gold/10 text-thea-gold-dark"),title:m?"Auto-speak ON":"Auto-speak OFF",children:m?o.jsx(Rn,{className:"w-4 h-4"}):o.jsx(Gl,{className:"w-4 h-4"})})]}),o.jsx("button",{onClick:C,disabled:x,className:U("p-1.5 rounded hover:bg-thea-gold/10 transition-colors",x&&"animate-spin"),title:"Refresh summary",children:o.jsx(Br,{className:"w-4 h-4 text-thea-gold-dark"})})]})]}),(a==null?void 0:a.task)&&o.jsxs("div",{className:"mb-3",children:[o.jsx("h4",{className:"text-xs font-semibold text-thea-gold-dark uppercase tracking-wider mb-1",children:"Current Task"}),o.jsx("p",{className:"text-sm text-thea-gold-bright",children:a.task})]}),(a==null?void 0:a.summary)&&o.jsxs("div",{className:"mb-3",children:[o.jsx("h4",{className:"text-xs font-semibold text-thea-gold-dark uppercase tracking-wider mb-1",children:"Summary"}),o.jsx("p",{className:"text-sm text-thea-gold/90 leading-relaxed",children:a.summary})]}),(a==null?void 0:a.lastAction)&&o.jsxs("div",{className:"mb-3",children:[o.jsx("h4",{className:"text-xs font-semibold text-thea-gold-dark uppercase tracking-wider mb-1",children:"Last Action"}),o.jsx("p",{className:"text-sm text-thea-gold/80",children:a.lastAction})]}),(a==null?void 0:a.pendingItems)&&a.pendingItems.length>0&&o.jsxs("div",{className:"mb-3",children:[o.jsxs("h4",{className:"text-xs font-semibold text-thea-gold-dark uppercase tracking-wider mb-1",children:["Pending (",a.pendingItems.length,")"]}),o.jsxs("ul",{className:"text-sm text-thea-gold/70 space-y-1",children:[a.pendingItems.slice(0,5).map((k,E)=>o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-thea-gold-dark",children:"-"}),o.jsx("span",{children:k})]},`${E}-${k.slice(0,32)}`)),a.pendingItems.length>5&&o.jsxs("li",{className:"text-thea-gold-dark text-xs",children:["...and ",a.pendingItems.length-5," more"]})]})]}),(a==null?void 0:a.hasError)&&o.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-900/20 border border-red-600/30 rounded",children:[o.jsx(Cr,{className:"w-4 h-4 text-red-400"}),o.jsx("span",{className:"text-sm text-red-400",children:"Error detected"})]}),_&&o.jsxs("div",{className:"mt-auto pt-2 text-xs text-thea-gold-dark/50 text-right",children:["Updated ",_.toLocaleTimeString()]})]})}function vh({workerId:e,className:t}){var n,l,h,d;const[r,s]=B.useState(null),[a,g]=B.useState(!0),[x,i]=B.useState(null),c=B.useRef(null),f=B.useCallback(async v=>{if(e){g(!0),i(null);try{const y=await Ee(`/api/metrics/worker/${e}`,{signal:v});if(!y.ok){if(y.status===404){s(null);return}throw new Error("Failed to fetch worker metrics")}const C=await y.json();s(C)}catch(y){if(y.name==="AbortError")return;i(y.message)}finally{g(!1)}}},[e]);B.useEffect(()=>{const v=new AbortController;c.current=v,f(v.signal);const y=setInterval(()=>f(v.signal),1e4);return()=>{v.abort(),c.current=null,clearInterval(y)}},[f]);const _=B.useCallback(()=>{var y;(y=c.current)==null||y.abort();const v=new AbortController;c.current=v,f(v.signal)},[f]);if(a&&!r)return o.jsxs("div",{className:U("thea-card p-4",t),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Et,{className:"w-4 h-4 text-thea-gold"}),o.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright uppercase tracking-wider text-sm",children:"Worker Health"})]}),o.jsx("div",{className:"flex items-center justify-center py-8 text-thea-gold-dark",children:o.jsx(Br,{className:"w-5 h-5 animate-spin"})})]});if(x)return o.jsxs("div",{className:U("thea-card p-4",t),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Et,{className:"w-4 h-4 text-thea-gold"}),o.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright uppercase tracking-wider text-sm",children:"Worker Health"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm",children:[o.jsx(Cr,{className:"w-4 h-4"}),o.jsx("span",{children:x})]}),o.jsx("button",{onClick:_,className:"mt-2 text-xs text-thea-gold-dark hover:text-thea-gold",children:"Retry"})]});const u=(r==null?void 0:r.healthScore)??null,m=((n=r==null?void 0:r.performance)==null?void 0:n.avgLatency)??null,S=((l=r==null?void 0:r.lifecycle)==null?void 0:l.uptime)??null,w=((h=r==null?void 0:r.lifecycle)==null?void 0:h.spawnTime)??null,p=((d=r==null?void 0:r.performance)==null?void 0:d.avgLatency)??null;return o.jsxs("div",{className:U("thea-card",t),children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-thea-gold-dark/30",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Et,{className:"w-4 h-4 text-thea-gold"}),o.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright uppercase tracking-wider text-sm",children:"Worker Health"})]}),o.jsx("button",{onClick:_,className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors",title:"Refresh",children:o.jsx(Br,{className:U("w-3.5 h-3.5",a&&"animate-spin")})})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-thea-gold-dark",children:"Health Score"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(n_,{score:u}),o.jsx(vf,{score:u,size:"md",showScore:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(Fi,{icon:Lt,label:"Response Time",value:m!==null?`${m}ms`:"--",status:o_(m)}),o.jsx(Fi,{icon:gf,label:"Spawn Time",value:w!==null?`${w}ms`:"--",status:a_(w)}),o.jsx(Fi,{icon:er,label:"Uptime",value:c_(S),status:"neutral"}),o.jsx(Fi,{icon:$a,label:"Latency",value:p!==null?`${p}ms`:"--",status:l_(p)})]}),!r&&o.jsx("div",{className:"text-center text-thea-gold-dark text-sm py-2",children:"No metrics available for this worker yet."})]})]})}function n_({score:e}){const t=e!==null?Math.min(100,Math.max(0,e)):0,r=t/100*180-90,s=()=>e===null?"#6b7280":e>=80?"#4ade80":e>=50?"#facc15":"#f87171";return o.jsxs("div",{className:"relative w-16 h-8 overflow-hidden",children:[o.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 64 32",children:[o.jsx("path",{d:"M 4 32 A 28 28 0 0 1 60 32",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"4",strokeLinecap:"round"}),o.jsx("path",{d:"M 4 32 A 28 28 0 0 1 60 32",fill:"none",stroke:s(),strokeWidth:"4",strokeLinecap:"round",strokeDasharray:`${t*.88} 88`,style:{filter:`drop-shadow(0 0 4px ${s()})`}})]}),o.jsx("div",{className:"absolute bottom-0 left-1/2 w-0.5 h-6 bg-thea-gold origin-bottom transition-transform duration-500",style:{transform:`translateX(-50%) rotate(${r}deg)`}}),o.jsx("div",{className:"absolute bottom-0 left-1/2 w-2 h-2 -translate-x-1/2 translate-y-1/2 rounded-full bg-thea-gold shadow-[0_0_6px_rgba(218,165,32,0.6)]"})]})}function Fi({icon:e,label:t,value:r,status:s}){const a={good:"border-green-500/30 bg-green-500/5",warning:"border-yellow-500/30 bg-yellow-500/5",critical:"border-red-500/30 bg-red-500/5",neutral:"border-thea-gold-dark/30 bg-thea-gold/5"},g={good:"text-green-400",warning:"text-yellow-400",critical:"text-red-400",neutral:"text-thea-gold-bright"};return o.jsxs("div",{className:U("p-2.5 rounded border",a[s]||a.neutral),children:[o.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[o.jsx(e,{className:"w-3 h-3 text-thea-gold-dark"}),o.jsx("span",{className:"text-[10px] text-thea-gold-dark uppercase tracking-wider",children:t})]}),o.jsx("span",{className:U("font-mono text-sm font-bold",g[s]||g.neutral),children:r})]})}function o_(e){return e===null?"neutral":e<100?"good":e<500?"warning":"critical"}function a_(e){return e===null?"neutral":e<2e3?"good":e<5e3?"warning":"critical"}function l_(e){return e===null?"neutral":e<50?"good":e<200?"warning":"critical"}function c_(e){return e==null?"--":e<60?`${e}s`:e<3600?`${Math.floor(e/60)}m`:e<86400?`${Math.floor(e/3600)}h`:`${Math.floor(e/86400)}d`}function Lf({onSend:e,onCancel:t,placeholder:r="Speak or type..."}){const[s,a]=B.useState(""),[g,x]=B.useState(!1),[i,c]=B.useState(!1),f=B.useRef(null);B.useEffect(()=>{const S=window.SpeechRecognition||window.webkitSpeechRecognition;if(S){c(!0);const w=new S;w.continuous=!0,w.interimResults=!0,w.lang="en-US",w.onresult=p=>{const n=Array.from(p.results).map(l=>l[0].transcript).join("");a(n)},w.onerror=p=>{console.error("Speech recognition error:",p.error),x(!1)},w.onend=()=>{x(!1)},f.current=w}return()=>{f.current&&f.current.stop()}},[]);const _=()=>{f.current&&(g?(f.current.stop(),x(!1)):(a(""),f.current.start(),x(!0)))},u=()=>{var S;s.trim()&&(e(s.trim()),a(""),g&&((S=f.current)==null||S.stop(),x(!1)))},m=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),u())};return o.jsxs("div",{className:"bg-black/50 border border-thea-gold-dark/30 p-3",children:[o.jsxs("div",{className:"flex items-end gap-2",children:[o.jsx("div",{className:"flex-1",children:o.jsx("textarea",{value:s,onChange:S=>a(S.target.value),onKeyDown:m,placeholder:r,rows:2,className:"w-full bg-thea-nearBlack border border-thea-gold-dark/30 px-3 py-2 text-sm text-white font-mono placeholder:text-thea-gold-dark/50 focus:outline-none focus:border-thea-gold resize-none","aria-label":r})}),o.jsxs("div",{className:"flex flex-col gap-2",children:[i&&o.jsx("button",{onClick:_,className:U("p-3 border transition-colors",g?"bg-thea-maroon/20 border-thea-maroon text-thea-maroon animate-pulse":"bg-thea-gold/10 border-thea-gold/30 text-thea-gold hover:bg-thea-gold/20"),"aria-label":g?"Stop listening":"Start voice input",children:g?o.jsx(Vl,{className:"w-5 h-5"}):o.jsx(Jn,{className:"w-5 h-5"})}),o.jsx("button",{onClick:u,disabled:!s.trim(),className:"p-3 bg-thea-gold/20 border border-thea-gold text-thea-gold hover:bg-thea-gold/30 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Send message",children:o.jsx(R0,{className:"w-5 h-5"})})]})]}),g&&o.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-thea-maroon",role:"status","aria-live":"polite",children:[o.jsx("span",{className:"w-2 h-2 bg-thea-maroon rounded-full animate-pulse"}),"Listening..."]}),t&&o.jsxs("button",{onClick:t,className:"mt-2 flex items-center gap-1 text-xs text-thea-gold-dark hover:text-thea-gold transition-colors",children:[o.jsx(Ke,{className:"w-3 h-3"}),"Cancel"]})]})}function xh({children:e,direction:t="horizontal",sizes:r,minSize:s=100,onSizesChange:a,className:g=""}){const x=Array.isArray(e)?e:[e],i=x.length,c=Array(i).fill(100/i),[f,_]=B.useState(r||c),u=B.useRef(null),m=B.useRef(!1),S=B.useRef(null),w=B.useRef(null),p=B.useRef(null);B.useEffect(()=>{if(i!==f.length){const v=Array(i).fill(100/i);_(v)}},[i]);const n=B.useCallback((v,y)=>{y.preventDefault(),m.current=!0,S.current=v,w.current=t==="horizontal"?y.clientX:y.clientY,p.current=[...f],document.body.style.cursor=t==="horizontal"?"col-resize":"row-resize",document.body.style.userSelect="none"},[t,f]),l=B.useCallback(v=>{if(!m.current||!u.current)return;const C=u.current.getBoundingClientRect(),L=t==="horizontal"?C.width:C.height,b=t==="horizontal"?v.clientX:v.clientY,k=w.current,E=(b-k)/L*100,A=S.current,R=[...p.current];let T=R[A]+E,O=R[A+1]-E;const H=s/L*100;T<H&&(O+=T-H,T=H),O<H&&(T+=O-H,O=H),R[A]=T,R[A+1]=O,_(R),a==null||a(R)},[t,s,a]),h=B.useCallback(()=>{m.current=!1,S.current=null,document.body.style.cursor="",document.body.style.userSelect=""},[]);if(B.useEffect(()=>(document.addEventListener("mousemove",l),document.addEventListener("mouseup",h),()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",h)}),[l,h]),i<=1)return o.jsx("div",{className:U("w-full h-full",g),children:x[0]});const d=t==="horizontal";return o.jsx("div",{ref:u,className:U("flex w-full h-full",d?"flex-row":"flex-col",g),children:x.map((v,y)=>o.jsxs("div",{className:"contents",children:[o.jsx("div",{className:"overflow-hidden",style:{[d?"width":"height"]:`${f[y]}%`,flexShrink:0},children:v}),y<i-1&&o.jsxs("div",{className:U("flex-shrink-0 relative group",d?"w-1 cursor-col-resize":"h-1 cursor-row-resize","bg-thea-gold-dark/30 hover:bg-thea-gold/50 transition-colors"),onMouseDown:C=>n(y,C),children:[o.jsx("div",{className:U("absolute",d?"inset-y-0 -left-1 -right-1":"inset-x-0 -top-1 -bottom-1")}),o.jsx("div",{className:U("absolute bg-thea-gold/60 opacity-0 group-hover:opacity-100 transition-opacity",d?"inset-y-0 left-0 right-0":"inset-x-0 top-0 bottom-0")})]})]},(v==null?void 0:v.key)||`pane-${y}`))})}function Po({children:e,columns:t=2,rows:r=2,gap:s=4,className:a=""}){const g=Array.isArray(e)?e:[e];return o.jsx("div",{className:U("w-full h-full grid",a),style:{gridTemplateColumns:`repeat(${t}, 1fr)`,gridTemplateRows:`repeat(${r}, 1fr)`,gap:`${s}px`},children:g.map((x,i)=>o.jsx("div",{className:"overflow-hidden min-h-0 min-w-0",children:x},(x==null?void 0:x.key)||`grid-${i}`))})}function h_({paneId:e,workerId:t,onWorkerChange:r,onClose:s,onMaximize:a,isMaximized:g=!1,isActive:x,showCloseButton:i=!0,className:c=""}){const{workers:f,outputs:_,sendRawInput:u,resizeTerminal:m,activePaneId:S,setActivePaneId:w,updateWorkerSettings:p}=Qe(),[n,l]=B.useState("terminal"),[h,d]=B.useState(!1),[v,y]=B.useState(!1),[C,L]=B.useState(null),[b,k]=B.useState(null),[E,A]=B.useState(null),R=f.find(I=>I.id===t),T=_[t]||"",O=x!==void 0?x:S===e,H=B.useRef(O);B.useEffect(()=>{H.current=O},[O]);const $=()=>{w&&w(e)},F=B.useCallback(async I=>{if(!I||!I.type.startsWith("image/")){L("error"),setTimeout(()=>L(null),2e3);return}L("uploading");const W=new FormData;W.append("screenshot",I),W.append("workerId",t||"unknown");try{const V=await Ee("/api/uploads/screenshot",{method:"POST",body:W});if(!V.ok)throw new Error("Upload failed");const Z=await V.json();k(Z.filename),L("success"),setTimeout(()=>L(null),3e3)}catch(V){console.error("Upload error:",V),L("error"),setTimeout(()=>L(null),2e3)}},[t]),N=B.useCallback(I=>{I.preventDefault(),I.stopPropagation(),y(!0)},[]),D=B.useCallback(I=>{I.preventDefault(),I.stopPropagation(),y(!1)},[]),P=B.useCallback(I=>{var V;I.preventDefault(),I.stopPropagation(),y(!1);const W=(V=I.dataTransfer)==null?void 0:V.files;W&&W.length>0&&F(W[0])},[F]);return B.useEffect(()=>{const I=W=>{var Z;if(!H.current)return;const V=(Z=W.clipboardData)==null?void 0:Z.items;if(V){for(const te of V)if(te.type.startsWith("image/")){const K=te.getAsFile();if(K){F(K);break}}}};return document.addEventListener("paste",I),()=>document.removeEventListener("paste",I)},[F]),o.jsxs("div",{className:U("h-full flex flex-col bg-black/20 border rounded overflow-hidden transition-colors relative",O?"border-thea-gold/60 shadow-gold-sm":"border-thea-gold-dark/30",v&&"border-thea-gold border-2",c),onClick:$,onDragOver:N,onDragLeave:D,onDrop:P,children:[v&&o.jsx("div",{className:"absolute inset-0 z-50 bg-thea-gold/20 backdrop-blur-sm flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(cf,{className:"w-12 h-12 text-thea-gold-bright mx-auto mb-2"}),o.jsx("p",{className:"text-thea-gold-bright font-rajdhani text-lg",children:"Drop image to upload"})]})}),C&&o.jsxs("div",{className:U("absolute top-12 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded shadow-lg flex items-center gap-2 text-sm font-mono",C==="uploading"&&"bg-thea-gold/90 text-black",C==="success"&&"bg-green-600 text-white",C==="error"&&"bg-red-600 text-white"),children:[C==="uploading"&&o.jsxs(o.Fragment,{children:[o.jsx(Ln,{className:"w-4 h-4 animate-pulse"}),"Uploading..."]}),C==="success"&&o.jsxs(o.Fragment,{children:[o.jsx(Gn,{className:"w-4 h-4"}),o.jsx("span",{className:"truncate max-w-[200px]",children:b})]}),C==="error"&&o.jsxs(o.Fragment,{children:[o.jsx(Cr,{className:"w-4 h-4"}),"Upload failed"]})]}),o.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5 bg-black/40 border-b border-thea-gold-dark/20 flex-shrink-0",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>d(!h),className:"flex items-center gap-1.5 px-2 py-1 text-xs font-rajdhani text-thea-gold hover:text-thea-gold-bright transition-colors rounded hover:bg-white/5",children:[o.jsx("span",{className:U("w-1.5 h-1.5 rounded-full",(R==null?void 0:R.status)==="running"?"bg-green-500":"bg-thea-gold-dark")}),o.jsx("span",{className:"truncate max-w-[120px]",children:(R==null?void 0:R.label)||"Select Worker"}),o.jsx(yt,{className:"w-3 h-3"})]}),h&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),o.jsx("div",{className:"absolute top-full left-0 mt-1 z-20 min-w-[200px] max-h-[300px] overflow-auto bg-thea-nearBlack border border-thea-gold-dark/50 rounded shadow-lg",children:f.length===0?o.jsx("div",{className:"px-3 py-2 text-xs text-thea-gold-dark",children:"No workers available"}):f.map(I=>o.jsxs("button",{onClick:()=>{r==null||r(I.id),d(!1)},className:U("w-full text-left px-3 py-2 text-xs hover:bg-thea-gold/10 transition-colors",I.id===t?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold"),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:U("w-1.5 h-1.5 rounded-full flex-shrink-0",I.status==="running"?"bg-green-500":"bg-thea-gold-dark")}),o.jsx("span",{className:"truncate",children:I.label})]}),o.jsx("div",{className:"text-[10px] text-thea-gold-dark ml-3.5 truncate",children:I.project})]},I.id))})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs("div",{className:"flex items-center bg-black/30 rounded border border-thea-gold-dark/20",children:[o.jsx("button",{onClick:()=>l("terminal"),className:U("p-1 rounded-l transition-colors",n==="terminal"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Terminal View",children:o.jsx(ro,{className:"w-3 h-3"})}),o.jsx("button",{onClick:()=>l("summary"),className:U("p-1 rounded-r transition-colors",n==="summary"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Summary View",children:o.jsx(Ul,{className:"w-3 h-3"})})]}),R&&o.jsx("div",{className:"flex items-center",children:o.jsx("button",{onClick:()=>{R.autoAcceptPaused?p(R.id,{autoAcceptPaused:!1}):p(R.id,{autoAccept:!R.autoAccept})},className:U("p-1 rounded transition-colors relative",R.autoAccept?R.autoAcceptPaused?"bg-yellow-600/30 text-yellow-500 hover:bg-yellow-600/40":"bg-green-600/30 text-green-500 hover:bg-green-600/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:R.autoAccept?R.autoAcceptPaused?"Auto-accept PAUSED (click to resume)":"Auto-accept ON (click to disable)":"Auto-accept OFF (click to enable)",children:R.autoAccept?R.autoAcceptPaused?o.jsx(Nt,{className:"w-3 h-3"}):o.jsx(Lt,{className:"w-3 h-3"}):o.jsx(Wa,{className:"w-3 h-3"})})}),R&&o.jsx("button",{onClick:()=>{p(R.id,{ralphMode:!R.ralphMode})},className:U("p-1 rounded transition-colors",R.ralphMode?"bg-purple-600/30 text-purple-400 hover:bg-purple-600/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:R.ralphMode?"Ralph mode ON - Worker will signal completion via API":"Ralph mode OFF - Enable autonomous completion signaling",children:o.jsx($r,{className:"w-3 h-3"})}),R&&Ut(R.label).prefix==="GENERAL"&&o.jsx("button",{onClick:()=>{R.bulldozeMode&&R.bulldozePaused?p(R.id,{bulldozePaused:!1}):R.bulldozeMode?p(R.id,{bulldozeMode:!1}):A(R)},className:U("p-1 rounded transition-colors",R.bulldozeMode?R.bulldozePaused?"bg-yellow-600/30 text-yellow-400 hover:bg-yellow-600/40":"bg-amber-600/30 text-amber-300 hover:bg-amber-600/40 shadow-[0_0_6px_rgba(245,158,11,0.2)]":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:R.bulldozeMode?R.bulldozePaused?`Bulldoze PAUSED (${R.bulldozePauseReason||"unknown"})  click to resume`:`Bulldoze ON (${R.bulldozeCyclesCompleted||0} cycles)  click to disable`:"Bulldoze OFF  Enable continuous autonomous work",children:R.bulldozeMode&&R.bulldozePaused?o.jsx(ql,{className:"w-3 h-3"}):o.jsx(Lt,{className:U("w-3 h-3",{"animate-pulse":R.bulldozeMode})})}),o.jsxs("label",{className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors cursor-pointer",title:"Upload screenshot (or drag & drop, or paste)",children:[o.jsx(Ln,{className:"w-3 h-3"}),o.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:I=>{var V;const W=(V=I.target.files)==null?void 0:V[0];W&&F(W),I.target.value=""}})]}),a&&o.jsx("button",{onClick:a,className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors",title:g?"Restore":"Maximize",children:g?o.jsx(S0,{className:"w-3 h-3"}):o.jsx(Qn,{className:"w-3 h-3"})}),i&&s&&o.jsx("button",{onClick:s,className:"p-1 text-thea-gold-dark hover:text-red-400 transition-colors",title:"Close Pane",children:o.jsx(Ke,{className:"w-3 h-3"})})]})]}),o.jsx("div",{className:"flex-1 min-h-0 p-1",children:!t||!R?o.jsx("div",{className:"h-full flex items-center justify-center text-thea-gold-dark text-sm",children:"Select a worker to display"}):n==="terminal"?o.jsx(kf,{workerId:t,output:T,onRawInput:I=>u(t,I),onResize:(I,W)=>m(t,I,W),className:"h-full w-full"}):o.jsx("div",{className:"h-full bg-black/30 rounded overflow-auto p-2",children:o.jsx(Ef,{workerId:t,className:"h-full"})})}),E&&o.jsx(jn,{isOpen:!!E,onClose:()=>A(null),onConfirm:({mission:I,backlog:W,standingOrders:V})=>{p(E.id,{bulldozeMode:!0,bulldozeMission:I,bulldozeBacklog:W,bulldozeStandingOrders:V}),A(null)},workerLabel:E.label})]})}function d_({className:e=""}){const{layoutMode:t,changeLayoutMode:r,addPane:s,panes:a}=Qe(),g=[{mode:Me.SINGLE,icon:Qn,label:"Single"},{mode:Me.SPLIT_H,icon:d0,label:"Split H"},{mode:Me.SPLIT_V,icon:L0,label:"Split V"},{mode:Me.GRID_2X2,icon:m0,label:"22"},{mode:Me.GRID_3X2,icon:_0,label:"32"}];return o.jsxs("div",{className:U("flex items-center gap-1",e),children:[g.map(({mode:x,icon:i,label:c})=>o.jsxs("button",{onClick:()=>r(x),className:U("flex items-center gap-1.5 px-2 py-1 text-xs font-rajdhani rounded transition-all",t===x?"bg-thea-gold/20 text-thea-gold-bright border border-thea-gold/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5 border border-transparent"),title:c,children:[o.jsx(i,{className:"w-3.5 h-3.5"}),o.jsx("span",{className:"hidden sm:inline",children:c})]},x)),o.jsxs("button",{onClick:()=>s(),className:"flex items-center gap-1 px-2 py-1 text-xs font-rajdhani text-thea-gold-dark hover:text-thea-gold hover:bg-white/5 rounded transition-colors border border-transparent",title:"Add Pane",children:[o.jsx(Zn,{className:"w-3.5 h-3.5"}),o.jsx("span",{className:"hidden sm:inline",children:"Add"})]}),o.jsxs("span",{className:"text-[10px] text-thea-gold-dark/50 ml-2",children:[a.length," pane",a.length!==1?"s":""]})]})}function u_({onBack:e}){const{layoutMode:t,panes:r,activePaneId:s,paneSizes:a,setPaneSizes:g,setPaneWorker:x,removePane:i,changeLayoutMode:c,sendInput:f,workers:_}=Qe(),u=r.find(p=>p.id===s)||r[0],m=u!=null&&u.workerId?_.find(p=>p.id===u.workerId):null,S=(p,n)=>o.jsx(h_,{paneId:p.id,workerId:p.workerId,onWorkerChange:l=>x(p.id,l),onClose:()=>i(p.id),isActive:s===p.id,showCloseButton:r.length>1,className:"h-full"},p.id),w=()=>{switch(t){case Me.SINGLE:return o.jsx("div",{className:"h-full p-2",children:r[0]&&S(r[0])});case Me.SPLIT_H:return o.jsx("div",{className:"h-full p-2",children:o.jsx(xh,{direction:"horizontal",sizes:a,onSizesChange:g,minSize:200,children:r.slice(0,2).map((l,h)=>S(l))})});case Me.SPLIT_V:return o.jsx("div",{className:"h-full p-2",children:o.jsx(xh,{direction:"vertical",sizes:a,onSizesChange:g,minSize:100,children:r.slice(0,2).map((l,h)=>S(l))})});case Me.GRID_2X2:return o.jsx("div",{className:"h-full p-2",children:o.jsx(Po,{columns:2,rows:2,gap:8,children:r.slice(0,4).map((l,h)=>S(l))})});case Me.GRID_3X2:return o.jsx("div",{className:"h-full p-2",children:o.jsx(Po,{columns:3,rows:2,gap:8,children:r.slice(0,6).map((l,h)=>S(l))})});case Me.CUSTOM:default:const p=Math.ceil(Math.sqrt(r.length)),n=Math.ceil(r.length/p);return o.jsx("div",{className:"h-full p-2",children:o.jsx(Po,{columns:p,rows:n,gap:8,children:r.map((l,h)=>S(l))})})}};return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-black/30 border-b border-thea-gold-dark/20 flex-shrink-0",children:[o.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-thea-gold hover:text-thea-gold-bright transition-colors min-h-[44px] min-w-[44px] px-2 -ml-2",children:[o.jsx(di,{className:"w-6 h-6 flex-shrink-0"}),o.jsx("span",{className:"font-rajdhani font-semibold hidden sm:inline",children:"Back to Grid"})]}),o.jsx(d_,{}),o.jsx("div",{className:"text-xs text-thea-gold-dark font-mono",children:(m==null?void 0:m.label)||"No active worker"})]}),o.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:w()}),m&&o.jsx("div",{className:"p-4 border-t border-thea-gold-dark/20 flex-shrink-0",children:o.jsx(Lf,{onSend:p=>f(m.id,p),placeholder:`Send to ${m.label}...`})})]})}function f_(e){return{healthy:100,active:90,stalled:50,warning:40,critical:20,error:10,stopped:0}[e]??null}function p_(e){if(!e)return"";const t=Date.now()-new Date(e).getTime();if(t<0)return"0s";const r=Math.floor(t/1e3);if(r<60)return`${r}s`;const s=Math.floor(r/60);if(s<60)return`${s}m`;const a=Math.floor(s/60),g=s%60;return a<24?`${a}h ${g}m`:`${Math.floor(a/24)}d ${a%24}h`}const yh={running:"bg-green-500/20 text-green-400 border-green-500/30",stopped:"bg-gray-800 text-gray-400 border-gray-600",error:"bg-red-500/20 text-red-400 border-red-500/30",completed:"bg-blue-500/20 text-blue-400 border-blue-500/30",awaiting_review:"bg-purple-500/20 text-purple-400 border-purple-500/30"};function g_(e){const t=new Map;e.forEach(x=>t.set(x.id,{...x,children:[]}));const r=[];let s=0;e.forEach(x=>{const i=t.get(x.id);x.parentWorkerId&&t.has(x.parentWorkerId)?t.get(x.parentWorkerId).children.push(i):r.push(i)});function a(x,i){return x.length===0?i:Math.max(...x.map(c=>a(c.children,i+1)))}s=r.length>0?a(r,0):0;function g(x){x.sort((i,c)=>new Date(i.createdAt||0)-new Date(c.createdAt||0)),x.forEach(i=>g(i.children))}return g(r),{tree:r,stats:{total:e.length,roots:r.length,maxDepth:s,withChildren:e.filter(x=>{const i=t.get(x.id);return i&&i.children.length>0}).length}}}function m_({ralphStatus:e,ralphProgress:t}){if(!e)return null;const r={in_progress:"text-yellow-400",done:"text-green-400",blocked:"text-red-400",pending:"text-gray-400"}[e]||"text-gray-400";return o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:U("text-[10px] font-mono uppercase",r),children:e==="in_progress"?"working":e}),t!=null&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-16 h-1 bg-black/50 border border-thea-gold-dark/20 overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-thea-gold-bright transition-all duration-500",style:{width:`${Math.min(100,Math.max(0,t))}%`}})}),o.jsxs("span",{className:"text-[10px] font-mono text-thea-gold-dark",children:[t,"%"]})]})]})}const __=B.memo(function e({node:t,depth:r,attachToWorker:s,killWorker:a}){const[g,x]=B.useState(!0),i=t.children&&t.children.length>0,{displayName:c}=Ut(t.label);return o.jsxs("div",{role:"treeitem","aria-expanded":i?g:void 0,"aria-label":t.label,children:[o.jsxs("div",{className:U("group flex items-center gap-2 py-1.5 px-2 hover:bg-thea-gold/5 transition-colors cursor-pointer border-l border-transparent hover:border-thea-gold-dark/30",r>0&&"ml-5"),style:r>0?{paddingLeft:`${r*12}px`}:void 0,children:[o.jsx("button",{onClick:f=>{f.stopPropagation(),x(!g)},className:U("w-5 h-5 flex items-center justify-center flex-shrink-0 transition-colors",i?"text-thea-gold-dark hover:text-thea-gold":"text-transparent"),disabled:!i,"aria-label":i?g?"Collapse":"Expand":void 0,children:i?g?o.jsx(yt,{className:"w-3.5 h-3.5"}):o.jsx(_i,{className:"w-3.5 h-3.5"}):o.jsx(a0,{className:"w-3 h-3 text-thea-gold-dark/30"})}),o.jsx(io,{label:t.label,size:"sm"}),t.backend==="gemini"&&o.jsx("span",{className:"text-[8px] font-mono px-1 py-0.5 bg-blue-500/20 border border-blue-500/30 text-blue-300 flex-shrink-0",children:"G"}),o.jsx("button",{onClick:()=>s(t.id),className:"font-rajdhani font-semibold text-thea-gold-bright hover:text-white truncate text-sm transition-colors text-left min-w-0 flex-shrink",title:t.label,children:c||t.label}),i&&o.jsx("span",{className:"text-[9px] font-mono px-1.5 py-0.5 bg-thea-gold/10 border border-thea-gold-dark/30 text-thea-gold-dark flex-shrink-0",children:t.children.length}),o.jsx("span",{className:U("text-[9px] font-mono uppercase px-1.5 py-0.5 border flex-shrink-0",yh[t.status]||yh.stopped),children:t.status==="awaiting_review"?"review":t.status}),o.jsx(vi,{score:f_(t.health),size:"sm"}),o.jsx("div",{className:"hidden sm:flex flex-shrink-0",children:o.jsx(m_,{ralphStatus:t.ralphStatus,ralphProgress:t.ralphProgress})}),o.jsx("span",{className:"text-[10px] font-mono text-thea-gold-dark/60 flex-shrink-0 hidden md:inline",children:p_(t.createdAt)}),o.jsx("button",{onClick:f=>{f.stopPropagation(),a(t.id)},className:"opacity-0 group-hover:opacity-100 p-1 text-red-400/50 hover:text-red-400 hover:bg-red-500/10 transition-all flex-shrink-0 ml-auto",title:"Kill worker","aria-label":`Kill worker ${c||t.label}`,children:o.jsx(Ke,{className:"w-3.5 h-3.5"})})]}),i&&g&&o.jsx("div",{role:"group",className:"border-l border-thea-gold-dark/15 ml-4",style:{marginLeft:`${(r+1)*12+18}px`},children:t.children.map(f=>o.jsx(e,{node:f,depth:r+1,attachToWorker:s,killWorker:a},f.id))})]})});function v_(){const{workers:e,attachToWorker:t,killWorker:r,selectedProject:s}=Qe(),[a,g]=B.useState(null);B.useEffect(()=>{let f=!1;async function _(){try{const u=await Ee("/api/workers/tree");if(!u.ok)return;const m=await u.json();f||g(m)}catch{}}return _(),()=>{f=!0}},[]);const x=B.useMemo(()=>{const f=s?e.filter(_=>_.project===s):e;return g_(f)},[e,s]),{tree:i,stats:c}=x;return i.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[o.jsx(Ha,{className:"w-12 h-12 text-thea-gold-dark/30 mb-4"}),o.jsx("h3",{className:"font-orbitron text-lg text-thea-gold-dark mb-2",children:"No Worker Hierarchy"}),o.jsx("p",{className:"text-sm text-thea-gold-dark/50 text-center max-w-xs",children:s?`No workers running for ${s}.`:"No workers are currently active."})]}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-4 mb-3 px-2 py-2 bg-black/30 border border-thea-gold-dark/20",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(so,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),o.jsxs("span",{className:"text-xs font-mono text-thea-gold-dark",children:[o.jsx("span",{className:"text-thea-gold",children:c.total})," workers"]})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Ha,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),o.jsxs("span",{className:"text-xs font-mono text-thea-gold-dark",children:[o.jsx("span",{className:"text-thea-gold",children:c.roots})," roots"]})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(b0,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),o.jsxs("span",{className:"text-xs font-mono text-thea-gold-dark",children:["depth ",o.jsx("span",{className:"text-thea-gold",children:c.maxDepth})]})]})]}),o.jsx("div",{role:"tree","aria-label":"Worker hierarchy",className:"border border-thea-gold-dark/20 bg-black/20",children:i.map(f=>o.jsx(__,{node:f,depth:0,attachToWorker:t,killWorker:r},f.id))})]})}function x_(){const{workers:e,outputs:t,projects:r,selectedProject:s,focusedWorker:a,sendInput:g,sendRawInput:x,resizeTerminal:i,detachFromWorker:c,layoutMode:f,changeLayoutMode:_,setPaneWorker:u,panes:m,updateWorkerSettings:S,subscribeToWorkerOutput:w,unsubscribeFromWorkerOutput:p,spawnAutonomousSession:n}=Qe(),[l,h]=B.useState("summary"),[d,v]=B.useState(!1),[y,C]=B.useState(!1),[L,b]=B.useState(!1),[k,E]=B.useState(null),[A,R]=B.useState(null),[T,O]=B.useState(null),[H,$]=B.useState(!1),[F,N]=B.useState("grid"),[D,P]=B.useState(""),[I,W]=B.useState(""),[V,Z]=B.useState(null),[te,K]=B.useState(null),M=B.useCallback(async X=>{if(!X||!X.type.startsWith("image/")){E("error"),setTimeout(()=>E(null),2e3);return}E("uploading");const Y=new FormData;Y.append("screenshot",X),Y.append("workerId",a||"unknown");try{const he=await Ee("/api/uploads/screenshot",{method:"POST",body:Y});if(!he.ok)throw new Error("Upload failed");const we=await he.json();R(we.filename),E("success"),setTimeout(()=>E(null),5e3)}catch(he){console.error("Upload error:",he),E("error"),setTimeout(()=>E(null),2e3)}},[a]),z=B.useCallback(X=>{X.preventDefault(),b(!0)},[]),q=B.useCallback(X=>{X.preventDefault(),b(!1)},[]),G=B.useCallback(X=>{var he;X.preventDefault(),b(!1);const Y=(he=X.dataTransfer)==null?void 0:he.files;Y!=null&&Y[0]&&M(Y[0])},[M]);B.useEffect(()=>{if(!a)return;const X=Y=>{var we;const he=(we=Y.clipboardData)==null?void 0:we.items;if(he){for(const be of he)if(be.type.startsWith("image/")){const rt=be.getAsFile();if(rt){M(rt);break}}}};return document.addEventListener("paste",X),()=>document.removeEventListener("paste",X)},[a,M]);const ne=B.useMemo(()=>s?e.filter(X=>X.project===s):e,[s,e]),se=B.useMemo(()=>{const X={};for(const Y of ne)X[Y.status]=(X[Y.status]||0)+1;return X},[ne]),fe=B.useMemo(()=>{const X=new Set;for(const Y of ne)Y.project&&X.add(Y.project);return[...X].sort()},[ne]),de=B.useMemo(()=>{let X=ne;if(V&&(X=X.filter(Y=>Y.status===V)),te&&(X=X.filter(Y=>Y.project===te)),I.trim()){const Y=I.toLowerCase();X=X.filter(he=>(he.label||"").toLowerCase().includes(Y)||(he.project||"").toLowerCase().includes(Y)||(he.id||"").toLowerCase().includes(Y))}return X},[ne,I,V,te]),ye=B.useRef(a);ye.current=a,B.useEffect(()=>{if(a)return;const X=ne.map(Y=>Y.id);return X.forEach(Y=>w(Y)),()=>{X.forEach(Y=>{Y!==ye.current&&p(Y)})}},[a,ne,w,p]);const re=B.useMemo(()=>a?e.find(X=>X.id===a):null,[a,e]),ce=(X=null)=>{X&&m.length>0&&u(m[0].id,X),v(!0)},Be=B.useMemo(()=>ne.length>0&&ne.every(X=>X.ralphMode),[ne]),Ue=B.useMemo(()=>ne.length>0&&ne.every(X=>X.autoAccept&&!X.autoAcceptPaused),[ne]),ge=B.useCallback(()=>{const X=!Be;ne.forEach(Y=>{S(Y.id,{ralphMode:X})})},[ne,S,Be]),me=B.useCallback(()=>{const X=!Ue;ne.forEach(Y=>{S(Y.id,{autoAccept:X,autoAcceptPaused:!1})})},[ne,S,Ue]);return d?o.jsx(u_,{onBack:()=>v(!1)}):re?o.jsxs("div",{className:U("h-full flex flex-col relative",L&&"ring-2 ring-thea-gold"),onDragOver:z,onDragLeave:q,onDrop:G,children:[L&&o.jsx("div",{className:"absolute inset-0 z-50 bg-thea-gold/20 backdrop-blur-sm flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(cf,{className:"w-16 h-16 text-thea-gold-bright mx-auto mb-3"}),o.jsx("p",{className:"text-thea-gold-bright font-rajdhani text-xl",children:"Drop image to upload"})]})}),k&&o.jsxs("div",{className:U("absolute top-16 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded shadow-lg flex items-center gap-2 text-sm font-mono",k==="uploading"&&"bg-thea-gold/90 text-black",k==="success"&&"bg-green-600 text-white",k==="error"&&"bg-red-600 text-white"),children:[k==="uploading"&&o.jsxs(o.Fragment,{children:[o.jsx(Ln,{className:"w-4 h-4 animate-pulse"}),"Uploading..."]}),k==="success"&&o.jsxs(o.Fragment,{children:[o.jsx(Gn,{className:"w-4 h-4"}),o.jsx("span",{className:"max-w-[300px] truncate",children:A})]}),k==="error"&&o.jsxs(o.Fragment,{children:[o.jsx(Cr,{className:"w-4 h-4"}),"Upload failed"]})]}),o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/30 border-b border-thea-gold-dark/20",children:[o.jsxs("button",{onClick:c,className:"flex items-center gap-2 text-thea-gold hover:text-thea-gold-bright transition-colors min-h-[44px] min-w-[44px] px-2 -ml-2","aria-label":"Back to worker grid",children:[o.jsx(di,{className:"w-6 h-6 flex-shrink-0"}),o.jsx("span",{className:"font-rajdhani font-semibold hidden sm:inline",children:"Back to Grid"})]}),o.jsxs("div",{className:"text-center min-w-0 flex-1 mx-2",children:[o.jsx("h2",{className:"font-orbitron font-bold text-thea-gold-bright uppercase tracking-wider text-sm md:text-base truncate",children:re.label}),o.jsxs("p",{className:"text-[10px] md:text-xs text-thea-gold-dark font-mono truncate",children:[re.project,"  ",re.id]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>C(!y),className:U("p-2 transition-colors",y?"text-thea-gold-bright bg-thea-gold/10 rounded":"text-thea-gold-dark hover:text-thea-gold"),title:y?"Hide Health Panel":"Show Health Panel","aria-label":y?"Hide health panel":"Show health panel","aria-expanded":y,children:o.jsx(Et,{className:"w-5 h-5"})}),o.jsxs("label",{className:"p-2 text-thea-gold-dark hover:text-thea-gold transition-colors cursor-pointer",title:"Upload screenshot","aria-label":"Upload screenshot",children:[o.jsx(Ln,{className:"w-5 h-5"}),o.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:X=>{var Y;(Y=X.target.files)!=null&&Y[0]&&M(X.target.files[0]),X.target.value=""}})]}),o.jsxs("div",{className:"flex items-center gap-1 bg-black/50 rounded border border-thea-gold-dark/30 p-0.5",role:"tablist","aria-label":"View mode",children:[o.jsxs("button",{role:"tab","aria-selected":l==="summary",onClick:()=>h("summary"),className:U("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",l==="summary"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"AI Summary View",children:[o.jsx(Ul,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden md:inline",children:"Summary"})]}),o.jsxs("button",{role:"tab","aria-selected":l==="terminal",onClick:()=>h("terminal"),className:U("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",l==="terminal"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Raw Terminal View",children:[o.jsx(ro,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden md:inline",children:"Terminal"})]})]}),re&&o.jsxs("button",{onClick:()=>{re.autoAcceptPaused?S(re.id,{autoAcceptPaused:!1}):S(re.id,{autoAccept:!re.autoAccept})},className:U("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",re.autoAccept?re.autoAcceptPaused?"bg-yellow-600/30 text-yellow-500 hover:bg-yellow-600/40":"bg-green-600/30 text-green-500 hover:bg-green-600/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:re.autoAccept?re.autoAcceptPaused?"Auto-accept PAUSED (click to resume)":"Auto-accept ON (click to disable)":"Auto-accept OFF (click to enable)",children:[re.autoAccept?re.autoAcceptPaused?o.jsx(Nt,{className:"w-4 h-4"}):o.jsx(Lt,{className:"w-4 h-4"}):o.jsx(Wa,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden md:inline",children:re.autoAccept&&re.autoAcceptPaused?"Paused":"Auto"})]}),re&&o.jsxs("button",{onClick:()=>{S(re.id,{ralphMode:!re.ralphMode})},className:U("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",re.ralphMode?"bg-purple-600/30 text-purple-400 hover:bg-purple-600/40":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:re.ralphMode?"Ralph mode ON - Worker will signal completion via API":"Ralph mode OFF - Enable autonomous completion signaling",children:[o.jsx($r,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden md:inline",children:"Ralph"})]}),re&&Ut(re.label).prefix==="GENERAL"&&o.jsxs("button",{onClick:()=>{re.bulldozeMode&&re.bulldozePaused?S(re.id,{bulldozePaused:!1}):re.bulldozeMode?S(re.id,{bulldozeMode:!1}):O(re)},className:U("flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani transition-all",re.bulldozeMode?re.bulldozePaused?"bg-yellow-600/30 text-yellow-400 border border-yellow-500/40 hover:bg-yellow-600/40":"bg-amber-600/30 text-amber-300 border border-amber-500/60 hover:bg-amber-600/40 shadow-[0_0_8px_rgba(245,158,11,0.25)]":"text-thea-gold-dark hover:text-thea-gold hover:bg-white/5"),title:re.bulldozeMode?re.bulldozePaused?`Bulldoze PAUSED (${re.bulldozePauseReason||"unknown"})  click to resume`:`Bulldoze ON (${re.bulldozeCyclesCompleted||0} cycles)  click to disable`:"Bulldoze OFF  Enable continuous autonomous work",children:[re.bulldozeMode&&re.bulldozePaused?o.jsx(ql,{className:"w-4 h-4"}):o.jsx(Lt,{className:U("w-4 h-4",{"animate-pulse":re.bulldozeMode})}),o.jsx("span",{className:"hidden md:inline",children:re.bulldozeMode&&re.bulldozePaused?"Resume":"Bulldoze"}),re.bulldozeMode&&re.bulldozeCyclesCompleted>0&&o.jsx("span",{className:"text-[10px] opacity-70",children:re.bulldozeCyclesCompleted})]}),re&&re.status==="running"&&o.jsxs("button",{onClick:async()=>{try{await Ee(`/api/workers/${re.id}/interrupt`,{method:"POST"})}catch(X){console.error("Interrupt failed:",X)}},className:"flex items-center gap-1.5 px-2 md:px-3 py-1.5 rounded text-sm font-rajdhani text-red-400/70 hover:text-red-400 hover:bg-red-600/20 transition-all",title:"Send Ctrl+C interrupt to worker",children:[o.jsx(to,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden md:inline",children:"Interrupt"})]})]})]}),(re==null?void 0:re.ralphStatus)&&o.jsxs("div",{className:"px-4 py-2 border-b border-thea-gold-dark/10 flex items-center gap-3",children:[o.jsx("span",{className:U("text-xs font-mono uppercase tracking-wider",{"text-yellow-400":re.ralphStatus==="in_progress","text-green-400":re.ralphStatus==="done","text-red-400":re.ralphStatus==="blocked","text-gray-400":re.ralphStatus==="pending"}),children:re.ralphStatus==="in_progress"?"working":re.ralphStatus}),re.ralphProgress!=null&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex-1 max-w-xs h-1.5 bg-black/50 border border-thea-gold-dark/20 overflow-hidden",role:"progressbar","aria-valuenow":re.ralphProgress,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Task progress",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-thea-gold-bright transition-all duration-500",style:{width:`${Math.min(100,Math.max(0,re.ralphProgress))}%`}})}),o.jsxs("span",{className:"text-xs font-mono text-thea-gold-dark",children:[re.ralphProgress,"%"]})]}),re.ralphCurrentStep&&o.jsx("span",{className:"text-xs text-thea-gold-dark/70 font-mono truncate",title:re.ralphCurrentStep,children:re.ralphCurrentStep})]}),(re==null?void 0:re.waitingAtPrompt)&&o.jsxs("div",{className:"px-4 py-1.5 border-b border-yellow-500/20 bg-yellow-500/5 flex items-center gap-2",children:[o.jsx(Nt,{className:"w-3.5 h-3.5 text-yellow-400 animate-pulse"}),o.jsx("span",{className:"text-xs font-mono text-yellow-400",children:"Waiting at permission prompt"}),!re.autoAccept&&o.jsx("span",{className:"text-[10px] text-yellow-500/60 ml-auto",children:"auto-accept is off"})]}),o.jsxs("div",{className:"flex-1 p-4 min-h-0 flex gap-4 relative",children:[o.jsx("div",{className:U("flex-1 min-w-0",y&&"lg:max-w-[calc(100%-288px)]"),children:l==="summary"?o.jsx("div",{className:"h-full bg-black/30 border border-thea-gold-dark/20 rounded p-4 overflow-auto",children:o.jsx(Ef,{workerId:a,className:"h-full"})}):o.jsx(kf,{workerId:a,output:t[a]||"",onRawInput:X=>x(a,X),onResize:(X,Y)=>i(a,X,Y),className:"h-full w-full"})}),y&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"lg:hidden fixed inset-0 top-16 z-50 bg-black/95 overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"font-orbitron text-thea-gold-bright uppercase tracking-wider",children:"Health Panel"}),o.jsx("button",{onClick:()=>C(!1),className:"p-2 text-thea-gold hover:text-thea-gold-bright","aria-label":"Close health panel",children:o.jsx(di,{className:"w-5 h-5"})})]}),o.jsx(vh,{workerId:a})]}),o.jsx("div",{className:"hidden lg:block w-72 shrink-0",children:o.jsx(vh,{workerId:a})})]})]}),o.jsx("div",{className:"p-4 border-t border-thea-gold-dark/20",children:o.jsx(Lf,{onSend:X=>g(a,X),placeholder:`Send to ${re.label}...`})}),T&&o.jsx(jn,{isOpen:!!T,onClose:()=>O(null),onConfirm:({mission:X,backlog:Y,standingOrders:he})=>{S(T.id,{bulldozeMode:!0,bulldozeMission:X,bulldozeBacklog:Y,bulldozeStandingOrders:he}),O(null)},workerLabel:T.label})]}):o.jsxs("div",{className:"p-4",children:[ne.length>0&&o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:me,className:U("flex items-center gap-2 px-3 py-1.5 text-sm font-rajdhani rounded transition-all border",Ue?"bg-green-600/30 text-green-500 border-green-600/40 hover:bg-green-600/40":"text-thea-gold hover:text-thea-gold-bright bg-black/30 hover:bg-black/50 border-thea-gold-dark/30 hover:border-thea-gold/50"),title:Ue?"Click to disable auto-accept on all workers":"Click to enable auto-accept on all workers",children:[Ue?o.jsx(Lt,{className:"w-4 h-4"}):o.jsx(Wa,{className:"w-4 h-4"}),"Auto-Accept All"]}),o.jsxs("button",{onClick:ge,className:U("flex items-center gap-2 px-3 py-1.5 text-sm font-rajdhani rounded transition-all border",Be?"bg-purple-600/30 text-purple-400 border-purple-600/40 hover:bg-purple-600/40":"text-thea-gold hover:text-thea-gold-bright bg-black/30 hover:bg-black/50 border-thea-gold-dark/30 hover:border-thea-gold/50"),title:Be?"Click to disable Ralph mode on all workers":"Click to enable Ralph mode on all workers",children:[o.jsx($r,{className:"w-4 h-4"}),"Ralph All"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex items-center bg-black/50 rounded border border-thea-gold-dark/30 p-0.5",role:"tablist","aria-label":"Worker view mode",children:[o.jsxs("button",{role:"tab","aria-selected":F==="grid",onClick:()=>N("grid"),className:U("flex items-center gap-1.5 px-2 py-1.5 rounded text-sm font-rajdhani transition-all",F==="grid"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Grid View",children:[o.jsx(Wr,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Grid"})]}),o.jsxs("button",{role:"tab","aria-selected":F==="tree",onClick:()=>N("tree"),className:U("flex items-center gap-1.5 px-2 py-1.5 rounded text-sm font-rajdhani transition-all",F==="tree"?"bg-thea-gold/20 text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Tree View",children:[o.jsx(Ha,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Tree"})]})]}),o.jsxs("button",{onClick:()=>{var X;P(s&&((X=r.find(Y=>Y.name===s))==null?void 0:X.path)||""),$(!0)},className:"flex items-center gap-2 px-3 py-1.5 text-sm font-rajdhani text-amber-300 hover:text-amber-200 bg-amber-500/10 hover:bg-amber-500/20 border border-amber-500/30 hover:border-amber-500/50 rounded transition-all",children:[o.jsx(E0,{className:"w-4 h-4"}),"New Session"]}),o.jsxs("button",{onClick:()=>ce(),className:"flex items-center gap-2 px-3 py-1.5 text-sm font-rajdhani text-thea-gold hover:text-thea-gold-bright bg-black/30 hover:bg-black/50 border border-thea-gold-dark/30 hover:border-thea-gold/50 rounded transition-all",children:[o.jsx(Wr,{className:"w-4 h-4"}),"Multi-Terminal View"]})]})]}),F==="grid"&&ne.length>0&&o.jsxs("div",{className:"mb-4 space-y-3",children:[o.jsxs("div",{className:"relative",role:"search",children:[o.jsx(eo,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-thea-gold-dark pointer-events-none","aria-hidden":"true"}),o.jsx("input",{type:"text",value:I,onChange:X=>W(X.target.value),placeholder:"Search by label, project, or ID...",className:"w-full bg-black/50 border border-thea-gold-dark/30 pl-10 pr-10 py-2 text-sm text-thea-gold placeholder-thea-gold-dark/50 focus:outline-none focus:border-thea-gold/50 transition-colors font-mono","aria-label":"Search workers"}),I&&o.jsx("button",{onClick:()=>W(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-thea-gold-dark hover:text-thea-gold transition-colors","aria-label":"Clear search",children:o.jsx(Ke,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[Object.entries(se).sort(([X],[Y])=>X.localeCompare(Y)).map(([X,Y])=>{const he={running:"bg-green-400/10 border-green-400/30 text-green-400",stopped:"bg-gray-400/10 border-gray-400/30 text-gray-400",error:"bg-red-400/10 border-red-400/30 text-red-400",awaiting_review:"bg-yellow-400/10 border-yellow-400/30 text-yellow-400"};return o.jsxs("button",{onClick:()=>Z(V===X?null:X),className:U("flex items-center gap-1 text-[10px] px-2 py-1 font-mono uppercase tracking-wider transition-all border",V===X?(he[X]||"bg-thea-gold/10 border-thea-gold-dark/30 text-thea-gold")+" shadow-sm":"text-thea-gold-dark border-thea-gold-dark/30 hover:border-thea-gold/50 hover:text-thea-gold"),children:[X," (",Y,")"]},X)}),!s&&fe.length>1&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-thea-gold-dark/30 text-xs",children:"|"}),fe.map(X=>{const Y=ne.filter(he=>he.project===X).length;return o.jsxs("button",{onClick:()=>K(te===X?null:X),className:U("flex items-center gap-1 text-[10px] px-2 py-1 font-mono tracking-wider transition-all border",te===X?"bg-blue-400/10 border-blue-400/30 text-blue-400 shadow-sm":"text-thea-gold-dark border-thea-gold-dark/30 hover:border-thea-gold/50 hover:text-thea-gold"),children:[X," (",Y,")"]},X)})]}),(V||te)&&o.jsxs("button",{onClick:()=>{Z(null),K(null)},className:"text-[10px] px-2 py-1 text-thea-maroon-light hover:text-thea-maroon-light/80 transition-colors flex items-center gap-1",children:[o.jsx(Ke,{className:"w-3 h-3"}),"Clear"]})]})]}),F==="tree"?o.jsx(v_,{}):ne.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[o.jsx("div",{className:"w-16 h-16 mb-4 opacity-30",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",className:"text-thea-gold",children:[o.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),o.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),o.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]})}),o.jsx("h3",{className:"font-orbitron text-lg text-thea-gold-dark mb-2",children:"No Workers Active"}),o.jsx("p",{className:"text-sm text-thea-gold-dark/50 text-center max-w-xs",children:s?`No workers running for ${s}. Start one from the project panel.`:"Select a project and start a worker to begin."})]}):de.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[o.jsx("p",{className:"text-sm text-thea-gold-dark/50 font-mono",children:"No workers match current filters"}),o.jsx("button",{onClick:()=>{W(""),Z(null),K(null)},className:"mt-2 text-xs text-thea-gold hover:text-thea-gold-bright transition-colors font-mono",children:"Clear all filters"})]}):o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:de.map(X=>o.jsx(s_,{worker:X,onOpenInMultiTerminal:()=>ce(X.id)},X.id))}),H&&o.jsx(jn,{isOpen:H,onClose:()=>$(!1),onConfirm:async({mission:X,backlog:Y,standingOrders:he})=>{n&&await n(D,X,Y,he),$(!1)},workerLabel:"",showProjectPicker:!0,projects:r,selectedProject:D,onProjectChange:P})]})}function y_({onExit:e}){const{workers:t}=Qe(),{isListening:r,isSpeaking:s,transcript:a,sttSupported:g,ttsSupported:x,startListening:i,stopListening:c,clearTranscript:f,speak:_,stopSpeaking:u}=Yl(),[m,S]=B.useState(!1),[w,p]=B.useState(null),[n,l]=B.useState([]),h=B.useRef(0),[d,v]=B.useState(!0),[y,C]=B.useState(!0),L=B.useCallback(async R=>{if(!R.trim())return;S(!0);const T=++h.current;l(O=>[...O,{id:T,role:"user",content:R}].slice(-100));try{const H=await(await Ee("/api/voice/command",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:R})})).json();p(H);const $=++h.current;l(F=>[...F,{id:$,role:"assistant",content:H.spoken||"Action completed."}].slice(-100)),d&&H.spoken&&await _(H.spoken),y&&!r&&setTimeout(()=>{i()},500)}catch(O){console.error("Voice command error:",O);const H="Sorry, I had trouble processing that request.",$=++h.current;l(F=>[...F,{id:$,role:"assistant",content:H}].slice(-100)),d&&await _(H)}finally{S(!1)}},[d,_,y,r,i]),b=B.useCallback(()=>{r&&c(),a.trim()&&(L(a),f())},[r,c,a,L,f]),k=B.useCallback(()=>{s&&u(),r?b():(f(),i())},[r,s,u,b,f,i]),E=()=>m?"bg-amber-500":s?"bg-blue-500":r?"bg-red-500":"bg-thea-gold",A=()=>m?"Thinking...":s?"Speaking...":r?"Listening...":"Ready";return o.jsxs("div",{className:"h-full flex flex-col bg-gradient-to-b from-black to-thea-nearBlack",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-thea-gold-dark/20",children:[o.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-thea-gold hover:text-thea-gold-bright transition-colors","aria-label":"Exit voice mode",children:[o.jsx(di,{className:"w-5 h-5"}),o.jsx("span",{className:"font-rajdhani font-semibold",children:"Exit Voice Mode"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>v(!d),className:U("p-2 rounded transition-colors",d?"text-thea-gold-bright bg-thea-gold/20":"text-thea-gold-dark"),title:d?"Disable voice responses":"Enable voice responses",children:d?o.jsx(Rn,{className:"w-5 h-5"}):o.jsx(Gl,{className:"w-5 h-5"})}),o.jsx("div",{className:"px-3 py-1 bg-black/50 rounded border border-thea-gold-dark/30",children:o.jsxs("span",{className:"text-xs text-thea-gold-dark",children:[t.length," worker",t.length!==1?"s":""]})})]})]}),o.jsx("div",{className:"flex-1 overflow-auto p-6",children:o.jsxs("div",{className:"max-w-2xl mx-auto space-y-4",children:[n.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Ul,{className:"w-16 h-16 mx-auto mb-4 text-thea-gold-dark/30"}),o.jsx("h2",{className:"text-xl font-orbitron text-thea-gold-dark mb-2",children:"Voice Mode Active"}),o.jsx("p",{className:"text-sm text-thea-gold-dark/50 max-w-sm mx-auto",children:"Tap the microphone to speak. You can ask about worker status, start new workers, approve or reject pending actions, and more."}),o.jsxs("div",{className:"mt-6 space-y-2 text-left max-w-sm mx-auto",children:[o.jsx("p",{className:"text-xs text-thea-gold-dark/70",children:"Try saying:"}),o.jsxs("ul",{className:"text-xs text-thea-gold-dark/50 space-y-1",children:[o.jsx("li",{children:`"What's the status of my workers?"`}),o.jsx("li",{children:'"Start a new worker on strategos"'}),o.jsx("li",{children:'"Yes, approve that"'}),o.jsx("li",{children:'"Send help me with testing to the worker"'})]})]})]}):n.map(R=>o.jsxs("div",{className:U("p-4 rounded-lg",R.role==="user"?"bg-thea-gold/10 border border-thea-gold/20 ml-8":"bg-black/50 border border-thea-gold-dark/20 mr-8"),children:[o.jsx("div",{className:"text-xs text-thea-gold-dark/50 mb-1",children:R.role==="user"?"You":"Strategos"}),o.jsx("p",{className:"text-sm text-white",children:R.content})]},R.id)),a&&o.jsxs("div",{className:"p-4 rounded-lg bg-thea-gold/5 border border-thea-gold/30 ml-8 animate-pulse",children:[o.jsx("div",{className:"text-xs text-thea-gold/70 mb-1",children:"You (listening...)"}),o.jsx("p",{className:"text-sm text-thea-gold",children:a})]}),m&&o.jsx("div",{className:"p-4 rounded-lg bg-black/50 border border-amber-500/20 mr-8",children:o.jsxs("div",{className:"flex items-center gap-2 text-amber-500",children:[o.jsx(nt,{className:"w-4 h-4 animate-spin"}),o.jsx("span",{className:"text-sm",children:"Processing..."})]})})]})}),o.jsx("div",{className:"p-6 border-t border-thea-gold-dark/20",children:o.jsxs("div",{className:"max-w-2xl mx-auto flex flex-col items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",role:"status","aria-live":"polite",children:[o.jsx("span",{className:U("w-2 h-2 rounded-full",E())}),o.jsx("span",{className:"text-sm text-thea-gold-dark",children:A()})]}),o.jsx("button",{onClick:k,disabled:m||!g,"aria-label":r?"Stop listening and send":"Start listening",className:U("w-24 h-24 rounded-full flex items-center justify-center transition-all","border-4",r?"bg-red-500/20 border-red-500 text-red-400 animate-pulse scale-110":s?"bg-blue-500/20 border-blue-500 text-blue-400":"bg-thea-gold/10 border-thea-gold text-thea-gold hover:bg-thea-gold/20 hover:scale-105","disabled:opacity-50 disabled:cursor-not-allowed"),children:r?o.jsx(Vl,{className:"w-10 h-10"}):o.jsx(Jn,{className:"w-10 h-10"})}),o.jsx("p",{className:"text-xs text-thea-gold-dark/50 text-center",children:r?"Tap to stop and send":s?"Speaking response...":"Tap to start listening"}),!g&&o.jsx("p",{className:"text-xs text-red-400 text-center",children:"Speech recognition not supported in this browser"}),!x&&d&&o.jsx("p",{className:"text-xs text-amber-400 text-center",children:"Speech synthesis not available"})]})})]})}const bh={worker_started:{icon:df,color:"text-status-success",glow:"shadow-[0_0_10px_rgba(78,201,176,0.5)]"},worker_stopped:{icon:to,color:"text-thea-maroon-light",glow:"shadow-red-sm"},error:{icon:Nt,color:"text-status-error",glow:"shadow-[0_0_10px_rgba(244,135,113,0.5)]"}};function b_({className:e=""}){const{activity:t}=Qe(),r=s=>new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return o.jsxs("div",{className:U("bg-gradient-to-b from-thea-nearBlack/80 to-black/60 flex flex-col h-full",e),role:"log","aria-label":"Activity feed","aria-live":"polite",children:[o.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border-b border-thea-gold-dark/30 bg-black/40 shrink-0",children:[o.jsx(Et,{className:"w-4 h-4 text-thea-gold animate-pulse-gold"}),o.jsx("h3",{className:"font-orbitron text-xs uppercase tracking-[0.15em] text-thea-gold-bright text-glow-gold-sm",children:"Activity"}),o.jsx("span",{className:"text-[10px] font-mono text-thea-gold-dark ml-auto",children:t.length})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:t.length===0?o.jsx("div",{className:"px-4 py-6 text-center",children:o.jsx("span",{className:"text-thea-gold-dark/50 text-sm font-mono",children:"// No activity yet"})}):o.jsx("ul",{className:"divide-y divide-thea-gold-dark/10",children:t.slice(0,50).map(s=>{const a=bh[s.type]||bh.error,g=a.icon;return o.jsx("li",{className:"px-4 py-3 hover:bg-thea-gold/5 transition-colors group",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:U("p-1 rounded-sm",a.glow),children:o.jsx(g,{className:U("w-4 h-4 flex-shrink-0",a.color)})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm text-white/90 truncate font-rajdhani",children:s.message}),o.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[o.jsx("span",{className:"text-[10px] text-thea-gold-deep font-mono tracking-wider",children:r(s.timestamp)}),o.jsx("span",{className:"thea-tag text-[9px] py-0.5 px-1.5",children:s.project})]})]})]})},s.id)})})})]})}const wh={proposed:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",accepted:"bg-green-500/20 text-green-400 border-green-500/30",deprecated:"bg-red-500/20 text-red-400 border-red-500/30",superseded:"bg-gray-500/20 text-gray-400 border-gray-500/30"};function w_({className:e,limit:t=5}){const[r,s]=B.useState([]),[a,g]=B.useState(!0),[x,i]=B.useState(null),[c,f]=B.useState(null),[_,u]=B.useState(null),m=B.useCallback(async n=>{g(!0),i(null);try{const l=await Ee(`/api/adrs?limit=${t}`,{signal:n});if(!l.ok)throw new Error("Failed to fetch ADRs");const h=await l.json();s(h)}catch(l){if(l.name==="AbortError")return;i(l.message)}finally{g(!1)}},[t]),S=async n=>{try{const l=await Ee(`/api/adrs/${n}`);if(!l.ok)throw new Error("Failed to fetch ADR");const h=await l.json();u(h)}catch(l){console.error("Error fetching ADR detail:",l)}};B.useEffect(()=>{const n=new AbortController;return m(n.signal),()=>n.abort()},[m]);const w=B.useCallback(()=>m(),[m]),p=n=>{c===n?(f(null),u(null)):(f(n),S(n))};return a&&r.length===0?o.jsxs("div",{className:U("thea-panel p-4",e),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(qs,{className:"w-4 h-4 text-thea-gold"}),o.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright uppercase tracking-wider text-sm",children:"Architecture Decisions"})]}),o.jsx("div",{className:"flex items-center justify-center py-8 text-thea-gold-dark",children:o.jsx(Br,{className:"w-5 h-5 animate-spin"})})]}):x?o.jsxs("div",{className:U("thea-panel p-4",e),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(qs,{className:"w-4 h-4 text-thea-gold"}),o.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright uppercase tracking-wider text-sm",children:"Architecture Decisions"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm",children:[o.jsx(Cr,{className:"w-4 h-4"}),o.jsx("span",{children:x})]}),o.jsx("button",{onClick:w,className:"mt-2 text-xs text-thea-gold-dark hover:text-thea-gold",children:"Retry"})]}):o.jsxs("div",{className:U("thea-panel",e),children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-thea-gold-dark/30",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qs,{className:"w-4 h-4 text-thea-gold"}),o.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright uppercase tracking-wider text-sm",children:"Architecture Decisions"}),o.jsxs("span",{className:"text-xs text-thea-gold-dark",children:["(",r.length,")"]})]}),o.jsx("button",{onClick:w,className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors",title:"Refresh",children:o.jsx(Br,{className:U("w-3.5 h-3.5",a&&"animate-spin")})})]}),o.jsx("div",{className:"divide-y divide-thea-gold-dark/20",children:r.length===0?o.jsx("div",{className:"p-4 text-center text-thea-gold-dark text-sm",children:"No architecture decisions recorded yet."}):r.map(n=>{var l,h,d,v;return o.jsxs("div",{className:"group",children:[o.jsxs("button",{onClick:()=>p(n.id),className:"w-full px-4 py-3 flex items-start gap-3 hover:bg-thea-gold/5 transition-colors text-left",children:[o.jsx(_i,{className:U("w-4 h-4 text-thea-gold-dark mt-0.5 transition-transform",c===n.id&&"rotate-90")}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsxs("span",{className:"font-mono text-xs text-thea-gold-dark",children:["ADR-",n.id]}),o.jsx("span",{className:U("px-1.5 py-0.5 text-[10px] font-mono uppercase rounded border",wh[n.status]||wh.proposed),children:n.status})]}),o.jsx("h4",{className:"text-sm text-thea-gold-bright font-medium truncate group-hover:text-thea-gold",children:n.title}),n.date&&o.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-thea-gold-dark",children:[o.jsx(h0,{className:"w-3 h-3"}),o.jsx("span",{children:n.date})]})]})]}),c===n.id&&o.jsx("div",{className:"px-4 pb-4 pl-11 border-t border-thea-gold-dark/10 bg-black/20",children:_?o.jsxs("div",{className:"pt-3 space-y-3",children:[((h=(l=_.frontmatter)==null?void 0:l.tags)==null?void 0:h.length)>0&&o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx(pf,{className:"w-3 h-3 text-thea-gold-dark"}),_.frontmatter.tags.map(y=>o.jsx("span",{className:"px-2 py-0.5 text-[10px] bg-thea-gold/10 text-thea-gold-dark rounded border border-thea-gold-dark/20",children:y},y))]}),((v=(d=_.frontmatter)==null?void 0:d.deciders)==null?void 0:v.length)>0&&o.jsxs("div",{className:"flex items-center gap-2 text-xs text-thea-gold-dark",children:[o.jsx(so,{className:"w-3 h-3"}),o.jsx("span",{children:_.frontmatter.deciders.join(", ")})]}),_.context&&o.jsxs("div",{className:"text-xs text-thea-gold-dark/80 leading-relaxed",children:[o.jsx("span",{className:"font-semibold text-thea-gold-dark",children:"Context: "}),_.context.slice(0,300),_.context.length>300&&"..."]}),_.decision&&o.jsxs("div",{className:"text-xs text-thea-gold-dark/80 leading-relaxed",children:[o.jsx("span",{className:"font-semibold text-thea-gold-dark",children:"Decision: "}),_.decision.slice(0,200),_.decision.length>200&&"..."]})]}):o.jsx("div",{className:"pt-3 flex items-center justify-center",children:o.jsx(Br,{className:"w-4 h-4 text-thea-gold-dark animate-spin"})})})]},n.id)})})]})}function S_({className:e}){const{connected:t,systemMetrics:r,subscribeToMetrics:s,unsubscribeFromMetrics:a}=Qe();if(B.useEffect(()=>{if(t)return s(),()=>a()},[t,s,a]),!r)return o.jsxs("div",{className:U("thea-card",e),children:[o.jsx(Sh,{}),o.jsx("div",{className:"flex items-center justify-center py-12 text-thea-gold-dark",children:o.jsx(Br,{className:"w-5 h-5 animate-spin"})})]});const x=(S=>{if(!S)return null;switch(S.toLowerCase()){case"healthy":return 100;case"degraded":return 60;case"critical":return 30;case"unknown":return null;default:return null}})(r==null?void 0:r.healthStatus),i=(r==null?void 0:r.activeWorkers)??0,c=(r==null?void 0:r.totalSpawns)??0,f=(r==null?void 0:r.avgSpawnTime)??null,_=(r==null?void 0:r.errorRate)??0,u=(r==null?void 0:r.uptime)??null,m=(r==null?void 0:r.memoryUsage)??null;return o.jsxs("div",{className:U("thea-card",e),children:[o.jsx(Sh,{}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between pb-3 border-b border-thea-gold-dark/20",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Et,{className:"w-4 h-4 text-thea-gold"}),o.jsx("span",{className:"text-sm text-thea-gold-dark",children:"System Health"})]}),o.jsx(vf,{score:x,size:"md",showScore:!0})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx(Bo,{icon:so,label:"Active",value:i,status:i>0?"active":"idle"}),o.jsx(Bo,{icon:uf,label:"Total Spawns",value:c,status:"neutral"}),o.jsx(Bo,{icon:Nt,label:"Errors",value:`${(_*100).toFixed(1)}%`,status:C_(_)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-[10px] text-thea-gold-dark uppercase tracking-wider font-mono",children:"Performance"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx(Ch,{icon:gf,label:"Avg Spawn",value:f!==null?`${f}ms`:"--",trend:k_(f)}),o.jsx(Ch,{icon:Lt,label:"Memory",value:m!==null?`${m}%`:"--",trend:E_(m)})]})]}),u!==null&&o.jsx("div",{className:"pt-2 border-t border-thea-gold-dark/20",children:o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsx("span",{className:"text-thea-gold-dark",children:"Server Uptime"}),o.jsx("span",{className:"font-mono text-thea-gold-bright",children:L_(u)})]})}),o.jsx("div",{className:"pt-2 border-t border-thea-gold-dark/20",children:o.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-thea-gold-dark",children:[o.jsx(vi,{score:t?100:0,size:"sm"}),o.jsx("span",{children:t?"Real-time updates active":"Connecting..."})]})})]})]})}function Sh(){return o.jsx("div",{className:"flex items-center justify-between p-4 border-b border-thea-gold-dark/30",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(nf,{className:"w-4 h-4 text-thea-gold"}),o.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright uppercase tracking-wider text-sm",children:"System Metrics"})]})})}function Bo({icon:e,label:t,value:r,status:s}){const a={active:"bg-green-500/20 text-green-400 border-green-500/30",warning:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",critical:"bg-red-500/20 text-red-400 border-red-500/30",idle:"bg-thea-gold/10 text-thea-gold-dark border-thea-gold-dark/30",neutral:"bg-thea-gold/5 text-thea-gold-dark border-thea-gold-dark/20"};return o.jsxs("div",{className:U("flex items-center gap-1.5 px-2 py-1 rounded border text-xs font-mono",a[s]||a.neutral),children:[o.jsx(e,{className:"w-3 h-3"}),o.jsxs("span",{className:"text-[10px] opacity-70",children:[t,":"]}),o.jsx("span",{className:"font-bold",children:r})]})}function Ch({icon:e,label:t,value:r,trend:s}){const a={up:o.jsx($a,{className:"w-3 h-3 text-green-400"}),down:o.jsx($a,{className:"w-3 h-3 text-red-400 rotate-180"}),stable:null};return o.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/30 rounded border border-thea-gold-dark/20",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(e,{className:"w-3 h-3 text-thea-gold-dark"}),o.jsx("span",{className:"text-[10px] text-thea-gold-dark",children:t})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"font-mono text-xs text-thea-gold-bright",children:r}),a[s]]})]})}function C_(e){return e==null?"neutral":e<.01?"active":e<.05?"warning":"critical"}function k_(e){return e===null?"stable":e<2e3?"up":e>5e3?"down":"stable"}function E_(e){return e===null?"stable":e<50?"up":e>80?"down":"stable"}function L_(e){if(e==null)return"--";const t=Math.floor(e/86400),r=Math.floor(e%86400/3600),s=Math.floor(e%3600/60);return t>0?`${t}d ${r}h`:r>0?`${r}h ${s}m`:`${s}m`}const kh={success:{icon:Gn,bgClass:"bg-status-success/20 border-status-success",textClass:"text-status-success",glowClass:"shadow-[0_0_20px_rgba(78,201,176,0.4)]"},error:{icon:Cr,bgClass:"bg-status-error/20 border-status-error",textClass:"text-status-error",glowClass:"shadow-[0_0_20px_rgba(244,135,113,0.4)]"},info:{icon:y0,bgClass:"bg-thea-gold/20 border-thea-gold",textClass:"text-thea-gold",glowClass:"shadow-gold-sm"},loading:{icon:nt,bgClass:"bg-thea-gold/10 border-thea-gold-dark",textClass:"text-thea-gold-bright",glowClass:""}};function R_({toast:e,onDismiss:t}){const r=kh[e.type]||kh.info,s=r.icon;return B.useEffect(()=>{if(e.duration&&e.duration>0){const a=setTimeout(()=>t(e.id),e.duration);return()=>clearTimeout(a)}},[e.id,e.duration,t]),o.jsxs("div",{role:"alert",className:U("flex items-start gap-3 px-4 py-3 border backdrop-blur-md","animate-[slideIn_0.3s_ease-out]",r.bgClass,r.glowClass),style:{clipPath:"polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 8px 100%, 0 calc(100% - 8px))"},children:[o.jsx(s,{className:U("w-5 h-5 flex-shrink-0 mt-0.5",r.textClass,e.type==="loading"&&"animate-spin")}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:U("font-rajdhani font-semibold",r.textClass),children:e.title}),e.message&&o.jsx("p",{className:"text-sm text-white/70 font-mono mt-0.5 truncate",children:e.message})]}),o.jsx("button",{onClick:()=>t(e.id),className:U("p-1 hover:bg-white/10 transition-colors",r.textClass),"aria-label":"Dismiss notification",children:o.jsx(Ke,{className:"w-4 h-4"})})]})}function Eh({toasts:e,onDismiss:t}){return o.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm","aria-live":"polite","aria-label":"Notifications",children:e.map(r=>o.jsx(R_,{toast:r,onDismiss:t},r.id))})}const j_=[{name:"spawn_worker",patterns:[/spawn\s+(?:a\s+)?worker(?:\s+(?:on|for|in)\s+(.+))?/i,/start\s+(?:a\s+)?(?:new\s+)?worker(?:\s+(?:on|for|in)\s+(.+))?/i,/create\s+(?:a\s+)?(?:new\s+)?worker(?:\s+(?:on|for|in)\s+(.+))?/i,/launch\s+(?:a\s+)?worker(?:\s+(?:on|for|in)\s+(.+))?/i]},{name:"stop_worker",patterns:[/stop\s+(?:the\s+)?worker(?:\s+(.+))?/i,/kill\s+(?:the\s+)?worker(?:\s+(.+))?/i,/terminate\s+(?:the\s+)?worker(?:\s+(.+))?/i,/end\s+(?:the\s+)?worker(?:\s+(.+))?/i,/stop\s+all\s+workers/i,/kill\s+all\s+workers/i]},{name:"send_message",patterns:[/send\s+(?:message\s+)?["']?(.+?)["']?\s+(?:to\s+)?(?:the\s+)?(?:worker)?(?:\s+(.+))?$/i,/tell\s+(?:the\s+)?worker(?:\s+(.+))?\s+(?:to\s+)?["']?(.+?)["']?$/i,/message\s+(?:the\s+)?worker(?:\s+(.+))?\s+(?:with\s+)?["']?(.+?)["']?$/i]},{name:"show_status",patterns:[/(?:show|display|what(?:'s|\s+is)?)\s+(?:the\s+)?status/i,/status(?:\s+(?:of|for)\s+(?:the\s+)?workers?)?/i,/how\s+(?:are|is)\s+(?:the\s+)?workers?\s+doing/i,/worker\s+status/i,/list\s+workers/i,/what\s+workers\s+(?:are\s+)?running/i]}];function Lh(e){const t=e.trim().toLowerCase();for(const r of j_)for(const s of r.patterns){const a=t.match(s);if(a)return{command:r.name,matches:a.slice(1).filter(Boolean),raw:e}}return null}function Rh(e,t){if(!t)return null;const r=t.toLowerCase().trim();let s=e.find(a=>{var g;return a.id===r||((g=a.label)==null?void 0:g.toLowerCase())===r});return s||(s=e.find(a=>{var g,x;return((g=a.label)==null?void 0:g.toLowerCase().includes(r))||((x=a.projectPath)==null?void 0:x.toLowerCase().includes(r))})),s}function N_(e,t){if(!t)return null;const r=t.toLowerCase().trim();let s=e.find(a=>{var g;return((g=a.name)==null?void 0:g.toLowerCase())===r});return s||(s=e.find(a=>{var g;return(g=a.name)==null?void 0:g.toLowerCase().includes(r)})),s}function A_(){const{workers:e,projects:t,spawnWorker:r,killWorker:s,sendInput:a,focusedWorker:g,addToast:x}=Qe(),i=B.useCallback(async f=>{if(!f)return{success:!1,message:"Command not recognized",spoken:"I didn't understand that command. Try spawn worker, stop worker, send message, or show status."};const{command:_,matches:u}=f;switch(_){case"spawn_worker":{const m=u[0];if(m){const S=N_(t,m);return S?(await r(S.path,`${S.name} Worker`),{success:!0,message:`Spawning worker for ${S.name}`,spoken:`Spawning a new worker for ${S.name}.`}):{success:!1,message:`Project "${m}" not found`,spoken:`I couldn't find a project matching "${m}". Try saying the exact project name.`}}else if(t.length>0){const S=t[0];return await r(S.path,`${S.name} Worker`),{success:!0,message:`Spawning worker for ${S.name}`,spoken:`Spawning a new worker for ${S.name}.`}}else return{success:!1,message:"No projects available",spoken:"No projects are available to spawn a worker."}}case"stop_worker":{const m=u[0];if(f.raw.toLowerCase().includes("all")){const w=e.filter(p=>p.status==="running");return w.length===0?{success:!1,message:"No workers running",spoken:"There are no workers running to stop."}:(w.forEach(p=>s(p.id)),{success:!0,message:`Stopping ${w.length} workers`,spoken:`Stopping all ${w.length} workers.`})}if(m){const w=Rh(e,m);return w?(s(w.id),{success:!0,message:`Stopping worker ${w.label||w.id}`,spoken:`Stopping worker ${w.label||"unnamed"}.`}):{success:!1,message:`Worker "${m}" not found`,spoken:`I couldn't find a worker matching "${m}".`}}else if(g){const w=e.find(p=>p.id===g);return s(g),{success:!0,message:"Stopping focused worker",spoken:`Stopping the focused worker ${(w==null?void 0:w.label)||""}.`}}else return e.length===1?(s(e[0].id),{success:!0,message:`Stopping worker ${e[0].label||e[0].id}`,spoken:"Stopping the only running worker."}):{success:!1,message:"Please specify which worker to stop",spoken:"Please specify which worker to stop. You can say stop worker followed by the worker name, or say stop all workers."}}case"send_message":{let m=u[0],S=u[1];if((f.raw.toLowerCase().startsWith("tell")||f.raw.toLowerCase().startsWith("message"))&&(S=u[0],m=u[1]),!m)return{success:!1,message:"No message specified",spoken:"Please specify a message to send."};let w;if(S){const n=Rh(e,S);if(n)w=n.id;else return{success:!1,message:`Worker "${S}" not found`,spoken:`I couldn't find a worker matching "${S}".`}}else if(g)w=g;else if(e.length===1)w=e[0].id;else return{success:!1,message:"Please specify which worker",spoken:"Please specify which worker to send the message to."};a(w,m+`
`);const p=e.find(n=>n.id===w);return{success:!0,message:`Sent message to ${(p==null?void 0:p.label)||"worker"}`,spoken:`Message sent to ${(p==null?void 0:p.label)||"the worker"}.`}}case"show_status":{const m=e.filter(l=>l.status==="running"),S=e.filter(l=>l.status!=="running");if(e.length===0)return{success:!0,message:"No workers",spoken:"No workers are currently registered."};const w=[];m.length>0&&w.push(`${m.length} running`),S.length>0&&w.push(`${S.length} stopped`);const p=m.map(l=>l.label||"unnamed").join(", "),n=m.length>0?`You have ${m.length} worker${m.length>1?"s":""} running: ${p}.`:"No workers are currently running.";return{success:!0,message:`Workers: ${w.join(", ")}`,spoken:n}}default:return{success:!1,message:"Unknown command",spoken:"I didn't recognize that command."}}},[e,t,r,s,a,g]),c=B.useCallback(async f=>{const _=Lh(f),u=await i(_);return x({type:u.success?"success":"warning",title:u.success?"Command Executed":"Command Failed",message:u.message,duration:3e3}),u},[i,x]);return{parseCommand:Lh,executeCommand:i,processTranscript:c,availableCommands:[{name:"spawn worker",description:"Start a new worker",example:"spawn worker on strategos"},{name:"stop worker",description:"Stop a running worker",example:"stop worker"},{name:"send message",description:"Send text to a worker",example:"send hello to the worker"},{name:"show status",description:"Show worker status",example:"show status"}]}}function M_({className:e}){const{isListening:t,isSpeaking:r,transcript:s,sttSupported:a,ttsSupported:g,startListening:x,stopListening:i,clearTranscript:c,speak:f,stopSpeaking:_}=Yl(),{processTranscript:u,availableCommands:m}=A_(),[S,w]=B.useState(!1),[p,n]=B.useState(!1),[l,h]=B.useState(!0),[d,v]=B.useState(null),[y,C]=B.useState(!1),L=B.useCallback(async()=>{if(!s.trim())return;C(!0);const E=await u(s);v(E),l&&E.spoken&&await f(E.spoken),c(),C(!1)},[s,u,l,f,c]),b=B.useCallback(()=>{r&&_(),t?(i(),L()):(c(),v(null),x())},[t,r,_,i,x,L,c]);if(B.useEffect(()=>{if(!t||!s)return;const E=setTimeout(()=>{s.trim()&&(i(),L())},2e3);return()=>clearTimeout(E)},[s,t,i,L]),B.useEffect(()=>{const E=A=>{A.ctrlKey&&A.shiftKey&&A.key==="V"&&(A.preventDefault(),b())};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[b]),!a)return null;const k=()=>y?"bg-amber-500":r?"bg-blue-500":t?"bg-red-500":"bg-thea-gold/50";return o.jsxs("div",{className:U("relative",e),children:[o.jsx("div",{className:U("bg-black/80 border border-thea-gold-dark/30 backdrop-blur-sm transition-all",S?"rounded-t-lg":"rounded-lg"),children:o.jsxs("div",{className:"flex items-center gap-2 p-2",children:[o.jsxs("button",{onClick:b,disabled:y,className:U("relative p-2.5 rounded-full transition-all",t?"bg-red-500/20 text-red-400 ring-2 ring-red-500/50 animate-pulse":r?"bg-blue-500/20 text-blue-400 ring-2 ring-blue-500/50":"bg-thea-gold/10 text-thea-gold hover:bg-thea-gold/20","disabled:opacity-50 disabled:cursor-not-allowed"),title:t?"Stop listening":"Start listening (Ctrl+Shift+V)","aria-label":t?"Stop listening":"Start voice input",children:[t?o.jsx(Vl,{className:"w-5 h-5"}):o.jsx(Jn,{className:"w-5 h-5"}),o.jsx("span",{className:U("absolute -top-0.5 -right-0.5 w-2.5 h-2.5 rounded-full",k())})]}),o.jsx("div",{className:"flex-1 min-w-0",children:t&&s?o.jsx("p",{className:"text-sm text-thea-gold truncate animate-pulse",children:s}):t?o.jsx("p",{className:"text-sm text-red-400 animate-pulse",children:"Listening..."}):r?o.jsx("p",{className:"text-sm text-blue-400",children:"Speaking..."}):y?o.jsx("p",{className:"text-sm text-amber-400",children:"Processing..."}):d?o.jsx("p",{className:U("text-sm truncate",d.success?"text-green-400":"text-amber-400"),children:d.message}):o.jsx("p",{className:"text-xs text-thea-gold-dark/70",children:"Voice commands ready"})}),g&&o.jsx("button",{onClick:()=>h(!l),className:U("p-1.5 rounded transition-colors",l?"text-thea-gold-bright":"text-thea-gold-dark"),title:l?"Disable voice feedback":"Enable voice feedback",children:l?o.jsx(Rn,{className:"w-4 h-4"}):o.jsx(Gl,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>n(!p),className:U("p-1.5 rounded transition-colors",p?"text-thea-gold-bright":"text-thea-gold-dark hover:text-thea-gold"),title:"Show available commands","aria-label":"Show available voice commands","aria-expanded":p,children:o.jsx(za,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>w(!S),className:"p-1.5 rounded text-thea-gold-dark hover:text-thea-gold transition-colors",title:S?"Collapse":"Expand","aria-label":S?"Collapse voice control":"Expand voice control","aria-expanded":S,children:S?o.jsx(yt,{className:"w-4 h-4"}):o.jsx(of,{className:"w-4 h-4"})})]})}),S&&o.jsx("div",{className:"bg-black/90 border border-t-0 border-thea-gold-dark/30 rounded-b-lg p-3 backdrop-blur-sm",children:p?o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"text-xs font-rajdhani font-semibold text-thea-gold uppercase tracking-wider",children:"Voice Commands"}),o.jsx("button",{onClick:()=>n(!1),className:"text-thea-gold-dark hover:text-thea-gold","aria-label":"Close help",children:o.jsx(Ke,{className:"w-3.5 h-3.5"})})]}),o.jsx("div",{className:"space-y-1.5",children:m.map(E=>o.jsxs("div",{className:"text-xs",children:[o.jsx("span",{className:"text-thea-gold font-mono",children:E.name}),o.jsxs("span",{className:"text-thea-gold-dark/70 ml-2",children:["- ",E.description]}),o.jsxs("div",{className:"text-thea-gold-dark/50 ml-2 italic",children:['"',E.example,'"']})]},E.name))}),o.jsx("div",{className:"mt-3 pt-2 border-t border-thea-gold-dark/20",children:o.jsxs("p",{className:"text-[10px] text-thea-gold-dark/50",children:["Keyboard shortcut: ",o.jsx("kbd",{className:"px-1 py-0.5 bg-black/50 rounded text-thea-gold-dark",children:"Ctrl+Shift+V"})]})})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[o.jsx(Oo,{label:"Status",onClick:()=>{u("show status").then(E=>{v(E),l&&E.spoken&&f(E.spoken)})}}),o.jsx(Oo,{label:"Spawn Worker",onClick:()=>{u("spawn worker").then(E=>{v(E),l&&E.spoken&&f(E.spoken)})}}),o.jsx(Oo,{label:"Stop All",onClick:()=>{u("stop all workers").then(E=>{v(E),l&&E.spoken&&f(E.spoken)})},variant:"danger"})]}),d&&o.jsx("div",{className:U("p-2 rounded text-xs",d.success?"bg-green-500/10 border border-green-500/20 text-green-400":"bg-amber-500/10 border border-amber-500/20 text-amber-400"),children:d.spoken}),o.jsxs("p",{className:"text-[10px] text-thea-gold-dark/50 text-center",children:["Click ",o.jsx(za,{className:"w-3 h-3 inline"})," for all commands"]})]})})]})}function Oo({label:e,onClick:t,variant:r="default"}){return o.jsx("button",{onClick:t,className:U("px-2 py-1 text-xs font-rajdhani font-semibold rounded border transition-colors",r==="danger"?"border-red-500/30 text-red-400 hover:bg-red-500/10":"border-thea-gold-dark/30 text-thea-gold-dark hover:text-thea-gold hover:border-thea-gold/30 hover:bg-thea-gold/5"),children:e})}function T_(){const[e,t]=B.useState(!1),r=B.useRef(null);return B.useEffect(()=>{if(!e)return;function s(a){r.current&&!r.current.contains(a.target)&&t(!1)}return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[e]),B.useEffect(()=>{if(!e)return;function s(a){a.key==="Escape"&&(a.stopPropagation(),t(!1))}return document.addEventListener("keydown",s,!0),()=>document.removeEventListener("keydown",s,!0)},[e]),o.jsxs("div",{className:"relative",ref:r,children:[o.jsx("button",{"data-shortcut-help":!0,onClick:()=>t(s=>!s),className:U("thea-btn p-2",e&&"bg-thea-gold/20 border-thea-gold shadow-gold-sm"),title:"Keyboard shortcuts (?)","aria-label":"Keyboard shortcuts","aria-expanded":e,"aria-haspopup":"true",children:o.jsx(za,{className:"w-4 h-4"})}),e&&o.jsxs("div",{className:"absolute right-0 top-full mt-2 w-72 bg-black/95 border border-thea-gold-dark/50 backdrop-blur-md shadow-lg shadow-black/50 z-50",children:[o.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-thea-gold-dark/30",children:[o.jsx("span",{className:"font-orbitron text-thea-gold-bright text-xs uppercase tracking-wider",children:"Keyboard Shortcuts"}),o.jsx("button",{onClick:()=>t(!1),className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors","aria-label":"Close keyboard shortcuts",children:o.jsx(Ke,{className:"w-3.5 h-3.5"})})]}),o.jsx("div",{className:"p-3 space-y-3 max-h-80 overflow-y-auto",children:i0.map(s=>o.jsxs("div",{children:[o.jsx("h4",{className:"text-[10px] font-mono text-thea-gold-dark uppercase tracking-wider mb-1.5",children:s.label}),o.jsx("div",{className:"space-y-1",children:s.shortcuts.map(a=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs text-thea-gold/80 font-rajdhani",children:a.description}),o.jsx("div",{className:"flex items-center gap-0.5",children:a.keys.map(g=>o.jsxs("span",{children:[j>0&&o.jsx("span",{className:"text-thea-gold-dark/50 text-[10px] mx-0.5",children:"+"}),o.jsx("kbd",{className:"inline-block px-1.5 py-0.5 text-[10px] font-mono text-thea-gold bg-thea-gold/10 border border-thea-gold-dark/40 rounded min-w-[1.5rem] text-center",children:g})]},g))})]},a.description))})]},s.label))}),o.jsx("div",{className:"px-3 py-1.5 border-t border-thea-gold-dark/20 text-center",children:o.jsxs("span",{className:"text-[10px] text-thea-gold-dark/50 font-mono",children:["Press ",o.jsx("kbd",{className:"px-1 py-0.5 bg-thea-gold/10 border border-thea-gold-dark/30 rounded text-thea-gold-dark",children:"?"})," to toggle"]})})]})]})}function D_({performanceMode:e,onTogglePerformance:t,summariesEnabled:r,onToggleSummaries:s}){var C,L,b,k;const[a,g]=B.useState(!1),x=B.useRef(null),[i,c]=B.useState(null),[f,_]=B.useState(!1),[u,m]=B.useState(!1),[S,w]=B.useState(null),p=B.useCallback(async E=>{try{const A=await Ee("/api/sentinel/status",{signal:E});A.ok&&c(await A.json())}catch(A){if(A.name==="AbortError")return;console.warn("Failed to fetch sentinel status:",A.message)}},[]);B.useEffect(()=>{const E=new AbortController;return p(E.signal),()=>E.abort()},[p]),B.useEffect(()=>{if(!a||!(i!=null&&i.enabled))return;const E=new AbortController,A=setInterval(()=>p(E.signal),3e4);return()=>{E.abort(),clearInterval(A)}},[a,i==null?void 0:i.enabled,p]);const n=B.useCallback(async()=>{_(!0);try{const E=i!=null&&i.enabled?"/api/sentinel/stop":"/api/sentinel/start",R=await(await Ee(E,{method:"POST"})).json();R.diagnostics&&w(R.diagnostics),await p()}catch(E){console.error("Failed to toggle sentinel:",E)}finally{_(!1)}},[i==null?void 0:i.enabled,p]),l=B.useCallback(async()=>{_(!0);try{const A=await(await Ee("/api/diagnostics?run=true")).json();w(A),await p()}catch(E){console.error("Failed to run diagnostics:",E)}finally{_(!1)}},[p]);B.useEffect(()=>{if(!a)return;const E=A=>{x.current&&!x.current.contains(A.target)&&g(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[a]);const h=i==null?void 0:i.enabled,d=h?(i==null?void 0:i.lastStatus)==="healthy"?"text-green-400":(i==null?void 0:i.lastStatus)==="degraded"?"text-yellow-400":(i==null?void 0:i.lastStatus)==="unhealthy"?"text-red-400":"text-thea-gold":"text-gray-500",v=h?(i==null?void 0:i.lastStatus)==="unhealthy"?N0:A0:ff,y=h&&(i==null?void 0:i.lastStatus)==="unhealthy";return o.jsxs("div",{className:"relative",ref:x,children:[o.jsxs("button",{onClick:()=>g(!a),className:U("thea-btn p-2 relative",a&&"bg-thea-gold/20 border-thea-gold shadow-gold-sm"),title:"Settings","aria-label":"Settings","aria-expanded":a,"aria-haspopup":"true",children:[o.jsx(j0,{className:"w-4 h-4"}),y&&o.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 rounded-full bg-red-400 animate-pulse"})]}),a&&o.jsxs("div",{role:"menu","aria-label":"Settings menu",className:"absolute right-0 top-full mt-2 w-72 bg-black/95 border border-thea-gold-dark/50 rounded-lg shadow-2xl backdrop-blur-md z-50 overflow-hidden",children:[o.jsx("div",{className:"px-4 py-2.5 border-b border-thea-gold-dark/30 bg-black/40",children:o.jsx("span",{className:"font-rajdhani font-bold text-sm uppercase tracking-wider text-thea-gold-bright",children:"Settings"})}),o.jsxs("div",{className:"py-1",children:[o.jsx(jh,{icon:o.jsx(Lt,{className:U("w-4 h-4",e?"text-green-400":"text-thea-gold-dark")}),label:"Performance Mode",description:"Disable animations",enabled:e,onToggle:t}),o.jsx(jh,{icon:o.jsx($r,{className:U("w-4 h-4",r?"text-thea-gold":"text-thea-gold-dark")}),label:"AI Summaries",description:"Ollama-powered",enabled:r,onToggle:s}),o.jsxs("div",{className:"border-t border-thea-gold-dark/20 mt-1 pt-1",children:[o.jsxs("button",{onClick:()=>m(!u),className:"w-full flex items-center gap-3 px-4 py-2 hover:bg-thea-gold/5 transition-colors","aria-expanded":u,"aria-label":"Sentinel diagnostics",children:[o.jsxs("div",{className:"relative",children:[f?o.jsx(nt,{className:"w-4 h-4 animate-spin text-thea-gold"}):o.jsx(v,{className:U("w-4 h-4",d)}),h&&!f&&o.jsx("span",{className:U("absolute -top-0.5 -right-0.5 w-1.5 h-1.5 rounded-full",(i==null?void 0:i.lastStatus)==="healthy"?"bg-green-400":(i==null?void 0:i.lastStatus)==="degraded"?"bg-yellow-400":(i==null?void 0:i.lastStatus)==="unhealthy"?"bg-red-400 animate-pulse":"bg-thea-gold")})]}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:"text-xs font-mono text-thea-gold-bright",children:"Sentinel"}),o.jsx("div",{className:"text-[10px] text-thea-gold-dark font-mono",children:h?`${(i==null?void 0:i.lastStatus)||"checking..."}`:"Disabled"})]}),o.jsx("button",{onClick:E=>{E.stopPropagation(),n()},disabled:f,role:"switch","aria-checked":!!h,"aria-label":"Toggle sentinel",className:U("px-2 py-0.5 rounded text-[10px] font-mono transition-all",h?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-gray-800 text-gray-400 border border-gray-600"),children:f?"...":h?"ON":"OFF"}),u?o.jsx(yt,{className:"w-3 h-3 text-thea-gold-dark"}):o.jsx(_i,{className:"w-3 h-3 text-thea-gold-dark"})]}),u&&o.jsxs("div",{className:"px-4 pb-2 space-y-2",children:[h&&i&&o.jsxs("div",{className:"text-xs font-mono space-y-1 pl-7",children:[o.jsx(Io,{label:"Checks",value:i.checksRun}),o.jsx(Io,{label:"Uptime",value:P_(i.uptimeSeconds)}),i.lastCheck&&o.jsx(Io,{label:"Last",value:B_(i.lastCheck)})]}),S&&o.jsxs("div",{className:"pl-7 space-y-1",children:[o.jsx("span",{className:"text-[9px] text-thea-gold-dark uppercase tracking-wider font-mono",children:"Last Run"}),((C=S.issues)==null?void 0:C.length)>0&&S.issues.map((E,A)=>o.jsx("p",{className:"text-red-400 text-[10px] leading-tight font-mono",children:E},`si${A}`)),((L=S.warnings)==null?void 0:L.length)>0&&S.warnings.map((E,A)=>o.jsx("p",{className:"text-yellow-400 text-[10px] leading-tight font-mono",children:E},`sw${A}`)),!((b=S.issues)!=null&&b.length)&&!((k=S.warnings)!=null&&k.length)&&o.jsx("p",{className:"text-green-400 text-[10px] font-mono",children:"All checks passed"})]}),o.jsxs("div",{className:"flex gap-2 pl-7",children:[o.jsx("button",{onClick:l,disabled:f,className:"text-[10px] font-rajdhani uppercase tracking-wider px-2.5 py-1 bg-thea-gold/10 text-thea-gold border border-thea-gold-dark/30 rounded hover:bg-thea-gold/20 transition-colors disabled:opacity-50",children:"Run Now"}),o.jsx("button",{onClick:n,disabled:f,className:U("text-[10px] font-rajdhani uppercase tracking-wider px-2.5 py-1 rounded transition-colors disabled:opacity-50",h?"bg-red-500/10 text-red-400 border border-red-500/30 hover:bg-red-500/20":"bg-green-500/10 text-green-400 border border-green-500/30 hover:bg-green-500/20"),children:h?"Disable":"Enable"})]})]})]})]})]})]})}function jh({icon:e,label:t,description:r,enabled:s,onToggle:a}){return o.jsxs("button",{onClick:a,role:"switch","aria-checked":s,className:"w-full flex items-center gap-3 px-4 py-2 hover:bg-thea-gold/5 transition-colors",children:[e,o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:"text-xs font-mono text-thea-gold-bright",children:t}),r&&o.jsx("div",{className:"text-[10px] text-thea-gold-dark font-mono",children:r})]}),o.jsx("span",{className:U("px-2 py-0.5 rounded text-[10px] font-mono transition-all",s?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-gray-800 text-gray-400 border border-gray-600"),children:s?"ON":"OFF"})]})}function Io({label:e,value:t}){return o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-thea-gold-dark",children:e}),o.jsx("span",{className:"text-thea-gold",children:t})]})}function P_(e){if(!e)return"0s";if(e<60)return`${e}s`;if(e<3600)return`${Math.floor(e/60)}m`;const t=Math.floor(e/3600),r=Math.floor(e%3600/60);return`${t}h ${r}m`}function B_(e){try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return e}}function O_(e){if(!e)return"";const t=e*1e3-Date.now();if(t<=0)return"now";const r=Math.floor(t/36e5),s=Math.floor(t%36e5/6e4);return r>24?`${Math.floor(r/24)}d ${r%24}h`:r>0?`${r}h ${s}m`:`${s}m`}function I_(e){return e>=90?{text:"text-red-400",bar:"bg-red-500",border:"border-red-500/40"}:e>=70?{text:"text-yellow-400",bar:"bg-yellow-500",border:"border-yellow-500/40"}:{text:"text-emerald-400",bar:"bg-emerald-500",border:"border-emerald-500/30"}}function Nh({label:e,pct:t,reset:r}){const s=I_(t);return o.jsxs("div",{className:U("flex items-center gap-1.5 px-2 py-1 border rounded-sm bg-black/40",s.border),title:`${e}: ${t}%${r?`  resets in ${O_(r)}`:""}`,"aria-label":`${e}: ${t}%`,children:[o.jsx("span",{className:"text-[9px] font-mono text-thea-gold-dark uppercase tracking-wider hidden md:inline",children:e}),o.jsx("div",{className:"w-12 h-1.5 bg-black/60 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,children:o.jsx("div",{className:U("h-full rounded-full transition-all duration-700",s.bar),style:{width:`${Math.min(t,100)}%`}})}),o.jsxs("span",{className:U("text-[10px] font-mono font-bold tabular-nums",s.text),children:[t,"%"]})]})}function F_(){const[e,t]=B.useState(null),[r,s]=B.useState(null),a=B.useCallback(async i=>{try{const c=await Ee("/api/usage",{signal:i});c.ok?(t(await c.json()),s(null)):c.status===404||c.status===401?s("unavailable"):s("failed")}catch(c){if(c.name==="AbortError")return;s(c.message)}},[]);if(B.useEffect(()=>{const i=new AbortController;a(i.signal);const c=setInterval(()=>a(i.signal),6e4);return()=>{i.abort(),clearInterval(c)}},[a]),r==="unavailable"||!e)return null;const g=Math.round(e.session.utilization*100),x=Math.round(e.weekly.utilization*100);return o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Nh,{label:"5h",pct:g,reset:e.session.reset}),o.jsx(Nh,{label:"7d",pct:x,reset:e.weekly.reset})]})}function H_(e){if(!e)return null;const t=Math.floor((Date.now()-new Date(e).getTime())/1e3);if(t<60)return`${t}s ago`;const r=Math.floor(t/60);if(r<60)return`${r}m ago`;const s=Math.floor(r/60);return s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`}const z_={blocked:{label:"BLOCKED",headerColor:"text-red-400",headerBg:"bg-red-500/10 border-red-500/30",badgeColor:"text-red-400 bg-red-400/10 border-red-400/30",icon:Nt,countBg:"bg-red-500/20 text-red-300"},in_progress:{label:"IN PROGRESS",headerColor:"text-yellow-400",headerBg:"bg-yellow-500/10 border-yellow-500/30",badgeColor:"text-yellow-400 bg-yellow-400/10 border-yellow-400/30",icon:nt,countBg:"bg-yellow-500/20 text-yellow-300"},done:{label:"DONE",headerColor:"text-green-400",headerBg:"bg-green-500/10 border-green-500/30",badgeColor:"text-green-400 bg-green-400/10 border-green-400/30",icon:Fa,countBg:"bg-green-500/20 text-green-300"},pending:{label:"PENDING",headerColor:"text-thea-gold-dark",headerBg:"bg-thea-gold/10 border-thea-gold-dark/30",badgeColor:"text-thea-gold-dark bg-thea-gold/10 border-thea-gold-dark/30",icon:er,countBg:"bg-thea-gold/20 text-thea-gold"}},Ua=["blocked","in_progress","done","pending"];function $_({groups:e}){var g,x,i,c;const t=Ua.reduce((f,_)=>{var u;return f+(((u=e[_])==null?void 0:u.length)||0)},0),r=e.in_progress||[],s=r.length>0?Math.round(r.reduce((f,_)=>f+(_.ralphProgress||0),0)/r.length):0,a=((g=e.blocked)==null?void 0:g.length)||0;return o.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 border-b border-thea-gold-dark/20 bg-black/30 text-[10px] font-mono flex-wrap",children:[o.jsxs("span",{className:"text-thea-gold-dark",children:[o.jsx("span",{className:"text-thea-gold",children:t})," total"]}),(((x=e.in_progress)==null?void 0:x.length)||0)>0&&o.jsxs("span",{className:"text-yellow-400",children:[e.in_progress.length," working",o.jsxs("span",{className:"text-thea-gold-dark ml-1",children:["avg ",s,"%"]})]}),(((i=e.done)==null?void 0:i.length)||0)>0&&o.jsxs("span",{className:"text-green-400",children:[e.done.length," done"]}),a>0&&o.jsxs("span",{className:"text-red-400 animate-pulse",children:[o.jsx(Nt,{className:"w-3 h-3 inline-block mr-0.5 -mt-0.5"}),a," blocked"]}),(((c=e.pending)==null?void 0:c.length)||0)>0&&o.jsxs("span",{className:"text-thea-gold-dark",children:[e.pending.length," pending"]})]})}function W_({status:e,workers:t,attachToWorker:r}){const s=z_[e],[a,g]=B.useState(!1);if(!t||t.length===0)return null;const x=s.icon;return o.jsxs("div",{className:"border-b border-thea-gold-dark/10 last:border-b-0",children:[o.jsxs("button",{onClick:()=>g(i=>!i),className:U("w-full flex items-center gap-2 px-4 py-2 border-l-2 transition-colors hover:bg-white/5",s.headerBg),children:[o.jsx(x,{className:U("w-3.5 h-3.5 flex-shrink-0",s.headerColor,e==="in_progress"&&"animate-spin")}),o.jsx("span",{className:U("text-[11px] font-orbitron uppercase tracking-wider",s.headerColor),children:s.label}),o.jsx("span",{className:U("text-[10px] px-1.5 py-0 rounded-full font-mono",s.countBg),children:t.length}),o.jsx(yt,{className:U("w-3 h-3 ml-auto text-thea-gold-dark transition-transform",a&&"-rotate-90")})]}),!a&&o.jsx("div",{className:"divide-y divide-thea-gold-dark/5",children:t.map(i=>o.jsx(U_,{worker:i,status:e,attachToWorker:r},i.id))})]})}function U_({worker:e,status:t,attachToWorker:r}){const[s,a]=B.useState(!1),{displayName:g}=Ut(e.label),x=t==="blocked",i=t==="done";return o.jsxs("div",{className:U("px-4 py-3 transition-colors hover:bg-thea-gold/5",x&&"border-l-2 border-red-500 bg-red-500/5"),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[o.jsx(io,{label:e.label,size:"sm"}),o.jsx("button",{onClick:()=>r(e.id),className:"text-sm text-white/90 font-rajdhani truncate hover:text-thea-gold-bright transition-colors text-left min-w-0 flex-1",title:`Focus on ${e.label}`,children:g}),o.jsx(vi,{score:e.healthScore,size:"sm"}),o.jsx("span",{className:U("text-[10px] px-1.5 py-0.5 border font-mono uppercase flex-shrink-0",e.status==="running"?"bg-green-400/10 text-green-400 border-green-400/30":"bg-gray-500/10 text-gray-400 border-gray-500/30"),children:e.status})]}),t==="in_progress"&&e.ralphProgress!=null&&o.jsxs("div",{className:"mb-1.5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[o.jsx("span",{className:"text-[10px] font-mono text-thea-gold-dark",children:"progress"}),o.jsxs("span",{className:"text-[10px] font-mono text-thea-gold",children:[e.ralphProgress,"%"]})]}),o.jsx("div",{className:"w-full h-1.5 bg-black/50 border border-thea-gold-dark/20 overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-thea-gold-bright transition-all duration-500",style:{width:`${Math.min(100,Math.max(0,e.ralphProgress))}%`}})})]}),e.ralphCurrentStep&&o.jsx("p",{className:"text-[10px] text-thea-gold-dark/70 font-mono truncate mb-1.5",title:e.ralphCurrentStep,children:e.ralphCurrentStep}),o.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-mono text-thea-gold-dark/50",children:[e.ralphSignalCount>0&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(M0,{className:"w-2.5 h-2.5"}),e.ralphSignalCount," signals"]}),e.lastRalphSignalAt&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(er,{className:"w-2.5 h-2.5"}),H_(e.lastRalphSignalAt)]})]}),x&&e.ralphBlockedReason&&o.jsxs("div",{className:"mt-2 px-2 py-1.5 bg-red-500/10 border border-red-500/30 text-[11px] text-red-300 font-mono flex items-start gap-1.5",children:[o.jsx(Nt,{className:"w-3 h-3 flex-shrink-0 mt-0.5 animate-pulse"}),o.jsx("span",{children:e.ralphBlockedReason})]}),i&&o.jsxs("div",{className:"mt-2 space-y-1.5",children:[e.ralphLearnings&&o.jsxs("div",{className:"text-[10px] font-mono",children:[o.jsxs("button",{onClick:()=>a(c=>!c),className:"flex items-center gap-1 text-green-400/80 hover:text-green-400 transition-colors mb-0.5",children:[o.jsx(l0,{className:"w-2.5 h-2.5"}),o.jsx("span",{children:"learnings"}),o.jsx(yt,{className:U("w-2.5 h-2.5 transition-transform",s&&"rotate-180")})]}),o.jsx("p",{className:U("text-thea-gold-dark/60 whitespace-pre-wrap pl-4",!s&&"line-clamp-2"),children:e.ralphLearnings})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.ralphOutputs&&(typeof e.ralphOutputs=="string"?e.ralphOutputs.length>0:Object.keys(e.ralphOutputs).length>0)&&o.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] font-mono text-thea-gold-dark/60",children:[o.jsx(C0,{className:"w-2.5 h-2.5"}),(()=>{const c=typeof e.ralphOutputs=="string"?e.ralphOutputs.length:Object.keys(e.ralphOutputs).length;return`${c} output${c!==1?"s":""}`})()]}),e.ralphArtifacts&&e.ralphArtifacts.length>0&&o.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:e.ralphArtifacts.map(c=>o.jsxs("span",{className:"text-[9px] font-mono px-1.5 py-0.5 bg-purple-500/10 border border-purple-500/30 text-purple-300 truncate max-w-[120px]",title:c,children:[o.jsx(qs,{className:"w-2.5 h-2.5 inline-block mr-0.5 -mt-0.5"}),typeof c=="string"?c.split("/").pop():c]},c))})]})]})]})}function V_({className:e=""}){const{workers:t,attachToWorker:r}=Qe(),{ralphWorkers:s,groups:a}=B.useMemo(()=>{const g=t.filter(i=>i.ralphMode),x={};for(const i of Ua)x[i]=[];for(const i of g){const c=i.ralphStatus||"pending";x[c]?x[c].push(i):x.pending.push(i)}return x.in_progress.sort((i,c)=>(c.ralphProgress||0)-(i.ralphProgress||0)),{ralphWorkers:g,groups:x}},[t]);return o.jsxs("div",{className:U("bg-gradient-to-b from-thea-nearBlack/80 to-black/60 flex flex-col",e),children:[o.jsx("div",{className:"flex items-center justify-between px-4 py-3 border-b border-thea-gold-dark/30 bg-black/40",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($r,{className:"w-4 h-4 text-thea-gold animate-pulse-gold"}),o.jsx("h3",{className:"font-orbitron text-xs uppercase tracking-[0.15em] text-thea-gold-bright text-glow-gold-sm",children:"Ralph Dashboard"})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:s.length===0?o.jsxs("div",{className:"px-4 py-6 text-center",children:[o.jsx($r,{className:"w-8 h-8 text-thea-gold-dark/30 mx-auto mb-2"}),o.jsx("span",{className:"text-thea-gold-dark/50 text-sm font-mono",children:"No Ralph-enabled workers"})]}):o.jsxs(o.Fragment,{children:[o.jsx($_,{groups:a}),Ua.map(g=>o.jsx(W_,{status:g,workers:a[g],attachToWorker:r},g))]})})]})}function q_(e){if(!e||e<0)return"";const t=Math.floor(e/1e3);if(t<60)return`${t}s`;const r=Math.floor(t/60);if(r<60)return`${r}m ${t%60}s`;const s=Math.floor(r/60);return s<24?`${s}h ${r%60}m`:`${Math.floor(s/24)}d ${s%24}h`}function K_(e){if(!e)return"";const t=new Date(e),s=new Date-t,a=Math.floor(s/6e4);if(a<1)return"just now";if(a<60)return`${a}m ago`;const g=Math.floor(a/60);if(g<24)return`${g}h ago`;const x=Math.floor(g/24);return x<7?`${x}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}const G_={killed:{color:"text-yellow-400",bg:"bg-yellow-400/10 border-yellow-400/30",icon:Lt,label:"Killed"},crashed:{color:"text-red-400",bg:"bg-red-400/10 border-red-400/30",icon:T0,label:"Crashed"},completed:{color:"text-green-400",bg:"bg-green-400/10 border-green-400/30",icon:Fa,label:"Completed"},dismissed:{color:"text-blue-400",bg:"bg-blue-400/10 border-blue-400/30",icon:Fa,label:"Dismissed"}};function Fo(e){if(!e)return{color:"text-thea-gold-dark",bg:"bg-thea-gold/10 border-thea-gold-dark/30",icon:Nt,label:"Unknown"};const t=e.toLowerCase();for(const[r,s]of Object.entries(G_))if(t.includes(r))return s;return{color:"text-thea-gold-dark",bg:"bg-thea-gold/10 border-thea-gold-dark/30",icon:Nt,label:e}}function X_({status:e,progress:t}){if(!e)return null;const r={done:"text-green-400 bg-green-400/10 border-green-400/30",in_progress:"text-blue-400 bg-blue-400/10 border-blue-400/30",blocked:"text-red-400 bg-red-400/10 border-red-400/30"};return o.jsxs("span",{className:U("text-[10px] px-1.5 py-0.5 border font-mono uppercase",r[e]||"text-thea-gold-dark bg-thea-gold/10 border-thea-gold-dark/30"),children:[e,t!=null&&t<100?` ${t}%`:""]})}function Y_({text:e}){const[t,r]=B.useState(!1),s=()=>{navigator.clipboard.writeText(e).then(()=>{r(!0),setTimeout(()=>r(!1),1500)})};return o.jsx("button",{onClick:s,className:"p-1 text-thea-gold-dark hover:text-thea-gold transition-colors",title:"Copy output",children:t?o.jsx(Xn,{className:"w-3.5 h-3.5 text-green-400"}):o.jsx(u0,{className:"w-3.5 h-3.5"})})}function Q_({checkpoint:e}){const{lastOutput:t,ralphLearnings:r,ralphOutputs:s,ralphArtifacts:a,crashReason:g,task:x,ralphCurrentStep:i,parentLabel:c,childWorkerIds:f}=e;return o.jsxs("div",{className:"border-t border-thea-gold-dark/20 bg-black/40 px-4 py-3 space-y-3",children:[o.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1 text-[11px] font-mono text-thea-gold-dark",children:[o.jsxs("span",{children:["ID: ",o.jsx("span",{className:"text-thea-gold",children:e.workerId})]}),e.project&&o.jsxs("span",{children:["Project: ",o.jsx("span",{className:"text-thea-gold",children:e.project})]}),c&&o.jsxs("span",{children:["Parent: ",o.jsx("span",{className:"text-thea-gold",children:c})]}),(f==null?void 0:f.length)>0&&o.jsxs("span",{children:["Children: ",o.jsx("span",{className:"text-thea-gold",children:f.length})]}),e.createdAt&&o.jsxs("span",{children:["Created: ",o.jsx("span",{className:"text-thea-gold",children:new Date(e.createdAt).toLocaleString()})]})]}),(x==null?void 0:x.description)&&o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-mono text-thea-gold-dark uppercase tracking-wider mb-1",children:"Task"}),o.jsx("p",{className:"text-sm text-thea-gold/80 font-rajdhani",children:x.description})]}),i&&o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-mono text-thea-gold-dark uppercase tracking-wider mb-1",children:"Last Step"}),o.jsx("p",{className:"text-sm text-thea-gold/80 font-rajdhani",children:i})]}),g&&o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-mono text-red-400/70 uppercase tracking-wider mb-1",children:"Crash Reason"}),o.jsx("p",{className:"text-sm text-red-300 font-mono",children:g})]}),r&&o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-mono text-thea-gold-dark uppercase tracking-wider mb-1",children:"Learnings"}),o.jsx("p",{className:"text-sm text-thea-gold/80 font-rajdhani whitespace-pre-wrap",children:r})]}),(Array.isArray(s)&&s.length>0||Array.isArray(a)&&a.length>0)&&o.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-2",children:[Array.isArray(s)&&s.length>0&&o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-mono text-thea-gold-dark uppercase tracking-wider mb-1",children:"Outputs"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:s.map(_=>o.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-thea-gold/10 border border-thea-gold-dark/30 text-thea-gold font-mono truncate max-w-[200px]",title:_,children:_},_))})]}),Array.isArray(a)&&a.length>0&&o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-mono text-thea-gold-dark uppercase tracking-wider mb-1",children:"Artifacts"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:a.map(_=>o.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-blue-400/10 border border-blue-400/30 text-blue-400 font-mono",children:_},_))})]})]}),t&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("div",{className:"text-[10px] font-mono text-thea-gold-dark uppercase tracking-wider",children:"Last Output"}),o.jsx(Y_,{text:t})]}),o.jsx("pre",{className:"bg-black/80 border border-thea-gold-dark/20 p-3 text-[11px] text-gray-300 font-mono overflow-x-auto max-h-64 overflow-y-auto whitespace-pre-wrap leading-relaxed scrollbar-thin",children:t})]})]})}function J_(){const[e,t]=B.useState([]),[r,s]=B.useState(!0),[a,g]=B.useState(null),[x,i]=B.useState(""),[c,f]=B.useState(null),[_,u]=B.useState(null),m=B.useCallback(async n=>{try{const l=await Ee("/api/checkpoints",{signal:n});if(!l.ok)throw new Error(`HTTP ${l.status}`);const h=await l.json(),d=Array.isArray(h)?h:[];d.sort((v,y)=>new Date(y.diedAt||0)-new Date(v.diedAt||0)),t(d),g(null)}catch(l){if(l.name==="AbortError")return;g(l.message)}finally{s(!1)}},[]);B.useEffect(()=>{const n=new AbortController;return m(n.signal),()=>n.abort()},[m]);const S=B.useMemo(()=>{const n=new Set;for(const l of e)l.reason&&n.add(l.reason.toLowerCase());return[...n].sort()},[e]);B.useMemo(()=>{const n=new Set;for(const l of e)l.project&&n.add(l.project);return[...n].sort()},[e]);const w=B.useMemo(()=>{let n=e;if(_&&(n=n.filter(l=>(l.reason||"").toLowerCase()===_)),x.trim()){const l=x.toLowerCase();n=n.filter(h=>{var d;return(h.label||"").toLowerCase().includes(l)||(h.project||"").toLowerCase().includes(l)||(h.workerId||"").toLowerCase().includes(l)||(h.ralphLearnings||"").toLowerCase().includes(l)||(((d=h.task)==null?void 0:d.description)||"").toLowerCase().includes(l)})}return n},[e,x,_]),p=B.useMemo(()=>{const n={};for(const l of e){const h=(l.reason||"unknown").toLowerCase();n[h]=(n[h]||0)+1}return{total:e.length,byReason:n}},[e]);return r?o.jsx("div",{className:"p-4 flex items-center justify-center",children:o.jsx("div",{className:"text-thea-gold-dark text-sm font-mono animate-pulse",children:"Loading checkpoints..."})}):a?o.jsxs("div",{className:"p-4 flex flex-col items-center justify-center gap-3",children:[o.jsxs("div",{className:"text-red-400 text-sm font-mono",children:["Failed to load checkpoints: ",a]}),o.jsx("button",{onClick:()=>{s(!0),m()},className:"thea-btn px-4 py-2 text-sm",children:"Retry"})]}):o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b border-thea-gold-dark/30 bg-black/20",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"font-orbitron text-sm uppercase tracking-wider text-thea-gold",children:"Checkpoints"}),o.jsxs("p",{className:"text-[10px] font-mono text-thea-gold-dark mt-0.5",children:[p.total," dead workers",Object.entries(p.byReason).map(([n,l])=>{const h=Fo(n);return`  ${l} ${h.label.toLowerCase()}`}).join("")]})]}),o.jsx("button",{onClick:()=>{s(!0),m()},className:"thea-btn px-3 py-1.5 text-xs font-rajdhani uppercase tracking-wider",children:"Refresh"})]}),o.jsx("div",{className:"mb-3",children:o.jsxs("div",{className:"relative",role:"search",children:[o.jsx(eo,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-thea-gold-dark pointer-events-none","aria-hidden":"true"}),o.jsx("input",{type:"text",value:x,onChange:n=>i(n.target.value),placeholder:"Search by label, project, ID, or learnings...",className:"w-full bg-black/50 border border-thea-gold-dark/30 pl-10 pr-10 py-2 text-sm text-thea-gold placeholder-thea-gold-dark/50 focus:outline-none focus:border-thea-gold/50 transition-colors font-mono","aria-label":"Search checkpoints"}),x&&o.jsx("button",{onClick:()=>i(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-thea-gold-dark hover:text-thea-gold transition-colors","aria-label":"Clear search",children:o.jsx(Ke,{className:"w-4 h-4"})})]})}),S.length>0&&o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx(er,{className:"w-3.5 h-3.5 text-thea-gold-dark"}),S.map(n=>{const l=Fo(n),h=l.icon;return o.jsxs("button",{onClick:()=>u(_===n?null:n),className:U("flex items-center gap-1 text-[10px] px-2 py-1 font-mono uppercase tracking-wider transition-all border",_===n?l.bg+" "+l.color+" shadow-sm":"text-thea-gold-dark border-thea-gold-dark/30 hover:border-thea-gold/50 hover:text-thea-gold"),children:[o.jsx(h,{className:"w-3 h-3"}),l.label," (",p.byReason[n]||0,")"]},n)}),_&&o.jsxs("button",{onClick:()=>u(null),className:"text-[10px] px-2 py-1 text-thea-maroon-light hover:text-thea-maroon-light/80 transition-colors flex items-center gap-1",children:[o.jsx(Ke,{className:"w-3 h-3"}),"Clear"]})]})]}),o.jsx("div",{className:"flex-1 overflow-auto",children:w.length===0?o.jsx("div",{className:"text-center py-12 text-thea-gold-dark/50 text-sm font-mono",children:e.length===0?"No checkpoints yet  dead workers will appear here":`No checkpoints match "${x||_}"`}):o.jsx("div",{className:"divide-y divide-thea-gold-dark/10",children:w.map(n=>{const l=c===n.workerId,h=Fo(n.reason),d=h.icon;return o.jsxs("div",{className:U("transition-colors",l&&"bg-thea-gold/[0.03]"),children:[o.jsxs("button",{onClick:()=>f(l?null:n.workerId),className:"w-full text-left px-4 py-3 flex items-center gap-3 hover:bg-thea-gold/[0.05] transition-colors group","aria-expanded":l,"aria-label":`Checkpoint: ${n.label||n.workerId}`,children:[o.jsx("span",{className:"text-thea-gold-dark group-hover:text-thea-gold transition-colors shrink-0",children:l?o.jsx(yt,{className:"w-4 h-4"}):o.jsx(_i,{className:"w-4 h-4"})}),o.jsx("span",{className:U("shrink-0",h.color),children:o.jsx(d,{className:"w-4 h-4"})}),o.jsx("span",{className:"flex-1 min-w-0 truncate text-sm font-rajdhani text-thea-gold group-hover:text-thea-gold-bright transition-colors",children:n.label||n.workerId}),n.project&&o.jsx("span",{className:"hidden sm:inline text-[10px] px-1.5 py-0.5 bg-thea-gold/10 border border-thea-gold-dark/30 text-thea-gold-dark font-mono truncate max-w-[120px]",children:n.project}),o.jsx(X_,{status:n.ralphStatus,progress:n.ralphProgress}),o.jsx("span",{className:U("text-[10px] px-1.5 py-0.5 border font-mono uppercase",h.bg,h.color),children:h.label}),o.jsx("span",{className:"text-[10px] font-mono text-thea-gold-dark w-16 text-right shrink-0",children:q_(n.uptime)}),o.jsx("span",{className:"text-[10px] font-mono text-thea-gold-dark w-16 text-right shrink-0 hidden sm:inline",children:K_(n.diedAt)})]}),l&&o.jsx(Q_,{checkpoint:n})]},n.workerId)})})})]})}class Kr extends zh.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("[ErrorBoundary] Caught rendering error:",t,r)}render(){var t;return this.state.hasError?o.jsx("div",{className:"min-h-screen bg-thea-bg flex items-center justify-center p-8",children:o.jsxs("div",{className:"max-w-lg w-full bg-gray-900 border border-red-500/30 rounded-lg p-6",children:[o.jsx("h2",{className:"text-red-400 text-lg font-bold mb-2",children:"Something went wrong"}),o.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"The UI encountered an error. Your workers are still running  this only affects the dashboard."}),o.jsx("pre",{className:"text-xs text-red-300/70 bg-black/50 rounded p-3 overflow-auto max-h-40 mb-4",children:((t=this.state.error)==null?void 0:t.message)||"Unknown error"}),o.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"px-4 py-2 bg-thea-gold text-black rounded font-medium text-sm hover:bg-thea-gold-bright transition-colors",children:"Try Again"})]})}):this.props.children}}function Z_(){const{connected:e,workers:t,toasts:r,dismissToast:s,detachFromWorker:a,focusedWorker:g}=Qe();r0();const[x,i]=B.useState(!1),[c,f]=B.useState("workers"),[_,u]=B.useState(!1),[m,S]=B.useState("activity"),[w,p]=B.useState(!1),[n,l]=B.useState(()=>{if(typeof window<"u"){const v=localStorage.getItem("strategos-performance-mode");return v===null?!0:v==="true"}return!0}),h=B.useMemo(()=>t.filter(v=>v.status==="running").length,[t]);s0({setActiveTab:f,detachFromWorker:a,setShowActivity:i,hasFocusedWorker:!!g,showActivity:x}),B.useEffect(()=>{n?document.body.classList.add("performance-mode"):document.body.classList.remove("performance-mode"),localStorage.setItem("strategos-performance-mode",n.toString())},[n]),B.useEffect(()=>{const v=new AbortController;return Ee("/api/settings/summaries",{signal:v.signal}).then(y=>y.json()).then(y=>p(y.enabled)).catch(y=>{y.name!=="AbortError"&&console.warn("Failed to fetch summaries setting:",y.message)}),()=>v.abort()},[]);const d=async()=>{const v=!w;p(v);try{const C=await(await Ee("/api/settings/summaries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:v})})).json();p(C.enabled)}catch{p(!v)}};return _?o.jsxs("div",{className:"min-h-screen bg-thea-black relative z-10",children:[o.jsx(y_,{onExit:()=>u(!1)}),o.jsx(Eh,{toasts:r,onDismiss:s})]}):o.jsxs("div",{className:"min-h-screen bg-thea-black flex flex-col relative z-10 pb-mobile-nav sm:pb-0 overflow-x-hidden",children:[o.jsx("header",{role:"banner","aria-label":"Strategos application header",className:"bg-gradient-to-r from-black/80 via-thea-nearBlack/90 to-black/80 border-b border-thea-gold-dark/50 backdrop-blur-md sticky top-0 z-50",children:o.jsx("div",{className:"px-4",children:o.jsxs("div",{className:"flex items-center justify-between h-16",children:[o.jsxs("button",{onClick:()=>{a(),f("workers"),i(!1)},className:"flex items-center gap-4 group cursor-pointer","aria-label":"Strategos home",children:[o.jsxs("div",{className:"relative",children:[o.jsx("h1",{className:"font-orbitron font-bold text-2xl text-thea-gold-bright tracking-widest text-glow-gold group-hover:text-white transition-colors",children:"STRATEGOS"}),o.jsx("div",{className:"absolute -bottom-1 left-0 w-full h-px bg-gradient-to-r from-transparent via-thea-gold to-transparent group-hover:via-white transition-colors"})]}),o.jsx("span",{className:"text-[10px] text-thea-gold-dark font-mono hidden sm:block uppercase tracking-[0.2em]",children:"// Thea Orchestrator"})]}),o.jsxs("div",{className:"flex items-center gap-2 sm:gap-5",children:[o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 text-sm","aria-live":"polite","aria-label":`${t.length} workers, ${h} active`,children:[o.jsx("span",{className:"hidden sm:inline text-thea-gold-dark font-mono text-xs uppercase tracking-wider",children:"Workers:"}),o.jsx("span",{className:"font-mono text-thea-gold-bright font-bold text-lg",children:t.length}),h<t.length&&o.jsxs("span",{className:"text-[10px] text-thea-gold-dark font-mono",children:["(",h," active)"]})]}),o.jsx("div",{"data-testid":"connection-status",role:"status","aria-live":"polite","aria-label":e?"Connected to server":"Disconnected from server",className:U("thea-badge flex items-center gap-1 sm:gap-2 px-2 sm:px-3",e?"thea-badge-running":"thea-badge-stopped"),children:e?o.jsxs(o.Fragment,{children:[o.jsx(B0,{className:"w-3.5 h-3.5"}),o.jsx("span",{"data-testid":"status-text",className:"hidden sm:inline",children:"Connected"})]}):o.jsxs(o.Fragment,{children:[o.jsx(P0,{className:"w-3.5 h-3.5"}),o.jsx("span",{"data-testid":"status-text",className:"hidden sm:inline",children:"Disconnected"})]})}),o.jsx(F_,{}),o.jsx(D_,{performanceMode:n,onTogglePerformance:()=>l(!n),summariesEnabled:w,onToggleSummaries:d}),o.jsx("div",{className:"hidden sm:block",children:o.jsx(T_,{})}),o.jsx("button",{onClick:()=>u(!0),className:"hidden sm:block thea-btn p-2 group",title:"Enter Voice Mode","aria-label":"Enter voice mode",children:o.jsx(Jn,{className:"w-4 h-4 group-hover:text-thea-gold-bright"})}),o.jsx("button",{"data-testid":"activity-toggle",onClick:()=>i(!x),className:U("hidden sm:block thea-btn p-2",x&&"bg-thea-gold/20 border-thea-gold shadow-gold-sm"),"aria-label":"Toggle activity sidebar","aria-expanded":x,children:o.jsx(Et,{className:"w-4 h-4"})})]})]})})}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[o.jsxs("main",{role:"main",className:"flex-1 flex flex-col overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-b from-black/50 to-transparent border-b border-thea-gold-dark/30 px-4",children:o.jsxs("div",{className:"flex gap-2",role:"tablist","aria-label":"Main navigation",children:[o.jsxs("button",{"data-testid":"tab-workers",role:"tab","aria-selected":c==="workers","aria-controls":"tabpanel-workers",onClick:()=>f("workers"),className:U("flex items-center gap-2 px-5 py-3 text-sm font-rajdhani font-bold uppercase tracking-wider border-b-2 transition-all duration-300",c==="workers"?"border-thea-gold text-thea-gold-bright text-glow-gold-sm":"border-transparent text-thea-gold-dark hover:text-thea-gold hover:border-thea-gold/30"),children:[o.jsx(Wr,{className:"w-4 h-4"}),"Workers"]}),o.jsxs("button",{"data-testid":"tab-projects",role:"tab","aria-selected":c==="projects","aria-controls":"tabpanel-projects",onClick:()=>f("projects"),className:U("flex items-center gap-2 px-5 py-3 text-sm font-rajdhani font-bold uppercase tracking-wider border-b-2 transition-all duration-300",c==="projects"?"border-thea-gold text-thea-gold-bright text-glow-gold-sm":"border-transparent text-thea-gold-dark hover:text-thea-gold hover:border-thea-gold/30"),children:[o.jsx(ph,{className:"w-4 h-4"}),"Projects"]}),o.jsxs("button",{"data-testid":"tab-ralph",role:"tab","aria-selected":c==="ralph","aria-controls":"tabpanel-ralph",onClick:()=>f("ralph"),className:U("flex items-center gap-2 px-5 py-3 text-sm font-rajdhani font-bold uppercase tracking-wider border-b-2 transition-all duration-300",c==="ralph"?"border-thea-gold text-thea-gold-bright text-glow-gold-sm":"border-transparent text-thea-gold-dark hover:text-thea-gold hover:border-thea-gold/30"),children:[o.jsx($r,{className:"w-4 h-4"}),"Ralph"]}),o.jsxs("button",{"data-testid":"tab-history",role:"tab","aria-selected":c==="history","aria-controls":"tabpanel-history",onClick:()=>f("history"),className:U("flex items-center gap-2 px-5 py-3 text-sm font-rajdhani font-bold uppercase tracking-wider border-b-2 transition-all duration-300",c==="history"?"border-thea-gold text-thea-gold-bright text-glow-gold-sm":"border-transparent text-thea-gold-dark hover:text-thea-gold hover:border-thea-gold/30"),children:[o.jsx(hi,{className:"w-4 h-4"}),"History"]})]})}),o.jsxs("div",{className:"flex-1 overflow-auto",role:"tabpanel",id:`tabpanel-${c}`,"aria-label":`${c} panel`,children:[c==="workers"&&o.jsx(Kr,{children:o.jsx(x_,{})}),c==="projects"&&o.jsx(Kr,{children:o.jsx(X0,{})}),c==="ralph"&&o.jsx(Kr,{children:o.jsx(V_,{className:"h-full"})}),c==="history"&&o.jsx(Kr,{children:o.jsx(J_,{})})]})]}),o.jsx("aside",{role:"complementary","aria-label":"Activity sidebar","aria-hidden":!x,className:U("bg-gradient-to-l from-black/95 to-thea-nearBlack/95 lg:from-black/60 lg:to-thea-nearBlack/40 border-l border-thea-gold-dark/30 transition-all duration-300 overflow-hidden backdrop-blur-sm flex flex-col",x?"fixed lg:relative inset-0 lg:inset-auto top-16 lg:top-0 z-40 lg:z-auto w-full lg:w-72":"w-0"),children:x&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"lg:hidden flex items-center justify-between px-4 py-3 bg-black/80 border-b border-thea-gold-dark/30",children:[o.jsx("span",{className:"font-orbitron text-thea-gold-bright text-sm uppercase tracking-wider",children:"Activity"}),o.jsx("button",{onClick:()=>i(!1),className:"p-2 text-thea-gold hover:text-thea-gold-bright hover:bg-thea-gold/10 rounded transition-colors","aria-label":"Close activity sidebar",children:o.jsx(Ke,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex border-b border-thea-gold-dark/30 bg-black/40 shrink-0",role:"tablist","aria-label":"Sidebar sections",children:[o.jsxs("button",{role:"tab","aria-selected":m==="activity",onClick:()=>S("activity"),className:U("flex-1 flex items-center justify-center gap-1.5 px-2 py-2.5 text-[10px] font-rajdhani uppercase tracking-wider transition-all border-b-2",m==="activity"?"border-thea-gold text-thea-gold-bright bg-thea-gold/10":"border-transparent text-thea-gold-dark hover:text-thea-gold"),title:"Activity Feed",children:[o.jsx(Et,{className:"w-3.5 h-3.5"}),o.jsx("span",{className:"hidden sm:inline",children:"Activity"})]}),o.jsxs("button",{role:"tab","aria-selected":m==="adrs",onClick:()=>S("adrs"),className:U("flex-1 flex items-center justify-center gap-1.5 px-2 py-2.5 text-[10px] font-rajdhani uppercase tracking-wider transition-all border-b-2",m==="adrs"?"border-thea-gold text-thea-gold-bright bg-thea-gold/10":"border-transparent text-thea-gold-dark hover:text-thea-gold"),title:"Architecture Decisions",children:[o.jsx(qs,{className:"w-3.5 h-3.5"}),o.jsx("span",{className:"hidden sm:inline",children:"ADRs"})]}),o.jsxs("button",{role:"tab","aria-selected":m==="metrics",onClick:()=>S("metrics"),className:U("flex-1 flex items-center justify-center gap-1.5 px-2 py-2.5 text-[10px] font-rajdhani uppercase tracking-wider transition-all border-b-2",m==="metrics"?"border-thea-gold text-thea-gold-bright bg-thea-gold/10":"border-transparent text-thea-gold-dark hover:text-thea-gold"),title:"System Metrics",children:[o.jsx(nf,{className:"w-3.5 h-3.5"}),o.jsx("span",{className:"hidden sm:inline",children:"Metrics"})]})]}),o.jsx("div",{className:"flex-1 overflow-auto",children:o.jsxs(Kr,{children:[m==="activity"&&o.jsx(b_,{}),m==="adrs"&&o.jsx(w_,{limit:10}),m==="metrics"&&o.jsx(S_,{})]})})]})})]}),o.jsx("div",{className:"hidden xl:block fixed bottom-4 right-4 z-40 w-80",children:o.jsx(M_,{})}),o.jsx("nav",{role:"navigation","aria-label":"Mobile navigation",className:"sm:hidden fixed bottom-0 left-0 right-0 bg-black/90 border-t border-thea-gold-dark/30 backdrop-blur-sm z-50",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:o.jsxs("div",{className:"flex justify-around py-2",children:[o.jsxs("button",{onClick:()=>{a(),f("workers"),i(!1)},className:U("flex flex-col items-center gap-1 px-4 py-2",c==="workers"?"text-thea-gold":"text-thea-gold-dark"),children:[o.jsx(Wr,{className:"w-5 h-5"}),o.jsx("span",{className:"text-[10px] font-rajdhani",children:"Home"})]}),o.jsxs("button",{onClick:()=>f("projects"),className:U("flex flex-col items-center gap-1 px-4 py-2",c==="projects"?"text-thea-gold":"text-thea-gold-dark"),children:[o.jsx(ph,{className:"w-5 h-5"}),o.jsx("span",{className:"text-[10px] font-rajdhani",children:"Projects"})]}),o.jsxs("button",{onClick:()=>f("history"),className:U("flex flex-col items-center gap-1 px-4 py-2",c==="history"?"text-thea-gold":"text-thea-gold-dark"),children:[o.jsx(hi,{className:"w-5 h-5"}),o.jsx("span",{className:"text-[10px] font-rajdhani",children:"History"})]}),o.jsxs("button",{onClick:()=>i(!x),className:U("flex flex-col items-center gap-1 px-4 py-2",x?"text-thea-gold":"text-thea-gold-dark"),children:[o.jsx(Et,{className:"w-5 h-5"}),o.jsx("span",{className:"text-[10px] font-rajdhani",children:"Activity"})]})]})}),o.jsx(Eh,{toasts:r,onDismiss:s})]})}window.addEventListener("unhandledrejection",e=>{console.error("[Strategos] Unhandled promise rejection:",e.reason)});window.addEventListener("error",e=>{var t;console.error("[Strategos] Uncaught error:",((t=e.error)==null?void 0:t.message)||e.message)});Ho.createRoot(document.getElementById("root")).render(o.jsx(zh.StrictMode,{children:o.jsx(Kr,{children:o.jsx(t0,{children:o.jsx(Z_,{})})})}));
