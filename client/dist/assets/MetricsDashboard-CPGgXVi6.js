import{u as b,j as e,a as o,K as v,i as w,O as N,U as k,k as S,T,Z as y,Q as H,H as R,W as U,Y as m}from"./index-DcwtCgad.js";import{r as E}from"./vendor-react-wGySg1uH.js";import{S as A}from"./server-BA-IBQGH.js";import"./vendor-socket-TjCxX7sJ.js";import"./vendor-terminal-CyaXSNWE.js";function Z({className:a}){const{connected:r,systemMetrics:t,subscribeToMetrics:n,unsubscribeFromMetrics:s}=b();if(E.useEffect(()=>{if(r)return n(),()=>s()},[r,n,s]),!t)return e.jsxs("div",{className:o("thea-card",a),children:[e.jsx(g,{}),e.jsx("div",{className:"flex items-center justify-center py-12 text-thea-gold-dark",children:e.jsx(v,{className:"w-5 h-5 animate-spin"})})]});const f=(h=>{if(!h)return null;switch(h.toLowerCase()){case"healthy":return 100;case"degraded":return 60;case"critical":return 30;case"unknown":return null;default:return null}})(t==null?void 0:t.healthStatus),c=(t==null?void 0:t.activeWorkers)??0,j=(t==null?void 0:t.totalSpawns)??0,l=(t==null?void 0:t.avgSpawnTime)??null,x=(t==null?void 0:t.errorRate)??0,u=(t==null?void 0:t.uptime)??null,d=(t==null?void 0:t.memoryUsage)??null;return e.jsxs("div",{className:o("thea-card",a),children:[e.jsx(g,{}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between pb-3 border-b border-thea-gold-dark/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4 text-thea-gold"}),e.jsx("span",{className:"text-sm text-thea-gold-dark",children:"System Health"})]}),e.jsx(N,{score:f,size:"md",showScore:!0})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(i,{icon:k,label:"Active",value:c,status:c>0?"active":"idle"}),e.jsx(i,{icon:A,label:"Total Spawns",value:j,status:"neutral"}),e.jsx(i,{icon:S,label:"Errors",value:`${(x*100).toFixed(1)}%`,status:C(x)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xxs text-thea-gold-dark uppercase tracking-wider font-mono",children:"Performance"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(p,{icon:T,label:"Avg Spawn",value:l!==null?`${l}ms`:"--",trend:D(l)}),e.jsx(p,{icon:y,label:"Memory",value:d!==null?`${d}%`:"--",trend:W(d)})]})]}),u!==null&&e.jsx("div",{className:"pt-2 border-t border-thea-gold-dark/20",children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-thea-gold-dark",children:"Server Uptime"}),e.jsx("span",{className:"font-mono text-thea-gold-bright",children:H(u)})]})}),e.jsx("div",{className:"pt-2 border-t border-thea-gold-dark/20",children:e.jsxs("div",{className:"flex items-center gap-2 text-xxs text-thea-gold-dark",children:[e.jsx(R,{score:r?100:0,size:"sm"}),e.jsx("span",{children:r?"Real-time updates active":"Connecting..."})]})})]})]})}function g(){return e.jsx("div",{className:"flex items-center justify-between p-4 border-b border-thea-gold-dark/30",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-thea-gold"}),e.jsx("h3",{className:"font-rajdhani font-bold text-thea-gold-bright uppercase tracking-wider text-sm",children:"System Metrics"})]})})}function i({icon:a,label:r,value:t,status:n}){const s={active:"bg-green-500/20 text-green-400 border-green-500/30",warning:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",critical:"bg-red-500/20 text-red-400 border-red-500/30",idle:"bg-thea-gold/10 text-thea-gold-dark border-thea-gold-dark/30",neutral:"bg-thea-gold/5 text-thea-gold-dark border-thea-gold-dark/20"};return e.jsxs("div",{className:o("flex items-center gap-1.5 px-2 py-1 rounded border text-xs font-mono",s[n]||s.neutral),children:[e.jsx(a,{className:"w-3 h-3"}),e.jsxs("span",{className:"text-xxs opacity-70",children:[r,":"]}),e.jsx("span",{className:"font-bold",children:t})]})}function p({icon:a,label:r,value:t,trend:n}){const s={up:e.jsx(m,{className:"w-3 h-3 text-green-400"}),down:e.jsx(m,{className:"w-3 h-3 text-red-400 rotate-180"}),stable:null};return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/30 rounded border border-thea-gold-dark/20",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(a,{className:"w-3 h-3 text-thea-gold-dark"}),e.jsx("span",{className:"text-xxs text-thea-gold-dark",children:r})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-mono text-xs text-thea-gold-bright",children:t}),s[n]]})]})}function C(a){return a==null?"neutral":a<.01?"active":a<.05?"warning":"critical"}function D(a){return a===null?"stable":a<2e3?"up":a>5e3?"down":"stable"}function W(a){return a===null?"stable":a<50?"up":a>80?"down":"stable"}export{Z as MetricsDashboard};
